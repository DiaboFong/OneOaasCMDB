!function(root,factory){if("object"==typeof exports&&"object"==typeof module)module.exports=factory(require("angular"),require("jQuery"));else if("function"==typeof define&&define.amd)define(["angular","jQuery"],factory);else{var a="object"==typeof exports?factory(require("angular"),require("jQuery")):factory(root.angular,root.jQuery);for(var i in a)("object"==typeof exports?exports:root)[i]=a[i]}}(this,function(__WEBPACK_EXTERNAL_MODULE_1__,__WEBPACK_EXTERNAL_MODULE_14__){return webpackJsonp([0,1],[function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular),_angularResource=__webpack_require__(2),_angularResource2=_interopRequireDefault(_angularResource),_angularAnimate=__webpack_require__(4),_angularAnimate2=_interopRequireDefault(_angularAnimate),_angularSanitize=__webpack_require__(6),_angularSanitize2=_interopRequireDefault(_angularSanitize),_angularUiBootstrap=__webpack_require__(8),_angularUiBootstrap2=_interopRequireDefault(_angularUiBootstrap),_utils=__webpack_require__(10),_utils2=_interopRequireDefault(_utils),_datacenter=__webpack_require__(12),_datacenter2=_interopRequireDefault(_datacenter),_dashboard=__webpack_require__(19),_dashboard2=_interopRequireDefault(_dashboard),_agreement=__webpack_require__(22),_agreement2=_interopRequireDefault(_agreement),_bandwidth=__webpack_require__(26),_bandwidth2=_interopRequireDefault(_bandwidth),_hardware=__webpack_require__(29),_hardware2=_interopRequireDefault(_hardware),_server=__webpack_require__(32),_server2=_interopRequireDefault(_server),_domain=__webpack_require__(35),_domain2=_interopRequireDefault(_domain),_rack=__webpack_require__(38),_rack2=_interopRequireDefault(_rack),_app=__webpack_require__(41),_app2=_interopRequireDefault(_app),_ip=__webpack_require__(44),_ip2=_interopRequireDefault(_ip),_room=__webpack_require__(48),_room2=_interopRequireDefault(_room),_supplier=__webpack_require__(51),_supplier2=_interopRequireDefault(_supplier),_user=__webpack_require__(53),_user2=_interopRequireDefault(_user),_class=__webpack_require__(58),_class2=_interopRequireDefault(_class),_resources=__webpack_require__(64),_resources2=_interopRequireDefault(_resources),_system=__webpack_require__(69),_system2=_interopRequireDefault(_system),_vm=__webpack_require__(76),_vm2=_interopRequireDefault(_vm),_resourceTree=__webpack_require__(79),_resourceTree2=_interopRequireDefault(_resourceTree),_topo=__webpack_require__(81),_topo2=_interopRequireDefault(_topo),_menu=__webpack_require__(85),_menu2=_interopRequireDefault(_menu),_keyBind=__webpack_require__(86),_keyBind2=_interopRequireDefault(_keyBind),_stateColor=__webpack_require__(87),_stateColor2=_interopRequireDefault(_stateColor),_cmdbRoutes=__webpack_require__(88),_cmdbRoutes2=_interopRequireDefault(_cmdbRoutes),_cmdbController=__webpack_require__(95),_cmdbController2=_interopRequireDefault(_cmdbController),_cmdbService=__webpack_require__(96),_cmdbService2=_interopRequireDefault(_cmdbService),_report=__webpack_require__(98),_report2=_interopRequireDefault(_report),_angular3=__webpack_require__(101),_angular4=_interopRequireDefault(_angular3),_angularAria=__webpack_require__(103),_angularAria2=_interopRequireDefault(_angularAria),_angularMessages=__webpack_require__(105),_angularMessages2=_interopRequireDefault(_angularMessages);__webpack_require__(107);var CmdbDeps=[_angularAnimate2.default,_angularSanitize2.default,_angularAria2.default,_angularMessages2.default,"angularFileUpload",_angularResource2.default,_angularUiBootstrap2.default,_keyBind2.default,_stateColor2.default,_angular4.default,_utils2.default,_datacenter2.default,_dashboard2.default,_agreement2.default,_bandwidth2.default,_hardware2.default,_server2.default,_domain2.default,_rack2.default,_app2.default,_ip2.default,_room2.default,_supplier2.default,_user2.default,_class2.default,_resources2.default,_system2.default,_vm2.default,_topo2.default,_menu2.default,_cmdbRoutes2.default,_cmdbController2.default,_cmdbService2.default,_report2.default,_resourceTree2.default];_angular2.default.module("CmdbApp",CmdbDeps).run(["$rootScope","$location","$state","$window","AuthenticationService","$transitions","$trace",function($rootScope,$location,$state,$window,authenticationService,$transitions,$trace){$rootScope.authorization=null,$rootScope.token="",$transitions.onStart({},function(trans){var auth=trans.injector().get("AuthenticationService");return!(trans.router.stateService.current.authenticate&&!auth.IsAuthenticated())||$state.target("login")}),$rootScope.$on("unauthorized",function(){authenticationService.ClearCredentials(),$window.location.href="/login"}),$window.localStorage&&$window.localStorage.getItem("token")&&($rootScope.authorization={Authorization:"BEARER "+$window.localStorage.getItem("token")},$rootScope.token=$window.localStorage.getItem("token"),$rootScope.loginUserName=$window.localStorage.getItem("username"))}])},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(module,exports,__webpack_require__){__webpack_require__(3),module.exports="ngResource"},function(module,exports){/**
	 * @license AngularJS v1.5.8
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;i<ii&&angular.isDefined(obj);i++){var key=keys[i];obj=null!==obj?obj[key]:void 0}return obj}function shallowClearAndCopy(src,dst){dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;angular.module("ngResource",["ng"]).provider("$resource",function(){var PROTOCOL_AND_DOMAIN_REGEX=/^https?:\/\/[^\/]*/,provider=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function($http,$log,$q,$timeout){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=extend({},provider.defaults,defaults),this.urlParams={}}function resourceFactory(url,paramDefaults,actions,options){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value(data)),ids[key]=value&&value.charAt&&"@"==value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}var route=new Route(url,options);return actions=extend({},provider.defaults.actions,actions),Resource.prototype.toJSON=function(){var data=extend({},this);return delete data.$promise,delete data.$resolved,data},forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method),numericTimeout=action.timeout,cancellable=angular.isDefined(action.cancellable)?action.cancellable:options&&angular.isDefined(options.cancellable)?options.cancellable:provider.defaults.cancellable;numericTimeout&&!angular.isNumber(numericTimeout)&&($log.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete action.timeout,numericTimeout=null),Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var timeoutDeferred,numericTimeoutPromise,isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||void 0;forEach(action,function(value,key){switch(key){default:httpConfig[key]=copy(value);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!isInstanceCall&&cancellable&&(timeoutDeferred=$q.defer(),httpConfig.timeout=timeoutDeferred.promise,numericTimeout&&(numericTimeoutPromise=$timeout(timeoutDeferred.resolve,numericTimeout))),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",name,action.isArray?"array":"object",angular.isArray(data)?"array":"object",httpConfig.method,httpConfig.url);if(action.isArray)value.length=0,forEach(data,function(item){"object"==typeof item?value.push(new Resource(item)):value.push(item)});else{var promise=value.$promise;shallowClearAndCopy(data,value),value.$promise=promise}}return response.resource=value,response},function(response){return(error||noop)(response),$q.reject(response)});return promise.finally(function(){value.$resolved=!0,!isInstanceCall&&cancellable&&(value.$cancelRequest=angular.noop,$timeout.cancel(numericTimeoutPromise),timeoutDeferred=numericTimeoutPromise=httpConfig.timeout=null)}),promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,cancellable&&(value.$cancelRequest=timeoutDeferred.resolve),value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}var noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,protocolAndDomain="",urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]={isQueryParamValue:new RegExp("\\?.*=:"+param+"(?:\\W|$)").test(url)})}),url=url.replace(/\\:/g,":"),url=url.replace(PROTOCOL_AND_DOMAIN_REGEX,function(match){return protocolAndDomain=match,""}),params=params||{},forEach(self.urlParams,function(paramInfo,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=paramInfo.isQueryParamValue?encodeUriQuery(val,!0):encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})}),self.defaults.stripTrailingSlashes&&(url=url.replace(/\/+$/,"")||"/"),url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=protocolAndDomain+url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}]})}(window,window.angular)},function(module,exports,__webpack_require__){__webpack_require__(5),module.exports="ngAnimate"},function(module,exports){/**
	 * @license AngularJS v1.6.4
	 * (c) 2010-2017 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return element;case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}if(element.nodeType===ELEMENT_NODE)return jqLite(element)}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function $$addClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}function $$removeClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(options=options||{},!options.$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationDetails(element,oldAnimation,newAnimation){var target=oldAnimation.options||{},newOptions=newAnimation.options||{},toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,oldAnimation.addClass=target.addClass,oldAnimation.removeClass=target.removeClass,target}function resolveElementClasses(existing,toAdd,toRemove){function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}var ADD_CLASS=1,REMOVE_CLASS=-1,flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=ADD_CLASS}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=flags[key]===ADD_CLASS?null:REMOVE_CLASS});var classes={addClass:"",removeClass:""};return forEach(flags,function(val,klass){var prop,allow;val===ADD_CLASS?(prop="addClass",allow=!existing[klass]||existing[klass+REMOVE_CLASS_SUFFIX]):val===REMOVE_CLASS&&(prop="removeClass",allow=existing[klass]||existing[klass+ADD_CLASS_SUFFIX]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}function getDomNode(element){return element instanceof jqLite?element[0]:element}function applyGeneratedPreparationClasses(element,event,options){var classes="";event&&(classes=pendClasses(event,EVENT_CLASS_PREFIX,!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,ADD_CLASS_SUFFIX))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}function clearGeneratedClasses(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){return a?b?a+" "+b:a:b}function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){var prop=isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP;return[prop,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,function(value){"s"===value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+=DURATION_KEY:value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)})}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,ELEMENT_NODE=1,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-",ACTIVE_CLASS_SUFFIX="-active",PREPARE_CLASS_SUFFIX="-prepare",NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren",CSS_PREFIX="";void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var copy,extend,forEach,isArray,isDefined,isElement,isFunction,isObject,isString,isUndefined,jqLite,noop,DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",TIMING_KEY="TimingFunction",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",SAFE_FAST_FORWARD_DURATION_VALUE=9999,ANIMATION_DELAY_PROP=ANIMATION_PROP+DELAY_KEY,ANIMATION_DURATION_PROP=ANIMATION_PROP+DURATION_KEY,TRANSITION_DELAY_PROP=TRANSITION_PROP+DELAY_KEY,TRANSITION_DURATION_PROP=TRANSITION_PROP+DURATION_KEY,ngMinErr=angular.$$minErr("ng"),$$rAFSchedulerFactory=["$$rAF",function($$rAF){function scheduler(tasks){queue=queue.concat(tasks),nextTick()}function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF(function(){cancelFn||nextTick()})}}var queue,cancelFn;return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler}],$$AnimateChildrenDirective=["$interpolate",function($interpolate){return{link:function(scope,element,attrs){function setData(value){value="on"===value||"true"===value,element.data(NG_ANIMATE_CHILDREN_DATA,value)}var val=attrs.ngAnimateChildren;isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN_DATA,!0):(setData($interpolate(val)(scope)),attrs.$observe("ngAnimateChildren",setData))}}}],ANIMATE_TIMER_KEY="$$animateCss",ONE_SECOND=1e3,ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+PROPERTY_KEY,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP},$AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode,parentID=parentNode[KEY]||(parentNode[KEY]=++parentCounter);return parentID+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||(timings=computeCssStyles($window,node,properties),"infinite"===timings.animationIterationCount&&(timings.animationIterationCount=1)),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&(stagger=gcsStaggerLookup.get(cacheKey),!stagger)){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),stagger=computeCssStyles($window,node,properties),stagger.animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0,rafWaitQueue=[];return function(element,initialOptions){function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){if(!(animationClosed||animationCompleted&&animationPaused)){animationClosed=!0,animationPaused=!1,options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)}),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress);var animationTimerData=element.data(ANIMATE_TIMER_KEY);animationTimerData&&($timeout.cancel(animationTimerData[0].timer),element.removeData(ANIMATE_TIMER_KEY)),runner&&runner.complete(!rejected)}}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}function start(){function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.getAttribute("class")+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration,0===maxDuration)return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+CLOSING_TIME_BUFFER*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data(ANIMATE_TIMER_KEY)||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];setupFallbackTimer=endTime>currentTimerData.expectedEndTime,setupFallbackTimer?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data(ANIMATE_TIMER_KEY,animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data(ANIMATE_TIMER_KEY);if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData(ANIMATE_TIMER_KEY)}}if(!animationClosed){if(!node.parentNode)return void close();var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*ONE_SECOND),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}}var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options),events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,isStructural=method&&options.structural,structuralClassName="",addRemoveClassName="";isStructural?structuralClassName=pendClasses(method,EVENT_CLASS_PREFIX,!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,ADD_CLASS_SUFFIX)),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX)),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,ACTIVE_CLASS_SUFFIX),hasToStyles=styles.to&&Object.keys(styles.to).length>0,containsKeyframeAnimation=(options.keyframeStyle||"").length>0;if(!containsKeyframeAnimation&&!hasToStyles&&!preparationClasses)return closeAndReturnNoopAnimator();var cacheKey,stagger;if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses);var applyOnlyDuration;if(options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,SAFE_FAST_FORWARD_DURATION_VALUE);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={};if(flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"===timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+PROPERTY_KEY].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();if(null!=options.delay){var delayStyle;"boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0))}return null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){if(!animationClosed)return runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null},runner=new $$AnimateRunner(runnerHost),waitUntilQuiet(start),runner}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){function isDocumentFragment(node){return node.parentNode&&11===node.parentNode.nodeType}$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_ANIMATE_ANCHOR_CLASS_NAME="ng-anchor",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out",NG_IN_ANCHOR_CLASS_NAME="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return b.indexOf(val)===-1}).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function prepareOutAnimation(){var animator=$animateCss(clone,{addClass:NG_OUT_ANCHOR_CLASS_NAME,delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:NG_IN_ANCHOR_CLASS_NAME+" "+toAdd,removeClass:NG_OUT_ANCHOR_CLASS_NAME+" "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME)}var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME),rootBodyElement.append(clone);var animatorIn,animatorOut=prepareOutAnimation();if(!animatorOut&&(animatorIn=prepareInAnimation(),!animatorIn))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){function endFn(){currentAnimation&&currentAnimation.end()}var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){return currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation())?(currentAnimation=animatorIn.start(),currentAnimation.done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation):(end(),void runner.complete())}),runner=new $$AnimateRunner({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from,noop),toAnimation=prepareRegularAnimation(to,noop),anchorAnimations=[];if(forEach(anchors,function(anchor){var outElement=anchor.out,inElement=anchor.in,animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)}),fromAnimation||toAnimation||0!==anchorAnimations.length)return{start:function(){function endFn(){forEach(animationRunners,function(runner){runner.end()})}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner}}}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(isDocumentFragment(rootNode)||bodyNode.contains(rootNode)?rootNode:bodyNode);return function(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,function(result){var cancelled=result===!1;onAnimationComplete(cancelled)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName);if(0===operations.length){var a,b;"beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b))}if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes);if(animations.length){var afterFn,beforeFn;"leave"===event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn)}if(before||after){var runner;return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),runner=new $$AnimateRunner,runner.complete(!0)),runner},start:function(){function onComplete(success){close(success),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}if(runner)return runner;runner=new $$AnimateRunner;var closeActiveAnimations,chain=[];return before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)}),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner}}}}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){
function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}function done(status){runner.complete(status)}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,done);var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner}}}return prepareAnimation(animationDetails)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){function makeTruthyCssClassMap(classString){if(!classString)return null;var keys=classString.split(ONE_SPACE),map=Object.create(null);return forEach(keys,function(key){map[key]=!0}),map}function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=makeTruthyCssClassMap(currentClassString);return newClassString.split(ONE_SPACE).some(function(className){return currentClassMap[className]})}}function isAllowed(ruleType,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(currentAnimation,previousAnimation)})}function hasAnimationClasses(animation,and){var a=(animation.addClass||"").length>0,b=(animation.removeClass||"").length>0;return and?a&&b:a||b}var PRE_DIGEST_STATE=1,RUNNING_STATE=2,ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};rules.join.push(function(newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation)}),rules.skip.push(function(newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation)}),rules.skip.push(function(newAnimation,currentAnimation){return"leave"===currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(newAnimation,currentAnimation){return currentAnimation.structural&&currentAnimation.state===RUNNING_STATE&&!newAnimation.structural}),rules.cancel.push(function(newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(newAnimation,currentAnimation){return currentAnimation.state===RUNNING_STATE&&newAnimation.structural}),rules.cancel.push(function(newAnimation,currentAnimation){if(currentAnimation.structural)return!1;var nA=newAnimation.addClass,nR=newAnimation.removeClass,cA=currentAnimation.addClass,cR=currentAnimation.removeClass;return!(isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR))&&(hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function($$rAF,$rootScope,$rootElement,$document,$$Map,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow,$$isDocumentHidden){function postDigestTaskFactory(){var postDigestCalled=!1;return function(fn){postDigestCalled?fn():$rootScope.$$postDigest(function(){postDigestCalled=!0,fn()})}}function normalizeAnimationDetails(element,animation){return mergeAnimationDetails(element,animation,{})}function findCallbacks(targetParentNode,targetNode,event){var matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)}),matches}function filterFromRegistry(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter(function(entry){var isMatch=entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback);return!isMatch})}function cleanupEventListeners(phase,node){"close"!==phase||node.parentNode||$animate.off(node)}function queueAnimation(originalElement,event,initialOptions){function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow(function(){var callbacks=findCallbacks(parentNode,node,event);callbacks.length?$$rAF(function(){forEach(callbacks,function(callback){callback(element,phase,data)}),cleanupEventListeners(phase,node)}):cleanupEventListeners(phase,node)}),runner.progress(event,phase,data)}function close(reject){clearGeneratedClasses(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}var options=copy(initialOptions),element=stripCommentsFromElement(originalElement),node=getDomNode(element),parentNode=node&&node.parentNode;options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=postDigestTaskFactory();if(isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),options.addClass&&!isString(options.addClass)&&(options.addClass=null),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null),!node)return close(),runner;var className=[node.getAttribute("class"),options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner;var isStructural=["enter","move","leave"].indexOf(event)>=0,documentHidden=$$isDocumentHidden(),skipAnimations=!animationsEnabled||documentHidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&existingAnimation.state===PRE_DIGEST_STATE||(skipAnimations=!areAnimationsAllowed(node,parentNode,event)),skipAnimations)return documentHidden&&notifyProgress(runner,event,"start"),close(),documentHidden&&notifyProgress(runner,event,"close"),runner;isStructural&&closeChildAnimations(node);var newAnimation={structural:isStructural,element:element,event:event,addClass:options.addClass,removeClass:options.removeClass,close:close,options:options,runner:runner};if(hasExistingAnimation){var skipAnimationFlag=isAllowed("skip",newAnimation,existingAnimation);if(skipAnimationFlag)return existingAnimation.state===RUNNING_STATE?(close(),runner):(mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner);var cancelAnimationFlag=isAllowed("cancel",newAnimation,existingAnimation);if(cancelAnimationFlag)if(existingAnimation.state===RUNNING_STATE)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;existingAnimation.close()}else{var joinAnimationFlag=isAllowed("join",newAnimation,existingAnimation);if(joinAnimationFlag){if(existingAnimation.state!==RUNNING_STATE)return applyGeneratedPreparationClasses(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;normalizeAnimationDetails(element,newAnimation)}}}else normalizeAnimationDetails(element,newAnimation);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation)),!isValidAnimation)return close(),clearElementAnimationState(node),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(node,PRE_DIGEST_STATE,newAnimation),$rootScope.$$postDigest(function(){element=stripCommentsFromElement(originalElement);var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var parentElement=element.parent()||[],isValidAnimation=parentElement.length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails));if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(node));event=!animationDetails.structural&&hasAnimationClasses(animationDetails,!0)?"setClass":animationDetails.event,markElementAnimationState(node,RUNNING_STATE);var realRunner=$$animation(element,event,animationDetails.options);runner.setHost(realRunner),notifyProgress(runner,event,"start",{}),realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(node),notifyProgress(runner,event,"close",{})})}),runner}function closeChildAnimations(node){var children=node.querySelectorAll("["+NG_ANIMATE_ATTR_NAME+"]");forEach(children,function(child){var state=parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME),10),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case RUNNING_STATE:animationDetails.runner.end();case PRE_DIGEST_STATE:activeAnimationsLookup.delete(child)}})}function clearElementAnimationState(node){node.removeAttribute(NG_ANIMATE_ATTR_NAME),activeAnimationsLookup.delete(node)}function areAnimationsAllowed(node,parentNode,event){var animateChildren,bodyNode=$document[0].body,rootNode=getDomNode($rootElement),bodyNodeDetected=node===bodyNode||"HTML"===node.nodeName,rootNodeDetected=node===rootNode,parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(node),parentHost=jqLite.data(node,NG_ANIMATE_PIN_DATA);for(parentHost&&(parentNode=getDomNode(parentHost));parentNode&&(rootNodeDetected||(rootNodeDetected=parentNode===rootNode),parentNode.nodeType===ELEMENT_NODE);){var details=activeAnimationsLookup.get(parentNode)||{};if(!parentAnimationDetected){var parentNodeDisabled=disabledElementsLookup.get(parentNode);if(parentNodeDisabled===!0&&elementDisabled!==!1){elementDisabled=!0;break}parentNodeDisabled===!1&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||animateChildren===!0){var value=jqLite.data(parentNode,NG_ANIMATE_CHILDREN_DATA);isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&animateChildren===!1)break;if(bodyNodeDetected||(bodyNodeDetected=parentNode===bodyNode),bodyNodeDetected&&rootNodeDetected)break;parentNode=rootNodeDetected||!(parentHost=jqLite.data(parentNode,NG_ANIMATE_PIN_DATA))?parentNode.parentNode:getDomNode(parentHost)}var allowAnimation=(!parentAnimationDetected||animateChildren)&&elementDisabled!==!0;return allowAnimation&&rootNodeDetected&&bodyNodeDetected}function markElementAnimationState(node,state,details){details=details||{},details.state=state,node.setAttribute(NG_ANIMATE_ATTR_NAME,state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.set(node,newValue)}var activeAnimationsLookup=new $$Map,disabledElementsLookup=new $$Map,animationsEnabled=null,deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),callbackRegistry=Object.create(null),classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite),contains=window.Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))},$animate={on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback}),jqLite(container).on("$destroy",function(){var animationDetails=activeAnimationsLookup.get(node);animationDetails||$animate.off(event,container,callback)})},off:function(event,container,callback){if(1!==arguments.length||isString(arguments[0])){var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:filterFromRegistry(entries,container,callback))}else{container=arguments[0];for(var eventType in callbackRegistry)callbackRegistry[eventType]=filterFromRegistry(callbackRegistry[eventType],container)}},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data(NG_ANIMATE_PIN_DATA,parentElement)},push:function(element,event,options,domOperation){return options=options||{},options.domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else{var hasElement=isElement(element);if(hasElement){var node=getDomNode(element);1===argCount?bool=!disabledElementsLookup.get(node):disabledElementsLookup.set(node,!bool)}else bool=animationsEnabled=!!element}return bool}};return $animate}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$Map,$$rAFScheduler){function sortAnimations(animations){function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var elementNode=entry.domNode,parentNode=elementNode.parentNode;lookup.set(elementNode,entry);for(var parentEntry;parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}function flatten(tree){var i,result=[],queue=[];for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];remainingLevelEntries<=0&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach(function(childEntry){nextLevelEntries++,queue.push(childEntry)}),remainingLevelEntries--}return row.length&&result.push(row),result}var i,tree={children:[]},lookup=new $$Map;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.set(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return flatten(tree)}var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,options){function getAnchorNodes(node){var SELECTOR="["+NG_ANIMATE_REF_ATTR+"]",items=node.hasAttribute(NG_ANIMATE_REF_ATTR)?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,function(node){var attr=node.getAttribute(NG_ANIMATE_REF_ATTR);attr&&attr.length&&anchors.push(node)}),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var element=animation.element,node=getDomNode(element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute(NG_ANIMATE_REF_ATTR);refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(!from||!to){var index=from?from.animationID:to.animationID,indexKey=index.toString();return void(usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index])))}var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,in:to.element})}),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i],factory=$injector.get(driverName),driver=factory(animationDetails);if(driver)return driver}}function beforeStart(){element.addClass(NG_ANIMATE_CLASSNAME),tempClasses&&$$jqLite.addClass(element,tempClasses),prepareClassName&&($$jqLite.removeClass(element,prepareClassName),prepareClassName=null)}function updateAnimationRunners(animation,newRunner){function update(element){var runner=getRunner(element);runner&&runner.setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass(NG_ANIMATE_CLASSNAME),runner.complete(!rejected)}options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null);var prepareClassName;return isStructural&&(prepareClassName="ng-"+event+PREPARE_CLASS_SUFFIX,$$jqLite.addClass(element,prepareClassName)),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:beforeStart,close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest(function(){var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)?animations.push(entry):entry.close()}),animationQueue.length=0;var groupedAnimations=groupAnimations(animations),toBeSortedAnimations=[];forEach(groupedAnimations,function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close,targetElement=animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element;if(getRunner(targetElement)){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}})}),$$rAFScheduler(sortAnimations(toBeSortedAnimations))}),runner)}}]}],ngAnimateSwapDirective=["$animate","$rootScope",function($animate,$rootScope){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(scope,$element,attrs,ctrl,$transclude){var previousElement,previousScope;scope.$watchCollection(attrs.ngAnimateSwap||attrs.for,function(value){previousElement&&$animate.leave(previousElement),previousScope&&(previousScope.$destroy(),previousScope=null),(value||0===value)&&(previousScope=scope.$new(),$transclude(previousScope,function(element){previousElement=element,$animate.enter(element,null,$element)}))})}}}];angular.module("ngAnimate",[],function(){noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement}).info({angularVersion:"1.6.4"}).directive("ngAnimateSwap",ngAnimateSwapDirective).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",$$rAFSchedulerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular)},function(module,exports,__webpack_require__){__webpack_require__(7),module.exports="ngSanitize"},function(module,exports){/**
	 * @license AngularJS v1.6.4
	 * (c) 2010-2017 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function $SanitizeProvider(){function toMap(str,lowercaseKeys){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[lowercaseKeys?lowercase(items[i]):items[i]]=!0;return obj}function htmlParserImpl(html,handler){null===html||void 0===html?html="":"string"!=typeof html&&(html=""+html),inertBodyElement.innerHTML=html;var mXSSAttempts=5;do{if(0===mXSSAttempts)throw $sanitizeMinErr("uinput","Failed to sanitize html because the input is unstable");mXSSAttempts--,window.document.documentMode&&stripCustomNsAttrs(inertBodyElement),html=inertBodyElement.innerHTML,inertBodyElement.innerHTML=html}while(html!==inertBodyElement.innerHTML);for(var node=inertBodyElement.firstChild;node;){switch(node.nodeType){case 1:handler.start(node.nodeName.toLowerCase(),attrToMap(node.attributes));break;case 3:handler.chars(node.textContent)}var nextNode;if(!(nextNode=node.firstChild)&&(1===node.nodeType&&handler.end(node.nodeName.toLowerCase()),nextNode=getNonDescendant("nextSibling",node),!nextNode))for(;null==nextNode&&(node=getNonDescendant("parentNode",node),node!==inertBodyElement);)nextNode=getNonDescendant("nextSibling",node),1===node.nodeType&&handler.end(node.nodeName.toLowerCase());node=nextNode}for(;node=inertBodyElement.firstChild;)inertBodyElement.removeChild(node)}function attrToMap(attrs){for(var map={},i=0,ii=attrs.length;i<ii;i++){var attr=attrs[i];map[attr.name]=attr.value}return map}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriterImpl(buf,uriValidator){var ignoreCurrentElement=!1,out=bind(buf,buf.push);return{start:function(tag,attrs){tag=lowercase(tag),!ignoreCurrentElement&&blockedElements[tag]&&(ignoreCurrentElement=tag),ignoreCurrentElement||validElements[tag]!==!0||(out("<"),out(tag),forEach(attrs,function(value,key){var lkey=lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(">"))},end:function(tag){tag=lowercase(tag),ignoreCurrentElement||validElements[tag]!==!0||voidElements[tag]===!0||(out("</"),out(tag),out(">")),tag==ignoreCurrentElement&&(ignoreCurrentElement=!1)},chars:function(chars){ignoreCurrentElement||out(encodeEntities(chars))}}}function stripCustomNsAttrs(node){for(;node;){if(node.nodeType===window.Node.ELEMENT_NODE)for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var attrNode=attrs[i],attrName=attrNode.name.toLowerCase();"xmlns:ns1"!==attrName&&0!==attrName.lastIndexOf("ns1:",0)||(node.removeAttributeNode(attrNode),i--,l--)}var nextNode=node.firstChild;nextNode&&stripCustomNsAttrs(nextNode),node=getNonDescendant("nextSibling",node)}}function getNonDescendant(propName,node){var nextNode=node[propName];if(nextNode&&nodeContains.call(node,nextNode))throw $sanitizeMinErr("elclob","Failed to sanitize html because the element is clobbered: {0}",node.outerHTML||node.outerText);return nextNode}var svgEnabled=!1;this.$get=["$$sanitizeUri",function($$sanitizeUri){return svgEnabled&&extend(validElements,svgElements),function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe:/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}],this.enableSvg=function(enableSvg){return isDefined(enableSvg)?(svgEnabled=enableSvg,this):svgEnabled},bind=angular.bind,extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,lowercase=angular.lowercase,noop=angular.noop,htmlParser=htmlParserImpl,htmlSanitizeWriter=htmlSanitizeWriterImpl,nodeContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};var inertBodyElement,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^#-~ |!])/g,voidElements=toMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=toMap("rp,rt"),optionalEndTagElements=extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=extend({},optionalEndTagBlockElements,toMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),inlineElements=extend({},optionalEndTagInlineElements,toMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),blockedElements=toMap("script,style"),validElements=extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=toMap("background,cite,href,longdesc,src,xlink:href"),htmlAttrs=toMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=toMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=extend({},uriAttrs,svgAttrs,htmlAttrs);!function(window){var doc;if(!window.document||!window.document.implementation)throw $sanitizeMinErr("noinert","Can't create an inert html document");doc=window.document.implementation.createHTMLDocument("inert");var docElement=doc.documentElement||doc.getDocumentElement(),bodyElements=docElement.getElementsByTagName("body");if(1===bodyElements.length)inertBodyElement=bodyElements[0];else{var html=doc.createElement("html");inertBodyElement=doc.createElement("body"),html.appendChild(inertBodyElement),doc.appendChild(html)}}(window)}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,noop);return writer.chars(chars),buf.join("")}var bind,extend,forEach,isDefined,lowercase,noop,nodeContains,htmlParser,htmlSanitizeWriter,$sanitizeMinErr=angular.$$minErr("$sanitize");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider).info({angularVersion:"1.6.4"}),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,MAILTO_REGEXP=/^mailto:/i,linkyMinErr=angular.$$minErr("linky"),isDefined=angular.isDefined,isFunction=angular.isFunction,isObject=angular.isObject,isString=angular.isString;return function(text,target,attributes){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){var key,linkAttributes=attributesFn(url);html.push("<a ");for(key in linkAttributes)html.push(key+'="'+linkAttributes[key]+'" ');!isDefined(target)||"target"in linkAttributes||html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}if(null==text||""===text)return text;if(!isString(text))throw linkyMinErr("notstring","Expected string but received: {0}",text);for(var match,url,i,attributesFn=isFunction(attributes)?attributes:isObject(attributes)?function(){return attributes}:function(){return{}},raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular)},function(module,exports,__webpack_require__){__webpack_require__(9),module.exports="ui.bootstrap"},function(module,exports,__webpack_require__){(function(angular){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function($animate,$q,$parse,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){function init(){horizontal=!!("horizontal"in attrs),horizontal?(css={width:""},cssTo={width:"0"}):(css={height:""},cssTo={height:"0"}),scope.$eval(attrs.uibCollapse)||element.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(css)}function getScrollFromElement(element){return horizontal?{width:element.scrollWidth+"px"}:{height:element.scrollHeight+"px"}}function expand(){element.hasClass("collapse")&&element.hasClass("in")||$q.resolve(expandingExpr(scope)).then(function(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animateCss?$animateCss(element,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).start().finally(expandDone):$animate.addClass(element,"in",{css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).then(expandDone)})}function expandDone(){element.removeClass("collapsing").addClass("collapse").css(css),expandedExpr(scope)}function collapse(){return element.hasClass("collapse")||element.hasClass("in")?void $q.resolve(collapsingExpr(scope)).then(function(){element.css(getScrollFromElement(element[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),$animateCss?$animateCss(element,{removeClass:"in",to:cssTo}).start().finally(collapseDone):$animate.removeClass(element,"in",{to:cssTo}).then(collapseDone)}):collapseDone()}function collapseDone(){element.css(cssTo),element.removeClass("collapsing").addClass("collapse"),collapsedExpr(scope)}var expandingExpr=$parse(attrs.expanding),expandedExpr=$parse(attrs.expanded),collapsingExpr=$parse(attrs.collapsing),collapsedExpr=$parse(attrs.collapsed),horizontal=!1,css={},cssTo={};init(),scope.$watch(attrs.uibCollapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(scope,elem,attrs){attrs.$observe("disabled",function(disabled){attrs.$set("tabindex",disabled?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);index!==-1&&this.groups.splice(index,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){element.addClass("panel"),accordionCtrl.addGroup(scope),scope.openClass=attrs.openClass||"panel-open",scope.panelClass=attrs.panelClass||"panel-default",scope.$watch("isOpen",function(value){element.toggleClass(scope.openClass,!!value),value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function($event){scope.isDisabled||$event&&32!==$event.which||(scope.isOpen=!scope.isOpen)};var id="accordiongroup-"+scope.$id+"-"+Math.floor(1e4*Math.random());scope.headingId=id+"-tab",scope.panelId=id+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(scope,element,attrs,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}).directive("uibAccordionTransclude",function(){function getHeaderSelectors(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(scope,element,attrs,controller){scope.$watch(function(){return controller[attrs.uibAccordionTransclude]},function(heading){if(heading){var elem=angular.element(element[0].querySelector(getHeaderSelectors()));elem.html(""),elem.append(heading)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function($scope,$element,$attrs,$interpolate,$timeout){$scope.closeable=!!$attrs.close,$element.addClass("alert"),$attrs.$set("role","alert"),$scope.closeable&&$element.addClass("alert-dismissible");var dismissOnTimeout=angular.isDefined($attrs.dismissOnTimeout)?$interpolate($attrs.dismissOnTimeout)($scope.$parent):null;dismissOnTimeout&&$timeout(function(){$scope.close()},parseInt(dismissOnTimeout,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function($parse){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1],uncheckableExpr=$parse(attrs.uibUncheckable);element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.uibBtnRadio)))},element.on(buttonsCtrl.toggleEvent,function(){if(!attrs.disabled){var isActive=element.hasClass(buttonsCtrl.activeClass);isActive&&!angular.isDefined(attrs.uncheckable)||scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.uibBtnRadio)),ngModelCtrl.$render()})}}),attrs.uibUncheckable&&scope.$watch(uncheckableExpr,function(uncheckable){attrs.$set("uncheckable",uncheckable?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attribute,defaultValue){return angular.isDefined(attribute)?scope.$eval(attribute):defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.on(buttonsCtrl.toggleEvent,function(){attrs.disabled||scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function($scope,$element,$interval,$timeout,$animate){function clearBufferedTransitions(){for(;bufferedTransitions.length;)bufferedTransitions.shift()}function setActive(index){for(var i=0;i<slides.length;i++)slides[i].slide.active=i===index}function goNext(slide,index,direction){if(!destroyed){if(angular.extend(slide,{direction:direction}),angular.extend(slides[currentIndex].slide||{},{direction:direction}),$animate.enabled($element)&&!$scope.$currentTransition&&slides[index].element&&self.slides.length>1){slides[index].element.data(SLIDE_DIRECTION,slide.direction);var currentIdx=self.getCurrentIndex();angular.isNumber(currentIdx)&&slides[currentIdx].element&&slides[currentIdx].element.data(SLIDE_DIRECTION,slide.direction),$scope.$currentTransition=!0,$animate.on("addClass",slides[index].element,function(element,phase){if("close"===phase&&($scope.$currentTransition=null,$animate.off("addClass",element),bufferedTransitions.length)){var nextSlide=bufferedTransitions.pop().slide,nextIndex=nextSlide.index,nextDirection=nextIndex>self.getCurrentIndex()?"next":"prev";clearBufferedTransitions(),goNext(nextSlide,nextIndex,nextDirection)}})}$scope.active=slide.index,currentIndex=slide.index,setActive(index),restartTimer()}}function findSlideIndex(slide){for(var i=0;i<slides.length;i++)if(slides[i].slide===slide)return i}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function resetTransition(slides){slides.length||($scope.$currentTransition=null,clearBufferedTransitions())}function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0&&slides.length?$scope.next():$scope.pause()}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],SLIDE_DIRECTION="uib-slideDirection",currentIndex=$scope.active,bufferedTransitions=[],destroyed=!1;$element.addClass("carousel"),self.addSlide=function(slide,element){slides.push({slide:slide,element:element}),slides.sort(function(a,b){return+a.slide.index-+b.slide.index}),(slide.index===$scope.active||1===slides.length&&!angular.isNumber($scope.active))&&($scope.$currentTransition&&($scope.$currentTransition=null),currentIndex=slide.index,$scope.active=slide.index,setActive(currentIndex),self.select(slides[findSlideIndex(slide)]),1===slides.length&&$scope.play())},self.getCurrentIndex=function(){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===currentIndex)return i},self.next=$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;return 0===newIndex&&$scope.noWrap()?void $scope.pause():self.select(slides[newIndex],"next")},self.prev=$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;return $scope.noWrap()&&newIndex===slides.length-1?void $scope.pause():self.select(slides[newIndex],"prev")},self.removeSlide=function(slide){var index=findSlideIndex(slide),bufferedIndex=bufferedTransitions.indexOf(slides[index]);bufferedIndex!==-1&&bufferedTransitions.splice(bufferedIndex,1),slides.splice(index,1),slides.length>0&&currentIndex===index?index>=slides.length?(currentIndex=slides.length-1,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[slides.length-1])):(currentIndex=index,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[index])):currentIndex>index&&(currentIndex--,$scope.active=currentIndex),0===slides.length&&(currentIndex=null,$scope.active=null,clearBufferedTransitions())},self.select=$scope.select=function(nextSlide,direction){var nextIndex=findSlideIndex(nextSlide.slide);void 0===direction&&(direction=nextIndex>self.getCurrentIndex()?"next":"prev"),nextSlide.slide.index===currentIndex||$scope.$currentTransition?nextSlide&&nextSlide.slide.index!==currentIndex&&$scope.$currentTransition&&bufferedTransitions.push(slides[nextIndex]):goNext(nextSlide.slide,nextIndex,direction)},$scope.indexOfSlide=function(slide){return+slide.slide.index},$scope.isActive=function(slide){return $scope.active===slide.slide.index},$scope.isPrevDisabled=function(){return 0===$scope.active&&$scope.noWrap()},$scope.isNextDisabled=function(){return $scope.active===slides.length-1&&$scope.noWrap()},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$element.on("mouseenter",$scope.pause),$element.on("mouseleave",$scope.play),$scope.$on("$destroy",function(){destroyed=!0,resetTimer()}),$scope.$watch("noTransition",function(noTransition){$animate.enabled($element,!noTransition)}),$scope.$watch("interval",restartTimer),$scope.$watchCollection("slides",resetTransition),$scope.$watch("active",function(index){if(angular.isNumber(index)&&currentIndex!==index){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===index){index=i;break}var slide=slides[index];slide&&(setActive(index),self.select(slides[index]),currentIndex=index)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function($animate){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){element.addClass("item"),carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){$animate[active?"addClass":"removeClass"](element,"active")})}}}]).animation(".item",["$animateCss",function($animateCss){function removeClass(element,className,callback){element.removeClass(className),callback&&callback()}var SLIDE_DIRECTION="uib-slideDirection";return{beforeAddClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);return element.addClass(direction),$animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()},beforeRemoveClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass,done);return $animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function($log,$locale,dateFilter,orderByFilter){function createParser(format){var map=[],regex=format.split(""),quoteIndex=format.indexOf("'");if(quoteIndex>-1){var inLiteral=!1;format=format.split("");for(var i=quoteIndex;i<format.length;i++)inLiteral?("'"===format[i]&&(i+1<format.length&&"'"===format[i+1]?(format[i+1]="$",regex[i+1]=""):(regex[i]="",inLiteral=!1)),format[i]="$"):"'"===format[i]&&(format[i]="$",regex[i]="",inLiteral=!0);format=format.join("")}return angular.forEach(formatCodeToRegex,function(data){var index=format.indexOf(data.key);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+data.key.length;i<n;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,key:data.key,apply:data.apply,matcher:data.regex})}}),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function createFormatter(format){for(var formatter,literalIdx,formatters=[],i=0;i<format.length;)if(angular.isNumber(literalIdx)){if("'"===format.charAt(i))(i+1>=format.length||"'"!==format.charAt(i+1))&&(formatters.push(constructLiteralFormatter(format,literalIdx,i)),literalIdx=null);else if(i===format.length)for(;literalIdx<format.length;)formatter=constructFormatterFromIdx(format,literalIdx),formatters.push(formatter),literalIdx=formatter.endIdx;i++}else"'"!==format.charAt(i)?(formatter=constructFormatterFromIdx(format,i),formatters.push(formatter.parser),i=formatter.endIdx):(literalIdx=i,i++);return formatters}function constructLiteralFormatter(format,literalIdx,endIdx){return function(){return format.substr(literalIdx+1,endIdx-literalIdx-1)}}function constructFormatterFromIdx(format,i){for(var currentPosStr=format.substr(i),j=0;j<formatCodeToRegex.length;j++)if(new RegExp("^"+formatCodeToRegex[j].key).test(currentPosStr)){var data=formatCodeToRegex[j];return{endIdx:i+data.key.length,parser:data.formatter}}return{endIdx:i+1,parser:function(){return currentPosStr.charAt(0)}}}function isValid(year,month,date){return!(date<1)&&(1===month&&date>28?29===date&&(year%4===0&&year%100!==0||year%400===0):3!==month&&5!==month&&8!==month&&10!==month||date<31)}function toInt(str){return parseInt(str,10)}function toTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone):date}function fromTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone,!0):date}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(/:/g,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset(),timezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);return addDateMinutes(date,reverse*(timezoneOffset-dateTimezoneOffset))}var localeId,formatCodeToRegex,SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){localeId=$locale.id,this.parsers={},this.formatters={},formatCodeToRegex=[{key:"yyyy",regex:"\\d{4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(value){value=+value,this.year=value<69?value+2e3:value+1900},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){var value=date.getMonth();return/^[0-9]$/.test(value)?dateFilter(date,"MM"):dateFilter(date,"M")}},{key:"MMMM",regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMMM")}},{key:"MMM",regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){var value=date.getDate();return/^[1-9]$/.test(value)?dateFilter(date,"dd"):dateFilter(date,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"d")}},{key:"EEEE",regex:$locale.DATETIME_FORMATS.DAY.join("|"),formatter:function(date){return dateFilter(date,"EEEE")}},{key:"EEE",regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(date){return dateFilter(date,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"h");
}},{key:"mm",regex:"[0-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(value){this.milliseconds=+value},formatter:function(date){return dateFilter(date,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"s")}},{key:"a",regex:$locale.DATETIME_FORMATS.AMPMS.join("|"),apply:function(value){12===this.hours&&(this.hours=0),"PM"===value&&(this.hours+=12)},formatter:function(date){return dateFilter(date,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(value){var matches=value.match(/([+-])(\d{2})(\d{2})/),sign=matches[1],hours=matches[2],minutes=matches[3];this.hours+=toInt(sign+hours),this.minutes+=toInt(sign+minutes)},formatter:function(date){return dateFilter(date,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"w")}},{key:"GGGG",regex:$locale.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(date){return dateFilter(date,"GGGG")}},{key:"GGG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GGG")}},{key:"GG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GG")}},{key:"G",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"G")}}]},this.init(),this.filter=function(date,format){if(!angular.isDate(date)||isNaN(date)||!format)return"";format=$locale.DATETIME_FORMATS[format]||format,$locale.id!==localeId&&this.init(),this.formatters[format]||(this.formatters[format]=createFormatter(format));var formatters=this.formatters[format];return formatters.reduce(function(str,formatter){return str+formatter(date)},"")},this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format,format=format.replace(SPECIAL_CHARACTERS_REGEXP,"\\$&"),$locale.id!==localeId&&this.init(),this.parsers[format]||(this.parsers[format]=createParser(format,"apply"));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex),tzOffset=!1;if(results&&results.length){var fields,dt;angular.isDate(baseDate)&&!isNaN(baseDate.getTime())?fields={year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}:(baseDate&&$log.warn("dateparser:","baseDate is not a valid date"),fields={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var i=1,n=results.length;i<n;i++){var mapper=map[i-1];"Z"===mapper.matcher&&(tzOffset=!0),mapper.apply&&mapper.apply.call(fields,results[i])}var datesetter=tzOffset?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,timesetter=tzOffset?Date.prototype.setUTCHours:Date.prototype.setHours;return isValid(fields.year,fields.month,fields.date)&&(!angular.isDate(baseDate)||isNaN(baseDate.getTime())||tzOffset?(dt=new Date(0),datesetter.call(dt,fields.year,fields.month,fields.date),timesetter.call(dt,fields.hours||0,fields.minutes||0,fields.seconds||0,fields.milliseconds||0)):(dt=new Date(baseDate),datesetter.call(dt,fields.year,fields.month,fields.date),timesetter.call(dt,fields.hours,fields.minutes,fields.seconds,fields.milliseconds))),dt}},this.toTimezone=toTimezone,this.fromTimezone=fromTimezone,this.timezoneToOffset=timezoneToOffset,this.addDateMinutes=addDateMinutes,this.convertTimezoneToLocal=convertTimezoneToLocal}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function($animate){var ON_REGEXP=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,IS_REGEXP=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(tElement,tAttrs){function linkFn(scope,element,attrs){linkedScopes.push(scope),instances.push({scope:scope,element:element}),exps.forEach(function(exp,k){addForExp(exp,scope)}),scope.$on("$destroy",removeScope)}function addForExp(exp,scope){var matches=exp.match(IS_REGEXP),clazz=scope.$eval(matches[1]),compareWithExp=matches[2],data=expToData[exp];if(!data){var watchFn=function(compareWithVal){var newActivated=null;instances.some(function(instance){var thisVal=instance.scope.$eval(onExp);if(thisVal===compareWithVal)return newActivated=instance,!0}),data.lastActivated!==newActivated&&(data.lastActivated&&$animate.removeClass(data.lastActivated.element,clazz),newActivated&&$animate.addClass(newActivated.element,clazz),data.lastActivated=newActivated)};expToData[exp]=data={lastActivated:null,scope:scope,watchFn:watchFn,compareWithExp:compareWithExp,watcher:scope.$watch(compareWithExp,watchFn)}}data.watchFn(scope.$eval(compareWithExp))}function removeScope(e){var removedScope=e.targetScope,index=linkedScopes.indexOf(removedScope);if(linkedScopes.splice(index,1),instances.splice(index,1),linkedScopes.length){var newWatchScope=linkedScopes[0];angular.forEach(expToData,function(data){data.scope===removedScope&&(data.watcher=newWatchScope.$watch(data.compareWithExp,data.watchFn),data.scope=newWatchScope)})}else expToData={}}var linkedScopes=[],instances=[],expToData={},onExpMatches=tAttrs.uibIsClass.match(ON_REGEXP),onExp=onExpMatches[2],expsStr=onExpMatches[1],exps=expsStr.split(",");return linkFn}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function($scope,$element,$attrs,$parse,$interpolate,$locale,$log,dateFilter,datepickerConfig,$datepickerLiteralWarning,$datepickerSuppressError,dateParser){function setMode(mode){$scope.datepickerMode=mode,$scope.datepickerOptions.datepickerMode=mode}var self=this,ngModelCtrl={$setViewValue:angular.noop},ngModelOptions={},watchListeners=[];$element.addClass("uib-datepicker"),$attrs.$set("role","application"),$scope.datepickerOptions||($scope.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(key){switch(key){case"customClass":case"dateDisabled":$scope[key]=$scope.datepickerOptions[key]||angular.noop;break;case"datepickerMode":$scope.datepickerMode=angular.isDefined($scope.datepickerOptions.datepickerMode)?$scope.datepickerOptions.datepickerMode:datepickerConfig.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":self[key]=angular.isDefined($scope.datepickerOptions[key])?$interpolate($scope.datepickerOptions[key])($scope.$parent):datepickerConfig[key];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":self[key]=angular.isDefined($scope.datepickerOptions[key])?$scope.datepickerOptions[key]:datepickerConfig[key];break;case"startingDay":angular.isDefined($scope.datepickerOptions.startingDay)?self.startingDay=$scope.datepickerOptions.startingDay:angular.isNumber(datepickerConfig.startingDay)?self.startingDay=datepickerConfig.startingDay:self.startingDay=($locale.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":$scope.$watch("datepickerOptions."+key,function(value){value?angular.isDate(value)?self[key]=dateParser.fromTimezone(new Date(value),ngModelOptions.timezone):($datepickerLiteralWarning&&$log.warn("Literal date support has been deprecated, please switch to date object usage"),self[key]=new Date(dateFilter(value,"medium"))):self[key]=datepickerConfig[key]?dateParser.fromTimezone(new Date(datepickerConfig[key]),ngModelOptions.timezone):null,self.refreshView()});break;case"maxMode":case"minMode":$scope.datepickerOptions[key]?$scope.$watch(function(){return $scope.datepickerOptions[key]},function(value){self[key]=$scope[key]=angular.isDefined(value)?value:$scope.datepickerOptions[key],("minMode"===key&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)<self.modes.indexOf(self[key])||"maxMode"===key&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)>self.modes.indexOf(self[key]))&&($scope.datepickerMode=self[key],$scope.datepickerOptions.datepickerMode=self[key])}):self[key]=$scope[key]=datepickerConfig[key]||null}}),$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),$scope.disabled=angular.isDefined($attrs.disabled)||!1,angular.isDefined($attrs.ngDisabled)&&watchListeners.push($scope.$parent.$watch($attrs.ngDisabled,function(disabled){$scope.disabled=disabled,self.refreshView()})),$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)&&($scope.activeDateId=dateObject.uid,!0)},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelOptions=ngModelCtrl_.$options||$scope.datepickerOptions.ngModelOptions||datepickerConfig.ngModelOptions,$scope.datepickerOptions.initDate?(self.activeDate=dateParser.fromTimezone($scope.datepickerOptions.initDate,ngModelOptions.timezone)||new Date,$scope.$watch("datepickerOptions.initDate",function(initDate){initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)&&(self.activeDate=dateParser.fromTimezone(initDate,ngModelOptions.timezone),self.refreshView())})):self.activeDate=new Date;var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date;this.activeDate=isNaN(date)?dateParser.fromTimezone(new Date,ngModelOptions.timezone):dateParser.fromTimezone(date,ngModelOptions.timezone),ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);isValid?this.activeDate=dateParser.fromTimezone(date,ngModelOptions.timezone):$datepickerSuppressError||$log.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){$scope.selectedDt=null,this._refreshView(),$scope.activeDt&&($scope.activeDateId=$scope.activeDt.uid);var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;date=dateParser.fromTimezone(date,ngModelOptions.timezone),ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;model=dateParser.fromTimezone(model,ngModelOptions.timezone);var today=new Date;today=dateParser.fromTimezone(today,ngModelOptions.timezone);var time=this.compare(date,today),dt={date:date,label:dateParser.filter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),past:time<0,current:0===time,future:time>0,customClass:this.customClass(date)||null};return model&&0===this.compare(date,model)&&($scope.selectedDt=dt),self.activeDate&&0===this.compare(dt.date,self.activeDate)&&($scope.activeDt=dt),dt},this.isDisabled=function(date){return $scope.disabled||this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$scope.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?dateParser.fromTimezone(new Date(ngModelCtrl.$viewValue),ngModelOptions.timezone):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),dt=dateParser.toTimezone(dt,ngModelOptions.timezone),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,setMode(self.modes[self.modes.indexOf($scope.datepickerMode)-1]),$scope.$emit("uib:datepicker.mode");$scope.$broadcast("uib:datepicker.focus")},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&direction===-1||(setMode(self.modes[self.modes.indexOf($scope.datepickerMode)+direction]),$scope.$emit("uib:datepicker.mode"))},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};$scope.$on("uib:datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey&&!$scope.disabled)if(evt.preventDefault(),self.shortcutPropagation||evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate)}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):$scope.toggleMode("up"===key?1:-1)},$element.on("keydown",function(evt){$scope.$apply(function(){$scope.keydown(evt)})}),$scope.$on("$destroy",function(){for(;watchListeners.length;)watchListeners.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),scope.showWeeks=ctrl.showWeeks,ctrl.refreshView()},this.getDates=function(startDate,n){for(var date,dates=new Array(n),current=new Date(startDate),i=0;i<n;)date=new Date(current),dates[i++]=date,current.setDate(current.getDate()+1);return dates},this._refreshView=function(){var year=this.activeDate.getFullYear(),month=this.activeDate.getMonth(),firstDayOfMonth=new Date(this.activeDate);firstDayOfMonth.setFullYear(year,month,1);var difference=this.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(-numDisplayedFromPreviousMonth+1);for(var days=this.getDates(firstDate,42),i=0;i<42;i++)days[i]=angular.extend(this.createDateObject(days[i],this.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;j<7;j++)scope.labels[j]={abbr:dateFilter(days[j].date,this.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(this.activeDate,this.formatDayTitle),scope.rows=this.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var thursdayIndex=(11-this.startingDay)%7,numWeeks=scope.rows.length,curWeek=0;curWeek<numWeeks;curWeek++)scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}},this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth(),date1.getDate()),_date2=new Date(date2.getFullYear(),date2.getMonth(),date2.getDate());return _date1.setFullYear(date1.getFullYear()),_date2.setFullYear(date2.getFullYear()),_date1-_date2},this.handleKeyDown=function(key,evt){var date=this.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=this.activeDate.getMonth()+("pageup"===key?-1:1);this.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(date)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){this.step={years:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),ctrl.refreshView()},this._refreshView=function(){for(var date,months=new Array(12),year=this.activeDate.getFullYear(),i=0;i<12;i++)date=new Date(this.activeDate),date.setFullYear(year,i,1),months[i]=angular.extend(this.createDateObject(date,this.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(this.activeDate,this.formatMonthTitle),scope.rows=this.split(months,this.monthColumns),scope.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth()),_date2=new Date(date2.getFullYear(),date2.getMonth());return _date1.setFullYear(date1.getFullYear()),_date2.setFullYear(date2.getFullYear()),_date1-_date2},this.handleKeyDown=function(key,evt){var date=this.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=this.monthColumns;else if("right"===key)date+=1;else if("down"===key)date+=this.monthColumns;else if("pageup"===key||"pagedown"===key){var year=this.activeDate.getFullYear()+("pageup"===key?-1:1);this.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);this.activeDate.setMonth(date)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}var columns,range;this.element=$element,this.yearpickerInit=function(){columns=this.yearColumns,range=this.yearRows*columns,this.step={years:range}},this._refreshView=function(){for(var date,years=new Array(range),i=0,start=getStartingYear(this.activeDate.getFullYear());i<range;i++)date=new Date(this.activeDate),date.setFullYear(start+i,0,1),years[i]=angular.extend(this.createDateObject(date,this.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=this.split(years,columns),scope.columns=columns},this.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},this.handleKeyDown=function(key,evt){var date=this.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=columns:"right"===key?date+=1:"down"===key?date+=columns:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*range:"home"===key?date=getStartingYear(this.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(this.activeDate.getFullYear())+range-1),this.activeDate.setFullYear(date)}}]).directive("uibDatepicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}}).directive("uibDaypicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],daypickerCtrl=ctrls[1];daypickerCtrl.init(datepickerCtrl)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],monthpickerCtrl=ctrls[1];monthpickerCtrl.init(datepickerCtrl)}}}).directive("uibYearpicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(scope,element,attrs,ctrls){var ctrl=ctrls[0];angular.extend(ctrl,ctrls[1]),ctrl.yearpickerInit(),ctrl.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){var SCROLLBAR_WIDTH,BODY_SCROLLBAR_WIDTH,OVERFLOW_REGEX={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},PLACEMENT_REGEX={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},BODY_REGEX=/(HTML|BODY)/;return{getRawNode:function(elem){return elem.nodeName?elem:elem[0]||elem},parseStyle:function(value){return value=parseFloat(value),isFinite(value)?value:0},offsetParent:function(elem){function isStaticPositioned(el){return"static"===($window.getComputedStyle(el).position||"static")}elem=this.getRawNode(elem);for(var offsetParent=elem.offsetParent||$document[0].documentElement;offsetParent&&offsetParent!==$document[0].documentElement&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||$document[0].documentElement},scrollbarWidth:function(isBody){if(isBody){if(angular.isUndefined(BODY_SCROLLBAR_WIDTH)){var bodyElem=$document.find("body");bodyElem.addClass("uib-position-body-scrollbar-measure"),BODY_SCROLLBAR_WIDTH=$window.innerWidth-bodyElem[0].clientWidth,BODY_SCROLLBAR_WIDTH=isFinite(BODY_SCROLLBAR_WIDTH)?BODY_SCROLLBAR_WIDTH:0,bodyElem.removeClass("uib-position-body-scrollbar-measure")}return BODY_SCROLLBAR_WIDTH}if(angular.isUndefined(SCROLLBAR_WIDTH)){var scrollElem=angular.element('<div class="uib-position-scrollbar-measure"></div>');$document.find("body").append(scrollElem),SCROLLBAR_WIDTH=scrollElem[0].offsetWidth-scrollElem[0].clientWidth,SCROLLBAR_WIDTH=isFinite(SCROLLBAR_WIDTH)?SCROLLBAR_WIDTH:0,scrollElem.remove()}return SCROLLBAR_WIDTH},scrollbarPadding:function(elem){elem=this.getRawNode(elem);var elemStyle=$window.getComputedStyle(elem),paddingRight=this.parseStyle(elemStyle.paddingRight),paddingBottom=this.parseStyle(elemStyle.paddingBottom),scrollParent=this.scrollParent(elem,!1,!0),scrollbarWidth=this.scrollbarWidth(scrollParent,BODY_REGEX.test(scrollParent.tagName));return{scrollbarWidth:scrollbarWidth,widthOverflow:scrollParent.scrollWidth>scrollParent.clientWidth,right:paddingRight+scrollbarWidth,originalRight:paddingRight,heightOverflow:scrollParent.scrollHeight>scrollParent.clientHeight,bottom:paddingBottom+scrollbarWidth,originalBottom:paddingBottom}},isScrollable:function(elem,includeHidden){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,elemStyle=$window.getComputedStyle(elem);return overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX)},scrollParent:function(elem,includeHidden,includeSelf){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,documentEl=$document[0].documentElement,elemStyle=$window.getComputedStyle(elem);if(includeSelf&&overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX))return elem;var excludeStatic="absolute"===elemStyle.position,scrollParent=elem.parentElement||documentEl;if(scrollParent===documentEl||"fixed"===elemStyle.position)return documentEl;for(;scrollParent.parentElement&&scrollParent!==documentEl;){var spStyle=$window.getComputedStyle(scrollParent);if(excludeStatic&&"static"!==spStyle.position&&(excludeStatic=!1),!excludeStatic&&overflowRegex.test(spStyle.overflow+spStyle.overflowY+spStyle.overflowX))break;scrollParent=scrollParent.parentElement}return scrollParent},position:function(elem,includeMagins){elem=this.getRawNode(elem);var elemOffset=this.offset(elem);if(includeMagins){var elemStyle=$window.getComputedStyle(elem);elemOffset.top-=this.parseStyle(elemStyle.marginTop),elemOffset.left-=this.parseStyle(elemStyle.marginLeft)}var parent=this.offsetParent(elem),parentOffset={top:0,left:0};return parent!==$document[0].documentElement&&(parentOffset=this.offset(parent),parentOffset.top+=parent.clientTop-parent.scrollTop,parentOffset.left+=parent.clientLeft-parent.scrollLeft),{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},offset:function(elem){elem=this.getRawNode(elem);var elemBCR=elem.getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+($window.pageYOffset||$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+($window.pageXOffset||$document[0].documentElement.scrollLeft))}},viewportOffset:function(elem,useDocument,includePadding){elem=this.getRawNode(elem),includePadding=includePadding!==!1;var elemBCR=elem.getBoundingClientRect(),offsetBCR={top:0,left:0,bottom:0,right:0},offsetParent=useDocument?$document[0].documentElement:this.scrollParent(elem),offsetParentBCR=offsetParent.getBoundingClientRect();if(offsetBCR.top=offsetParentBCR.top+offsetParent.clientTop,offsetBCR.left=offsetParentBCR.left+offsetParent.clientLeft,offsetParent===$document[0].documentElement&&(offsetBCR.top+=$window.pageYOffset,offsetBCR.left+=$window.pageXOffset),offsetBCR.bottom=offsetBCR.top+offsetParent.clientHeight,offsetBCR.right=offsetBCR.left+offsetParent.clientWidth,includePadding){var offsetParentStyle=$window.getComputedStyle(offsetParent);offsetBCR.top+=this.parseStyle(offsetParentStyle.paddingTop),offsetBCR.bottom-=this.parseStyle(offsetParentStyle.paddingBottom),offsetBCR.left+=this.parseStyle(offsetParentStyle.paddingLeft),offsetBCR.right-=this.parseStyle(offsetParentStyle.paddingRight)}return{top:Math.round(elemBCR.top-offsetBCR.top),bottom:Math.round(offsetBCR.bottom-elemBCR.bottom),left:Math.round(elemBCR.left-offsetBCR.left),right:Math.round(offsetBCR.right-elemBCR.right)}},parsePlacement:function(placement){var autoPlace=PLACEMENT_REGEX.auto.test(placement);return autoPlace&&(placement=placement.replace(PLACEMENT_REGEX.auto,"")),placement=placement.split("-"),placement[0]=placement[0]||"top",PLACEMENT_REGEX.primary.test(placement[0])||(placement[0]="top"),placement[1]=placement[1]||"center",PLACEMENT_REGEX.secondary.test(placement[1])||(placement[1]="center"),autoPlace?placement[2]=!0:placement[2]=!1,placement},positionElements:function(hostElem,targetElem,placement,appendToBody){hostElem=this.getRawNode(hostElem),targetElem=this.getRawNode(targetElem);var targetWidth=angular.isDefined(targetElem.offsetWidth)?targetElem.offsetWidth:targetElem.prop("offsetWidth"),targetHeight=angular.isDefined(targetElem.offsetHeight)?targetElem.offsetHeight:targetElem.prop("offsetHeight");placement=this.parsePlacement(placement);var hostElemPos=appendToBody?this.offset(hostElem):this.position(hostElem),targetElemPos={top:0,left:0,placement:""};if(placement[2]){var viewportOffset=this.viewportOffset(hostElem,appendToBody),targetElemStyle=$window.getComputedStyle(targetElem),adjustedSize={width:targetWidth+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginLeft)+this.parseStyle(targetElemStyle.marginRight))),height:targetHeight+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginTop)+this.parseStyle(targetElemStyle.marginBottom)))};if(placement[0]="top"===placement[0]&&adjustedSize.height>viewportOffset.top&&adjustedSize.height<=viewportOffset.bottom?"bottom":"bottom"===placement[0]&&adjustedSize.height>viewportOffset.bottom&&adjustedSize.height<=viewportOffset.top?"top":"left"===placement[0]&&adjustedSize.width>viewportOffset.left&&adjustedSize.width<=viewportOffset.right?"right":"right"===placement[0]&&adjustedSize.width>viewportOffset.right&&adjustedSize.width<=viewportOffset.left?"left":placement[0],placement[1]="top"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.bottom&&adjustedSize.height-hostElemPos.height<=viewportOffset.top?"bottom":"bottom"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.top&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?"top":"left"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.right&&adjustedSize.width-hostElemPos.width<=viewportOffset.left?"right":"right"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.left&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?"left":placement[1],"center"===placement[1])if(PLACEMENT_REGEX.vertical.test(placement[0])){var xOverflow=hostElemPos.width/2-targetWidth/2;viewportOffset.left+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?placement[1]="left":viewportOffset.right+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.left&&(placement[1]="right")}else{var yOverflow=hostElemPos.height/2-adjustedSize.height/2;viewportOffset.top+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?placement[1]="top":viewportOffset.bottom+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.top&&(placement[1]="bottom")}}switch(placement[0]){case"top":targetElemPos.top=hostElemPos.top-targetHeight;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height;break;case"left":targetElemPos.left=hostElemPos.left-targetWidth;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width}switch(placement[1]){case"top":targetElemPos.top=hostElemPos.top;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height-targetHeight;break;case"left":targetElemPos.left=hostElemPos.left;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width-targetWidth;break;case"center":PLACEMENT_REGEX.vertical.test(placement[0])?targetElemPos.left=hostElemPos.left+hostElemPos.width/2-targetWidth/2:targetElemPos.top=hostElemPos.top+hostElemPos.height/2-targetHeight/2}return targetElemPos.top=Math.round(targetElemPos.top),targetElemPos.left=Math.round(targetElemPos.left),targetElemPos.placement="center"===placement[1]?placement[0]:placement[0]+"-"+placement[1],targetElemPos},adjustTop:function(placementClasses,containerPosition,initialHeight,currentHeight){if(placementClasses.indexOf("top")!==-1&&initialHeight!==currentHeight)return{top:containerPosition.top-currentHeight+"px"}},positionArrow:function(elem,placement){elem=this.getRawNode(elem);var innerElem=elem.querySelector(".tooltip-inner, .popover-inner");if(innerElem){var isTooltip=angular.element(innerElem).hasClass("tooltip-inner"),arrowElem=isTooltip?elem.querySelector(".tooltip-arrow"):elem.querySelector(".arrow");if(arrowElem){var arrowCss={top:"",bottom:"",left:"",right:""};if(placement=this.parsePlacement(placement),"center"===placement[1])return void angular.element(arrowElem).css(arrowCss);var borderProp="border-"+placement[0]+"-width",borderWidth=$window.getComputedStyle(arrowElem)[borderProp],borderRadiusProp="border-";
borderRadiusProp+=PLACEMENT_REGEX.vertical.test(placement[0])?placement[0]+"-"+placement[1]:placement[1]+"-"+placement[0],borderRadiusProp+="-radius";var borderRadius=$window.getComputedStyle(isTooltip?innerElem:elem)[borderRadiusProp];switch(placement[0]){case"top":arrowCss.bottom=isTooltip?"0":"-"+borderWidth;break;case"bottom":arrowCss.top=isTooltip?"0":"-"+borderWidth;break;case"left":arrowCss.right=isTooltip?"0":"-"+borderWidth;break;case"right":arrowCss.left=isTooltip?"0":"-"+borderWidth}arrowCss[placement[1]]=borderRadius,angular.element(arrowElem).css(arrowCss)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function($scope,$element,$attrs,$compile,$log,$parse,$window,$document,$rootScope,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout,datepickerConfig,$datepickerPopupLiteralWarning){function parseDateString(viewValue){var date=dateParser.parse(viewValue,dateFormat,$scope.date);if(isNaN(date))for(var i=0;i<altInputFormats.length;i++)if(date=dateParser.parse(viewValue,altInputFormats[i],$scope.date),!isNaN(date))return date;return date}function parseDate(viewValue){if(angular.isNumber(viewValue)&&(viewValue=new Date(viewValue)),!viewValue)return null;if(angular.isDate(viewValue)&&!isNaN(viewValue))return viewValue;if(angular.isString(viewValue)){var date=parseDateString(viewValue);if(!isNaN(date))return dateParser.fromTimezone(date,ngModelOptions.timezone)}return ngModel.$options&&ngModel.$options.allowInvalid?viewValue:void 0}function validator(modelValue,viewValue){var value=modelValue||viewValue;return!$attrs.ngRequired&&!value||(angular.isNumber(value)&&(value=new Date(value)),!value||(!(!angular.isDate(value)||isNaN(value))||!!angular.isString(value)&&!isNaN(parseDateString(value))))}function documentClickBind(event){if($scope.isOpen||!$scope.disabled){var popup=$popup[0],dpContainsTarget=$element[0].contains(event.target),popupContainsTarget=void 0!==popup.contains&&popup.contains(event.target);!$scope.isOpen||dpContainsTarget||popupContainsTarget||$scope.$apply(function(){$scope.isOpen=!1})}}function inputKeydownBind(evt){27===evt.which&&$scope.isOpen?(evt.preventDefault(),evt.stopPropagation(),$scope.$apply(function(){$scope.isOpen=!1}),$element[0].focus()):40!==evt.which||$scope.isOpen||(evt.preventDefault(),evt.stopPropagation(),$scope.$apply(function(){$scope.isOpen=!0}))}function positionPopup(){if($scope.isOpen){var dpElement=angular.element($popup[0].querySelector(".uib-datepicker-popup")),placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement,position=$position.positionElements($element,dpElement,placement,appendToBody);dpElement.css({top:position.top+"px",left:position.left+"px"}),dpElement.hasClass("uib-position-measure")&&dpElement.removeClass("uib-position-measure")}}var dateFormat,closeOnDateSelection,appendToBody,onOpenFocus,datepickerPopupTemplateUrl,datepickerTemplateUrl,popupEl,datepickerEl,scrollParentEl,ngModel,ngModelOptions,$popup,altInputFormats,isHtml5DateInput=!1,watchListeners=[];this.init=function(_ngModel_){if(ngModel=_ngModel_,ngModelOptions=angular.isObject(_ngModel_.$options)?_ngModel_.$options:{timezone:null},closeOnDateSelection=angular.isDefined($attrs.closeOnDateSelection)?$scope.$parent.$eval($attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined($attrs.datepickerAppendToBody)?$scope.$parent.$eval($attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody,onOpenFocus=angular.isDefined($attrs.onOpenFocus)?$scope.$parent.$eval($attrs.onOpenFocus):datepickerPopupConfig.onOpenFocus,datepickerPopupTemplateUrl=angular.isDefined($attrs.datepickerPopupTemplateUrl)?$attrs.datepickerPopupTemplateUrl:datepickerPopupConfig.datepickerPopupTemplateUrl,datepickerTemplateUrl=angular.isDefined($attrs.datepickerTemplateUrl)?$attrs.datepickerTemplateUrl:datepickerPopupConfig.datepickerTemplateUrl,altInputFormats=angular.isDefined($attrs.altInputFormats)?$scope.$parent.$eval($attrs.altInputFormats):datepickerPopupConfig.altInputFormats,$scope.showButtonBar=angular.isDefined($attrs.showButtonBar)?$scope.$parent.$eval($attrs.showButtonBar):datepickerPopupConfig.showButtonBar,datepickerPopupConfig.html5Types[$attrs.type]?(dateFormat=datepickerPopupConfig.html5Types[$attrs.type],isHtml5DateInput=!0):(dateFormat=$attrs.uibDatepickerPopup||datepickerPopupConfig.datepickerPopup,$attrs.$observe("uibDatepickerPopup",function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat&&(dateFormat=newDateFormat,ngModel.$modelValue=null,!dateFormat))throw new Error("uibDatepickerPopup must have a date format specified.")})),!dateFormat)throw new Error("uibDatepickerPopup must have a date format specified.");if(isHtml5DateInput&&$attrs.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");popupEl=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),popupEl.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":datepickerPopupTemplateUrl}),datepickerEl=angular.element(popupEl.children()[0]),datepickerEl.attr("template-url",datepickerTemplateUrl),$scope.datepickerOptions||($scope.datepickerOptions={}),isHtml5DateInput&&"month"===$attrs.type&&($scope.datepickerOptions.datepickerMode="month",$scope.datepickerOptions.minMode="month"),datepickerEl.attr("datepicker-options","datepickerOptions"),isHtml5DateInput?ngModel.$formatters.push(function(value){return $scope.date=dateParser.fromTimezone(value,ngModelOptions.timezone),value}):(ngModel.$$parserName="date",ngModel.$validators.date=validator,ngModel.$parsers.unshift(parseDate),ngModel.$formatters.push(function(value){return ngModel.$isEmpty(value)?($scope.date=value,value):(angular.isNumber(value)&&(value=new Date(value)),$scope.date=dateParser.fromTimezone(value,ngModelOptions.timezone),dateParser.filter($scope.date,dateFormat))})),ngModel.$viewChangeListeners.push(function(){$scope.date=parseDateString(ngModel.$viewValue)}),$element.on("keydown",inputKeydownBind),$popup=$compile(popupEl)($scope),popupEl.remove(),appendToBody?$document.find("body").append($popup):$element.after($popup),$scope.$on("$destroy",function(){for($scope.isOpen===!0&&($rootScope.$$phase||$scope.$apply(function(){$scope.isOpen=!1})),$popup.remove(),$element.off("keydown",inputKeydownBind),$document.off("click",documentClickBind),scrollParentEl&&scrollParentEl.off("scroll",positionPopup),angular.element($window).off("resize",positionPopup);watchListeners.length;)watchListeners.shift()()})},$scope.getText=function(key){return $scope[key+"Text"]||datepickerPopupConfig[key+"Text"]},$scope.isDisabled=function(date){"today"===date&&(date=dateParser.fromTimezone(new Date,ngModelOptions.timezone));var dates={};return angular.forEach(["minDate","maxDate"],function(key){$scope.datepickerOptions[key]?angular.isDate($scope.datepickerOptions[key])?dates[key]=new Date($scope.datepickerOptions[key]):($datepickerPopupLiteralWarning&&$log.warn("Literal date support has been deprecated, please switch to date object usage"),dates[key]=new Date(dateFilter($scope.datepickerOptions[key],"medium"))):dates[key]=null}),$scope.datepickerOptions&&dates.minDate&&$scope.compare(date,dates.minDate)<0||dates.maxDate&&$scope.compare(date,dates.maxDate)>0},$scope.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},$scope.dateSelection=function(dt){$scope.date=dt;var date=$scope.date?dateParser.filter($scope.date,dateFormat):null;$element.val(date),ngModel.$setViewValue(date),closeOnDateSelection&&($scope.isOpen=!1,$element[0].focus())},$scope.keydown=function(evt){27===evt.which&&(evt.stopPropagation(),$scope.isOpen=!1,$element[0].focus())},$scope.select=function(date,evt){if(evt.stopPropagation(),"today"===date){var today=new Date;angular.isDate($scope.date)?(date=new Date($scope.date),date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())):(date=dateParser.fromTimezone(today,ngModelOptions.timezone),date.setHours(0,0,0,0))}$scope.dateSelection(date)},$scope.close=function(evt){evt.stopPropagation(),$scope.isOpen=!1,$element[0].focus()},$scope.disabled=angular.isDefined($attrs.disabled)||!1,$attrs.ngDisabled&&watchListeners.push($scope.$parent.$watch($parse($attrs.ngDisabled),function(disabled){$scope.disabled=disabled})),$scope.$watch("isOpen",function(value){value?$scope.disabled?$scope.isOpen=!1:$timeout(function(){positionPopup(),onOpenFocus&&$scope.$broadcast("uib:datepicker.focus"),$document.on("click",documentClickBind);var placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement;appendToBody||$position.parsePlacement(placement)[2]?(scrollParentEl=scrollParentEl||angular.element($position.scrollParent($element)),scrollParentEl&&scrollParentEl.on("scroll",positionPopup)):scrollParentEl=null,angular.element($window).on("resize",positionPopup)},0,!1):($document.off("click",documentClickBind),scrollParentEl&&scrollParentEl.off("scroll",positionPopup),angular.element($window).off("resize",positionPopup))}),$scope.$on("uib:datepicker.mode",function(){$timeout(positionPopup,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(scope,element,attrs,ctrls){var ngModel=ctrls[0],ctrl=ctrls[1];ctrl.init(ngModel)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this,args=Array.prototype.slice.call(arguments);timeoutPromise&&$timeout.cancel(timeoutPromise),timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function($document,$rootScope){var openScope=null;this.open=function(dropdownScope,element){openScope||$document.on("click",closeDropdown),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope},this.close=function(dropdownScope,element){openScope===dropdownScope&&(openScope=null,$document.off("click",closeDropdown),$document.off("keydown",this.keybindFilter))};var closeDropdown=function(evt){if(openScope&&!(evt&&"disabled"===openScope.getAutoClose()||evt&&3===evt.which)){var toggleElement=openScope.getToggleElement();if(!(evt&&toggleElement&&toggleElement[0].contains(evt.target))){var dropdownElement=openScope.getDropdownElement();evt&&"outsideClick"===openScope.getAutoClose()&&dropdownElement&&dropdownElement[0].contains(evt.target)||(openScope.isOpen=!1,openScope.focusToggleElement(),$rootScope.$$phase||openScope.$apply())}}};this.keybindFilter=function(evt){var dropdownElement=openScope.getDropdownElement(),toggleElement=openScope.getToggleElement(),dropdownElementTargeted=dropdownElement&&dropdownElement[0].contains(evt.target),toggleElementTargeted=toggleElement&&toggleElement[0].contains(evt.target);27===evt.which?(evt.stopPropagation(),openScope.focusToggleElement(),closeDropdown()):openScope.isKeynavEnabled()&&[38,40].indexOf(evt.which)!==-1&&openScope.isOpen&&(dropdownElementTargeted||toggleElementTargeted)&&(evt.preventDefault(),evt.stopPropagation(),openScope.focusDropdownEntry(evt.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){var templateScope,getIsOpen,self=this,scope=$scope.$new(),appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,appendToBody=!1,appendTo=null,keynavEnabled=!1,body=$document.find("body");$element.addClass("dropdown"),this.init=function(){if($attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);appendToEl&&(appendTo=angular.element(appendToEl))}appendToBody=angular.isDefined($attrs.dropdownAppendToBody),keynavEnabled=angular.isDefined($attrs.keyboardNav),appendToBody&&!appendTo&&(appendTo=body),appendTo&&self.dropdownMenu&&(appendTo.append(self.dropdownMenu),$element.on("$destroy",function(){self.dropdownMenu.remove()}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen,angular.isFunction(setIsOpen)&&setIsOpen(scope,scope.isOpen),scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return $element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:angular.isNumber(self.selectedOption)?self.selectedOption=0===self.selectedOption?0:self.selectedOption-1:self.selectedOption=elems.length-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){if(appendTo&&self.dropdownMenu){var css,rightalign,scrollbarPadding,pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",!0),scrollbarWidth=0;if(css={top:pos.top+"px",display:isOpen?"block":"none"},rightalign=self.dropdownMenu.hasClass("dropdown-menu-right"),rightalign?(css.left="auto",scrollbarPadding=$position.scrollbarPadding(appendTo),scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarWidth=scrollbarPadding.scrollbarWidth),css.right=window.innerWidth-scrollbarWidth-(pos.left+$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px",rightalign?css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px":css.left=pos.left-appendOffset.left+"px"}self.dropdownMenu.css(css)}var openContainer=appendTo?appendTo:$element,hasOpenClass=openContainer.hasClass(appendTo?appendToOpenClass:openClass);if(hasOpenClass===!isOpen&&$animate[isOpen?"addClass":"removeClass"](openContainer,appendTo?appendToOpenClass:openClass).then(function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),isOpen)self.dropdownMenuTemplateUrl?$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl,$document.on("keydown",uibDropdownService.keybindFilter)})}):$document.on("keydown",uibDropdownService.keybindFilter),scope.focusToggleElement(),uibDropdownService.open(scope,$element);else{if(uibDropdownService.close(scope,$element),self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}self.selectedOption=null}angular.isFunction(setIsOpen)&&setIsOpen($scope,isOpen)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl&&!angular.isDefined(attrs.dropdownNested)){element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key===stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key===stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.pop()},length:function(){return stack.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){map[key]||(map[key]=[]),map[key].push(value)},remove:function(key,value){var values=map[key];if(values){var idx=values.indexOf(value);idx!==-1&&values.splice(idx,1),values.length||delete map[key]}}}}}}).provider("$uibResolve",function(){var resolve=this;this.resolver=null,this.setResolver=function(resolver){this.resolver=resolver},this.$get=["$injector","$q",function($injector,$q){var resolver=resolve.resolver?$injector.get(resolve.resolver):null;return{resolve:function(invocables,locals,parent,self){if(resolver)return resolver.resolve(invocables,locals,parent,self);var promises=[];return angular.forEach(invocables,function(value){angular.isFunction(value)||angular.isArray(value)?promises.push($q.resolve($injector.invoke(value))):angular.isString(value)?promises.push($q.resolve($injector.get(value))):promises.push($q.resolve(value))}),$q.all(promises).then(function(resolves){var resolveObj={},resolveIter=0;return angular.forEach(invocables,function(value,key){resolveObj[key]=resolves[resolveIter++]}),resolveObj})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function($animate,$injector,$modalStack){function linkFn(scope,element,attrs){attrs.modalInClass&&($animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();scope.modalOptions.animation?$animate.removeClass(element,attrs.modalInClass).then(done):done()}))}return{restrict:"A",compile:function(tElement,tAttrs){return tElement.addClass(tAttrs.backdropClass),linkFn}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function($modalStack,$q,$animateCss,$document){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"uib/template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowTopClass||""),scope.size=attrs.size,scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!==modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))},element.on("click",scope.close),scope.$isRendered=!0;var modalRenderDeferObj=$q.defer();scope.$$postDigest(function(){modalRenderDeferObj.resolve()}),modalRenderDeferObj.promise.then(function(){var animationPromise=null;attrs.modalInClass&&(animationPromise=$animateCss(element,{addClass:attrs.modalInClass}).start(),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)})),$q.when(animationPromise).then(function(){var modal=$modalStack.getTop();if(modal&&$modalStack.modalRendered(modal.key),!$document[0].activeElement||!element[0].contains($document[0].activeElement)){var inputWithAutofocus=element[0].querySelector("[autofocus]");inputWithAutofocus?inputWithAutofocus.focus():element[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(tElement,tAttrs){tAttrs.modalAnimation&&tElement.addClass(tAttrs.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function($animate){return{link:function(scope,element,attrs,controller,transclude){transclude(scope.$parent,function(clone){element.empty(),$animate.enter(clone,element)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function($animate,$animateCss,$document,$compile,$rootScope,$q,$$multiMap,$$stackedMap,$uibPosition){function snake_case(name){var separator="-";return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function isVisible(element){return!!(element.offsetWidth||element.offsetHeight||element.getClientRects().length)}function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex>-1&&topBackdropIndex<topModalIndex&&(topBackdropIndex=topModalIndex),topBackdropIndex}function removeModalWindow(modalInstance,elementToReceiveFocus){var modalWindow=openedWindows.get(modalInstance).value,appendToElement=modalWindow.appendTo;openedWindows.remove(modalInstance),previousTopOpenedModal=openedWindows.top(),previousTopOpenedModal&&(topModalIndex=parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){var modalBodyClass=modalWindow.openedClass||OPENED_MODAL_CLASS;openedClasses.remove(modalBodyClass,modalInstance);var areAnyOpen=openedClasses.hasKey(modalBodyClass);appendToElement.toggleClass(modalBodyClass,areAnyOpen),!areAnyOpen&&scrollbarPadding&&scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarPadding.originalRight?appendToElement.css({paddingRight:scrollbarPadding.originalRight+"px"}):appendToElement.css({paddingRight:""}),scrollbarPadding=null),toggleTopWindowClass(!0)},modalWindow.closedDeferred),checkRemoveBackdrop(),elementToReceiveFocus&&elementToReceiveFocus.focus?elementToReceiveFocus.focus():appendToElement.focus&&appendToElement.focus()}function toggleTopWindowClass(toggleSwitch){var modalWindow;openedWindows.length()>0&&(modalWindow=openedWindows.top().value,modalWindow.modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch))}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()===-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,done,closedDeferred){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,$animate.leave(domEl).then(function(){done&&done(),domEl.remove(),closedDeferred&&closedDeferred.resolve()}),scope.$destroy())}var asyncDeferred,asyncPromise=null,setIsAsync=function(){return asyncDeferred||(asyncDeferred=$q.defer(),asyncPromise=asyncDeferred.promise),function(){asyncDeferred.resolve()}};return scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync),$q.when(asyncPromise).then(afterAnimating)}function keydownListener(evt){if(evt.isDefaultPrevented())return evt;var modal=openedWindows.top();if(modal)switch(evt.which){case 27:modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")}));break;case 9:var list=$modalStack.loadFocusElementList(modal),focusChanged=!1;evt.shiftKey?($modalStack.isFocusInFirstItem(evt,list)||$modalStack.isModalFocused(evt,modal))&&(focusChanged=$modalStack.focusLastFocusableElement(list)):$modalStack.isFocusInLastItem(evt,list)&&(focusChanged=$modalStack.focusFirstFocusableElement(list)),focusChanged&&(evt.preventDefault(),evt.stopPropagation())}}function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}var backdropDomEl,backdropScope,scrollbarPadding,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),openedClasses=$$multiMap.createNew(),$modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"},topModalIndex=0,previousTopOpenedModal=null,tabbableSelector="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",SNAKE_CASE_REGEXP=/[A-Z]/g;return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.on("keydown",keydownListener),$rootScope.$on("$destroy",function(){$document.off("keydown",keydownListener)}),$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||OPENED_MODAL_CLASS;toggleTopWindowClass(!1),previousTopOpenedModal=openedWindows.top(),openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,closedDeferred:modal.closedDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass,animation:modal.animation,appendTo:modal.appendTo}),openedClasses.put(modalBodyClass,modalInstance);var appendToElement=modal.appendTo,currBackdropIndex=backdropIndex();if(!appendToElement.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");currBackdropIndex>=0&&!backdropDomEl&&(backdropScope=$rootScope.$new(!0),backdropScope.modalOptions=modal,backdropScope.index=currBackdropIndex,backdropDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),backdropDomEl.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),modal.backdropClass&&backdropDomEl.addClass(modal.backdropClass),modal.animation&&backdropDomEl.attr("modal-animation","true"),$compile(backdropDomEl)(backdropScope),$animate.enter(backdropDomEl,appendToElement),$uibPosition.isScrollable(appendToElement)&&(scrollbarPadding=$uibPosition.scrollbarPadding(appendToElement),scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&appendToElement.css({paddingRight:scrollbarPadding.right+"px"})));var content;modal.component?(content=document.createElement(snake_case(modal.component.name)),content=angular.element(content),content.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):content=modal.content,topModalIndex=previousTopOpenedModal?parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)+1:0;var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');angularDomEl.attr({class:"modal","template-url":modal.windowTemplateUrl,"window-top-class":modal.windowTopClass,role:"dialog","aria-labelledby":modal.ariaLabelledBy,"aria-describedby":modal.ariaDescribedBy,size:modal.size,index:topModalIndex,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(content),modal.windowClass&&angularDomEl.addClass(modal.windowClass),modal.animation&&angularDomEl.attr("modal-animation","true"),appendToElement.addClass(modalBodyClass),modal.scope&&(modal.scope.$$topModalIndex=topModalIndex),$animate.enter($compile(angularDomEl)(modal.scope),appendToElement),openedWindows.top().value.modalDomEl=angularDomEl,openedWindows.top().value.modalOpener=modalOpener},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);return modalWindow&&broadcastClosing(modalWindow,result,!0)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);return modalWindow&&broadcastClosing(modalWindow,reason,!1)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal&&this.dismiss(topModal.key,reason);)topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);modalWindow&&modalWindow.value.renderDeferred.resolve()},$modalStack.focusFirstFocusableElement=function(list){return list.length>0&&(list[0].focus(),!0)},$modalStack.focusLastFocusableElement=function(list){return list.length>0&&(list[list.length-1].focus(),!0)},$modalStack.isModalFocused=function(evt,modalWindow){if(evt&&modalWindow){var modalDomEl=modalWindow.value.modalDomEl;if(modalDomEl&&modalDomEl.length)return(evt.target||evt.srcElement)===modalDomEl[0]}return!1},$modalStack.isFocusInFirstItem=function(evt,list){return list.length>0&&(evt.target||evt.srcElement)===list[0]},$modalStack.isFocusInLastItem=function(evt,list){return list.length>0&&(evt.target||evt.srcElement)===list[list.length-1]},$modalStack.loadFocusElementList=function(modalWindow){if(modalWindow){var modalDomE1=modalWindow.value.modalDomEl;if(modalDomE1&&modalDomE1.length){var elements=modalDomE1[0].querySelectorAll(tabbableSelector);return elements?Array.prototype.filter.call(elements,function(element){return isVisible(element)}):elements}}},$modalStack}]).provider("$uibModal",function(){
var $modalProvider={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function($rootScope,$q,$document,$templateRequest,$controller,$uibResolve,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}var $modal={},promiseChain=null;return $modal.getPromiseChain=function(){return promiseChain},$modal.open=function(modalOptions){function resolveWithTemplate(){return templateAndResolvePromise}var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalClosedDeferred=$q.defer(),modalRenderDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,closed:modalClosedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},modalOptions.appendTo=modalOptions.appendTo||$document.find("body").eq(0),!modalOptions.component&&!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var templateAndResolvePromise;templateAndResolvePromise=modalOptions.component?$q.when($uibResolve.resolve(modalOptions.resolve,{},null,null)):$q.all([getTemplatePromise(modalOptions),$uibResolve.resolve(modalOptions.resolve,{},null,null)]);var samePromise;return samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then(function(tplAndVars){function constructLocals(obj,template,instanceOnScope,injectable){obj.$scope=modalScope,obj.$scope.$resolve={},instanceOnScope?obj.$scope.$uibModalInstance=modalInstance:obj.$uibModalInstance=modalInstance;var resolves=template?tplAndVars[1]:tplAndVars;angular.forEach(resolves,function(value,key){injectable&&(obj[key]=value),obj.$scope.$resolve[key]=value})}var providedScope=modalOptions.scope||$rootScope,modalScope=providedScope.$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss,modalScope.$on("$destroy",function(){modalScope.$$uibDestructionScheduled||modalScope.$dismiss("$uibUnscheduledDestruction")});var ctrlInstance,ctrlInstantiate,modal={scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,closedDeferred:modalClosedDeferred,animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,ariaLabelledBy:modalOptions.ariaLabelledBy,ariaDescribedBy:modalOptions.ariaDescribedBy,size:modalOptions.size,openedClass:modalOptions.openedClass,appendTo:modalOptions.appendTo},component={},ctrlLocals={};modalOptions.component?(constructLocals(component,!1,!0,!1),component.name=modalOptions.component,modal.component=component):modalOptions.controller&&(constructLocals(ctrlLocals,!0,!1,!0),ctrlInstantiate=$controller(modalOptions.controller,ctrlLocals,!0,modalOptions.controllerAs),modalOptions.controllerAs&&modalOptions.bindToController&&(ctrlInstance=ctrlInstantiate.instance,ctrlInstance.$close=modalScope.$close,ctrlInstance.$dismiss=modalScope.$dismiss,angular.extend(ctrlInstance,{$resolve:ctrlLocals.$scope.$resolve},providedScope)),ctrlInstance=ctrlInstantiate(),angular.isFunction(ctrlInstance.$onInit)&&ctrlInstance.$onInit()),modalOptions.component||(modal.content=tplAndVars[0]),$modalStack.open(modalInstance,modal),modalOpenedDeferred.resolve(!0)},function(reason){modalOpenedDeferred.reject(reason),modalResultDeferred.reject(reason)}).finally(function(){promiseChain===samePromise&&(promiseChain=null)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function($parse){return{create:function(ctrl,$scope,$attrs){ctrl.setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop,ctrl.ngModelCtrl={$setViewValue:angular.noop},ctrl._watchers=[],ctrl.init=function(ngModelCtrl,config){ctrl.ngModelCtrl=ngModelCtrl,ctrl.config=config,ngModelCtrl.$render=function(){ctrl.render()},$attrs.itemsPerPage?ctrl._watchers.push($scope.$parent.$watch($attrs.itemsPerPage,function(value){ctrl.itemsPerPage=parseInt(value,10),$scope.totalPages=ctrl.calculateTotalPages(),ctrl.updatePage()})):ctrl.itemsPerPage=config.itemsPerPage,$scope.$watch("totalItems",function(newTotal,oldTotal){(angular.isDefined(newTotal)||newTotal!==oldTotal)&&($scope.totalPages=ctrl.calculateTotalPages(),ctrl.updatePage())})},ctrl.calculateTotalPages=function(){var totalPages=ctrl.itemsPerPage<1?1:Math.ceil($scope.totalItems/ctrl.itemsPerPage);return Math.max(totalPages||0,1)},ctrl.render=function(){$scope.page=parseInt(ctrl.ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page,evt){evt&&evt.preventDefault();var clickAllowed=!$scope.ngDisabled||!evt;clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages&&(evt&&evt.target&&evt.target.blur(),ctrl.ngModelCtrl.$setViewValue(page),ctrl.ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||ctrl.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages},ctrl.updatePage=function(){ctrl.setNumPages($scope.$parent,$scope.totalPages),$scope.page>$scope.totalPages?$scope.selectPage($scope.totalPages):ctrl.ngModelCtrl.$render()},$scope.$on("$destroy",function(){for(;ctrl._watchers.length;)ctrl._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function($scope,$attrs,uibPaging,uibPagerConfig){$scope.align=angular.isDefined($attrs.align)?$scope.$parent.$eval($attrs.align):uibPagerConfig.align,uibPaging.create(this,$scope,$attrs)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(uibPagerConfig){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pager/pager.html"},link:function(scope,element,attrs,ctrls){element.addClass("pager");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&paginationCtrl.init(ngModelCtrl,uibPagerConfig)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function($scope,$attrs,$parse,uibPaging,uibPaginationConfig){function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;number<=endPage;number++){var page=makePage(number,pageLabel(number),number===currentPage);pages.push(page)}if(isMaxSized&&maxSize>0&&(!rotate||forceEllipses||boundaryLinkNumbers)){if(startPage>1){if(!boundaryLinkNumbers||startPage>3){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(boundaryLinkNumbers){if(3===startPage){var secondPageLink=makePage(2,"2",!1);pages.unshift(secondPageLink)}var firstPageLink=makePage(1,"1",!1);pages.unshift(firstPageLink)}}if(endPage<totalPages){if(!boundaryLinkNumbers||endPage<totalPages-2){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}if(boundaryLinkNumbers){if(endPage===totalPages-2){var secondToLastPageLink=makePage(totalPages-1,totalPages-1,!1);pages.push(secondToLastPageLink)}var lastPageLink=makePage(totalPages,totalPages,!1);pages.push(lastPageLink)}}}return pages}var ctrl=this,maxSize=angular.isDefined($attrs.maxSize)?$scope.$parent.$eval($attrs.maxSize):uibPaginationConfig.maxSize,rotate=angular.isDefined($attrs.rotate)?$scope.$parent.$eval($attrs.rotate):uibPaginationConfig.rotate,forceEllipses=angular.isDefined($attrs.forceEllipses)?$scope.$parent.$eval($attrs.forceEllipses):uibPaginationConfig.forceEllipses,boundaryLinkNumbers=angular.isDefined($attrs.boundaryLinkNumbers)?$scope.$parent.$eval($attrs.boundaryLinkNumbers):uibPaginationConfig.boundaryLinkNumbers,pageLabel=angular.isDefined($attrs.pageLabel)?function(idx){return $scope.$parent.$eval($attrs.pageLabel,{$page:idx})}:angular.identity;$scope.boundaryLinks=angular.isDefined($attrs.boundaryLinks)?$scope.$parent.$eval($attrs.boundaryLinks):uibPaginationConfig.boundaryLinks,$scope.directionLinks=angular.isDefined($attrs.directionLinks)?$scope.$parent.$eval($attrs.directionLinks):uibPaginationConfig.directionLinks,uibPaging.create(this,$scope,$attrs),$attrs.maxSize&&ctrl._watchers.push($scope.$parent.$watch($parse($attrs.maxSize),function(value){maxSize=parseInt(value,10),ctrl.render()}));var originalRender=this.render;this.render=function(){originalRender(),$scope.page>0&&$scope.page<=$scope.totalPages&&($scope.pages=getPages($scope.page,$scope.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function($parse,uibPaginationConfig){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pagination/pagination.html"},link:function(scope,element,attrs,ctrls){element.addClass("pagination");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&paginationCtrl.init(ngModelCtrl,uibPaginationConfig)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},triggerMap={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function($window,$compile,$timeout,$document,$position,$interpolate,$rootScope,$parse,$$stackedMap){function keypressListener(e){if(27===e.which){var last=openedTooltips.top();last&&(last.value.close(),last=null)}}var openedTooltips=$$stackedMap.createNew();return $document.on("keyup",keypressListener),$rootScope.$on("$destroy",function(){$document.off("keyup",keypressListener)}),function(ttType,prefix,defaultTriggerShow,options){function getTriggers(trigger){var show=(trigger||options.trigger||defaultTriggerShow).split(" "),hide=show.map(function(trigger){return triggerMap[trigger]||trigger});return{show:show,hide:hide}}options=angular.extend({},defaultOptions,globalOptions,options);var directiveName=snake_case(ttType),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup uib-title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'origin-scope="origScope" class="uib-position-measure '+prefix+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function(scope,element,attrs,tooltipCtrl){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])||(cancelHide(),prepareTooltip(),ttScope.popupDelay?showTimeout||(showTimeout=$timeout(show,ttScope.popupDelay,!1)):show())}function hideTooltipBind(){cancelShow(),ttScope.popupCloseDelay?hideTimeout||(hideTimeout=$timeout(hide,ttScope.popupCloseDelay,!1)):hide()}function show(){return cancelShow(),cancelHide(),ttScope.content?(createTooltip(),void ttScope.$evalAsync(function(){ttScope.isOpen=!0,assignIsOpen(!0),positionTooltip()})):angular.noop}function cancelShow(){showTimeout&&($timeout.cancel(showTimeout),showTimeout=null),positionTimeout&&($timeout.cancel(positionTimeout),positionTimeout=null)}function hide(){ttScope&&ttScope.$evalAsync(function(){ttScope&&(ttScope.isOpen=!1,assignIsOpen(!1),ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,150,!1)):removeTooltip())})}function cancelHide(){hideTimeout&&($timeout.cancel(hideTimeout),hideTimeout=null),transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null)}function createTooltip(){tooltip||(tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)}),openedTooltips.add(ttScope,{close:hide}),prepObservers())}function removeTooltip(){cancelShow(),cancelHide(),unregisterObservers(),tooltip&&(tooltip.remove(),tooltip=null),openedTooltips.remove(ttScope),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){ttScope.title=attrs[prefix+"Title"],contentParse?ttScope.content=contentParse(scope):ttScope.content=attrs[ttType],ttScope.popupClass=attrs[prefix+"Class"],ttScope.placement=angular.isDefined(attrs[prefix+"Placement"])?attrs[prefix+"Placement"]:options.placement;var placement=$position.parsePlacement(ttScope.placement);lastPlacement=placement[1]?placement[0]+"-"+placement[1]:placement[0];var delay=parseInt(attrs[prefix+"PopupDelay"],10),closeDelay=parseInt(attrs[prefix+"PopupCloseDelay"],10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay,ttScope.popupCloseDelay=isNaN(closeDelay)?options.popupCloseDelay:closeDelay}function assignIsOpen(isOpen){isOpenParse&&angular.isFunction(isOpenParse.assign)&&isOpenParse.assign(scope,isOpen)}function prepObservers(){observers.length=0,contentParse?(observers.push(scope.$watch(contentParse,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()})),observers.push(tooltipLinkedScope.$watch(function(){repositionScheduled||(repositionScheduled=!0,tooltipLinkedScope.$$postDigest(function(){repositionScheduled=!1,ttScope&&ttScope.isOpen&&positionTooltip()}))}))):observers.push(attrs.$observe(ttType,function(val){ttScope.content=val,!val&&ttScope.isOpen?hide():positionTooltip()})),observers.push(attrs.$observe(prefix+"Title",function(val){ttScope.title=val,ttScope.isOpen&&positionTooltip()})),observers.push(attrs.$observe(prefix+"Placement",function(val){ttScope.placement=val?val:options.placement,ttScope.isOpen&&positionTooltip()}))}function unregisterObservers(){observers.length&&(angular.forEach(observers,function(observer){observer()}),observers.length=0)}function bodyHideTooltipBind(e){ttScope&&ttScope.isOpen&&tooltip&&(element[0].contains(e.target)||tooltip[0].contains(e.target)||hideTooltipBind())}function prepTriggers(){var showTriggers=[],hideTriggers=[],val=scope.$eval(attrs[prefix+"Trigger"]);unregisterTriggers(),angular.isObject(val)?(Object.keys(val).forEach(function(key){showTriggers.push(key),hideTriggers.push(val[key])}),triggers={show:showTriggers,hide:hideTriggers}):triggers=getTriggers(val),"none"!==triggers.show&&triggers.show.forEach(function(trigger,idx){"outsideClick"===trigger?(element.on("click",toggleTooltipBind),$document.on("click",bodyHideTooltipBind)):trigger===triggers.hide[idx]?element.on(trigger,toggleTooltipBind):trigger&&(element.on(trigger,showTooltipBind),element.on(triggers.hide[idx],hideTooltipBind)),element.on("keypress",function(e){27===e.which&&hideTooltipBind()})})}var tooltip,tooltipLinkedScope,transitionTimeout,showTimeout,hideTimeout,positionTimeout,lastPlacement,appendToBody=!!angular.isDefined(options.appendToBody)&&options.appendToBody,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),repositionScheduled=!1,isOpenParse=!!angular.isDefined(attrs[prefix+"IsOpen"])&&$parse(attrs[prefix+"IsOpen"]),contentParse=!!options.useContentExp&&$parse(attrs[ttType]),observers=[],positionTooltip=function(){tooltip&&tooltip.html()&&(positionTimeout||(positionTimeout=$timeout(function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody),initialHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight"),elementPos=appendToBody?$position.offset(element):$position.position(element);tooltip.css({top:ttPosition.top+"px",left:ttPosition.left+"px"});var placementClasses=ttPosition.placement.split("-");tooltip.hasClass(placementClasses[0])||(tooltip.removeClass(lastPlacement.split("-")[0]),tooltip.addClass(placementClasses[0])),tooltip.hasClass(options.placementClassPrefix+ttPosition.placement)||(tooltip.removeClass(options.placementClassPrefix+lastPlacement),tooltip.addClass(options.placementClassPrefix+ttPosition.placement)),$timeout(function(){var currentHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight"),adjustment=$position.adjustTop(placementClasses,elementPos,initialHeight,currentHeight);adjustment&&tooltip.css(adjustment)},0,!1),tooltip.hasClass("uib-position-measure")?($position.positionArrow(tooltip,ttPosition.placement),tooltip.removeClass("uib-position-measure")):lastPlacement!==ttPosition.placement&&$position.positionArrow(tooltip,ttPosition.placement),lastPlacement=ttPosition.placement,positionTimeout=null},0,!1)))};ttScope.origScope=scope,ttScope.isOpen=!1,ttScope.contentExp=function(){return ttScope.content},attrs.$observe("disabled",function(val){val&&cancelShow(),val&&ttScope.isOpen&&hide()}),isOpenParse&&scope.$watch(isOpenParse,function(val){ttScope&&!val===ttScope.isOpen&&toggleTooltipBind()});var unregisterTriggers=function(){triggers.show.forEach(function(trigger){"outsideClick"===trigger?element.off("click",toggleTooltipBind):(element.off(trigger,showTooltipBind),element.off(trigger,toggleTooltipBind))}),triggers.hide.forEach(function(trigger){"outsideClick"===trigger?$document.off("click",bodyHideTooltipBind):element.off(trigger,hideTooltipBind)})};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal,appendKey=prefix+"AppendToBody";appendToBodyVal=appendKey in attrs&&void 0===attrs[appendKey]||scope.$eval(attrs[appendKey]),appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,scope.$on("$destroy",function(){unregisterTriggers(),removeTooltip(),ttScope=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function(scope,elem,attrs){var currentScope,previousElement,currentElement,origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope),changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(attrs.uibTooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=origScope.$new(),template=response,clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,elem)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):cleanupLastIncludeContent()}),scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("uibTooltipClasses",["$uibPosition",function($uibPosition){return{restrict:"A",link:function(scope,element,attrs){if(scope.placement){var position=$uibPosition.parsePlacement(scope.placement);element.addClass(position[0])}scope.popupClass&&element.addClass(scope.popupClass),scope.animation&&element.addClass(attrs.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function($scope,$attrs,progressConfig){function getMaxOrDefault(){return angular.isDefined($scope.maxParam)?$scope.maxParam:progressConfig.max}var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=getMaxOrDefault(),this.addBar=function(bar,element,attrs){animate||element.css({transition:"none"}),this.bars.push(bar),bar.max=getMaxOrDefault(),bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar",bar.$watch("value",function(value){bar.recalculatePercentage()}),bar.recalculatePercentage=function(){var totalPercentage=self.bars.reduce(function(total,bar){return bar.percent=+(100*bar.value/bar.max).toFixed(2),total+bar.percent},0);totalPercentage>100&&(bar.percent-=totalPercentage-100)},bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1),this.bars.forEach(function(bar){bar.recalculatePercentage()})},$scope.$watch("maxParam",function(maxParam){self.bars.forEach(function(bar){bar.max=getMaxOrDefault(),bar.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element,attrs)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop},self=this;this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.push(function(value){return angular.isNumber(value)&&value<<0!==value&&(value=Math.round(value)),value}),this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff,this.enableReset=angular.isDefined($attrs.enableReset)?$scope.$parent.$eval($attrs.enableReset):ratingConfig.enableReset;var tmpTitles=angular.isDefined($attrs.titles)?$scope.$parent.$eval($attrs.titles):ratingConfig.titles;this.titles=angular.isArray(tmpTitles)&&tmpTitles.length>0?tmpTitles:ratingConfig.titles;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(i)},states[i]);return states},this.getTitle=function(index){return index>=this.titles.length?index+1:this.titles[index]},$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){var newViewValue=self.enableReset&&ngModelCtrl.$viewValue===value?0:value;ngModelCtrl.$setViewValue(newViewValue),ngModelCtrl.$render()}},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue,$scope.title=self.getTitle($scope.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){function findTabIndex(index){for(var i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].index===index)return i}var oldIndex,ctrl=this;ctrl.tabs=[],ctrl.select=function(index,evt){if(!destroyed){var previousIndex=findTabIndex(oldIndex),previousSelected=ctrl.tabs[previousIndex];if(previousSelected){if(previousSelected.tab.onDeselect({$event:evt,$selectedIndex:index}),evt&&evt.isDefaultPrevented())return;previousSelected.tab.active=!1}var selected=ctrl.tabs[index];selected?(selected.tab.onSelect({$event:evt}),selected.tab.active=!0,ctrl.active=selected.index,oldIndex=selected.index):!selected&&angular.isDefined(oldIndex)&&(ctrl.active=null,oldIndex=null)}},ctrl.addTab=function(tab){if(ctrl.tabs.push({tab:tab,index:tab.index}),ctrl.tabs.sort(function(t1,t2){return t1.index>t2.index?1:t1.index<t2.index?-1:0}),tab.index===ctrl.active||!angular.isDefined(ctrl.active)&&1===ctrl.tabs.length){var newActiveIndex=findTabIndex(tab.index);ctrl.select(newActiveIndex)}},ctrl.removeTab=function(tab){for(var index,i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].tab===tab){index=i;break}if(ctrl.tabs[index].index===ctrl.active){var newActiveTabIndex=index===ctrl.tabs.length-1?index-1:index+1%ctrl.tabs.length;ctrl.select(newActiveTabIndex)}ctrl.tabs.splice(index,1)},$scope.$watch("tabset.active",function(val){angular.isDefined(val)&&val!==oldIndex&&ctrl.select(findTabIndex(val))});var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tabset.html"},link:function(scope,element,attrs){scope.vertical=!!angular.isDefined(attrs.vertical)&&scope.$parent.$eval(attrs.vertical),scope.justified=!!angular.isDefined(attrs.justified)&&scope.$parent.$eval(attrs.justified)}}}).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(scope,elm,attrs,tabsetCtrl,transclude){scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value}),angular.isUndefined(attrs.index)&&(tabsetCtrl.tabs&&tabsetCtrl.tabs.length?scope.index=Math.max.apply(null,tabsetCtrl.tabs.map(function(t){return t.index}))+1:scope.index=0),angular.isUndefined(attrs.classes)&&(scope.classes=""),scope.select=function(evt){if(!scope.disabled){for(var index,i=0;i<tabsetCtrl.tabs.length;i++)if(tabsetCtrl.tabs[i].tab===scope){index=i;break}tabsetCtrl.select(index,evt)}},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}).directive("uibTabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===node.tagName.toLowerCase()||"data-uib-tab-heading"===node.tagName.toLowerCase()||"x-uib-tab-heading"===node.tagName.toLowerCase()||"uib:tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude).tab;tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,
readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function($scope,$element,$attrs,$parse,$log,$locale,timepickerConfig){function getHoursFromTemplate(){var hours=+$scope.hours,valid=$scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24;if(valid&&""!==$scope.hours)return $scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours}function getMinutesFromTemplate(){var minutes=+$scope.minutes,valid=minutes>=0&&minutes<60;if(valid&&""!==$scope.minutes)return minutes}function getSecondsFromTemplate(){var seconds=+$scope.seconds;return seconds>=0&&seconds<60?seconds:void 0}function pad(value,noPad){return null===value?"":angular.isDefined(value)&&value.toString().length<2&&!noPad?"0"+value:value.toString()}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1,$scope.invalidSeconds=!1}function updateTemplate(keyboardChange){if(ngModelCtrl.$modelValue){var hours=selected.getHours(),minutes=selected.getMinutes(),seconds=selected.getSeconds();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours,!padHours),"m"!==keyboardChange&&($scope.minutes=pad(minutes)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1],"s"!==keyboardChange&&($scope.seconds=pad(seconds)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}else $scope.hours=null,$scope.minutes=null,$scope.seconds=null,$scope.meridian=meridians[0]}function addSecondsToSelected(seconds){selected=addSeconds(selected,seconds),refresh()}function addMinutes(selected,minutes){return addSeconds(selected,60*minutes)}function addSeconds(date,seconds){var dt=new Date(date.getTime()+1e3*seconds),newDate=new Date(date);return newDate.setHours(dt.getHours(),dt.getMinutes(),dt.getSeconds()),newDate}function modelIsEmpty(){return(null===$scope.hours||""===$scope.hours)&&(null===$scope.minutes||""===$scope.minutes)&&(!$scope.showSeconds||$scope.showSeconds&&(null===$scope.seconds||""===$scope.seconds))}var selected=new Date,watchers=[],ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS,padHours=!angular.isDefined($attrs.padHours)||$scope.$parent.$eval($attrs.padHours);$scope.tabindex=angular.isDefined($attrs.tabindex)?$attrs.tabindex:0,$element.removeAttr("tabindex"),this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.unshift(function(modelValue){return modelValue?new Date(modelValue):null});var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),secondsInputEl=inputs.eq(2),mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl,secondsInputEl);var arrowkeys=angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys;arrowkeys&&this.setupArrowkeyEvents(hoursInputEl,minutesInputEl,secondsInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl,secondsInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&watchers.push($scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=+value}));var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&watchers.push($scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=+value}));var min;watchers.push($scope.$parent.$watch($parse($attrs.min),function(value){var dt=new Date(value);min=isNaN(dt)?void 0:dt}));var max;watchers.push($scope.$parent.$watch($parse($attrs.max),function(value){var dt=new Date(value);max=isNaN(dt)?void 0:dt}));var disabled=!1;$attrs.ngDisabled&&watchers.push($scope.$parent.$watch($parse($attrs.ngDisabled),function(value){disabled=value})),$scope.noIncrementHours=function(){var incrementedSelected=addMinutes(selected,60*hourStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementHours=function(){var decrementedSelected=addMinutes(selected,60*-hourStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementMinutes=function(){var incrementedSelected=addMinutes(selected,minuteStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementMinutes=function(){var decrementedSelected=addMinutes(selected,-minuteStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementSeconds=function(){var incrementedSelected=addSeconds(selected,secondStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementSeconds=function(){var decrementedSelected=addSeconds(selected,-secondStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noToggleMeridian=function(){return selected.getHours()<12?disabled||addMinutes(selected,720)>max:disabled||addMinutes(selected,-720)<min};var secondStep=timepickerConfig.secondStep;$attrs.secondStep&&watchers.push($scope.$parent.$watch($parse($attrs.secondStep),function(value){secondStep=+value})),$scope.showSeconds=timepickerConfig.showSeconds,$attrs.showSeconds&&watchers.push($scope.$parent.$watch($parse($attrs.showSeconds),function(value){$scope.showSeconds=!!value})),$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&watchers.push($scope.$parent.$watch($parse($attrs.showMeridian),function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()})),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()}),minutesInputEl.bind("mousewheel wheel",function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()}),secondsInputEl.bind("mousewheel wheel",function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementSeconds():$scope.decrementSeconds()),e.preventDefault()})},this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){hoursInputEl.bind("keydown",function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementHours(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementHours(),$scope.$apply()))}),minutesInputEl.bind("keydown",function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementMinutes(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementMinutes(),$scope.$apply()))}),secondsInputEl.bind("keydown",function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementSeconds(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementSeconds(),$scope.$apply()))})},this.setupInputEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,$scope.updateMinutes=angular.noop,void($scope.updateSeconds=angular.noop);var invalidate=function(invalidHours,invalidMinutes,invalidSeconds){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes),angular.isDefined(invalidSeconds)&&($scope.invalidSeconds=invalidSeconds)};$scope.updateHours=function(){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(hours)&&angular.isDefined(minutes)?(selected.setHours(hours),selected.setMinutes(minutes),selected<min||selected>max?invalidate(!0):refresh("h")):invalidate(!0)},hoursInputEl.bind("blur",function(e){ngModelCtrl.$setTouched(),modelIsEmpty()?makeValid():null===$scope.hours||""===$scope.hours?invalidate(!0):!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours,!padHours)})}),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(minutes)&&angular.isDefined(hours)?(selected.setHours(hours),selected.setMinutes(minutes),selected<min||selected>max?invalidate(void 0,!0):refresh("m")):invalidate(void 0,!0)},minutesInputEl.bind("blur",function(e){ngModelCtrl.$setTouched(),modelIsEmpty()?makeValid():null===$scope.minutes?invalidate(void 0,!0):!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})}),$scope.updateSeconds=function(){var seconds=getSecondsFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(seconds)?(selected.setSeconds(seconds),refresh("s")):invalidate(void 0,void 0,!0)},secondsInputEl.bind("blur",function(e){modelIsEmpty()?makeValid():!$scope.invalidSeconds&&$scope.seconds<10&&$scope.$apply(function(){$scope.seconds=pad($scope.seconds)})})},this.render=function(){var date=ngModelCtrl.$viewValue;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),selected<min||selected>max?(ngModelCtrl.$setValidity("time",!1),$scope.invalidHours=!0,$scope.invalidMinutes=!0):makeValid(),updateTemplate())},$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners,$scope.incrementHours=function(){$scope.noIncrementHours()||addSecondsToSelected(60*hourStep*60)},$scope.decrementHours=function(){$scope.noDecrementHours()||addSecondsToSelected(60*-hourStep*60)},$scope.incrementMinutes=function(){$scope.noIncrementMinutes()||addSecondsToSelected(60*minuteStep)},$scope.decrementMinutes=function(){$scope.noDecrementMinutes()||addSecondsToSelected(60*-minuteStep)},$scope.incrementSeconds=function(){$scope.noIncrementSeconds()||addSecondsToSelected(secondStep)},$scope.decrementSeconds=function(){$scope.noDecrementSeconds()||addSecondsToSelected(-secondStep)},$scope.toggleMeridian=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();$scope.noToggleMeridian()||(angular.isDefined(minutes)&&angular.isDefined(hours)?addSecondsToSelected(720*(selected.getHours()<12?60:-60)):$scope.meridian=$scope.meridian===meridians[0]?meridians[1]:meridians[0])},$scope.blur=function(){ngModelCtrl.$setTouched()},$scope.$on("$destroy",function(){for(;watchers.length;)watchers.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(uibTimepickerConfig){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(element,attrs){return attrs.templateUrl||uibTimepickerConfig.templateUrl},link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(originalScope,element,attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,$$debounce,$position,typeaheadParser){function fireRecalculating(){scope.moveInProgress||(scope.moveInProgress=!0,scope.$digest()),debouncedRecalculate()}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top+=element.prop("offsetHeight")}var modelCtrl,ngModelOptions,HOT_KEYS=[9,13,27,38,40],eventDebounceTime=200,minLength=originalScope.$eval(attrs.typeaheadMinLength);minLength||0===minLength||(minLength=1),originalScope.$watch(attrs.typeaheadMinLength,function(newVal){minLength=newVal||0===newVal?newVal:1});var waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1;originalScope.$watch(attrs.typeaheadEditable,function(newVal){isEditable=newVal!==!1});var hasFocus,selected,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,isSelectEvent=attrs.typeaheadShouldSelect?$parse(attrs.typeaheadShouldSelect):function(scope,vals){var evt=vals.$event;return 13===evt.which||9===evt.which},onSelectCallback=$parse(attrs.typeaheadOnSelect),isSelectOnBlur=!!angular.isDefined(attrs.typeaheadSelectOnBlur)&&originalScope.$eval(attrs.typeaheadSelectOnBlur),isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop,inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=!!attrs.typeaheadAppendToBody&&originalScope.$eval(attrs.typeaheadAppendToBody),appendTo=attrs.typeaheadAppendTo?originalScope.$eval(attrs.typeaheadAppendTo):null,focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,selectOnExact=!!attrs.typeaheadSelectOnExact&&originalScope.$eval(attrs.typeaheadSelectOnExact),isOpenSetter=$parse(attrs.typeaheadIsOpen).assign||angular.noop,showHint=originalScope.$eval(attrs.typeaheadShowHint)||!1,parsedModel=$parse(attrs.ngModel),invokeModelSetter=$parse(attrs.ngModel+"($$$p)"),$setModelValue=function(scope,newValue){return angular.isFunction(parsedModel(originalScope))&&ngModelOptions&&ngModelOptions.$options&&ngModelOptions.$options.getterSetter?invokeModelSetter(scope,{$$$p:newValue}):parsedModel.assign(scope,newValue)},parserResult=typeaheadParser.parse(attrs.uibTypeahead),scope=originalScope.$new(),offDestroy=originalScope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var inputsContainer,hintInputElem;showHint&&(inputsContainer=angular.element("<div></div>"),inputsContainer.css("position","relative"),element.after(inputsContainer),hintInputElem=element.clone(),hintInputElem.attr("placeholder",""),hintInputElem.attr("tabindex","-1"),hintInputElem.val(""),hintInputElem.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),element.css({position:"relative","vertical-align":"top","background-color":"transparent"}),hintInputElem.attr("id")&&hintInputElem.removeAttr("id"),inputsContainer.append(hintInputElem),hintInputElem.after(element));var popUpEl=angular.element("<div uib-typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl),angular.isDefined(attrs.typeaheadPopupTemplateUrl)&&popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl);var resetHint=function(){showHint&&hintInputElem.val("")},resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1),resetHint()},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){index<0?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var inputIsExactMatch=function(inputValue,index){return!!(scope.matches.length>index&&inputValue)&&inputValue.toUpperCase()===scope.matches[index].label.toUpperCase()},getMatchesAsync=function(inputValue,evt){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),isNoResultsSetter(originalScope,!1),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1,isNoResultsSetter(originalScope,!1),scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});if(scope.query=inputValue,recalculatePosition(),element.attr("aria-expanded",!0),selectOnExact&&1===scope.matches.length&&inputIsExactMatch(inputValue,0)&&(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)?$$debounce(function(){scope.select(0,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate.default):scope.select(0,evt)),showHint){var firstLabel=scope.matches[0].label;angular.isString(inputValue)&&inputValue.length>0&&firstLabel.slice(0,inputValue.length).toUpperCase()===inputValue.toUpperCase()?hintInputElem.val(inputValue+firstLabel.slice(inputValue.length)):hintInputElem.val("")}}else resetMatches(),isNoResultsSetter(originalScope,!0);onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1),isNoResultsSetter(originalScope,!0)})};appendToBody&&(angular.element($window).on("resize",fireRecalculating),$document.find("body").on("scroll",fireRecalculating));var debouncedRecalculate=$$debounce(function(){scope.matches.length&&recalculatePosition(),scope.moveInProgress=!1},eventDebounceTime);scope.moveInProgress=!1,scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};resetMatches(),scope.assignIsOpen=function(isOpen){isOpenSetter(originalScope,isOpen)},scope.select=function(activeIdx,evt){var model,item,locals={};selected=!0,locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals),$event:evt}),resetMatches(),scope.$eval(attrs.typeaheadFocusOnSelect)!==!1&&$timeout(function(){element[0].focus()},0,!1)},element.on("keydown",function(evt){if(0!==scope.matches.length&&HOT_KEYS.indexOf(evt.which)!==-1){var shouldSelect=isSelectEvent(originalScope,{$event:evt});if(scope.activeIdx===-1&&shouldSelect||9===evt.which&&evt.shiftKey)return resetMatches(),void scope.$digest();evt.preventDefault();var target;switch(evt.which){case 27:evt.stopPropagation(),resetMatches(),originalScope.$digest();break;case 38:scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest(),target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx],target.parentNode.scrollTop=target.offsetTop;break;case 40:scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest(),target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx],target.parentNode.scrollTop=target.offsetTop;break;default:shouldSelect&&scope.$apply(function(){angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)?$$debounce(function(){scope.select(scope.activeIdx,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate.default):scope.select(scope.activeIdx,evt)})}}}),element.bind("focus",function(evt){hasFocus=!0,0!==minLength||modelCtrl.$viewValue||$timeout(function(){getMatchesAsync(modelCtrl.$viewValue,evt)},0)}),element.bind("blur",function(evt){isSelectOnBlur&&scope.matches.length&&scope.activeIdx!==-1&&!selected&&(selected=!0,scope.$apply(function(){angular.isObject(scope.debounceUpdate)&&angular.isNumber(scope.debounceUpdate.blur)?$$debounce(function(){scope.select(scope.activeIdx,evt)},scope.debounceUpdate.blur):scope.select(scope.activeIdx,evt)})),!isEditable&&modelCtrl.$error.editable&&(modelCtrl.$setViewValue(),scope.$apply(function(){modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0)}),element.val("")),hasFocus=!1,selected=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&3!==evt.which&&0!==scope.matches.length&&(resetMatches(),$rootScope.$$phase||originalScope.$digest())};$document.on("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.off("click",dismissClickHandler),(appendToBody||appendTo)&&$popup.remove(),appendToBody&&(angular.element($window).off("resize",fireRecalculating),$document.find("body").off("scroll",fireRecalculating)),popUpEl.remove(),showHint&&inputsContainer.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):appendTo?angular.element(appendTo).eq(0).append($popup):element.after($popup),this.init=function(_modelCtrl,_ngModelOptions){modelCtrl=_modelCtrl,ngModelOptions=_ngModelOptions,scope.debounceUpdate=modelCtrl.$options&&$parse(modelCtrl.$options.debounce)(originalScope),modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,0===minLength||inputValue&&inputValue.length>=minLength?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),null)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return isEditable||modelCtrl.$setValidity("editable",!0),inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(originalScope,element,attrs,ctrls){ctrls[2].init(ctrls[0],ctrls[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function($$debounce){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(element,attrs){return attrs.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){var isDropdownOpen=scope.matches.length>0;return scope.assignIsOpen({isOpen:isDropdownOpen}),isDropdownOpen},scope.isActive=function(matchIdx){return scope.active===matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx,evt){var debounce=scope.debounce();angular.isNumber(debounce)||angular.isObject(debounce)?$$debounce(function(){scope.select({activeIdx:activeIdx,evt:evt})},angular.isNumber(debounce)?debounce:debounce.default):scope.select({activeIdx:activeIdx,evt:evt})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"uib/template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){var tplEl=angular.element(tplContent.trim());element.replaceWith(tplEl),$compile(tplEl)(scope)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function($sce,$injector,$log){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}var isSanitizePresent;return isSanitizePresent=$injector.has("$sanitize"),function(matchItem,query){return!isSanitizePresent&&containsHtml(matchItem)&&$log.warn("Unsafe use of typeahead please use ngSanitize"),matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem,isSanitizePresent||(matchItem=$sce.trustAsHtml(matchItem)),matchItem}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');
}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepickerPopup/popup.html",'<ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pagination/pagination.html",'<li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular),swal=__webpack_require__(11);exports.default=_angular2.default.module("UtilModule",[]).service("UtilService",function(){function notify(title,message,type){title=title||"消息提示",new PNotify({title:title,text:message,type:type,delay:1500})}this.alert=function(msg){notify(null,msg,"success")},this.getNowFormatDate=function(){var date=new Date,seperator1="-",seperator2=":",month=date.getMonth()+1,strDate=date.getDate();month>=1&&month<=9&&(month="0"+month),strDate>=0&&strDate<=9&&(strDate="0"+strDate);var currentdate=date.getFullYear()+seperator1+month+seperator1+strDate+" "+date.getHours()+seperator2+date.getMinutes()+seperator2+date.getSeconds();return currentdate},this.getTimestamp=function(){return Math.floor(Date.now()/1e3)},this.swalConfirm=function(message,titleOrCallback,callback,failback){return titleOrCallback&&"string"!=typeof titleOrCallback&&(callback=titleOrCallback,titleOrCallback=""),swal({title:message,text:titleOrCallback,type:"warning",confirmButtonColor:"#3085d6",showCancelButton:!0,cancelButtonColor:"#d33"}).then(function(){callback(!0)})},this.notify={},this.notify.success=function(message,title){notify(title,message,"success")},this.notify.info=function(message,title){notify(title,message,"info")},this.notify.warn=function(message,title){notify(title,message)},this.notify.error=function(message,title){notify(title,message,"error")}}).name},function(module,exports,__webpack_require__){/*!
	 * sweetalert2 v6.2.1
	 * Released under the MIT License.
	 */
!function(global,factory){module.exports=factory()}(this,function(){"use strict";var swalPrefix="swal2-",prefix=function(items){var result={};for(var i in items)result[items[i]]=swalPrefix+items[i];return result},swalClasses=prefix(["container","in","iosfix","modal","overlay","fade","show","hide","noanimation","close","title","content","spacer","confirm","cancel","icon","image","input","file","range","select","radio","checkbox","textarea","inputerror","validationerror","progresssteps","activeprogressstep","progresscircle","progressline","loading","styled"]),iconTypes=prefix(["success","warning","info","question","error"]),defaultParams={title:"",text:"",html:"",type:null,customClass:"",animation:!0,allowOutsideClick:!0,allowEscapeKey:!0,showConfirmButton:!0,showCancelButton:!1,preConfirm:null,confirmButtonText:"OK",confirmButtonColor:"#3085d6",confirmButtonClass:null,cancelButtonText:"Cancel",cancelButtonColor:"#aaa",cancelButtonClass:null,buttonsStyling:!0,reverseButtons:!1,focusCancel:!1,showCloseButton:!1,showLoaderOnConfirm:!1,imageUrl:null,imageWidth:null,imageHeight:null,imageClass:null,timer:null,width:500,padding:20,background:"#fff",input:null,inputPlaceholder:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputClass:null,inputAttributes:{},inputValidator:null,progressSteps:[],currentProgressStep:null,progressStepsDistance:"40px",onOpen:null,onClose:null},sweetHTML=('\n  <div class="'+swalClasses.modal+'" style="display: none" tabIndex="-1">\n    <ul class="'+swalClasses.progresssteps+'"></ul>\n    <div class="'+swalClasses.icon+" "+iconTypes.error+'">\n      <span class="x-mark"><span class="line left"></span><span class="line right"></span></span>\n    </div>\n    <div class="'+swalClasses.icon+" "+iconTypes.question+'">?</div>\n    <div class="'+swalClasses.icon+" "+iconTypes.warning+'">!</div>\n    <div class="'+swalClasses.icon+" "+iconTypes.info+'">i</div>\n    <div class="'+swalClasses.icon+" "+iconTypes.success+'">\n      <span class="line tip"></span> <span class="line long"></span>\n      <div class="placeholder"></div> <div class="fix"></div>\n    </div>\n    <img class="'+swalClasses.image+'">\n    <h2 class="'+swalClasses.title+'"></h2>\n    <div class="'+swalClasses.content+'"></div>\n    <input class="'+swalClasses.input+'">\n    <input type="file" class="'+swalClasses.file+'">\n    <div class="'+swalClasses.range+'">\n      <output></output>\n      <input type="range">\n    </div>\n    <select class="'+swalClasses.select+'"></select>\n    <div class="'+swalClasses.radio+'"></div>\n    <label for="'+swalClasses.checkbox+'" class="'+swalClasses.checkbox+'">\n      <input type="checkbox">\n    </label>\n    <textarea class="'+swalClasses.textarea+'"></textarea>\n    <div class="'+swalClasses.validationerror+'"></div>\n    <hr class="'+swalClasses.spacer+'">\n    <button type="button" class="'+swalClasses.confirm+'">OK</button>\n    <button type="button" class="'+swalClasses.cancel+'">Cancel</button>\n    <span class="'+swalClasses.close+'">&times;</span>\n  </div>\n').replace(/(^|\n)\s*/g,""),sweetContainer=void 0,existingSweetContainers=document.getElementsByClassName(swalClasses.container);existingSweetContainers.length?sweetContainer=existingSweetContainers[0]:(sweetContainer=document.createElement("div"),sweetContainer.className=swalClasses.container,sweetContainer.innerHTML=sweetHTML);var colorLuminance=function(hex,lum){hex=String(hex).replace(/[^0-9a-f]/gi,""),hex.length<6&&(hex=hex[0]+hex[0]+hex[1]+hex[1]+hex[2]+hex[2]),lum=lum||0;for(var rgb="#",i=0;i<3;i++){var c=parseInt(hex.substr(2*i,2),16);c=Math.round(Math.min(Math.max(0,c+c*lum),255)).toString(16),rgb+=("00"+c).substr(c.length)}return rgb},states={previousWindowKeyDown:null,previousActiveElement:null,previousBodyPadding:null},init=function(){if("undefined"==typeof document)return void console.error("SweetAlert2 requires document to initialize");if(!document.getElementsByClassName(swalClasses.container).length){document.body.appendChild(sweetContainer);var modal=getModal(),input=getChildByClass(modal,swalClasses.input),file=getChildByClass(modal,swalClasses.file),range=modal.querySelector("."+swalClasses.range+" input"),rangeOutput=modal.querySelector("."+swalClasses.range+" output"),select=getChildByClass(modal,swalClasses.select),checkbox=modal.querySelector("."+swalClasses.checkbox+" input"),textarea=getChildByClass(modal,swalClasses.textarea);return input.oninput=function(){sweetAlert.resetValidationError()},input.onkeydown=function(event){setTimeout(function(){13===event.keyCode&&(event.stopPropagation(),sweetAlert.clickConfirm())},0)},file.onchange=function(){sweetAlert.resetValidationError()},range.oninput=function(){sweetAlert.resetValidationError(),rangeOutput.value=range.value},range.onchange=function(){sweetAlert.resetValidationError(),range.previousSibling.value=range.value},select.onchange=function(){sweetAlert.resetValidationError()},checkbox.onchange=function(){sweetAlert.resetValidationError()},textarea.oninput=function(){sweetAlert.resetValidationError()},modal}},elementByClass=function(className){return sweetContainer.querySelector("."+className)},getModal=function(){return document.body.querySelector("."+swalClasses.modal)||init()},getIcons=function(){var modal=getModal();return modal.querySelectorAll("."+swalClasses.icon)},getTitle=function(){return elementByClass(swalClasses.title)},getContent=function(){return elementByClass(swalClasses.content)},getImage=function(){return elementByClass(swalClasses.image)},getSpacer=function(){return elementByClass(swalClasses.spacer)},getProgressSteps=function(){return elementByClass(swalClasses.progresssteps)},getValidationError=function(){return elementByClass(swalClasses.validationerror)},getConfirmButton=function(){return elementByClass(swalClasses.confirm)},getCancelButton=function(){return elementByClass(swalClasses.cancel)},getCloseButton=function(){return elementByClass(swalClasses.close)},getFocusableElements=function(focusCancel){var buttons=[getConfirmButton(),getCancelButton()];return focusCancel&&buttons.reverse(),buttons.concat(Array.prototype.slice.call(getModal().querySelectorAll("button:not([class^="+swalPrefix+"]), input:not([type=hidden]), textarea, select")))},hasClass=function(elem,className){return!!elem.classList&&elem.classList.contains(className)},focusInput=function(input){if(input.focus(),"file"!==input.type){var val=input.value;input.value="",input.value=val}},addClass=function(elem,className){if(elem&&className){var classes=className.split(/\s+/).filter(Boolean);classes.forEach(function(className){elem.classList.add(className)})}},removeClass=function(elem,className){if(elem&&className){var classes=className.split(/\s+/).filter(Boolean);classes.forEach(function(className){elem.classList.remove(className)})}},getChildByClass=function(elem,className){for(var i=0;i<elem.childNodes.length;i++)if(hasClass(elem.childNodes[i],className))return elem.childNodes[i]},show=function(elem,display){display||(display="block"),elem.style.opacity="",elem.style.display=display},hide=function(elem){elem.style.opacity="",elem.style.display="none"},empty=function(elem){for(;elem.firstChild;)elem.removeChild(elem.firstChild)},isVisible=function(elem){return elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length},removeStyleProperty=function(elem,property){elem.style.removeProperty?elem.style.removeProperty(property):elem.style.removeAttribute(property)},fireClick=function(node){if("function"==typeof MouseEvent){var mevt=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0});node.dispatchEvent(mevt)}else if(document.createEvent){var evt=document.createEvent("MouseEvents");evt.initEvent("click",!1,!1),node.dispatchEvent(evt)}else document.createEventObject?node.fireEvent("onclick"):"function"==typeof node.onclick&&node.onclick()},animationEndEvent=function(){var testEl=document.createElement("div"),transEndEventNames={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",animation:"animationend"};for(var i in transEndEventNames)if(transEndEventNames.hasOwnProperty(i)&&void 0!==testEl.style[i])return transEndEventNames[i];return!1}(),resetPrevState=function(){var modal=getModal();window.onkeydown=states.previousWindowKeyDown,states.previousActiveElement&&states.previousActiveElement.focus&&states.previousActiveElement.focus(),clearTimeout(modal.timeout)},measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.style.width="50px",scrollDiv.style.height="50px",scrollDiv.style.overflow="scroll",document.body.appendChild(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return document.body.removeChild(scrollDiv),scrollbarWidth},debounce=function(func,wait){var timeout=void 0;return function(){var later=function(){timeout=null,func()};clearTimeout(timeout),timeout=setTimeout(later,wait)}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_extends=(function(){function AwaitValue(value){this.value=value}function AsyncGenerator(gen){function send(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))})}function resume(key,arg){try{var result=gen[key](arg),value=result.value;value instanceof AwaitValue?Promise.resolve(value.value).then(function(arg){resume("next",arg)},function(arg){resume("throw",arg)}):settle(result.done?"return":"normal",result.value)}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}front=front.next,front?resume(front.key,front.arg):back=null}var front,back;this._invoke=send,"function"!=typeof gen.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)},{wrap:function(fn){return function(){return new AsyncGenerator(fn.apply(this,arguments))}},await:function(value){return new AwaitValue(value)}}}(),Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}),modalParams=_extends({},defaultParams),queue=[],swal2Observer=void 0,setParameters=function(params){var modal=getModal();for(var param in params)defaultParams.hasOwnProperty(param)||"extraParams"===param||console.warn('SweetAlert2: Unknown parameter "'+param+'"');modal.style.width="number"==typeof params.width?params.width+"px":params.width,modal.style.padding=params.padding+"px",modal.style.background=params.background;var title=getTitle(),content=getContent(),confirmButton=getConfirmButton(),cancelButton=getCancelButton(),closeButton=getCloseButton();if(title.innerHTML=params.title.split("\n").join("<br>"),params.text||params.html){if("object"===_typeof(params.html))if(content.innerHTML="",0 in params.html)for(var i=0;i in params.html;i++)content.appendChild(params.html[i].cloneNode(!0));else content.appendChild(params.html.cloneNode(!0));else params.html?content.innerHTML=params.html:params.text&&(content.innerHTML=(""+params.text).split("\n").join("<br>"));show(content)}else hide(content);params.showCloseButton?show(closeButton):hide(closeButton),modal.className=swalClasses.modal,params.customClass&&addClass(modal,params.customClass);var progressStepsContainer=getProgressSteps(),currentProgressStep=parseInt(null===params.currentProgressStep?sweetAlert.getQueueStep():params.currentProgressStep,10);params.progressSteps.length?(show(progressStepsContainer),empty(progressStepsContainer),currentProgressStep>=params.progressSteps.length&&console.warn("SweetAlert2: Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),params.progressSteps.forEach(function(step,index){var circle=document.createElement("li");if(addClass(circle,swalClasses.progresscircle),circle.innerHTML=step,index===currentProgressStep&&addClass(circle,swalClasses.activeprogressstep),progressStepsContainer.appendChild(circle),index!==params.progressSteps.length-1){var line=document.createElement("li");addClass(line,swalClasses.progressline),line.style.width=params.progressStepsDistance,progressStepsContainer.appendChild(line)}})):hide(progressStepsContainer);for(var icons=getIcons(),_i=0;_i<icons.length;_i++)hide(icons[_i]);if(params.type){var validType=!1;for(var iconType in iconTypes)if(params.type===iconType){validType=!0;break}if(!validType)return console.error("SweetAlert2: Unknown alert type: "+params.type),!1;var icon=modal.querySelector("."+swalClasses.icon+"."+iconTypes[params.type]);switch(show(icon),params.type){case"success":addClass(icon,"animate"),addClass(icon.querySelector(".tip"),"animate-success-tip"),addClass(icon.querySelector(".long"),"animate-success-long");break;case"error":addClass(icon,"animate-error-icon"),addClass(icon.querySelector(".x-mark"),"animate-x-mark");break;case"warning":addClass(icon,"pulse-warning")}}var image=getImage();params.imageUrl?(image.setAttribute("src",params.imageUrl),show(image),params.imageWidth?image.setAttribute("width",params.imageWidth):image.removeAttribute("width"),params.imageHeight?image.setAttribute("height",params.imageHeight):image.removeAttribute("height"),image.className=swalClasses.image,params.imageClass&&addClass(image,params.imageClass)):hide(image),params.showCancelButton?cancelButton.style.display="inline-block":hide(cancelButton),params.showConfirmButton?removeStyleProperty(confirmButton,"display"):hide(confirmButton);var spacer=getSpacer();params.showConfirmButton||params.showCancelButton?show(spacer):hide(spacer),confirmButton.innerHTML=params.confirmButtonText,cancelButton.innerHTML=params.cancelButtonText,params.buttonsStyling&&(confirmButton.style.backgroundColor=params.confirmButtonColor,cancelButton.style.backgroundColor=params.cancelButtonColor),confirmButton.className=swalClasses.confirm,addClass(confirmButton,params.confirmButtonClass),cancelButton.className=swalClasses.cancel,addClass(cancelButton,params.cancelButtonClass),params.buttonsStyling?(addClass(confirmButton,swalClasses.styled),addClass(cancelButton,swalClasses.styled)):(removeClass(confirmButton,swalClasses.styled),removeClass(cancelButton,swalClasses.styled),confirmButton.style.backgroundColor=confirmButton.style.borderLeftColor=confirmButton.style.borderRightColor="",cancelButton.style.backgroundColor=cancelButton.style.borderLeftColor=cancelButton.style.borderRightColor=""),params.animation===!0?removeClass(modal,swalClasses.noanimation):addClass(modal,swalClasses.noanimation)},openModal=function(animation,onComplete){var modal=getModal();animation?(addClass(modal,swalClasses.show),addClass(sweetContainer,swalClasses.fade),removeClass(modal,swalClasses.hide)):removeClass(modal,swalClasses.fade),show(modal),sweetContainer.style.overflowY="hidden",animationEndEvent&&!hasClass(modal,swalClasses.noanimation)?modal.addEventListener(animationEndEvent,function swalCloseEventFinished(){modal.removeEventListener(animationEndEvent,swalCloseEventFinished),sweetContainer.style.overflowY="auto"}):sweetContainer.style.overflowY="auto",addClass(sweetContainer,swalClasses.in),addClass(document.body,swalClasses.in),fixScrollbar(),iOSfix(),states.previousActiveElement=document.activeElement,null!==onComplete&&"function"==typeof onComplete&&onComplete(modal)},fixScrollbar=function(){null===states.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(states.previousBodyPadding=document.body.style.paddingRight,document.body.style.paddingRight=measureScrollbar()+"px")},undoScrollbar=function(){null!==states.previousBodyPadding&&(document.body.style.paddingRight=states.previousBodyPadding,states.previousBodyPadding=null)},iOSfix=function(){var iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(iOS&&!hasClass(document.body,swalClasses.iosfix)){var offset=document.body.scrollTop;document.body.style.top=offset*-1+"px",addClass(document.body,swalClasses.iosfix)}},undoIOSfix=function(){if(hasClass(document.body,swalClasses.iosfix)){var offset=parseInt(document.body.style.top,10);removeClass(document.body,swalClasses.iosfix),document.body.style.top="",document.body.scrollTop=offset*-1}},modalDependant=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(void 0===args[0])return console.error("SweetAlert2 expects at least 1 attribute!"),!1;var params=_extends({},modalParams);switch(_typeof(args[0])){case"string":params.title=args[0],params.text=args[1],params.type=args[2];break;case"object":_extends(params,args[0]),params.extraParams=args[0].extraParams,"email"===params.input&&null===params.inputValidator&&(params.inputValidator=function(email){return new Promise(function(resolve,reject){var emailRegex=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;emailRegex.test(email)?resolve():reject("Invalid email address")})});break;default:return console.error('SweetAlert2: Unexpected type of argument! Expected "string" or "object", got '+_typeof(args[0])),!1}setParameters(params);var modal=getModal();return new Promise(function(resolve,reject){params.timer&&(modal.timeout=setTimeout(function(){sweetAlert.closeModal(params.onClose),reject("timer")},params.timer));var getInput=function(inputType){switch(inputType=inputType||params.input){case"select":case"textarea":case"file":return getChildByClass(modal,swalClasses[inputType]);case"checkbox":return modal.querySelector("."+swalClasses.checkbox+" input");case"radio":return modal.querySelector("."+swalClasses.radio+" input:checked")||modal.querySelector("."+swalClasses.radio+" input:first-child");case"range":return modal.querySelector("."+swalClasses.range+" input");default:return getChildByClass(modal,swalClasses.input)}},getInputValue=function(){var input=getInput();if(!input)return null;switch(params.input){case"checkbox":return input.checked?1:0;case"radio":return input.checked?input.value:null;case"file":return input.files.length?input.files[0]:null;default:return params.inputAutoTrim?input.value.trim():input.value}};params.input&&setTimeout(function(){var input=getInput();input&&focusInput(input)},0);for(var confirm=function(value){params.showLoaderOnConfirm&&sweetAlert.showLoading(),params.preConfirm?params.preConfirm(value,params.extraParams).then(function(preConfirmValue){sweetAlert.closeModal(params.onClose),resolve(preConfirmValue||value)},function(error){sweetAlert.hideLoading(),error&&sweetAlert.showValidationError(error)}):(sweetAlert.closeModal(params.onClose),resolve(value))},onButtonEvent=function(event){var e=event||window.event,target=e.target||e.srcElement,confirmButton=getConfirmButton(),cancelButton=getCancelButton(),targetedConfirm=confirmButton===target||confirmButton.contains(target),targetedCancel=cancelButton===target||cancelButton.contains(target);switch(e.type){case"mouseover":case"mouseup":params.buttonsStyling&&(targetedConfirm?confirmButton.style.backgroundColor=colorLuminance(params.confirmButtonColor,-.1):targetedCancel&&(cancelButton.style.backgroundColor=colorLuminance(params.cancelButtonColor,-.1)));break;case"mouseout":params.buttonsStyling&&(targetedConfirm?confirmButton.style.backgroundColor=params.confirmButtonColor:targetedCancel&&(cancelButton.style.backgroundColor=params.cancelButtonColor));break;case"mousedown":params.buttonsStyling&&(targetedConfirm?confirmButton.style.backgroundColor=colorLuminance(params.confirmButtonColor,-.2):targetedCancel&&(cancelButton.style.backgroundColor=colorLuminance(params.cancelButtonColor,-.2)));break;case"click":targetedConfirm&&sweetAlert.isVisible()?params.input?!function(){var inputValue=getInputValue();params.inputValidator?(sweetAlert.disableInput(),params.inputValidator(inputValue,params.extraParams).then(function(){sweetAlert.enableInput(),confirm(inputValue)},function(error){sweetAlert.enableInput(),error&&sweetAlert.showValidationError(error)})):confirm(inputValue)}():confirm(!0):targetedCancel&&sweetAlert.isVisible()&&(sweetAlert.closeModal(params.onClose),reject("cancel"))}},buttons=modal.querySelectorAll("button"),i=0;i<buttons.length;i++)buttons[i].onclick=onButtonEvent,buttons[i].onmouseover=onButtonEvent,buttons[i].onmouseout=onButtonEvent,buttons[i].onmousedown=onButtonEvent;getCloseButton().onclick=function(){sweetAlert.closeModal(params.onClose),reject("close")},sweetContainer.onclick=function(e){e.target===sweetContainer&&params.allowOutsideClick&&(sweetAlert.closeModal(params.onClose),reject("overlay"))};var confirmButton=getConfirmButton(),cancelButton=getCancelButton();params.reverseButtons?confirmButton.parentNode.insertBefore(cancelButton,confirmButton):confirmButton.parentNode.insertBefore(confirmButton,cancelButton);var setFocus=function(index,increment){for(var focusableElements=getFocusableElements(params.focusCancel),_i2=0;_i2<focusableElements.length;_i2++){index+=increment,index===focusableElements.length?index=0:index===-1&&(index=focusableElements.length-1);var el=focusableElements[index];if(isVisible(el))return el.focus()}},handleKeyDown=function(event){var e=event||window.event,keyCode=e.keyCode||e.which;if([9,13,32,27].indexOf(keyCode)!==-1){for(var targetElement=e.target||e.srcElement,focusableElements=getFocusableElements(params.focusCancel),btnIndex=-1,_i3=0;_i3<focusableElements.length;_i3++)if(targetElement===focusableElements[_i3]){btnIndex=_i3;break}9===keyCode?(e.shiftKey?setFocus(btnIndex,-1):setFocus(btnIndex,1),e.stopPropagation(),e.preventDefault()):13===keyCode||32===keyCode?btnIndex===-1&&(params.focusCancel?fireClick(cancelButton,e):fireClick(confirmButton,e)):27===keyCode&&params.allowEscapeKey===!0&&(sweetAlert.closeModal(params.onClose),reject("esc"))}};states.previousWindowKeyDown=window.onkeydown,window.onkeydown=handleKeyDown,params.buttonsStyling&&(confirmButton.style.borderLeftColor=params.confirmButtonColor,confirmButton.style.borderRightColor=params.confirmButtonColor),sweetAlert.showLoading=sweetAlert.enableLoading=function(){show(getSpacer()),show(confirmButton,"inline-block"),addClass(confirmButton,swalClasses.loading),addClass(modal,swalClasses.loading),confirmButton.disabled=!0,cancelButton.disabled=!0},sweetAlert.hideLoading=sweetAlert.disableLoading=function(){params.showConfirmButton||(hide(confirmButton),params.showCancelButton||hide(getSpacer())),removeClass(confirmButton,swalClasses.loading),removeClass(modal,swalClasses.loading),confirmButton.disabled=!1,cancelButton.disabled=!1},sweetAlert.enableButtons=function(){confirmButton.disabled=!1,cancelButton.disabled=!1},sweetAlert.disableButtons=function(){confirmButton.disabled=!0,cancelButton.disabled=!0},sweetAlert.enableConfirmButton=function(){confirmButton.disabled=!1},sweetAlert.disableConfirmButton=function(){confirmButton.disabled=!0},sweetAlert.enableInput=function(){var input=getInput();if(!input)return!1;if("radio"===input.type)for(var radiosContainer=input.parentNode.parentNode,radios=radiosContainer.querySelectorAll("input"),_i4=0;_i4<radios.length;_i4++)radios[_i4].disabled=!1;else input.disabled=!1},sweetAlert.disableInput=function(){var input=getInput();if(!input)return!1;if(input&&"radio"===input.type)for(var radiosContainer=input.parentNode.parentNode,radios=radiosContainer.querySelectorAll("input"),_i5=0;_i5<radios.length;_i5++)radios[_i5].disabled=!0;else input.disabled=!0},sweetAlert.recalculateHeight=debounce(function(){var modal=getModal(),prevState=modal.style.display;modal.style.minHeight="",show(modal),modal.style.minHeight=modal.scrollHeight+1+"px",modal.style.display=prevState},50),sweetAlert.showValidationError=function(error){var validationError=getValidationError();validationError.innerHTML=error,show(validationError);var input=getInput();focusInput(input),addClass(input,swalClasses.inputerror)},sweetAlert.resetValidationError=function(){var validationError=getValidationError();hide(validationError),sweetAlert.recalculateHeight();var input=getInput();input&&removeClass(input,swalClasses.inputerror)},sweetAlert.getProgressSteps=function(){return params.progressSteps},sweetAlert.setProgressSteps=function(progressSteps){params.progressSteps=progressSteps,setParameters(params)},sweetAlert.showProgressSteps=function(){show(getProgressSteps())},sweetAlert.hideProgressSteps=function(){hide(getProgressSteps())},sweetAlert.enableButtons(),sweetAlert.hideLoading(),sweetAlert.resetValidationError();for(var inputTypes=["input","file","range","select","radio","checkbox","textarea"],input=void 0,_i6=0;_i6<inputTypes.length;_i6++){var inputClass=swalClasses[inputTypes[_i6]],inputContainer=getChildByClass(modal,inputClass);if(input=getInput(inputTypes[_i6])){for(var j in input.attributes)if(input.attributes.hasOwnProperty(j)){var attrName=input.attributes[j].name;"type"!==attrName&&"value"!==attrName&&input.removeAttribute(attrName)}for(var attr in params.inputAttributes)input.setAttribute(attr,params.inputAttributes[attr])}inputContainer.className=inputClass,params.inputClass&&addClass(inputContainer,params.inputClass),hide(inputContainer)}var populateInputOptions=void 0;!function(){switch(params.input){case"text":case"email":case"password":case"number":case"tel":input=getChildByClass(modal,swalClasses.input),input.value=params.inputValue,input.placeholder=params.inputPlaceholder,input.type=params.input,show(input);break;case"file":input=getChildByClass(modal,swalClasses.file),input.placeholder=params.inputPlaceholder,input.type=params.input,show(input);break;case"range":var range=getChildByClass(modal,swalClasses.range),rangeInput=range.querySelector("input"),rangeOutput=range.querySelector("output");rangeInput.value=params.inputValue,rangeInput.type=params.input,rangeOutput.value=params.inputValue,show(range);break;case"select":var select=getChildByClass(modal,swalClasses.select);if(select.innerHTML="",params.inputPlaceholder){var placeholder=document.createElement("option");placeholder.innerHTML=params.inputPlaceholder,placeholder.value="",placeholder.disabled=!0,placeholder.selected=!0,select.appendChild(placeholder)}populateInputOptions=function(inputOptions){for(var optionValue in inputOptions){var option=document.createElement("option");option.value=optionValue,option.innerHTML=inputOptions[optionValue],params.inputValue===optionValue&&(option.selected=!0),select.appendChild(option)}show(select),select.focus()};break;case"radio":var radio=getChildByClass(modal,swalClasses.radio);radio.innerHTML="",populateInputOptions=function(inputOptions){for(var radioValue in inputOptions){var id=1,radioInput=document.createElement("input"),radioLabel=document.createElement("label"),radioLabelSpan=document.createElement("span");radioInput.type="radio",radioInput.name=swalClasses.radio,radioInput.value=radioValue,radioInput.id=swalClasses.radio+"-"+id++,params.inputValue===radioValue&&(radioInput.checked=!0),radioLabelSpan.innerHTML=inputOptions[radioValue],radioLabel.appendChild(radioInput),radioLabel.appendChild(radioLabelSpan),radioLabel.for=radioInput.id,radio.appendChild(radioLabel)}show(radio);var radios=radio.querySelectorAll("input");radios.length&&radios[0].focus()};break;case"checkbox":var checkbox=getChildByClass(modal,swalClasses.checkbox),checkboxInput=getInput("checkbox");checkboxInput.type="checkbox",checkboxInput.value=1,checkboxInput.id=swalClasses.checkbox,checkboxInput.checked=Boolean(params.inputValue);var label=checkbox.getElementsByTagName("span");label.length&&checkbox.removeChild(label[0]),label=document.createElement("span"),label.innerHTML=params.inputPlaceholder,checkbox.appendChild(label),show(checkbox);break;case"textarea":var textarea=getChildByClass(modal,swalClasses.textarea);textarea.value=params.inputValue,textarea.placeholder=params.inputPlaceholder,show(textarea);break;case null:break;default:console.error('SweetAlert2: Unexpected type of input! Expected "text", "email", "password", "select", "checkbox", "textarea" or "file", got "'+params.input+'"')}}(),"select"!==params.input&&"radio"!==params.input||(params.inputOptions instanceof Promise?(sweetAlert.showLoading(),params.inputOptions.then(function(inputOptions){sweetAlert.hideLoading(),populateInputOptions(inputOptions)})):"object"===_typeof(params.inputOptions)?populateInputOptions(params.inputOptions):console.error("SweetAlert2: Unexpected type of inputOptions! Expected object or Promise, got "+_typeof(params.inputOptions))),openModal(params.animation,params.onOpen),setFocus(-1,1),sweetContainer.scrollTop=0,"undefined"==typeof MutationObserver||swal2Observer||(swal2Observer=new MutationObserver(sweetAlert.recalculateHeight),swal2Observer.observe(modal,{childList:!0,characterData:!0,subtree:!0}))})},sweetAlert=function sweetAlert(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return sweetAlert.isVisible()&&sweetAlert.close(),modalDependant.apply(void 0,args)};return sweetAlert.isVisible=function(){var modal=getModal();return isVisible(modal)},sweetAlert.queue=function(steps){queue=steps;var modal=getModal(),resetQueue=function(){queue=[],modal.removeAttribute("data-queue-step")},queueResult=[];return new Promise(function(resolve,reject){!function step(i,callback){i<queue.length?(modal.setAttribute("data-queue-step",i),sweetAlert(queue[i]).then(function(result){queueResult.push(result),step(i+1,callback)},function(dismiss){resetQueue(),reject(dismiss)})):(resetQueue(),resolve(queueResult))}(0)})},sweetAlert.getQueueStep=function(){return getModal().getAttribute("data-queue-step")},sweetAlert.insertQueueStep=function(step,index){return index&&index<queue.length?queue.splice(index,0,step):queue.push(step)},sweetAlert.deleteQueueStep=function(index){"undefined"!=typeof queue[index]&&queue.splice(index,1)},sweetAlert.close=sweetAlert.closeModal=function(onComplete){var modal=getModal();removeClass(modal,swalClasses.show),addClass(modal,swalClasses.hide);var successIcon=modal.querySelector("."+swalClasses.icon+"."+iconTypes.success);removeClass(successIcon,"animate"),removeClass(successIcon.querySelector(".tip"),"animate-success-tip"),removeClass(successIcon.querySelector(".long"),"animate-success-long");var errorIcon=modal.querySelector("."+swalClasses.icon+"."+iconTypes.error);removeClass(errorIcon,"animate-error-icon"),removeClass(errorIcon.querySelector(".x-mark"),"animate-x-mark");var warningIcon=modal.querySelector("."+swalClasses.icon+"."+iconTypes.warning);removeClass(warningIcon,"pulse-warning"),resetPrevState();var hideModalAndResetState=function(){hide(modal),modal.style.minHeight="",removeClass(sweetContainer,swalClasses.in),removeClass(document.body,swalClasses.in),undoScrollbar(),undoIOSfix()};animationEndEvent&&!hasClass(modal,swalClasses.noanimation)?modal.addEventListener(animationEndEvent,function swalCloseEventFinished(){modal.removeEventListener(animationEndEvent,swalCloseEventFinished),hasClass(modal,swalClasses.hide)&&hideModalAndResetState()}):hideModalAndResetState(),null!==onComplete&&"function"==typeof onComplete&&onComplete(modal)},sweetAlert.clickConfirm=function(){return getConfirmButton().click()},sweetAlert.clickCancel=function(){return getCancelButton().click()},sweetAlert.setDefaults=function(userParams){if(!userParams||"object"!==("undefined"==typeof userParams?"undefined":_typeof(userParams)))return console.error("SweetAlert2: the argument for setDefaults() is required and has to be a object");
for(var param in userParams)defaultParams.hasOwnProperty(param)||"extraParams"===param||(console.warn('SweetAlert2: Unknown parameter "'+param+'"'),delete userParams[param]);_extends(modalParams,userParams)},sweetAlert.resetDefaults=function(){modalParams=_extends({},defaultParams)},sweetAlert.noop=function(){},sweetAlert.version="6.2.1",sweetAlert}),window.Sweetalert2&&(window.sweetAlert=window.swal=window.Sweetalert2)},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _datacenterController=__webpack_require__(13),_datacenterController2=_interopRequireDefault(_datacenterController),_datacenterService=__webpack_require__(18),_datacenterService2=_interopRequireDefault(_datacenterService);exports.default=angular.module("DatacenterModule",[_datacenterController2.default,_datacenterService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _supplierService=(__webpack_require__(15),__webpack_require__(16)),_supplierService2=_interopRequireDefault(_supplierService),_systemService=__webpack_require__(17),_systemService2=_interopRequireDefault(_systemService);exports.default=angular.module("DatacenterControllerModule",[_supplierService2.default,_systemService2.default]).controller("DatacenterListController",["$scope","$rootScope","DatacenterService","DatacenterStateService","$stateParams","DatacenterRegionService","SupplierService","UtilService","$uibModal",function($scope,$rootScope,datacenterService,datacenterStateService,$stateParams,datacenterRegionService,supplierService,utilService,$uibModal){$scope.editDatacenterForm=!1,$scope.datacenter={},$scope.search={searchText:"",DCstate:{},DCstateTags:[],DCarea:{},DCareaTags:[],Supplier:{},DCsupplierTags:[],startTime:"",EndTime:""},$scope.action={showAddDatacenter:function(){datacenterStateService.list({},function(response){$rootScope.datacenterStateList=response.data}),datacenterRegionService.list({enable:1},function(response){$rootScope.datacenterRegionList=response.data}),supplierService.listObject({enable:1},function(response){$rootScope.datacenterSupplierList=response.rows});var modalInstance=$uibModal.open({templateUrl:"add_datacenter.html",controller:"DatacenterAddController"});modalInstance.result.then(function(result){var params={dcname:result.dcname,stateId:result.datacenterStateSelected.Id,dcaddress:result.address,regionId:result.datacenterRegionSelected.Id,comment:result.comment};angular.isDefined(result.datacenterSupplierSelected)&&(params.supplierId=result.datacenterSupplierSelected.Id),datacenterService.add(params,{},function(response){utilService.alert(response.msg),$scope.datacenterTable.state.refresh()})})},showbaidumap:function(){$("#addDcStatemap").modal("show")},showState:function(){$("#datacenter_state_list").modal("show")},showRegion:function(){$("#datacenter_region_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",datacenterService.listObject({enable:0},function(response){$scope.datacenterTable.options.data=response.rows})},showbtnback:function(){$scope.datacenter_recycle=!$scope.datacenter_recycle},showAdvancedSearch:function(){$("#advancedSearch").modal("show")},operateDatacenterFormatter:function(value,row,index){if(row.Enable)return['<a id="datacenter_editor" href="javascript:void(0)">','<ul class="list-unstyled" style="display: inline-block; margin-right:20px;"><li><i class="glyphicon glyphicon-pencil"></i></li><li>编辑</li></ul>',"</a>","&nbsp",'<a id="datacenter_remove" href="javascript:void(0)">','<ul class="list-unstyled" style="display: inline-block; margin-right:20px;"><li><i class="glyphicon glyphicon-trash"></i></li><li>删除</li></ul>',"</a>"].join("")},operateDcnameFormatter:function(value,row,index){return $scope.hardDelete?row.Dcname:['<a id="datacenter_editor2" style="text-decoration:none;cursor:pointer">'+row.Dcname+"</a>"]},hideSearch:function(){$scope.screenDatacenterForm=!1,$scope.isActive=!1},showSearch:function(){$scope.isActive=!0,$scope.screenDatacenterForm=!0,datacenterStateService.list({},function(response){$scope.datacenterStateList=response.data}),datacenterRegionService.list({},function(response){$scope.datacenterRegionList=response.data}),supplierService.list({},function(response){$scope.datacenterSupplierList=response.data})},hideeditDatacenter:function(){$scope.editDatacenterForm=!1,$scope.isActive=!1},dcremove:function(value,row,index){var params={dcid:$scope.datacenter.editDcId};utilService.swalConfirm("确认删除数据中心?",function(result){result&&datacenterService.delete(params,{},function(response){utilService.alert(response.msg),$scope.datacenterTable.state.refresh(),$scope.editDatacenterForm=!1,$scope.isActive=!1})})},updateDatacenter:function(){var params={dcid:$scope.datacenter.editDcId,dcname:$scope.datacenter.editDcName,stateId:$scope.datacenter.editStateSelected,dcaddress:$scope.datacenter.editDcAddress,supplierId:$scope.datacenter.editSupplierSelected,regionId:$scope.datacenter.editRegionSelected,comment:$scope.datacenter.comment};datacenterService.update(params,{},function(response){utilService.alert(response.msg),$scope.datacenterTable.state.refresh(),$scope.editDatacenterForm=!1,$scope.isActive=!1})},Dcsearch:function(){$scope.search.DCstateTags=[],$scope.search.DCareaTags=[],$scope.search.DCsupplierTags=[];for(var key in $scope.search.DCstate)$scope.search.DCstate[key]&&$scope.search.DCstateTags.push(key);for(var key in $scope.search.DCarea)$scope.search.DCarea[key]&&$scope.search.DCareaTags.push(key);for(var key in $scope.search.Supplier)$scope.search.Supplier[key]&&$scope.search.DCsupplierTags.push(key);var params={dcname:$scope.search.searchText,state:$scope.search.DCstateTags.toString(),region:$scope.search.DCareaTags.toString(),supplier:$scope.search.DCsupplierTags.toString(),start_time:$scope.search.startTime,end_time:$scope.search.EndTime,enable:!0};datacenterService.list(params).$promise.then(function(response){$scope.datacenterTable.options.data=response.data},function(error){console.log(error)})},clearAll:function(){$scope.search={searchText:"",DCstate:{},DCarea:{},Supplier:{},startTime:"",EndTime:""}}},$scope.datacenterTable={options:{idField:"Dcid",data:[],striped:!0,pagination:!0,locale:"zh_CN",showTrash:!0,showSettings:!0,showRefresh:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,searchDisplay:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"Dcname",title:"数据中心名称",sortable:!0,formatter:$scope.action.operateDcnameFormatter,events:{"click #datacenter_editor2":function(e,value,row,index){datacenterStateService.list({},function(response){$scope.datacenterStateList=response.data}),datacenterRegionService.list({enable:1},function(response){$rootScope.datacenterRegionList=response.data}),supplierService.listObject({enable:1},function(response){$rootScope.datacenterSupplierList=response.rows}),$scope.editDatacenterForm=!0,$scope.isActive=!0,$scope.datacenter.editSupplierSelected={},row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.datacenter.editDcStatus="",$scope.datacenter.editDcArea="",$scope.datacenter.editSupplier="",$scope.datacenter.editStateSelected=row.State.Id,$scope.datacenter.editRegionSelected=row.Region.Id,$scope.datacenter.editDcId=row.Dcid,$scope.datacenter.editDcName=row.Dcname,$scope.datacenter.editDcAddress=row.Dcaddress,$scope.datacenter.editComment=row.Comment,null!==row.Supplier&&($scope.datacenter.editSupplierSelected=row.Supplier.Id)})}}},{field:"Region",title:"数据中心区域",sortable:!0,formatter:function(value,row,index){return null!==value?value.RegionName:""}},{field:"Dcaddress",title:"数据中心地址",sortable:!0},{field:"Supplier",title:"数据中心供应商",sortable:!0,formatter:function(value,row,index){return null!==value?value.Supplier:""}},{field:"Comment",visible:!1,title:"备注"},{field:"State",title:"数据中心状态",sortable:!0,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}}]},state:{searchText:"",searchFilter:!0,refresh:function(){datacenterService.listObject({enable:1},function(response){$scope.datacenterTable.options.data=response.rows})},query:function(){datacenterService.listObject({search:$scope.datacenterTable.state.searchText,enable:1},function(response){$scope.datacenterTable.options.data=response.rows})},advancedSearch:function(){},removeSelector:"#batch_remove",id:"Dcid",selections:[],deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,index){ids[index]=val.Dcid});var params={dcid:ids.toString()};utilService.swalConfirm("确认删除数据中心?",function(result){result&&datacenterService.delete(params,{},function(response){utilService.alert(response.msg),$scope.datacenterTable.state.refresh()})})},settings:function(){$uibModal.open({templateUrl:"datacenter_settings.html",controller:"datacenterSettingsController"})}}},$rootScope.$on("childEmit",function(event,data){$scope.datacenterTable.state.query()})}]).controller("DatacenterAddController",["$scope","$uibModalInstance","DatacenterStateService","DatacenterRegionService","UtilService","$rootScope","$http","$uibModal","StateColorService","DatacenterService",function($scope,$uibModalInstance,datacenterStateService,datacenterRegionService,utilService,$rootScope,$http,$uibModal,stateColorService,datacenterService){$scope.datacenter_dcState=!0,$scope.datacenter_addState=!0,$scope.datacenter={addDatacenterCancel:function(){$uibModalInstance.dismiss()},addDatacenter:function(){$uibModalInstance.close($scope.datacenter)},showAddDatacenterRegions:function(){$scope.dcRegion=[],$("#addDcRegion").modal("show")},refresh:function(){datacenterStateService.list({},function(response){$scope.DCstate=response.data}),datacenterRegionService.list({enable:1},function(response){$scope.DCarea=response.data})},addDcRegion:function(){var params={dcRegion:$scope.dcRegion};datacenterRegionService.add(params,{},function(response){$("#addDcRegion").modal("hide"),utilService.alert(response.msg),datacenterRegionService.list({},function(response){$scope.datacenterRegionList=response.data})})},showAddDatacenteraddress:function(){$("#addDcAddress").modal("show")},showAddDatacenterStates:function(){$scope.DcState=[],$("#addDcState").modal("show"),stateColorService.list({},function(response){$scope.defaultColors=response.data,$scope.datacenter.refresh()})},addmore:function(){$scope.datacenter.addMore=!$scope.datacenter.addMore},addDcState:function(){var params={dcState:$scope.DcState,color:$scope.selectedColor};datacenterStateService.add(params,{},function(response){$("#addDcState").modal("hide"),utilService.alert(response.msg),datacenterStateService.list({},function(response){$scope.datacenterStateList=response.data})}),$scope.$broadcast("updateStateList",function(){return{name:"talkToOne",data:[1,2,3]}})},testifyDcname:function(){if($scope.datacenter.dcname){var params={dcname:$scope.datacenter.dcname,enable:!0};datacenterService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此数据中心已存在！"),$scope.datacenter.dcname="",$scope.datacenter.refresh())})}}}}]).controller("datacenterSettingsController",["$scope","$rootScope","$uibModalInstance","StateColorService","DatacenterStateService","UtilService","DatacenterRegionService",function($scope,$rootScope,$uibModalInstance,stateColorService,datacenterStateService,utilService,datacenterRegionService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},refresh:function(){datacenterStateService.list({},function(response){$scope.DCstate=response.data}),datacenterRegionService.list({enable:1},function(response){$scope.DCarea=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={dcState:$scope.addDcState,color:$scope.selectedColor};datacenterStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.showAddColors=!1,$scope.settings.refresh(),datacenterStateService.list({},function(response){$scope.DCstate=response.data})})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editDcStateId=state.Id,$scope.DcState=state.State,$scope.currentColor=state.Color},editSave:function(){var params={dcStateId:$scope.editDcStateId,dcState:$scope.DcState,color:$scope.currentColor};datacenterStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.showEditColors=!1,$scope.settings.refresh(),$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={dcStateId:state.Id.toString()};datacenterStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.datacenterStateList=response.data,datacenterStateService.list({},function(response){$scope.DCstate=response.data})})},deleteArea:function(area){var params={dcRegionId:area.Id.toString()};datacenterRegionService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh()})},addArea:function(){$scope.showAddColors=!0},saveArea:function(){var params={dcRegion:$scope.addDcArea.toString()};datacenterRegionService.add(params,{},function(response){utilService.alert(response.msg),$scope.showAddColors=!1,$scope.settings.refresh(),datacenterRegionService.list({},function(response){$scope.DCarea=response.data})})},editArea:function(area){$scope.showEditColors=!0,$scope.DcArea=area.RegionName,$scope.editDcAreaId=area.Id},editAreaSave:function(){var params={dcRegionId:$scope.editDcAreaId,dcRegion:$scope.DcArea};datacenterRegionService.update(params,{},function(response){utilService.alert(response.msg),$scope.showEditColors=!1,$scope.settings.refresh(),$rootScope.$emit("childEmit")})}},$scope.settings.init(),$scope.settings.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_14__},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cmdb={};cmdb.endpoint="",cmdb.uri={cpu:cmdb.endpoint+"/api/cpu/count",harddisk:cmdb.endpoint+"/api/harddisk",memory:cmdb.endpoint+"/api/memory/count",memorySwap:cmdb.endpoint+"/api/memory/countSwap",networkadapter:cmdb.endpoint+"/api/networkadapter",cpuByServerId:cmdb.endpoint+"/api/cpu/query",memoryByServerId:cmdb.endpoint+"/api/memory/query",hardDiskByServerId:cmdb.endpoint+"/api/harddisk/query",networkadapterByServerId:cmdb.endpoint+"/api/networkadapter/query",portByServerId:cmdb.endpoint+"/api/server/port",host:cmdb.endpoint+"/api/server/host",login:cmdb.endpoint+"/api/login",logout:cmdb.endpoint+"/api/logout",user:cmdb.endpoint+"/api/user",datacenter:cmdb.endpoint+"/api/datacenter",datacenterValidName:cmdb.endpoint+"/api/datacenter/valid",datacenterState:cmdb.endpoint+"/api/state/datacenter",datacenterRegion:cmdb.endpoint+"/api/datacenter/region",roomState:cmdb.endpoint+"/api/state/room",roomById:cmdb.endpoint+"/api/room",app:cmdb.endpoint+"/api/app",appLevel:cmdb.endpoint+"/api/app/level",room:cmdb.endpoint+"/api/room",rack:cmdb.endpoint+"/api/rack",rackState:cmdb.endpoint+"/api/state/rack",bandwidth:cmdb.endpoint+"/api/networkbandwidth",isp:cmdb.endpoint+"/api/networkbandwidth/isp",bandwidthState:cmdb.endpoint+"/api/state/networkbandwidth",hardware:cmdb.endpoint+"/api/hardware",hardwareState:cmdb.endpoint+"/api/state/hardware",hardwareType:cmdb.endpoint+"/api/hardware/type",server:cmdb.endpoint+"/api/server",serverState:cmdb.endpoint+"/api/state/server",serverManufacturer:cmdb.endpoint+"/api/server/manufacturer",download:cmdb.endpoint+"/api/download",dnspoddomain:cmdb.endpoint+"/api/dnspoddomain",dnspoddomainState:cmdb.endpoint+"/api/state/dnspoddomain",dnspoddomainGrade:cmdb.endpoint+"/api/dnspoddomain/grade",supplier:cmdb.endpoint+"/api/supplier",agreement:cmdb.endpoint+"/api/agreement",agreementState:cmdb.endpoint+"/api/agreementState",role:cmdb.endpoint+"/api/role",roleEdit:cmdb.endpoint+"/api/editrolemenus",subnet:cmdb.endpoint+"/api/subnet",ip_address:cmdb.endpoint+"/api/ip",ip_update:cmdb.endpoint+"/api/ip/update",ip_monitor:cmdb.endpoint+"/api/ip/monitor",import:cmdb.endpoint+"/api/import",uploadAgreement:cmdb.endpoint+"/api/uploadagreement",readAgreement:cmdb.endpoint+"/api/uploadagreement",systememail:cmdb.endpoint+"/api/systememail",systemlog:cmdb.endpoint+"/api/systemlog",systemcloud:cmdb.endpoint+"/api/ResourcePlatformAccount",aliyun:cmdb.endpoint+"/api/aliyun",aws:cmdb.endpoint+"/api/aws",vcenter:cmdb.endpoint+"/api/vcenter",syncvcenter:cmdb.endpoint+"/api/SyncVcenter",syncaliyun:cmdb.endpoint+"/api/SyncAliyun",syncaws:cmdb.endpoint+"/api/SyncAws",accesskey:cmdb.endpoint+"/api/accesskey",assets:cmdb.endpoint+"/api/assets",assertsQuery:cmdb.endpoint+"/api/asserts/query",assertsInstance:cmdb.endpoint+"/api/asserts/instance",systemPanel:cmdb.endpoint+"/api/panel",ci:cmdb.endpoint+"/api/ci",resourcetree:cmdb.endpoint+"/api/resourcetree",globalSearch:cmdb.endpoint+"/api/search",menu:{v1:cmdb.endpoint+"/api/menus",v2:cmdb.endpoint+"/api/menus/v2"},menuObject:cmdb.endpoint+"/api/menus/object",line:cmdb.endpoint+"/api/topo/line",node:cmdb.endpoint+"/api/topo/node",view:cmdb.endpoint+"/api/topo/view",statecolor:cmdb.endpoint+"/api/statecolor",report:{resource:{statistics:cmdb.endpoint+"/api/report/resource/statistics"},device:{performance:cmdb.endpoint+"/api/report/device/performance"},financial:{costDetail:cmdb.endpoint+"/api/report/financial/detail",costTrend:cmdb.endpoint+"/api/report/financial/trend",bCostCompared:cmdb.endpoint+"/api/report/financial/bcc",rCostCompared:cmdb.endpoint+"/api/report/financial/rcc"}},change:{count:cmdb.endpoint+"/api/change"},apicall:{count:cmdb.endpoint+"/api/apicall"},dashboard:{count:cmdb.endpoint+"/api/dashboard/count",usage:cmdb.endpoint+"/api/dashboard/usage",uposition:cmdb.endpoint+"/api/dashboard/uposition",device:cmdb.endpoint+"/api/dashboard/device",countByMonth:cmdb.endpoint+"/api/dashboard/countByMonth"}},cmdb.v2={datacenter:cmdb.endpoint+"/api/v2/datacenter"},cmdb.requestType={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE"},exports.cmdb=cmdb},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("SupplierServiceModule",[]).factory("SupplierService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.supplier,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("SystemServiceModule",["ngResource"]).factory("MenumanageService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.menu,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("SystemlogService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.systemlog,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{sort:"CreateTime",order:"desc"},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("SystemcloudService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.systemcloud,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("SynVcenterService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.syncvcenter,{timestamp:utilService.getTimestamp()},{add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("SynAliyunService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.syncaliyun,{timestamp:utilService.getTimestamp()},{add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("SynAwsService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.syncaws,{timestamp:utilService.getTimestamp()},{add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("SynZabbixService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.synczabbix,{timestamp:utilService.getTimestamp()},{add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("EmailService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.systememail,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("AccesskeyService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.accesskey,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{format:"json"},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("StateColorService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.statecolor,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("DatacenterServiceModule",["ngResource"]).factory("DatacenterService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.datacenter,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"dcid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("DatacenterServiceV2",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.v2.datacenter,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,headers:$rootScope.authorization}})}]).factory("DatacenterStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.datacenterState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("DatacenterRegionService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.datacenterRegion,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _dashboardController=__webpack_require__(20),_dashboardController2=_interopRequireDefault(_dashboardController),_dashboardService=__webpack_require__(21),_dashboardService2=_interopRequireDefault(_dashboardService);exports.default=angular.module("DashboardModule",[_dashboardController2.default,_dashboardService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.default=angular.module("DashboardControllerModule",[]).controller("DashboardController",["$scope","$timeout","$state","$rootScope","DashboardService","ChangeRecordService","ApiCallService","UpositionService","DeviceService","CountByMonthService","DatacenterService",function($scope,$timeout,$state,$rootScope,dashboardService,ChangeRecordService,ApiCallService,UpositionService,DeviceService,CountByMonthService,DatacenterService){$rootScope.activeDashboard=$state.current.name;var max=-(1/0),datacenterMapOption={backgroundColor:"#fff",title:{text:"数据中心分布地图",subtext:"",left:"center",top:"top",textStyle:{color:"#fff"}},tooltip:{trigger:"item",enterable:"true",backgroundColor:"#fff",borderWidth:"1",borderColor:"#20a0ff",padding:[5,10,5,10],textStyle:{color:"#333",textAglin:"center"},formatter:function(params,ticket,callback){return void 0===_typeof(params.name)?"未知":params.name+"<br/>"+params.data.rackNum+"机柜<br/>"}},visualMap:{show:!1,min:0,max:max,inRange:{symbolSize:[6,60]}},geo:{name:"数据中心地图",type:"map",map:"world",roam:!0,label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#E3F0FE",borderColor:"#a8e4ff"},emphasis:{areaColor:"#A5D4FD"}}},series:[{type:"scatter",coordinateSystem:"geo",data:[]}]},datacenterMapGraph=echarts.init(document.getElementById("datacenterMap"));window.addEventListener("resize",function(){datacenterMapGraph.resize()}),DatacenterService.listObject({enable:1},function(response){void 0!==_typeof(response.rows)&&(angular.forEach(response.rows,function(val,index){var dcPoint={name:val.Dcname,value:[10*index,5*index],label:{emphasis:{position:"right",show:!0}},color:"red",itemStyle:{normal:{color:"#eea638"}},rackNum:"1000"};datacenterMapOption.series[0].data.push(dcPoint)}),datacenterMapGraph.setOption(datacenterMapOption))});var CountByMonthOption={title:{text:"资源信息",subtextStyle:{color:"#99a9bf",fontSize:13,textAlign:"right"}},color:["#FA454D","#2ECF6A","#20a0ff","#F4B939"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},itemStyle:{emphasis:{barBorderRadius:6},normal:{barBorderRadius:6}},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[]},CountByMonthGraph=echarts.init(document.getElementById("countByMonthGraph"));window.addEventListener("resize",function(){CountByMonthGraph.resize()}),CountByMonthService.query({},{},function(response){CountByMonthOption.legend.data=response.legend,CountByMonthOption.series=response.series,CountByMonthOption.xAxis[0].data=response.xAxis,CountByMonthGraph.setOption(CountByMonthOption)}),$scope.options=[{name:"一周以内",value:"week"},{name:"月",value:"month"},{name:"天",value:"day"}];var changeRecordGraphOption={color:["#FA454D","#F4B939","#2ECF6A"],title:{text:"设备变更次数",textStyle:{x:"left",fontSize:13},subtextStyle:{color:"#99a9bf",fontSize:13,textAlign:"right"}},tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},lineStyle:{normal:{width:1}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},changeRecordGraph=echarts.init(document.getElementById("changeRecord"));changeRecordGraph.setOption(changeRecordGraphOption),window.addEventListener("resize",function(){changeRecordGraph.resize()}),$scope.updateChangeRecordTime=function(updateChangeRecordTime){ChangeRecordService.query({time:updateChangeRecordTime},function(response){changeRecordGraphOption.xAxis.data=response.xaxis,changeRecordGraphOption.series=response.series,changeRecordGraphOption.legend.data=response.legend,changeRecordGraph.setOption(changeRecordGraphOption)})},$scope.updateChangeRecordTime($scope.options[0].value);var apiCallGraphOption={color:["#FA454D","#2ECF6A"],title:{text:"API调用次数",textStyle:{x:"left",fontSize:13},subtextStyle:{color:"#99A9BF",fontSize:13,textAlign:"right"}},tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]},apiCallGraph=echarts.init(document.getElementById("apiCall"));window.addEventListener("resize",function(){apiCallGraph.resize()}),$scope.updateApiCallTime=function(apiCallTime){ApiCallService.query({time:apiCallTime},function(response){apiCallGraphOption.xAxis.data=response.xaxis,apiCallGraphOption.series=response.series,apiCallGraphOption.legend.data=response.legend,apiCallGraph.setOption(apiCallGraphOption)})},$scope.updateApiCallTime($scope.options[0].value),dashboardService.list({},{},function(response){$scope.reports={datacenter:response.datacenter,rack:response.rack,ip:response.ip,app:response.app}});var uPositionOption={title:{text:"数据中心U位数据",subAlign:"right",textStyle:{x:"left",fontSize:13},subtextStyle:{color:"#C9CDDC",fontSize:13,textAlign:"right"}},color:["#FA454D","#F4B939","#2ECF6A"],
tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{itemSize:10,iconStyle:{itemSize:10}},legend:{orient:"vertical",x:"left",icon:"circle",bottom:"20",data:[]},series:[{name:"数据中心U位数据",type:"pie",radius:["40%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center",color:"red"},emphasis:{show:!0,textStyle:{fontSize:"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1,color:"red"}},data:[]}]},uPositionReport=echarts.init(document.getElementById("uPositionReport"));window.addEventListener("resize",function(){uPositionReport.resize()}),UpositionService.query({},{},function(response){uPositionOption.legend.data=response.legend,uPositionOption.series[0].data=response.series,uPositionReport.setOption(uPositionOption)});var deviceOption={title:{text:"设备数量对比",subAlign:"right",textStyle:{x:"left",fontSize:13},subtextStyle:{color:"#C9CDDC",fontSize:13,textAlign:"right"}},color:["#FA454D","#F4B939","#2ECF6A"],tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},toolbox:{itemSize:10,iconStyle:{itemSize:10}},legend:{orient:"vertical",x:"left",icon:"circle",bottom:"20",data:[]},series:[{name:"数据中心设备",type:"pie",radius:["40%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center",color:"red"},emphasis:{show:!0,textStyle:{fontSize:"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1,color:"red"}},data:[]}]},deviceReport=echarts.init(document.getElementById("deviceReport"));window.addEventListener("resize",function(){deviceReport.resize()}),DeviceService.query({},{},function(response){deviceOption.legend.data=response.legend,deviceOption.series[0].data=response.series,deviceReport.setOption(deviceOption)})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("DashboardServiceModule",["ngResource"]).factory("DashboardService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dashboard.count,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("ChangeRecordService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.change.count,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,headers:$rootScope.authorization}})}]).factory("ApiCallService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.apicall.count,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,headers:$rootScope.authorization}})}]).factory("UpositionService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dashboard.uposition,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,headers:$rootScope.authorization}})}]).factory("DeviceService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dashboard.device,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,headers:$rootScope.authorization}})}]).factory("CountByMonthService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dashboard.countByMonth,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _agreementController=__webpack_require__(23),_agreementController2=_interopRequireDefault(_agreementController),_agreementDirective=__webpack_require__(24),_agreementDirective2=_interopRequireDefault(_agreementDirective),_agreementService=__webpack_require__(25),_agreementService2=_interopRequireDefault(_agreementService);exports.default=angular.module("AgreementModule",[_agreementController2.default,_agreementService2.default,_agreementDirective2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("AgreementControllerModule",["angularFileUpload"]).controller("AgreementListController",["$scope","$rootScope","$uibModal","AgreementService","UtilService","AgreementStateService","$window","$state","$location",function($scope,$rootScope,$uibModal,agreementService,utilService,agreementStateService,$window,$state,$location){$rootScope.hardDelete=!1,$scope.action={showAddAgreement:function(){var modalInstance=$uibModal.open({templateUrl:"add_agreement_dialog.html",controller:"AgreementAddController"});modalInstance.result.then(function(agreement){var params={agreementName:agreement.agreementName,agreementNo:agreement.agreementNo,agreementPrice:agreement.agreementPrice,agreementSignDate:agreement.agreementSignDate,agreementStartDate:agreement.agreementStartDate,agreementStopDate:agreement.agreementStopDate,agreementSigner:agreement.agreementSigner,agreementPath:agreement.agreementPath,stateId:agreement.agreementStateSelected.Id.Id,supplierId:agreement.supplierSelected.Id.Id,comment:agreement.comment};agreementService.add(params,{},function(response){utilService.alert(response.msg),$scope.agreementTable.state.refresh()},function(error){utilService.alert("添加合同失败,请重新输入！")})})},operateAgreementFormatter:function(value,row,index){return row.Enable?['<a title="编辑" class="label label-success" style="padding:3px 6px 3px 6px" id="agreement_editor">','<i class="glyphicon glyphicon-edit"></i>',"&nbsp;编辑","</a>","&nbsp",'<a title="删除" class="label label-warning" style="padding:3px 6px 3px 6px"id="agreement_remove">','<i class="glyphicon glyphicon-remove"></i>',"&nbsp;软删除","</a>","&nbsp",'<a id="agreement_preview" title="合同预览" id="agreement_preview" class="label label-danger" style="padding:3px 6px 3px 6px">','<i class="fa fa-eye"></i>',"&nbsp;预览","</a>"].join(""):['<a title="恢复" class="label label-info" style="padding:3px 6px 3px 6px" id="agreement_recovery">','<i class="glyphicon glyphicon-edit"></i>',"&nbsp;恢复","</a>","&nbsp",'<a title="硬删除" class="label label-danger" style="padding:3px 6px 3px 6px"id="agreement_hard_delete">','<i class="glyphicon glyphicon-remove"></i>',"&nbsp;硬删除","</a>"].join("")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",agreementService.listObject({enable:0},function(response){$scope.agreementTable.options.data=response.rows})},showbtnback:function(){$scope.agreementTable_recycle=!$scope.agreementTable_recycle},agreementBatchRemove:function(){var ids=$scope.agreementTable.state.selections,params={agreementId:ids.toString()};$scope.hardDelete?(params={dcid:ids.toString(),hardDelete:!0},utilService.swalConfirm("确认删除合同?",function(result){result&&agreementService.delete(params,{},function(response){utilService.alert(response.msg),agreementService.listObject({enable:0},function(response){$scope.agreementTable.options.data=response.rows})})})):utilService.swalConfirm("确认删除合同?",function(result){result&&agreementService.delete(params,{},function(response){utilService.alert(response.msg),$scope.agreementTable.state.refresh()})})},showState:function(){$uibModal.open({templateUrl:"agreementState_dialog.html",controller:"AgreementStateListController"})}},$scope.agreementTable={options:{idField:"AgreementId",toolbar:"#agreement_toolbar",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,pageNumber:1,pageSize:10,queryParamsType:"limit",showPaginationSwitch:!1,pageList:[5,10,25],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{title:"合同名称",field:"AgreementName",sortable:!0},{field:"AgreementNo",title:"合同编号"},{field:"AgreementPrice",title:"合同金额"},{field:"AgreementSignDate",title:"合同签署日期"},{field:"AgreementStartDate",title:"合同开始日期"},{field:"AgreementStopDate",title:"合同结束日期"},{field:"AgreementSigner",title:"签署人",sortable:!0},{field:"AgreementPath",title:"合同路径",formatter:function(value,row,index){return value?value:""}},{field:"State",title:"合同状态",sortable:!0,formatter:function(value,row,index){return null!==value?value.State:""}},{field:"Supplier",title:"供应商",sortable:!0,formatter:function(value,row,index){return value?value.Supplier:""}},{field:"Comment",title:"备注"},{field:"Operate",title:"操作",formatter:$scope.action.operateAgreementFormatter,events:{"click #agreement_editor":function(e,value,_row,index){if(_row instanceof Object&&null!==_row){var modalInstance=$uibModal.open({templateUrl:"edit_agreement_dialog.html",controller:"AgreementEditController",resolve:{row:function(){return _row}}});modalInstance.result.then(function(result){var params={agreementId:result.editAgreementId,agreementName:result.editAgreementName,agreementNo:result.editAgreementNo,agreementPrice:result.editAgreementPrice,agreementSignDate:result.editAgreementSignDate,agreementStartDate:result.editAgreementStartDate,agreementStopDate:result.editAgreementStopDate,agreementSigner:result.editAgreementSigner,agreementPath:result.editAgreementPath,stateId:result.editAgreementStateSelected,supplierId:result.editSupplierSelected,comment:result.editComment};agreementService.update(params,{},function(response){utilService.alert(response.msg),$scope.agreementTable.state.refresh()})})}},"click #agreement_remove":function(e,value,row,index){var params={agreementId:row.AgreementId};utilService.swalConfirm("确认删除合同?",function(result){result&&agreementService.delete(params,{},function(response){utilService.alert(response.msg),$scope.agreementTable.state.refresh()})})},"click #agreement_recovery":function(e,value,row,index){var params={agreementId:row.AgreementId.toString(),enable:!0};agreementService.update(params,{},function(response){utilService.alert(response.msg),$scope.agreementTable.state.refresh()})},"click #agreement_hard_delete":function(e,value,row,index){var params={agreementId:row.AgreementId.toString(),hardDelete:!0};agreementService.delete(params,{},function(response){utilService.swalConfirm("<div style='font-size:2.5rem'>确认删除此数据、删除后将无法找回！</div>",function(result){result&&agreementService.delete(params,{},function(response){utilService.alert(response.msg),$scope.agreementTable.state.refresh()})})})},"click #agreement_preview":function(e,value,row,index){var xhr=new XMLHttpRequest;xhr.open("GET",cmdb_api.uri.readAgreement+"?path="+row.AgreementPath,!0),xhr.responseType="arraybuffer",xhr.onload=function(e){if(200==this.status){var blob=new Blob([this.response],{type:"application/pdf;base64"}),fileURL=window.URL.createObjectURL(blob),url=$state.href("pdfview");url=url+"?file="+encodeURIComponent(fileURL),window.open(url,"_blank")}},xhr.send()}}}]},state:{searchText:"",refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",agreementService.listObject({enable:0},function(response){$scope.agreementTable.options.data=response.rows})):($scope.deleteName="删除",agreementService.listObject({enable:1},function(response){$scope.agreementTable.options.data=response.rows}))},query:function(){$scope.hardDelete?agreementService.listObject({search:$scope.agreementTable.state.searchText,enable:0},function(response){$scope.agreementTable.options.data=response.rows}):agreementService.listObject({search:$scope.agreementTable.state.searchText,enable:1},function(response){$scope.agreementTable.options.data=response.rows})},selections:[],removeSelector:"#agreement_batch_remove",id:"AgreementId"}},$scope.agreementTable.state.refresh(),$scope.agreementTable_recycle=!0,$scope.agreementTable_back=function(){$scope.hardDelete&&($scope.hardDelete=!1,$scope.agreementTable.state.refresh())}}]).controller("AgreementStateListController",["$scope","$rootScope","$uibModal","AgreementService","UtilService","AgreementStateService",function($scope,$rootScope,$uibModal,agreementService,utilService,agreementStateService){$rootScope.$agreementStateTable=$("#agreementStateTable"),$scope.action={operateAgreementStateFormatter:function(){if(!$rootScope.hardDelete)return['<a title="编辑" class="label label-success" style="padding:3px 6px 3px 6px" id="agreementState_editor">','<i class="glyphicon glyphicon-edit"></i>',"&nbsp;编辑","</a>","&nbsp",'<a title="删除" class="label label-warning" style="padding:3px 6px 3px 6px"id="agreementState_remove">','<i class="glyphicon glyphicon-remove"></i>',"&nbsp;删除","</a>"].join("")}},$scope.agreementStateTable={options:{idField:"Id",toolbar:"#agreementState_toolbar",striped:!0,pagination:"true",locale:"zh_CN",showRefresh:!0,showToggle:!0,showColumns:!0,detailView:!1,showExport:!0,pageNumber:1,pageSize:10,queryParams:function(params){return{limit:params.limit,offset:params.offset,search:params.search,format:"total"}},searchOnEnterKey:!0,search:!0,pageList:[25,50],sidePagination:"server",showFooter:!1,showPaginationSwitch:"true",minimumCountColumns:2,columns:[{field:"State",title:"合同状态",sortable:!0},{field:"CreateBy",title:"创建者",sortable:!0},{field:"CreateTime",title:"创建时间",sortable:!0},{field:"UpdateBy",title:"更新者",sortable:!0},{field:"UpdateTime",title:"更新时间",sortable:!0},{field:"operate",title:"操作",formatter:$scope.action.operateAgreementStateFormatter,events:{"click #agreementState_editor":function(e,value,row,index){row instanceof Object&&null!==row&&($("#editAgreementStateId").val(row.Id),$("#editAgreementState").val(row.State),$("#edit_agreementState_dialog").modal("show"))},"click #agreementState_remove":function(e,value,row,index){var params={agreementStateId:row.Id.toString()};utilService.swalConfirm("确认删除合同状态?",function(result){result&&agreementStateService.delete(params,{},function(response){utilService.alert(response.msg),$rootScope.$agreementStateTable.bootstrapTable("refresh"),agreementStateService.list({},{},function(response){$rootScope.agreementStateList=response.data,$rootScope.agreementStateSelected=$rootScope.agreementStateList[0]})})})}}}]},state:{searchText:"",refresh:function(){$scope.deleteName="删除",agreementStateService.list({},{},function(response){$scope.agreementStateTable.options.data=response.data})},query:function(){agreementStateService.list({search:$scope.agreementTable.state.searchText,enable:0},function(response){$scope.agreementStateTable.options.data=response.rows})},selections:[],id:"Id"},addAgreementState:function(){$("#add_agreementState_dialog2").modal("show")}},$scope.addAgreementState=function(){var param={agreementState:$scope.state};$("#add_agreementState_dialog2").modal("hide"),$scope.state="",agreementStateService.add(param,{},function(response){return response?(utilService.alert(response.msg),void $rootScope.$agreementStateTable.bootstrapTable("refresh")):""})},$scope.updateAgreementState=function(){var editAgreementStateId=$("#editAgreementStateId").val(),editAgreementState=$("#editAgreementState").val(),param={agreementStateId:editAgreementStateId,agreementState:editAgreementState};agreementStateService.update(param,{},function(response){utilService.alert(response.msg),$rootScope.$agreementStateTable.bootstrapTable("refresh"),agreementStateService.list({},{},function(response){$rootScope.agreementStateList=response.data}),$("#edit_agreementState_dialog").modal("hide")})},$rootScope.$agreementStateTable.bootstrapTable("refresh")}]).controller("AgreementAddController",["$rootScope","$scope","$uibModal","$uibModalInstance","SupplierService","AgreementStateService","UtilService","AgreementService","FileUploader","$timeout",function($rootScope,$scope,$uibModal,$uibModalInstance,SupplierService,agreementStateService,utilService,agreementService,FileUploader,$timeout){$scope.AgreementTable=!1,$scope.agreement={agreementName:"",agreementNo:"",agreementPrice:"",agreementSignDate:"",agreementStartDate:"",agreementStopDate:"",agreementSigner:"",agreementPath:"",agreementStateSelected:"",supplierSelected:"",comment:""},uploader.filters.push({name:"customFilter",fn:function(item,options){return this.queue.length<10}}),uploader.onWhenAddingFileFailed=function(item,filter,options){utilService.swalConfirm("文件无法选择,请重新操作！")},uploader.onAfterAddingFile=function(fileItem){$scope.AgreementTable=!0},uploader.onSuccessItem=function(fileItem,response,status,headers){$scope.agreement.agreementPath=response.path},uploader.onCompleteItem=function(fileItem,response,status,headers){$timeout(function(){$scope.AgreementTable=!1},2e3)},uploader.onCompleteAll=function(){utilService.swalConfirm("上传文件成功！",function(){return""})},SupplierService.listObject({enable:"1"},function(response){$scope.supplierList=response.rows}),agreementStateService.list({enable:"1"},function(response){$scope.agreementStateList=response.data}),$scope.agreementAction={addAgreementCancel:function(){$uibModalInstance.dismiss()},addAgreement:function(){$uibModalInstance.close($scope.agreement)},validAgreement:function(){agreementService.listObject({search:$scope.agreement.agreementName,enable:1},function(response){response.rows[0]&&utilService.swalConfirm("合同已经存在！",function(response){})})},addAgreementState:function(){$("#add_agreementState_dialog").modal("show")}},$scope.addAgreementState=function(){var param={agreementState:$scope.state};agreementStateService.add(param,{},function(response){utilService.alert(response.msg),agreementStateService.list({},{},function(response){$scope.agreementStateList=response.data})})}}]).controller("AgreementEditController",["$scope","$uibModalInstance","row","AgreementStateService","SupplierService",function($scope,$uibModalInstance,row,agreementStateService,supplierService){agreementStateService.list({enable:"1"},function(response){$scope.agreementStateList=response.data}),supplierService.listObject({enable:"1"},function(response){$scope.supplierList=response.rows}),$scope.agreement={editAgreementId:row.AgreementId,editAgreementName:row.AgreementName,editAgreementNo:row.AgreementNo,editAgreementPrice:row.AgreementPrice,editAgreementSignDate:row.AgreementSignDate,editAgreementStartDate:row.AgreementStartDate,editAgreementStopDate:row.AgreementStopDate,editAgreementStateSelected:row.State.Id,editSupplierSelected:row.Supplier.Id,editAgreementSigner:row.AgreementSigner,editAgreementPath:row.AgreementPath,editComment:row.Comment},$scope.AgreementEditCancel=function(){$uibModalInstance.dismiss()},$scope.AgreementEditSave=function(){$uibModalInstance.close($scope.agreement)}}]).controller("AgreementStateEditController",["$scope","$uibModalInstance","row",function($scope,$uibModalInstance,row){$scope.AgreementStateEditCancel=function(){$uibModalInstance.dismiss()},$scope.AgreementStateEditSave=function(){$uibModalInstance.close($scope.agreementState)}}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("AgreementDirectiveModule",[]).directive("datePicker",function(){return function(scope,element,attr){element.datetimepicker({minView:"month",keyboardNavigation:!0,forceParse:!0,pickerPosition:"bottom-right",language:"zh-CN",format:"yyyy-mm-dd",todayBtn:1,autoclose:1})}}).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("AgreementServiceModule",["ngResource"]).factory("AgreementService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.agreement,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"agreementid",order:"asc",enable:0},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("AgreementStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.agreementState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("DownloadAgreementService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.readAgreement,{timestamp:utilService.getTimestamp()},{download:{method:"GET",isArray:!1,params:{},responseType:"arraybuffer",headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _bandwidthController=__webpack_require__(27),_bandwidthController2=_interopRequireDefault(_bandwidthController),_bandwidthService=__webpack_require__(28),_bandwidthService2=_interopRequireDefault(_bandwidthService);exports.default=angular.module("BandwidthModule",[_bandwidthController2.default,_bandwidthService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("BandwidthControllerModule",[]).controller("BandwidthListController",["$scope","$rootScope","BandwidthService","BandwidthStateService","InternetProviderService","RoomService","RackService","UtilService","$uibModal",function($scope,$rootScope,bandwidthService,bandwidthStateService,internetProviderService,roomService,rackService,utilService,$uibModal){$scope.bandwidth={bandwidthedits:!1,bandwidthscreen:!1,editId:"",editName:"",bandwidthStateSelected:"",ispSelected:"",maxBandwidth:"",minBandwidth:"",minCost:"",unitCost:"",roomSelected:"",rackSelected:"",comment:""},$scope.bandwidthedits=!1,$scope.action={showAddBandwidth:function(){bandwidthStateService.list({},{},function(response){$scope.bandwidthStateList=response.data}),internetProviderService.list({},{},function(response){$scope.ispList=response.data}),roomService.listObject({},function(response){$scope.roomList=response.rows}),rackService.listObject({},function(response){$scope.rackList=response.rows});var modalInstance=$uibModal.open({templateUrl:"add_bandwidth_dialog.html",controller:"BandwidthAddController"});modalInstance.result.then(function(result){var params={name:result.name,state:result.bandwidthStateSelected.Id,isp:result.ispSelected.Id,maxBandwidth:result.maxBandwidth,minBandwidth:result.minBandwidth,minCost:result.minCost,unitCost:result.unitCost,comment:result.comment,enable:!0};angular.isDefined(result.roomSelected)&&(params.room=result.roomSelected.RoomId),angular.isDefined(result.rackSelected)&&(params.rack=result.rackSelected.RackId),bandwidthService.add(params,{},function(response){utilService.alert(response.msg),$scope.bandwidthTable.state.refresh()})})},showState:function(){$("#bandwidth_state_list").modal("show")},showIsp:function(){$("#isp_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",bandwidthService.listObject({enable:0},function(response){$scope.bandwidthTable.options.data=response.rows})},showbtnback:function(){$scope.bandwidthTable_recycle=!$scope.bandwidthTable_recycle},operateBandwidthFormatter:function(value,row,index){return row.Enable?['<a id="bandwidth_editor" style="padding:3px 6px 3px 6px" class="label label-success" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>&nbsp;编辑',"</a>","&nbsp",'<a id="bandwidth_remove" style="padding:3px 6px 3px 6px" class="label label-warning" href="javascript:void(0)" title="软删除">','<i class="glyphicon glyphicon-remove"></i>&nbsp;软删除',"</a>"].join(""):['<a id="bandwidth_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-repeat"></i>恢复',"</a>","&nbsp",'<a id="bandwidth_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>硬删除',"</a>"].join("")},operateBNameFormatter:function(value,row,index){return $scope.hardDelete?row.Name:['<a id="bandwidth_editor2" style="text-decoration:none;cursor:pointer">'+row.Name+"</a>"]},hideSearch:function(){$scope.bandwidthscreen=!1,$scope.isActive=!1},showSearch:function(){$scope.bandwidthscreen=!0,$scope.isActive=!0,bandwidthStateService.list({},function(response){$scope.bandwidthStateList=response.data}),internetProviderService.list({},function(response){$scope.ispList=response.data})},hideeditbandwidth:function(){$scope.bandwidthedits=!1,$scope.isActive=!1},bdremove:function(value,row,index){var params={Id:$scope.bandwidth.editId};utilService.swalConfirm("确认删除带宽?",function(result){result&&bandwidthService.delete(params,{},function(response){utilService.alert(response.msg),$scope.bandwidthTable.state.refresh(),$scope.bandwidthedits=!1,$scope.isActive=!1})})},updateBandwidth:function(){var params={Id:$scope.bandwidth.editId,name:$scope.bandwidth.editName,state:$scope.bandwidth.bandwidthStateSelected,isp:$scope.bandwidth.ispSelected,maxBandwidth:$scope.bandwidth.editMaxBandwidth,minBandwidth:$scope.bandwidth.editMinBandwidth,minCost:$scope.bandwidth.editMinCost,unitCost:$scope.bandwidth.editUnitCost,room:$scope.bandwidth.roomSelected,rack:$scope.bandwidth.rackSelected,comment:$scope.bandwidth.editComment};bandwidthService.update(params,{},function(response){utilService.alert(response.msg),$scope.bandwidthedits=!1,$scope.isActive=!1,$scope.bandwidthTable.state.refresh()})},clearAll:function(){$scope.search={searchText:"",bandwidthState:{},bandwidthIsp:{}}},searchAll:function(){$scope.search.bandwidthStateTags=[],$scope.search.bandwidthIspTags=[];for(var key in $scope.search.bandwidthState)$scope.search.bandwidthState[key]&&$scope.search.bandwidthStateTags.push(key);for(var key in $scope.search.bandwidthIsp)$scope.search.bandwidthIsp[key]&&$scope.search.bandwidthIspTags.push(key);var params={name:$scope.search.searchText,state:$scope.search.bandwidthStateTags,isp:$scope.search.bandwidthIspTags,enable:!0};bandwidthService.list(params).$promise.then(function(response){$scope.bandwidthTable.options.data=response.data})}},$scope.search={searchText:"",bandwidthState:{},bandwidthStateTags:[],bandwidthIsp:{},bandwidthIspTags:[]},$scope.bandwidthTable={options:{idField:"Id",toolbar:"#bandwidth_toolbar",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"Name",title:"带宽名称",sortable:!0,formatter:$scope.action.operateBNameFormatter,events:{"click #bandwidth_editor2":function(e,value,row,index){bandwidthStateService.list({},{},function(response){$scope.bandwidthStateList=response.data}),internetProviderService.list({},{},function(response){$scope.ispList=response.data}),roomService.listObject({},function(response){$scope.roomList=response.rows}),rackService.listObject({},function(response){$scope.rackList=response.rows}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.bandwidthedits=!0,$scope.isActive=!0,$scope.bandwidth.editId=row.Id,$scope.bandwidth.editName=row.Name,$scope.bandwidth.bandwidthStateSelected=row.State.Id,$scope.bandwidth.ispSelected=row.Isp.Id,$scope.bandwidth.editMaxBandwidth=row.MaxBandwidth,$scope.bandwidth.editMinBandwidth=row.MinBandwidth,$scope.bandwidth.editMinCost=row.MinCost,$scope.bandwidth.editUnitCost=row.UnitCost,$scope.bandwidth.editComment=row.Comment,null!==row.Room&&($scope.bandwidth.roomSelected=row.Room.RoomId),null!==row.Rack&&($scope.bandwidth.rackSelected=row.Rack.RackId)})}}},{field:"Isp",title:"网络服务提供商",sortable:!0,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"MaxBandwidth",title:"采购最大宽带",sortable:!0,formatter:function(value,row,index){return value+"百兆"}},{field:"MinBandwidth",title:"保底带宽",sortable:!0,formatter:function(value,row,index){return value+"百兆"}},{field:"MinCost",title:"保底费用",sortable:!0,formatter:function(value,row,index){return value+"元/百兆"}},{field:"UnitCost",title:"单位成本",sortable:!0,formatter:function(value,row,index){return value+"元/百兆"}},{field:"Room",title:"所属机房",sortable:!0,formatter:function(value,row,index){return null!==value?value.RoomName:""}},{field:"Rack",title:"所属机柜",sortable:!0,formatter:function(value,row,index){return null!==value?value.RackName:""}},{field:"Comment",visible:!1,title:"备注"},{field:"State",title:"带宽状态",sortable:!0,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}}]},state:{searchText:"",searchFilter:!0,refresh:function(){bandwidthService.listObject({enable:1},function(response){$scope.bandwidthTable.options.data=response.rows})},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",bandwidthService.listObject({search:$scope.bandwidthTable.state.searchText,enable:0},function(response){$scope.bandwidthTable.options.data=response.rows})):($scope.deleteName="删除",bandwidthService.listObject({search:$scope.bandwidthTable.state.searchText,enable:1},function(response){$scope.bandwidthTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={Id:ids.toString()};utilService.swalConfirm("确认删除带宽?",function(result){result&&bandwidthService.delete(params,{},function(response){utilService.alert(response.msg),$scope.bandwidthTable.state.refresh()})})},settings:function(){$uibModal.open({templateUrl:"band_width_state.html",controller:"BandWidthStateController"})}}},$scope.bandwidthTable.state.refresh(),$rootScope.$on("childEmit",function(event,data){$scope.bandwidthTable.state.refresh()})}]).controller("BandwidthAddController",["$scope","$rootScope","BandwidthService","BandwidthStateService","InternetProviderService","RoomService","RackService","UtilService","$uibModalInstance","StateColorService",function($scope,$rootScope,bandwidthService,bandwidthStateService,internetProviderService,roomService,rackService,utilService,$uibModalInstance,stateColorService){bandwidthStateService.list({},{},function(response){$scope.bandwidthStateList=response.data}),internetProviderService.list({},{},function(response){$scope.ispList=response.data}),rackService.listObject({enable:1},function(response){$scope.rackList=response.rows}),roomService.listObject({enable:1},function(response){$scope.roomList=response.rows}),$scope.addBandwidthCancel=function(){$uibModalInstance.dismiss()},$scope.addBandwidth=function(){$uibModalInstance.close($scope.bandwidth)},stateColorService.list({},function(response){$scope.mycolors=response.data}),
$scope.showAddBandwidthState=function(){$("#addBandwidthState").modal("show")},$scope.bandwidthState={addBandwidthState:function(){var params={bandwidthState:$scope.addbandwidthState,color:$scope.selectedColor};bandwidthStateService.add(params,{},function(response){utilService.alert(response.msg),$("#addBandwidthState").modal("hide"),bandwidthStateService.list({},{},function(response){$scope.bandwidthStateList=response.data})})},addInternetProvider:function(){var params={isp:$scope.internetServiceProvider};internetProviderService.add(params,{},function(response){utilService.alert(response.msg),internetProviderService.list({enable:1},{},function(response){$scope.ispList=response.data}),$("#addIsp").modal("hide")})}},$scope.showAddIsp=function(){$("#addIsp").modal("show")},$scope.addmore=function(){$scope.addMore=!$scope.addMore},$scope.testifyBandwidth=function(){if($scope.bandwidth.name){var params={name:$scope.bandwidth.name,enable:!0};bandwidthService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此带宽已存在！"),$scope.bandwidth.name="")})}}}]).controller("BandWidthStateController",["$scope","$rootScope","UtilService","$uibModalInstance","BandwidthStateService","StateColorService",function($scope,$rootScope,utilService,$uibModalInstance,bandwidthStateService,stateColorService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},refresh:function(){bandwidthStateService.list({},{},function(response){$scope.BandWidthState=response.data})},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={bandwidthState:$scope.addbandwidthState,color:$scope.selectedColor};bandwidthStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showAddColors=!1})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editBandWidthStateId=state.Id,$scope.editBandWidthState=state.State,$scope.selectedColor=state.Color},editSave:function(){var params={bandwidthStateId:$scope.editBandWidthStateId,bandwidthState:$scope.editBandWidthState,color:$scope.currentColor};bandwidthStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showEditColors=!1,$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={bandwidthStateId:state.Id.toString()};bandwidthStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh()})}},$scope.settings.init(),$scope.settings.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("BandwidthServiceModule",["ngResource"]).factory("BandwidthService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.bandwidth,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("BandwidthStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.bandwidthState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("InternetProviderService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.isp,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _hardwareController=__webpack_require__(30),_hardwareController2=_interopRequireDefault(_hardwareController),_hardwareService=__webpack_require__(31),_hardwareService2=_interopRequireDefault(_hardwareService);exports.default=angular.module("HardwareModule",[_hardwareController2.default,_hardwareService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("HardwareControllerModule",[]).controller("HardwareListController",["$scope","$rootScope","HardwareService","HardwareTypeService","HardwareStateService","RackService","UtilService","$uibModal",function($scope,$rootScope,hardwareService,hardwareTypeService,hardwareStateService,rackService,utilService,$uibModal){$scope.hardware={hardwareedits:!1,hardwarescreen:!1,editHardwareId:"",editHardwareName:"",hardwareTypeSelected:"",hardwareStateSelected:"",hardwareSn:"",manageIp:"",Online:"",rackSelected:"",comment:""},$scope.hardwareedits=!1,$scope.action={showType:function(){$("#hardware_type_list").modal("show")},showState:function(){$("#hardware_state_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",hardwareService.listObject({enable:0},function(response){$scope.hardwareTable.options.data=response.rows})},showbtnback:function(){$scope.hardwareTable_recycle=!$scope.hardwareTable_recycle},operateHardwareFormatter:function(value,row,index){return row.Enable?['<a id="hardware_editor" style="padding:3px 6px 3px 6px" class="label label-success" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>&nbsp;编辑',"</a>","&nbsp",'<a id="hardware_remove" style="padding:3px 6px 3px 6px" class="label label-warning" href="javascript:void(0)" title="软删除">','<i class="glyphicon glyphicon-remove"></i>&nbsp;软删除',"</a>"].join(""):['<a id="hardware_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-info"></i>&nbsp;恢复',"</a>","&nbsp",'<a id="hardware_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>&nbsp;硬删除',"</a>"].join("")},operateHardwareNameFormatter:function(value,row,index){return $scope.hardDelete?row.HardwareName:['<a id="hardware_editor2" style="text-decoration:none;cursor:pointer">'+row.HardwareName+"</a>"]},hideSearch:function(){$scope.hardwarescreen=!1,$scope.isActive=!1},showSearch:function(){$scope.hardwarescreen=!0,$scope.isActive=!0,hardwareTypeService.list({},function(response){$scope.hardwareTypeEditList=response.data}),hardwareStateService.list({},function(response){$scope.hardwareStateEditList=response.data})},hardwareBatchRemove:function(){var ids=$scope.hardwareTable.state.selections,params={Id:ids.toString()};$scope.hardDelete?(params={Id:ids.toString(),hardDelete:!0},utilService.swalConfirm("确认删除硬件?",function(result){result&&hardwareService.delete(params,{},function(response){utilService.alert(response.msg),hardwareService.listObject({enable:0},function(response){$scope.hardwareTable.options.data=response.rows})})})):utilService.swalConfirm("确认删除硬件?",function(result){result&&hardwareService.delete(params,{},function(response){utilService.alert(response.msg),$scope.hardwareTable.state.refresh()})})},hideeditHardware:function(){$scope.hardwareedits=!1,$scope.isActive=!1},hdremove:function(value,row,index){var params={Id:$scope.hardware.editHardwareId};utilService.swalConfirm("确认删除硬件?",function(result){result&&hardwareService.delete(params,{},function(response){utilService.alert(response.msg),$scope.hardwareTable.state.refresh(),$scope.hardwareedits=!1,$scope.isActive=!1})})},updateHardware:function(){"是"==$scope.hardware.editOnline?$scope.hardware.editOnline=1:$scope.hardware.editOnline=0;var params={Id:$scope.hardware.editHardwareId,hardwareName:$scope.hardware.editHardwareName,hardwareType:$scope.hardware.hardwareTypeSelected,state:$scope.hardware.hardwareStateSelected,hardwareSn:$scope.hardware.editHardwareSn,manageIp:$scope.hardware.editManageIp,online:$scope.hardware.editOnline,rack:$scope.hardware.rackSelected,comment:$scope.hardware.comment,enble:!0};hardwareService.update(params,{},function(response){utilService.alert(response.msg),$scope.hardwareTable.state.refresh(),$scope.hardwareedits=!1,$scope.isActive=!1})},showAddHardware:function(){hardwareTypeService.list({},function(response){$scope.hardwareTypeAddList=response.data}),hardwareStateService.list({},function(response){$scope.hardwareStateEditList=response.data}),rackService.listObject({},function(response){$scope.rackList=response.rows}),$scope.hardware.isOnline="是";var modalInstance=$uibModal.open({templateUrl:"add_hardware_dialog.html",controller:"HardwareAddController"});modalInstance.result.then(function(result){result.isOnline?result.isOnline=1:result.isOnline=0;var params={hardwareName:result.hardwareName,hardwareType:result.hardwareTypeSelected.Id,state:result.hardwareStateSelected.Id,hardwareSn:result.hardwareSn,manageIp:result.manageIp,online:result.isOnline,comment:result.comment,enable:!0};angular.isDefined(result.rackSelected)&&(params.rack=result.rackSelected.RackId),hardwareService.add(params,{},function(response){utilService.alert(response.msg),$scope.hardwareTable.state.refresh()})})},clearAll:function(){$scope.search={searchText:"",hardwareState:{},hardwareType:{},online:{}}},searchAll:function(){$scope.search.hardwareStateTags=[],$scope.search.hardwareTypeTags=[],$scope.search.onlineTags=[];for(var key in $scope.search.hardwareState)$scope.search.hardwareState[key]&&$scope.search.hardwareStateTags.push(key);for(var key in $scope.search.hardwareType)$scope.search.hardwareType[key]&&$scope.search.hardwareTypeTags.push(key);for(var key in $scope.search.online)$scope.search.online[key]&&$scope.search.onlineTags.push(key);var params={name:$scope.search.searchText,state:$scope.search.hardwareStateTags,hardwaretype:$scope.search.hardwareTypeTags,enable:!0};hardwareService.list(params).$promise.then(function(response){$scope.hardwareTable.options.data=response.data})}},$scope.search={searchText:"",hardwareState:{},hardwareStateTags:[],hardwareType:{},hardwareTypeTags:[],onlineTags:[]},$scope.hardwareTable={options:{idField:"Id",toolbar:"#hardware_toolbar",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"HardwareName",title:"硬件名称",sortable:!0,formatter:$scope.action.operateHardwareNameFormatter,events:{"click #hardware_editor2":function(e,value,row,index){hardwareTypeService.list({},{},function(response){$scope.hardwareTypeEditList=response.data}),hardwareStateService.list({},{},function(response){$scope.hardwareStateEditList=response.data}),rackService.listObject({},function(response){$scope.rackList=response.rows}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.hardwareedits=!0,$scope.isActive=!0,$scope.hardware.editHardwareId=row.Id,$scope.hardware.editHardwareName=row.HardwareName,$scope.hardware.editHardwareSn=row.HardwareSn,$scope.hardware.editManageIp=row.ManageIp,$scope.hardware.editComment=row.Comment,null!==row.Type&&($scope.hardware.hardwareTypeSelected=row.Type.Id),null!==row.State&&($scope.hardware.hardwareStateSelected=row.State.Id),null!==row.Rack&&($scope.hardware.rackSelected=row.Rack.RackId),1==row.Online?$scope.hardware.editOnline="是":$scope.hardware.editOnline="否"})}}},{field:"Type",title:"硬件类型",sortable:!0,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"Online",title:"是否在线",sortable:!0,formatter:function(value,row,index){return 1==value?"是":0===value?"否":"未知"}},{field:"HardwareSn",title:"序列号",sortable:!0},{field:"ManageIp",title:"管理IP",sortable:!0},{field:"Rack",title:"所属机柜",sortable:!0,formatter:function(value,row,index){return null!==value?value.RackName:""}},{field:"Comment",title:"备注",visible:!1,sortable:!0},{field:"State",title:"硬件状态",sortable:!0,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}}]},state:{searchText:"",searchFilter:!0,refresh:function(){hardwareService.listObject({enable:1},function(response){$scope.hardwareTable.options.data=response.rows})},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",hardwareService.listObject({search:$scope.hardwareTable.state.searchText,enable:0},function(response){$scope.hardwareTable.options.data=response.rows})):($scope.deleteName="删除",hardwareService.listObject({search:$scope.hardwareTable.state.searchText,enable:1},function(response){$scope.hardwareTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={Id:ids.toString()};utilService.swalConfirm("确认删除硬件?",function(result){result&&hardwareService.delete(params,{},function(response){utilService.alert(response.msg),$scope.hardwareTable.state.refresh(),$scope.hardware.hardwareedits=!1})})},settings:function(){$uibModal.open({templateUrl:"hardware_state.html",controller:"hardwareStateController"})}}},$rootScope.$on("childEmit",function(event,data){$scope.hardwareTable.state.refresh()})}]).controller("HardwareAddController",["$scope","$rootScope","$uibModalInstance","HardwareTypeService","HardwareStateService","RackService","UtilService","StateColorService","HardwareService",function($scope,$rootScope,$uibModalInstance,hardwareTypeService,hardwareStateService,rackService,utilService,stateColorService,hardwareService){$scope.hardware={hardwareName:"",hardwareTypeSelected:"",hardwareStateSelected:"",hardwareSn:"",manageIp:"",isOnline:!0,rackSelected:"",comment:"",addhardwareState:""},stateColorService.list({},{},function(response){$scope.mycolors=response.data}),hardwareTypeService.list({},{},function(response){$scope.hardwareTypeAddList=response.data}),hardwareStateService.list({},{},function(response){$scope.hardwareStateAddList=response.data}),rackService.listObject({enable:1},function(response){$scope.rackList=response.rows}),$scope.action={addHardwareCancel:function(){$uibModalInstance.dismiss()},addHardware:function(){$uibModalInstance.close($scope.hardware)},showAddHardwareState:function(){$("#addHardwareState").modal("show")},showAddHardwareType:function(){$("#addHardwareType").modal("show")},addmore:function(){$scope.hardware.addMore=!$scope.hardware.addMore},testifyHardware:function(){if($scope.hardware.hardwareName){var params={name:$scope.hardware.hardwareName,enable:!0};hardwareService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此硬件已存在！"),$scope.hardware.hardwareName="")})}}},$scope.hardwareState={},$rootScope.$hardwareState_table=$("#hardwareState_table"),$scope.addHardwareState=function(){var params={hardwareState:$scope.bandwidth.addhardwareState,color:$scope.selectedColor};hardwareStateService.add(params,{},function(response){utilService.alert(response.msg),hardwareStateService.list({},{},function(response){$scope.hardwareStateAddList=response.data,$scope.hardwareStateSelected=$scope.hardwareStateAddList[0]}),$("#addHardwareState").modal("hide")}),hardwareStateService.list({},{},function(response){$scope.hardwareStateAddList=response.data})},$scope.hardwareState.updateHardwareState=function(){var Id=$("#editHardwareStateId").val(),hardwareState=$("#editHardwareState").val(),updateBy=$("#editUpdateBy").val(),params={hardwareStateId:Id,hardwareState:hardwareState,updateBy:updateBy};hardwareStateService.update(params,{},function(response){utilService.alert(response.msg),hardwareStateService.list({},{},function(response){$rootScope.hardwareStateAddList=response.data,$rootScope.hardwareStateSelected=$rootScope.hardwareStateAddList[0],$rootScope.hardwareStateEditList=response.data,$rootScope.hardwareStateSelected=$rootScope.hardwareStateEditList[0]}),$("#edit_hardwareState_dialog").modal("hide")})},$scope.hardwareType={},$scope.hardwareType.addHardwareType=function(){var params={hardwareType:$scope.type};hardwareTypeService.add(params,{},function(response){utilService.alert(response.msg),hardwareTypeService.list({},{},function(response){$scope.hardwareTypeAddList=response.data,$scope.hardwareTypeSelected=$scope.hardwareTypeAddList[0]}),$("#addHardwareType").modal("hide"),$scope.type=[]})},$scope.hardwareType.updateHardwareType=function(){var Id=$("#editHardwareTypeId").val(),hardwareType=$("#editType").val(),updateBy=$("#editUpdate").val(),params={hardwareTypeId:Id,hardwareType:hardwareType,updateBy:updateBy};hardwareTypeService.update(params,{},function(response){utilService.alert(response.msg),$rootScope.$hardwareType_table.bootstrapTable("refresh"),hardwareTypeService.list({},{},function(response){$rootScope.hardwareTypeAddList=response.data,$rootScope.hardwareTypeSelected=$rootScope.hardwareTypeAddList[0],$rootScope.hardwareTypeEditList=response.data,$rootScope.hardwareTypeSelected=$rootScope.hardwareTypeEditList[0]}),$("#edit_hardwareType_dialog").modal("hide")})}}]).controller("hardwareStateController",["$scope","$rootScope","$uibModalInstance","HardwareStateService","UtilService","StateColorService",function($scope,$rootScope,$uibModalInstance,hardwareStateService,utilService,stateColorService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},refresh:function(){hardwareStateService.list({},{},function(response){$scope.HardWareState=response.data})},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={hardwareState:$scope.addHareWareState,color:$scope.selectedColor};hardwareStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showAddColors=!1,hardwareStateService.list({},function(response){$scope.hardwareStateEditList=response.data})})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editHareWareStateId=state.Id,$scope.editHareWareState=state.State,$scope.selectedColor=state.Color,hardwareStateService.list({},function(response){$scope.hardwareStateEditList=response.data})},editSave:function(){var params={hardwareStateId:$scope.editHareWareStateId,hardwareState:$scope.editHareWareState,color:$scope.currentColor};hardwareStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showEditColors=!1,$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={hardwareStateId:state.Id.toString()};hardwareStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),hardwareStateService.list({},function(response){$scope.hardwareStateEditList=response.data})})}},$scope.settings.init(),$scope.settings.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("HardwareServiceModule",["ngResource"]).factory("HardwareService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.hardware,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("HardwareStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.hardwareState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("HardwareTypeService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.hardwareType,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _serverController=__webpack_require__(33),_serverService=(_interopRequireDefault(_serverController),__webpack_require__(34));_interopRequireDefault(_serverService);exports.default=angular.module("ServerModule",["ServerControllerModule","ServerServiceModule"]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";function ServerListController($scope,$rootScope,serverService,serverStateService,serverManufacturerService,hostArrayService,supplierService,rackService,appService,utilService,$uibModal,$http,GetCpuByServerIdService,GetMemoryByServerIdService,GetHarddiskByServerIdService,GetNetworkadapterByServerIdService,GetPortByServerIdService,CpuService,MemoryService,MemorySwapService){$scope.myDate=new Date,$scope.minDate=new Date($scope.myDate.getFullYear(),$scope.myDate.getMonth()-2,$scope.myDate.getDate()),$scope.maxDate=new Date($scope.myDate.getFullYear(),$scope.myDate.getMonth()+2,$scope.myDate.getDate()),$scope.onlyWeekendsPredicate=function(date){var day=date.getDay();return 0===day||6===day},$scope.hardDelete=!1,$scope.deleteName="删除",$scope.RackNum=[{id:1,num:1},{id:2,num:2},{id:3,num:3},{id:4,num:4},{id:5,num:5},{id:6,num:6}],$scope.server={serveredits:!1,editIsHypervisor:!0,editIsServer:!0},$scope.action={showUploadDialog:function(){$("#import_server_dialog").modal("show")},download:function(){$http({method:"POST",url:_api_config.cmdb.uri.download+"?access_token="+$scope.token+"&timestamp="+utilService.getTimestamp(),params:{template:"server"},responseType:"arraybuffer"}).then(function(data){var blob=new Blob([data.data],{type:"application/vnd.ms-excel"}),objectUrl=URL.createObjectURL(blob);window.open(objectUrl)},function(response){utilService.alert(response.msg)})},showUpload:function(){$("#fileToUpload").uploadify({swf:"assets/scripts/uploadify/uploadify.swf",uploader:_api_config.cmdb.uri.import+"?access_token="+$scope.token+"&timestamp="+utilService.getTimestamp(),fileObjName:"uploadfile",method:"post",buttonText:"导入列表文件",width:"100",height:"30",progressData:"all",onUploadSuccess:function(file,data,response){utilService.alert("服务器列表导入成功"),$scope.serverTable.state.refresh(),$("#import_server_dialog").modal("hide")},onUploadError:function(file,errorCode,errorMsg,errorString){utilService.alert("导入服务器发生错误")}})},showAddServer:function(){serverStateService.list({},function(response){$scope.serverStateList=response.data}),serverManufacturerService.list({},function(response){$scope.serverManufacturerList=response.data}),supplierService.listObject({},function(response){$scope.supplierList=response.rows}),hostArrayService.list({},function(response){$scope.hostList=response.data}),rackService.listObject({},function(response){$scope.rackList=response.rows}),appService.listObject({},function(response){$scope.appList=response.rows});var modalInstance=$uibModal.open({templateUrl:"add_server.html",controller:"ServerAddController"});modalInstance.result.then(function(result){var params={hostname:result.hostname,state:result.serverStateSelected,ipaddress:result.ip,host:result.hostArraySelected,ishypervisor:result.ishypervisor,sn:result.sn,modle:result.modle,isserver:result.isserver,comment:result.comment,enable:!0};angular.isDefined(result.serverManufacturerSelected)&&(params.manufacturer=result.serverManufacturerSelected),angular.isDefined(result.supplierSelected)&&(params.supplier=result.supplierSelected),angular.isDefined(result.rackSelected)&&(params.rack=result.rackSelected),angular.isDefined(result.rackUnumber)&&(params.rackUnumber=result.rackUnumber.id),angular.isDefined(result.appSelected)&&(params.app=result.appSelected),serverService.add(params,{},function(response){utilService.alert(response.msg),$scope.serverTable.state.refresh()})})},showState:function(){$("#server_state_list").modal("show")},showManufacturer:function(){$("#server_manufacturer_list").modal("show")},showHost:function(){$("#server_host_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",serverService.listObject({enable:0},function(response){$scope.serverTable.options.data=response.rows})},operateServerFormatter:function(value,row,index){return row.Enable?['<a id="server_editor" style="padding:3px 6px 3px 6px" class="label label-success" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>&nbsp;编辑',"</a>","&nbsp",'<a id="server_remove" style="padding:3px 6px 3px 6px" class="label label-warning" href="javascript:void(0)" title="软删除">','<i class="glyphicon glyphicon-remove"></i>&nbsp;软删除',"</a>"].join(""):['<a id="server_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-repeat"></i>&nbsp;恢复',"</a>","&nbsp",'<a id="server_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>&nbsp;硬删除',"</a>"].join("")},operateHostnameFormatter:function(value,row,index){return $scope.hardDelete?row.Hostname:['<a id="server_editor2" style="text-decoration:none;cursor:pointer">'+row.Hostname+"</a>"]},hideSearch:function(){$scope.server.serverscreen=!1,$scope.isActive=!1},showSearch:function(){$scope.server.serverscreen=!0,$scope.isActive=!0,serverStateService.list({},function(response){$scope.serverStateList=response.data}),serverManufacturerService.list({},function(response){$scope.serverManufacturerList=response.data}),supplierService.listObject({},function(response){$scope.supplierList=response.rows}),rackService.listObject({},function(response){$scope.rackList=response.rows})},hideeditServer:function(){$scope.server.serveredits=!1,$scope.isActive=!1},editmore:function(){$scope.server.editMore=!$scope.server.editMore},svremove:function(value,row,index){var params={serverid:$scope.editServerId};utilService.swalConfirm("确认删除服务器?",function(result){result&&serverService.delete(params,{},function(response){utilService.alert(response.msg),$scope.serverTable.state.refresh(),$scope.server.serveredits=!1,$scope.isActive=!1})})},updateServer:function(){"是"==$scope.server.editIsHypervisor?$scope.server.editIsHypervisor=1:$scope.server.editIsHypervisor=0,"是"==$scope.server.editIsServer?$scope.server.editIsServer=1:$scope.server.editIsServer=0;var params={serverid:$scope.editServerId,hostname:$scope.editServername,sn:$scope.editSn,ipaddress:$scope.editIpaddress,modle:$scope.editModle,host:$scope.hostSelected.Id,rackUnumber:$scope.editRackUnumber.num,ishypervisor:$scope.server.editIsHypervisor,isserver:$scope.server.editIsServer,comment:$scope.comment};void 0!==$scope.serverStateSelected&&(params.state=$scope.serverStateSelected),void 0!==$scope.serverManufacturerSelected&&(params.manufacturer=$scope.serverManufacturerSelected),void 0!==$scope.supplierSelected&&(params.supplier=$scope.supplierSelected),void 0!==$scope.rackSelected&&(params.rack=$scope.rackSelected),void 0!==$scope.appSelected&&(params.app=$scope.appSelected),serverService.update(params,{},function(response){utilService.alert(response.msg),$scope.serverTable.state.refresh(),$scope.server.serveredits=!1,$scope.isActive=!1})},clearAll:function(){$scope.search={searchText:"",State:{},Manufacturer:{},Supplier:{},startTime:"",endTime:""}},portActive:function(index){angular.forEach($scope.portList,function(portObject,idx){portObject.id==index?($scope.portList[idx].flag=!0,$scope.proccess=$scope.portList[idx].proccess,$scope.ip=$scope.portList[idx].ip):$scope.portList[idx].flag=!1})}},$scope.search={searchText:"",State:{},StateTags:[],Manufacturer:{},ManufacturerTags:[],Supplier:{},SupplierTags:[],Rack:{},RackTags:[],startTime:"",endTime:""};var cpuChart=echarts.init(document.getElementById("cpuChart")),cpuOption={color:["#fff","#20a0ff"],title:{text:"",subtext:"",x:"center"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"CPU",type:"pie",radius:"70%",hoverAnimation:!1,data:[],itemStyle:{emphasis:{shadowBlur:2,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{labelLine:{show:!1},borderColor:"#20a0ff"}}}]};window.addEventListener("resize",function(){cpuChart.resize()}),CpuService.list({},function(response){cpuOption.series[0].data=response.series,cpuChart.setOption(cpuOption)});var memoryChart=echarts.init(document.getElementById("memoryChart")),memoryOption={color:["#fff","#20a0ff"],title:{text:"",subtext:"",x:"center"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"Memory",type:"pie",radius:"70%",hoverAnimation:!1,data:[],itemStyle:{emphasis:{shadowBlur:2,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{labelLine:{show:!1},borderColor:"#20a0ff"}}}]};window.addEventListener("resize",function(){memoryChart.resize()}),MemoryService.list({},function(response){memoryOption.series[0].data=response.series,memoryChart.setOption(memoryOption)});var swapChart=echarts.init(document.getElementById("swapChart")),swapOption={color:["#fff","#20a0ff"],title:{text:"",subtext:"",x:"center"},legend:{orient:"vertical",left:"left",data:[]},series:[{name:"SWAP",type:"pie",radius:"70%",hoverAnimation:!1,data:[],itemStyle:{emphasis:{shadowBlur:2,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{labelLine:{show:!1},borderColor:"#20a0ff"}}}]};window.addEventListener("resize",function(){
swapChart.resize()}),MemorySwapService.list({},function(response){swapOption.series[0].data=response.series,swapChart.setOption(swapOption)}),$scope.testSearchByBody=function(){$scope.search.StateTags=[],$scope.search.ManufacturerTags=[],$scope.search.SupplierTags=[],$scope.search.RackTags=[];for(var key in $scope.search.State)$scope.search.State[key]&&$scope.search.StateTags.push(key);for(var key in $scope.search.Manufacturer)$scope.search.Manufacturer[key]&&$scope.search.ManufacturerTags.push(key);for(var key in $scope.search.Supplier)$scope.search.Supplier[key]&&$scope.search.SupplierTags.push(key);for(var key in $scope.search.Rack)$scope.search.Rack[key]&&$scope.search.RackTags.push(key);var params={sn:$scope.search.searchText,state:$scope.search.StateTags.toString(),manufacturer:$scope.search.ManufacturerTags.toString(),supplier:$scope.search.SupplierTags.toString(),rack:$scope.search.RackTags.toString(),start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};serverService.list(params).$promise.then(function(response){$scope.serverTable.options.data=response.data},function(error){console.log(error)})},$scope.serverTable={options:{idField:"ServerId",toolbar:"#server_toolbar",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"Hostname",title:"主机名称",sortable:!0,formatter:$scope.action.operateHostnameFormatter,events:{"click #server_editor2":function(e,value,row,index){serverStateService.list({},function(response){$scope.serverStateList=response.data}),serverManufacturerService.list({},function(response){$scope.serverManufacturerList=response.data}),supplierService.listObject({},function(response){$scope.supplierList=response.rows}),hostArrayService.list({},function(response){$scope.hostList=response.data}),rackService.listObject({},function(response){$scope.rackList=response.rows}),appService.listObject({},function(response){$scope.appList=response.rows}),$scope.server.serveredits=!0,$scope.isActive=!0,$scope.editRackUnumber={},GetCpuByServerIdService.query({serverid:row.ServerId},{},function(response){$scope.cpuList=response}),GetMemoryByServerIdService.query({serverid:row.ServerId},{},function(response){$scope.memoryList=response}),GetHarddiskByServerIdService.query({serverid:row.ServerId},{},function(response){$scope.harddiskList=response}),GetNetworkadapterByServerIdService.query({serverid:row.ServerId},{},function(response){$scope.networkadapterList=response}),GetPortByServerIdService.query({serverid:row.ServerId},{},function(response){$scope.portList=response,$scope.portList[0].flag=!0,$scope.proccess=$scope.portList[0].proccess,$scope.ip=$scope.portList[0].ip}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.editServerId=row.ServerId,$scope.editIpaddress=row.Ipaddress,$scope.editServername=row.Hostname,$scope.editSn=row.Sn,$scope.serverStateSelected=row.State.Id,$scope.hostSelected=row.Host.Id,null!==row.Manufacturer&&($scope.serverManufacturerSelected=row.Manufacturer.Id),null!==row.Supplier&&($scope.supplierSelected=row.Supplier.Id),null!==row.Rack&&($scope.rackSelected=row.Rack.RackId),null!==row.App&&($scope.appSelected=row.App.AppId),1==row.Ishypervisor?$scope.server.editIsHypervisor="是":$scope.server.editIsHypervisor="否",1==row.IsServer?$scope.server.editIsServer="是":$scope.server.editIsServer="否",$scope.editModle=row.Modle,$scope.editIsHypervisor=row.Ishypervisor,$scope.editIsServer=row.IsServer,$scope.editRackUnumber={id:row.RackUNumber,num:row.RackUNumber},$scope.editComment=row.Comment})}}},{field:"Ipaddress",title:"IP地址",sortable:!0},{field:"Ishypervisor",title:"是否虚拟化",sortable:!0,formatter:function(value,row,index){return 1==value?"是":0===value?"否":"未知"}},{field:"Host",title:"操作系统",sortable:!0,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"Sn",title:"服务器SN",visible:!1,sortable:!0},{field:"Manufacturer",title:"制造商",visible:!1,sortable:!0,formatter:function(value,row,index){return null!==value?value.Manufacturer:""}},{field:"Supplier",title:"供应商",visible:!1,sortable:!0,formatter:function(value,row,index){return null!==value?value.Supplier:""}},{field:"Modle",title:"型号",visible:!1,sortable:!1},{field:"Cpu",title:"CPU",visible:!1,sortable:!1,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"Memory",title:"内存",visible:!1,sortable:!1,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"Harddisk",title:"硬盘",visible:!1,sortable:!1,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"Adapter",title:"网卡",visible:!1,sortable:!1,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"Rack",title:"机柜",visible:!1,sortable:!1,formatter:function(value,row,index){return null!==value?value.RackName:""}},{field:"RackUNumber",title:"机柜U位",visible:!1,sortable:!1,formatter:function(value,row,index){return value+"U"}},{field:"App",title:"业务",visible:!1,sortable:!1,formatter:function(value,row,index){return null!==value?value.AppName:""}},{field:"IsServer",title:"是否服务",visible:!1,sortable:!1,formatter:function(value,row,index){return 1==value?"是":0===value?"否":"未知"}},{field:"Comment",visible:!1,title:"备注"},{field:"State",title:"服务器状态",sortable:!1,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",serverService.listObject({enable:0},function(response){$scope.serverTable.options.data=response.rows})):($scope.deleteName="删除",serverService.listObject({enable:1},function(response){$scope.serverTable.options.data=response.rows}))},query:function(){serverService.listObject({search:$scope.serverTable.state.searchText,enable:1},function(response){$scope.serverTable.options.data=response.rows})},selections:[],removeSelector:"#batch_remove",id:"ServerId",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.ServerId});var params={serverid:ids.toString()};utilService.swalConfirm("确认删除服务器?",function(result){result&&serverService.delete(params,{},function(response){utilService.alert(response.msg),$scope.serverTable.state.refresh()})})},settings:function(){$uibModal.open({templateUrl:"server_state.html",controller:"ServerStateController"})}}}}function ServerAddController($rootScope,$scope,serverService,serverStateService,serverManufacturerService,hostArrayService,supplierService,rackService,appService,utilService,$uibModalInstance,stateColorService,GetCpuByServerIdService){serverStateService.list({},{},function(response){$rootScope.serverStateList=response.data,$rootScope.serverStateSelected=$rootScope.serverStateList[0]}),serverManufacturerService.list({},{},function(response){$rootScope.serverManufacturerList=response.data,$rootScope.serverManufacturerSelected=$rootScope.serverManufacturerList[0]}),hostArrayService.list({},{},function(response){$rootScope.hostArrayList=response.data,$rootScope.hostArraySelected=$rootScope.hostArrayList[0]}),supplierService.listObject({},function(response){$rootScope.supplierList=response.rows}),$scope.rackSelected={},rackService.listObject({},function(response){$rootScope.rackList=response.rows}),appService.listObject({},function(response){$rootScope.appList=response.rows}),$scope.RackNum=[{id:1,num:1},{id:2,num:2},{id:3,num:3},{id:4,num:4},{id:5,num:5},{id:6,num:6}],$scope.server={isserver:!0,ishypervisor:!0,addMore:!1},$scope.action={showAddServerState:function(){$("#addServerState").modal("show")},showAddManufacturer:function(){$("#addServerManufacturer").modal("show")},showAddHost:function(){$("#addHost").modal("show")},addServerCancel:function(){$uibModalInstance.dismiss()},addServer:function(){$uibModalInstance.close($scope.server)},addmore:function(){$scope.server.addMore=!$scope.server.addMore},testifyServer:function(){if($scope.server.sn){var params={sn:$scope.server.sn,enable:!0};serverService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此服务器已存在！"),$scope.server.sn="")},function(error){console.log(error)})}}},stateColorService.list({},function(response){$scope.mycolors=response.data}),$scope.addServerState=function(){var params={serverState:$scope.server.serverState,color:$scope.selectedColor};serverStateService.add(params,{},function(response){utilService.alert(response.msg),serverStateService.list({},{},function(response){$rootScope.serverStateList=response.data,$rootScope.serverStateSelected=$rootScope.serverStateList[0]}),$("#addServerState").modal("hide")})},$scope.addServerManufacturer=function(){var params={serverManufacturer:$scope.addserverManufacturer};serverManufacturerService.add(params,{},function(response){utilService.alert(response.msg),serverManufacturerService.list({},{},function(response){$rootScope.serverManufacturerList=response.data,$rootScope.serverManufacturerSelected=$rootScope.serverManufacturerList[0],$("#addServerManufacturer").modal("hide"),$scope.addserverManufacturer=[]})})},$scope.addHostArray=function(){var params={hostname:$scope.system};hostArrayService.add(params,{},function(response){utilService.alert(response.msg),hostArrayService.list({},{},function(response){$rootScope.hostArrayList=response.data,$rootScope.hostArraySelected=$rootScope.hostArrayList[0]}),$("#addHost").modal("hide"),$scope.system=[]})}}function ServerStateController($scope,$rootScope,$uibModalInstance,serverStateService,utilService,stateColorService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},refresh:function(){serverStateService.list({},{},function(response){$scope.ServerState=response.data})},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={serverState:$scope.addServerState,color:$scope.selectedColor};serverStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showAddColors=!1})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editServerStateId=state.Id,$scope.editServerState=state.State,$scope.selectedColor=state.Color},editSave:function(){var params={serverStateId:$scope.editServerStateId,serverState:$scope.editServerState,color:$scope.currentColor};serverStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showEditColors=!1,$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={serverStateId:state.Id.toString()};serverStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh()})}},$scope.settings.init(),$scope.settings.refresh()}Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("ServerControllerModule",[]).controller("ServerListController",ServerListController).controller("ServerAddController",ServerAddController).controller("ServerStateController",ServerStateController).name,ServerListController.$inject=["$scope","$rootScope","ServerService","ServerStateService","ServerManufacturerService","HostArrayService","SupplierService","RackService","AppService","UtilService","$uibModal","$http","GetCpuByServerIdService","GetMemoryByServerIdService","GetHarddiskByServerIdService","GetNetworkadapterByServerIdService","GetPortByServerIdService","CpuService","MemoryService","MemorySwapService"],ServerAddController.$inject=["$rootScope","$scope","ServerService","ServerStateService","ServerManufacturerService","HostArrayService","SupplierService","RackService","AppService","UtilService","$uibModalInstance","StateColorService","GetCpuByServerIdService"],ServerStateController.$inject=["$scope","$rootScope","$uibModalInstance","ServerStateService","UtilService","StateColorService"]}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("ServerServiceModule",["ngResource"]).factory("ServerService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.server,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"serverid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("ServerStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.serverState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("ServerManufacturerService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.serverManufacturer,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("HostArrayService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.host,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("CpuService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.cpu,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("GetCpuByServerIdService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.cpuByServerId,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).factory("MemoryService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.memory,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("MemorySwapService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.memorySwap,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("GetMemoryByServerIdService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.memoryByServerId,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).factory("HarddiskService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.harddisk,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("GetHarddiskByServerIdService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.hardDiskByServerId,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).factory("NetworkadapterService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.networkadapter,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("GetNetworkadapterByServerIdService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.networkadapterByServerId,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).factory("GetPortByServerIdService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.portByServerId,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _domainController=__webpack_require__(36),_domainController2=_interopRequireDefault(_domainController),_domainService=__webpack_require__(37),_domainService2=_interopRequireDefault(_domainService);exports.default=angular.module("DomainModule",[_domainController2.default,_domainService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("DomainControllerModule",["ui.bootstrap"]).controller("DomainListController",["$scope","$rootScope","DomainService","DomainStateService","DomainGradeService","UtilService","$uibModal",function($scope,$rootScope,domainService,domainStateService,domainGradeService,utilService,$uibModal){$scope.hardDelete=!1,$scope.deleteName="删除",$scope.domain={domainedits:!1,editSearchenginePush:!0},$scope.action={showAddDomain:function(){domainStateService.list({},{},function(response){$rootScope.domainStateAddList=response.data});var modalInstance=$uibModal.open({templateUrl:"add_domain_dialog.html",controller:"DomainAddController"});modalInstance.result.then(function(result){var params={name:result.Name,stateId:result.domainStateSelected,cnameSpeedup:result.CnameSpeedup,extStatus:result.ExtStatus,gradeId:result.domainGradeSelected,owner:result.Owner,records:result.Records,searchenginePush:result.SearchenginePush,ttl:result.Ttl,tokenId:result.TokenId,remark:result.Remark,enble:!0};domainService.add(params,{},function(response){utilService.alert(response.msg),$scope.dnspoddomainTable.state.refresh()})})},showState:function(){$("#domain_state_list").modal("show")},showGrade:function(){$("#domain_grade_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",domainService.listObject({enable:0},function(response){$scope.dnspoddomainTable.options.data=response.rows})},showbtnback:function(){$scope.dnspoddomainTable_recycle=!$scope.dnspoddomainTable_recycle},operateDnspoddomainFormatter:function(value,row,index){return row.Enable?['<a id="dnspoddomain_editor" style="padding:3px 6px 3px 6px" class="label label-success" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>&nbsp;编辑',"</a>","&nbsp",'<a id="dnspoddomain_remove" style="padding:3px 6px 3px 6px" class="label label-warning" href="javascript:void(0)" title="软删除">','<i class="glyphicon glyphicon-remove"></i>&nbsp;软删除',"</a>"].join(""):['<a id="dnspoddomain_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-repeat"></i>&nbsp;恢复',"</a>","&nbsp",'<a id="dnspoddomain_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>&nbsp;硬删除',"</a>"].join("")},operateNameFormatter:function(value,row,index){return $scope.hardDelete?row.Name:['<a id="dnspoddomain_editor2" style="text-decoration:none;cursor:pointer">'+row.Name+"</a>"]},hideSearch:function(){$scope.domain.domainscreen=!1,$scope.isActive=!1},showSearch:function(){$scope.domain.domainscreen=!0,$scope.isActive=!0,domainStateService.list({},function(response){$scope.domainStateList=response.data})},hideeditDomain:function(){$scope.domain.domainedits=!1,$scope.isActive=!1},domainremove:function(value,row,index){var params={id:$scope.domain.editId};utilService.swalConfirm("确认删除域名?",function(result){result&&domainService.delete(params,{},function(response){utilService.alert(response.msg),$scope.dnspoddomainTable.state.refresh(),$scope.domain.domainedits=!1,$scope.isActive=!1})})},updateDomain:function(){($scope.domain.editSearchenginePush="是")?$scope.domain.editSearchenginePush=1:$scope.domain.editSearchenginePush=0;var params={id:$scope.domain.editId,name:$scope.domain.editName,stateId:$scope.domainStateSelected.Id,cnameSpeedup:$scope.domain.editCnameSpeedup,extStatus:$scope.domain.editExtStatus,gradeId:$scope.domain.domainGradeSelected,owner:$scope.domain.editOwner,records:$scope.domain.editRecords,searchenginePush:$scope.domain.editSearchenginePush,ttl:$scope.domain.editTtl,tokenId:$scope.domain.editTokenId,remark:$scope.domain.editRemark,enble:!0};domainService.update(params,{},function(response){utilService.alert(response.msg),$scope.dnspoddomainTable.state.refresh(),$scope.domain.domainedits=!1,$scope.isActive=!1})},clearAll:function(){$scope.search={searchText:"",domainState:{},domainLevel:{}}},searchAll:function(){$scope.search.domainStateTags=[],$scope.search.domainLevelTags=[];for(var key in $scope.search.domainState)$scope.search.domainState[key]&&$scope.search.domainStateTags.push(key);for(var key in $scope.search.domainLevel)$scope.search.domainLevel[key]&&$scope.search.domainLevelTags.push(key);var params={name:$scope.search.searchText,state:$scope.search.domainStateTags,grade:$scope.search.domainLevelTags,start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};domainService.list(params).$promise.then(function(response){$scope.dnspoddomainTable.options.data=response.data})}},$scope.search={searchText:"",domainState:{},domainStateTags:[],domainLevel:{},domainLevelTags:[],startTime:"",EndTime:""},$scope.dnspoddomainTable={options:{idField:"Id",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"Name",title:"域名",sortable:!0,formatter:$scope.action.operateNameFormatter,events:{"click #dnspoddomain_editor2":function(e,value,row,index){domainStateService.list({},{},function(response){$rootScope.domainStateAddList=response.data}),$scope.domain.domainedits=!0,$scope.isActive=!0,row instanceof Object&&null!==row&&($scope.$apply(function(){$scope.domain.editState="",$scope.domain.domainGradeSelected=row.Grade.Id,$scope.domain.editId=row.Id,$scope.domain.editName=row.Name,$scope.domain.editCnameSpeedup=row.CnameSpeedup,$scope.domain.editExtStatus=row.ExtStatus,$scope.domain.editOwner=row.Owner,$scope.domain.editRecords=row.Records,$scope.domain.editTtl=row.Ttl,$scope.domain.editTokenId=row.TokenId,$scope.domain.editRemark=row.Remark,1==row.editSearchenginePush?$scope.domain.editSearchenginePush="是":$scope.domain.editSearchenginePush="否"}),domainGradeService.list({},function(response){$scope.domainGradeEditList=response.data,angular.forEach(response.data,function(val,index){row.Grade.Id==val.Id&&($scope.domainGradeSelected=val)})}),domainStateService.list({},function(response){$scope.domainStateEditList=response.data,angular.forEach(response.data,function(val,index){row.State.Id==val.Id&&($scope.domainStateSelected=val)})}))}}},{field:"Owner",title:"域名供应商",sortable:!0},{field:"Ttl",title:"域名默认的TTL值",sortable:!0},{field:"State",title:"域名状态",sortable:!0,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}},{field:"Remark",visible:!0,title:"备注"}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",domainService.listObject({enable:0},function(response){$scope.dnspoddomainTable.options.data=response.rows})):($scope.deleteName="删除",domainService.listObject({enable:1},function(response){$scope.dnspoddomainTable.options.data=response.rows}))},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",domainService.listObject({search:$scope.dnspoddomainTable.state.searchText,enable:0},function(response){$scope.dnspoddomainTable.options.data=response.rows})):($scope.deleteName="删除",domainService.listObject({search:$scope.dnspoddomainTable.state.searchText,enable:1},function(response){$scope.dnspoddomainTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={id:ids.toString()};utilService.swalConfirm("确认删除域名?",function(result){result&&domainService.delete(params,{},function(response){utilService.alert(response.msg),$scope.dnspoddomainTable.state.refresh()})})},settings:function(){$uibModal.open({templateUrl:"domain_state.html",controller:"DomainStateController"})}}},$scope.dnspoddomainTable.state.refresh(),domainStateService.list({},{},function(response){$rootScope.domainStateAddList=response.data}),domainGradeService.list({},{},function(response){$rootScope.domainGradeAddList=response.data}),$scope.dnspoddomainTable_recycle=!0,$scope.dnspoddomainTable_back=function(){$scope.hardDelete&&($scope.hardDelete=!1,$scope.dnspoddomainTable.state.refresh())},$rootScope.$on("childEmit",function(event,data){$scope.dnspoddomainTable.state.refresh()})}]).controller("DomainAddController",["$scope","$rootScope","$uibModalInstance","DomainStateService","DomainGradeService","UtilService","StateColorService","DomainService",function($scope,$rootScope,$uibModalInstance,domainStateService,domainGradeService,utilService,stateColorService,domainService){$scope.addDomainCancel=function(){$uibModalInstance.dismiss()},$scope.showAddDomainGrade=function(){$("#addDomainGrade").modal("show")},$scope.showAddDomainState=function(){$("#addDomainState").modal("show")},$scope.addDomain=function(){$uibModalInstance.close($scope.domain)},$scope.addDomainState2=function(){var params={dnspoddomainState:$scope.AdddnspoddomainState,color:$scope.selectedColor};domainStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.showAddColors=!1,domainStateService.list({},{},function(response){$rootScope.domainStateAddList=response.data})}),$("#addDomainState").modal("hide")},stateColorService.list({},function(response){$scope.mycolors=response.data}),$scope.testifyDomain=function(){if($scope.domain.Name){var params={name:$scope.domain.Name,enable:!0};domainService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此域名已存在！"),$scope.domain.Name="")})}}}]).controller("DomainStateController",["$scope","$rootScope","DomainStateService","UtilService","$uibModalInstance","StateColorService",function($scope,$rootScope,domainStateService,utilService,$uibModalInstance,stateColorService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},refresh:function(){domainStateService.list({},{},function(response){$scope.DomainState=response.data})},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={dnspoddomainState:$scope.addDomainState,color:$scope.selectedColor};domainStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showAddColors=!1})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editDomainStateId=state.Id,$scope.editDomainState=state.State,$scope.selectedColor=state.Color},editSave:function(){var params={dnspoddomainStateId:$scope.editDomainStateId,dnspoddomainState:$scope.editDomainState,color:$scope.currentColor};domainStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showEditColors=!1,$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={dnspoddomainStateId:state.Id.toString()};domainStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh()})}},$scope.settings.init(),$scope.settings.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("DomainServiceModule",["ngResource"]).factory("DomainService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dnspoddomain,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("DomainStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dnspoddomainState,{timestamp:utilService.getTimestamp()
},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("DomainGradeService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.dnspoddomainGrade,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _rackController=__webpack_require__(39),_rackController2=_interopRequireDefault(_rackController),_rackService=__webpack_require__(40),_rackService2=_interopRequireDefault(_rackService);exports.default=angular.module("RackModule",[_rackController2.default,_rackService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("RackControllerModule",[]).controller("RackListController",["$scope","$rootScope","RackService","RackStateService","RoomService","UtilService","$uibModal",function($scope,$rootScope,rackService,rackStateService,roomService,utilService,$uibModal){$scope.hardDelete=!1,$scope.deleteName="删除",$scope.rackscreen=!1,$scope.action={showAddRack:function(){rackStateService.list({},{},function(response){$scope.rackStateList=response.data}),roomService.listObject({enable:1},function(response){$scope.roomList=response.rows});var modalInstance=$uibModal.open({templateUrl:"add_rack_dialog.html",controller:"RackAddController"});modalInstance.result.then(function(result){var params={rackName:result.rackName,status:result.rackStateSelected.Id,room:result.roomSelected.RoomId,standardNum:result.StandardNum,topNotAvailableNum:result.topAvailNum,bottomNotAvailableNum:result.bottomAvailNum,avaliableNum:result.avaliableNum,taryNum:result.taryNum.num,rackNetflow:result.rackNetflow,isUps:result.ups,isAb:result.ab,power:result.power,comment:result.comment};rackService.add(params,{},function(response){utilService.alert(response.msg),$scope.rackTable.state.refresh()})})},showState:function(){$("#rack_state_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",rackService.listObject({enable:0},function(response){$scope.rackTable.options.data=response.rows})},operateRackNameFormatter:function(value,row,index){return $scope.hardDelete?row.RackName:['<a id="rack_editor2" style="text-decoration:none;cursor:pointer">'+row.RackName+"</a>"]},hideSearch:function(){$scope.rackscreen=!1,$scope.isActive=!1},showSearch:function(){$scope.rackscreen=!0,$scope.isActive=!0,rackStateService.list({},function(response){$scope.rackStateList=response.data})},hideeditRack:function(){$scope.rackedits=!1,$scope.isActive=!1},rackremove:function(value,row,index){var params={rackid:$scope.rack.editRackId};utilService.swalConfirm("确认删除机柜?",function(result){result&&rackService.delete(params,{},function(response){utilService.alert(response.msg),$scope.rackTable.state.refresh(),$scope.rackedits=!1,$scope.isActive=!1})})},updateRack:function(){"是"==$scope.rack.editUps?$scope.rack.editUps=1:$scope.rack.editUps=0,"是"==$scope.rack.editAb?$scope.rack.editAb=1:$scope.rack.editAb=0;var params={rackid:$scope.rack.editRackId,rackName:$scope.rack.editRackName,status:$scope.rack.rackStateSelected,room:$scope.rack.roomSelected,standardNum:$scope.rack.editStandardNum,topNotAvailableNum:$scope.rack.editTopNotAvailableNum,bottomNotAvailableNum:$scope.rack.editBottomNotAvailableNum,avaliableNum:$scope.rack.editAvaliableNum,taryNum:$scope.rack.editTaryNum.num,rackNetflow:$scope.rack.editRackNetflow,isUps:$scope.rack.editUps,isAb:$scope.rack.editAb,power:$scope.rack.editPower,comment:$scope.rack.editComment};rackService.update(params,{},function(response){utilService.alert(response.msg),$scope.rackedits=!1,$scope.rackTable.state.refresh()})},addStandardNum:function(){$scope.rack.editStandardNum<100?$scope.rack.editStandardNum=$scope.rack.editStandardNum+5:alert("已达到最大机柜标准U数")},chStandardNum:function(){$scope.rack.editStandardNum>100&&alert("已达到最大机柜标准U数")},plusStandardNum:function(){$scope.rack.editStandardNum<5?alert("标准U位数不足5！"):$scope.rack.editStandardNum=$scope.rack.editStandardNum-5},addtopAvailNum:function(){$scope.rack.editTopNotAvailableNum<=$scope.rack.editStandardNum&&($scope.rack.editTopNotAvailableNum=$scope.rack.editTopNotAvailableNum+5)},plustopAvailNum:function(){$scope.rack.editTopNotAvailableNum<5?alert("顶部不可用U位数不足5！"):$scope.rack.editTopNotAvailableNum=$scope.rack.editTopNotAvailableNum-5},addbottomAvailNum:function(){$scope.rack.editBottomNotAvailableNum<=$scope.rack.editStandardNum&&($scope.rack.editBottomNotAvailableNum=$scope.rack.editBottomNotAvailableNum+5)},plusbottomAvailNum:function(){$scope.rack.editBottomNotAvailableNum<5?alert("底部不可用U位数不足5！"):$scope.rack.editBottomNotAvailableNum-=5},clearAll:function(){$scope.search={searchText:"",rackState:{},room:{},rackUps:{},isPower:{}}},searchAll:function(){$scope.search.rackStateTags=[],$scope.search.rackUpsTags=[],$scope.search.isPowerTags=[];for(var key in $scope.search.rackState)$scope.search.rackState[key]&&$scope.search.rackStateTags.push(key);for(var key in $scope.search.rackUps)$scope.search.rackUps[key]&&$scope.search.rackUpsTags.push(key);for(var key in $scope.search.isPower)$scope.search.isPower[key]&&$scope.search.isPowerTags.push(key);var params={rackname:$scope.search.searchText,state:$scope.search.rackStateTags,isups:$scope.search.rackUpsTags,isab:$scope.search.isPowerTags,enable:!0};rackService.list(params).$promise.then(function(response){$scope.rackTable.options.data=response.data})}},$scope.rack={screen:!1,edits:!1,editRackId:"",editRackName:"",rackStateSelected:"",roomSelected:"",editStandardNum:"",editTopNotAvailableNum:"",editBottomNotAvailableNum:"",editAvaliableNum:"",editTaryNum:"",editRackNetflow:"",editUps:!0,editAb:!0,editPower:"",editComment:""},$scope.sum=function(){return $scope.rack.editStandardNum-$scope.add()},$scope.add=function(){return $scope.rack.editTopNotAvailableNum+$scope.rack.editBottomNotAvailableNum},$scope.$watch($scope.sum,function(newVal,oldVal){newVal>0?$scope.rack.editAvaliableNum=newVal:$scope.rack.editAvaliableNum=0}),$scope.$watch($scope.add,function(newVal,oldVal){newVal>$scope.rack.editStandardNum?(alert("非法操作，请重新输入数据！"),$scope.rack.editTopNotAvailableNum=0,$scope.rack.editBottomNotAvailableNum=0):$scope.sum()}),$scope.rackTable={options:{idField:"RackId",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,searchDisplay:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"RackName",title:"机柜名称",sortable:!0,formatter:$scope.action.operateRackNameFormatter,events:{"click #rack_editor2":function(e,value,row,index){rackStateService.list({},{},function(response){$scope.rackStateList=response.data}),roomService.listObject({enable:1},function(response){$scope.roomList=response.rows}),$scope.$apply(function(){$scope.rackedits=!0,$scope.isActive=!0}),$scope.TaryListNum=[{num:1},{num:2},{num:3},{num:4},{num:5},{num:6},{num:7},{num:8},{num:9},{num:10}],angular.forEach($scope.TaryListNum,function(idx,val){idx.num==row.TaryNum&&($scope.rack.editTaryNum=idx)}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.rack.roomSelected={},$scope.rack.editRackId=row.RackId,$scope.rack.editRackName=row.RackName,$scope.rack.rackStateSelected=row.State.Id,$scope.rack.editStandardNum=row.StandardNum,$scope.rack.editTopNotAvailableNum=row.TopNotAvailableNum,$scope.rack.editBottomNotAvailableNum=row.BottomNotAvailableNum,$scope.rack.editAvaliableNum=row.AvaliableNum,$scope.rack.editRackNetflow=row.RackNetflow,$scope.rack.editPower=row.Power,$scope.rack.editComment=row.Comment,null!==row.Room&&($scope.rack.roomSelected=row.Room.RoomId),1==row.IsUps?$scope.rack.editUps="是":$scope.rack.editUps="否",1==row.IsAb?$scope.rack.editAb="是":$scope.rack.editAb="否"})}}},{field:"Room",title:"所属机房",sortable:!0,formatter:function(value,row,index){return null!==value?value.RoomName:""}},{field:"StandardNum",title:"机柜标准U数",sortable:!0,formatter:function(value,row,index){return null!==value?value+"U":""}},{field:"TopNotAvailableNum",title:"顶部不可用U数",sortable:!0,visible:!1,formatter:function(value,row,index){return null!==value?value+"U":""}},{field:"BottomNotAvailableNum",title:"底部不可用U数",sortable:!0,visible:!1,formatter:function(value,row,index){return null!==value?value+"U":""}},{field:"AvaliableNum",title:"机柜可用U数",sortable:!0,formatter:function(value,row,index){return null!==value?value+"U":""}},{field:"TaryNum",title:"托盘数",sortable:!0,visible:!1,formatter:function(value,row,index){return value+"个"}},{field:"RackNetflow",title:"机柜带宽流量(兆)",sortable:!0,formatter:function(value,row,index){return value+"Mb"}},{field:"State",title:"机柜状态",sortable:!0,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}},{field:"IsUps",title:"是否有UPS",sortable:!0,visible:!1,formatter:function(value,row,index){return 1==value?"是":0===value?"否":"未知"}},{field:"IsAb",title:"是否A/B供电",sortable:!0,visible:!1,formatter:function(value,row,index){return 1==value?"是":0===value?"否":"未知"}},{field:"Power",title:"机柜功率(千瓦)",sortable:!0,visible:!1,formatter:function(value,row,index){return value+"KW"}},{field:"Comment",title:"备注",visible:!1}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",rackService.listObject({enable:0},function(response){$scope.rackTable.options.data=response.rows})):($scope.deleteName="删除",rackService.listObject({enable:1},function(response){$scope.rackTable.options.data=response.rows}))},query:function(){rackService.listObject({search:$scope.rackTable.state.searchText,enable:1},function(response){$scope.rackTable.options.data=response.rows})},selections:[],removeSelector:"#batch_remove",id:"RackId",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.RackId});var params={rackid:ids.toString()};utilService.swalConfirm("确认删除机柜?",function(result){result&&rackService.delete(params,{},function(response){utilService.alert(response.msg),$scope.rackTable.state.refresh()})})},settings:function(){$uibModal.open({templateUrl:"rack_state.html",controller:"RackStateController"})}}},$scope.search={searchText:$scope.rackTable.state.searchText,rackState:{},rackStateTags:[],rackUps:{},rackUpsTags:[],isPower:{},isPowerTags:[]},$scope.rackUps=[{id:1,value:"是"},{id:0,value:"否"}],$scope.rackPower=[{id:1,value:"是"},{id:0,value:"否"}],$scope.rackTable.state.refresh(),$scope.rackTable_recycle=!0,$scope.rackTable_back=function(){$scope.hardDelete&&($scope.hardDelete=!1,$scope.rackTable.state.refresh())},$rootScope.$on("childEmit",function(event,data){$scope.rackTable.state.refresh()})}]).controller("RackAddController",["$rootScope","$scope","RackService","RackStateService","RoomService","UtilService","$uibModalInstance","StateColorService",function($rootScope,$scope,rackService,rackStateService,roomService,utilService,$uibModalInstance,stateColorService){$scope.rack={rackName:"",addmore:!1,rackStateSelected:"",roomSelected:"",StandardNum:48,topAvailNum:0,bottomAvailNum:0,avaliableNum:"",taryNum:1,rackNetflow:"",ups:!0,ab:!0,power:"",comment:"",addrackState:""},stateColorService.list({},function(response){$scope.mycolors=response.data}),$scope.TaryListNum=[{num:1},{num:2},{num:3},{num:4},{num:5},{num:6},{num:7},{num:8},{num:9},{num:10}],$scope.sum=function(){return $scope.rack.StandardNum-$scope.add()},$scope.add=function(){return $scope.rack.topAvailNum+$scope.rack.bottomAvailNum},$scope.$watch($scope.sum,function(newVal,oldVal){newVal>0?$scope.rack.avaliableNum=newVal:$scope.rack.avaliableNum=0}),$scope.$watch($scope.add,function(newVal,oldVal){newVal>$scope.rack.StandardNum?(alert("非法操作，请重新输入数据！"),$scope.rack.topAvailNum=0,$scope.rack.bottomAvailNum=0):$scope.sum()}),$scope.action={addStandardNum:function(){$scope.rack.StandardNum<100?$scope.rack.StandardNum=$scope.rack.StandardNum+5:alert("已达到最大机柜标准U数")},plusStandardNum:function(){$scope.rack.StandardNum<5?alert("标准U位数不足5！"):$scope.rack.StandardNum=$scope.rack.StandardNum-5},addtopAvailNum:function(){$scope.rack.topAvailNum=$scope.rack.topAvailNum+5},plustopAvailNum:function(){$scope.rack.topAvailNum<5?alert("顶部不可用U位数不足5！"):$scope.rack.topAvailNum=$scope.rack.topAvailNum-5},addbottomAvailNum:function(){$scope.rack.bottomAvailNum=$scope.rack.bottomAvailNum+5},plusbottomAvailNum:function(){$scope.rack.bottomAvailNum<5?alert("底部不可用U位数不足5！"):$scope.rack.bottomAvailNum-=5},addMore:function(){$scope.rack.addmore=!$scope.rack.addmore},testifyRack:function(){if($scope.rack.rackName){var params={rackName:$scope.rack.rackName,enable:!0};rackService.list(params).$promise.then(function(response){angular.forEach(response.data,function(val,idx){val.RackName==$scope.rack.rackName&&(utilService.alert("此机柜已存在！"),$scope.rack.rackName="")})})}}},$scope.addRackCancel=function(){$uibModalInstance.dismiss()},$scope.addRack=function(){$uibModalInstance.close($scope.rack)},rackStateService.list({},{},function(response){$rootScope.rackStateList=response.data}),roomService.listObject({enable:1},function(response){$rootScope.roomList=response.rows}),$scope.showAddRackStates=function(){$("#addRackState").modal("show")},$scope.addRackState=function(){var params={rackState:$scope.rack.addrackState,color:$scope.selectedColor};rackStateService.add(params,{},function(response){utilService.alert(response.msg),$("#addRackState").modal("hide"),rackStateService.list({},{},function(response){$scope.rackStateList=response.data})})}}]).controller("RackStateController",["$scope","$rootScope","RackStateService","UtilService","$uibModalInstance","StateColorService",function($scope,$rootScope,rackStateService,utilService,$uibModalInstance,stateColorService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},refresh:function(){rackStateService.list({},{},function(response){$scope.RackState=response.data})},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={rackState:$scope.addRackState,color:$scope.selectedColor};rackStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showAddColors=!1})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editRackStateId=state.Id,$scope.editRackState=state.State,$scope.selectedColor=state.Color},editSave:function(){var params={rackStateId:$scope.editRackStateId,rackState:$scope.editRackState,color:$scope.currentColor};rackStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showEditColors=!1,$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={rackStateId:state.Id.toString()};rackStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh()})}},$scope.settings.init(),$scope.settings.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("RackServiceModule",["ngResource"]).factory("RackService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.rack,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"rackid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{format:"json",sort:"RackId",order:"asc",enable:1},headers:$rootScope.authorization}})}]).factory("RackStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.rackState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _appController=__webpack_require__(42),_appController2=_interopRequireDefault(_appController),_appService=__webpack_require__(43),_appService2=_interopRequireDefault(_appService);exports.default=angular.module("AppModule",[_appController2.default,_appService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("AppControllerModule",[]).controller("AppListController",["$scope","AppService","AppLevelService","UtilService","$uibModal",function($scope,appService,appLevelService,utilService,$uibModal){$scope.hardDelete=!1,$scope.deleteName="删除",appLevelService.list({},{},function(response){$scope.appLevelList=response.data}),$scope.app={editAppId:"",editAppName:"",editCode:"",appLevelSelected:"",editOwn:"",editDevOwn:"",editOpsOwn:"",editComment:"",appedits:!1,screen:!1},$scope.search={searchText:"",appLevel:{},appLevelTags:[],startTime:"",endTime:""},$scope.action={showAddApp:function(){var modalInstance=$uibModal.open({templateUrl:"add_app.html",controller:"AppAddController"});modalInstance.result.then(function(result){var params={appName:result.appName,appCode:result.appCode,appLevel:result.appLevelSelected.Id,appOwn:result.appOwn,devOwn:result.devOwn,opsOwn:result.opsOwn,comment:result.comment};appService.add(params,{},function(response){utilService.alert(response.msg),$scope.appTable.state.refresh()})})},showAppLevel:function(){$("#app_level_list").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",appService.listObject({enable:0},function(response){$scope.appTable.options.data=response.rows})},showbtnback:function(){$scope.appTable_recycle=!$scope.appTable_recycle},operateAppFormatter:function(value,row,index){return row.Enable?['<a id="app_editor" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style=" margin-right:10px;"><li><i class="glyphicon glyphicon-pencil"></i></li><li>编辑</li></ul>',"</a>",'<a id="app_remove" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style=" margin-right:10px;"><li><i class="glyphicon glyphicon-remove"></i></li><li>删除</li></ul>',"</a>"].join(""):['<a id="app_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-repeat"></i>&nbsp;恢复',"</a>","&nbsp",'<a id="app_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>&nbsp;硬删除',"</a>"].join("")},operateAppNameFormatter:function(value,row,index){return $scope.hardDelete?row.AppName:['<a id="app_editor2" style="text-decoration:none;cursor:pointer">'+row.AppName+"</a>"]},hideSearch:function(){$scope.app.screen=!1,$scope.isActive=!1},showSearch:function(){$scope.app.screen=!0,$scope.isActive=!0,appLevelService.list({enable:1},{},function(response){$scope.appLevelList=response.data})},hideeditApp:function(){$scope.app.appedits=!1,$scope.isActive=!1},appremove:function(value,row,index){var params={appid:$scope.app.editAppId};utilService.swalConfirm("确认删除业务?",function(result){result&&appService.delete(params,{},function(response){utilService.alert(response.msg),$scope.appTable.state.refresh(),$scope.app.appedits=!1,$scope.isActive=!1})})},UpdateApp:function(){var params={Id:$scope.app.editAppId,appName:$scope.app.editAppName,appCode:$scope.app.editCode,appLevel:$scope.app.appLevelSelected,appOwn:$scope.app.editOwn,devOwn:$scope.app.editDevOwn,opsOwn:$scope.app.editOpsOwn,comment:$scope.app.editComment};appService.update(params,{},function(response){utilService.alert(response.msg),$scope.app.appedits=!1,$scope.isActive=!1,$scope.appTable.state.refresh()})},clearAll:function(){$scope.search={searchText:"",appLevel:{},startTime:"",endTime:""}},searchAll:function(){$scope.search.appLevelTags=[];for(var key in $scope.search.appLevel)$scope.search.appLevel[key]&&$scope.search.appLevelTags.push(key);var params={name:$scope.search.searchText,level:$scope.search.appLevelTags,start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};appService.list(params).$promise.then(function(response){$scope.appTable.options.data=response.data})}},$scope.appTable={options:{idField:"Appid",toolbar:"#app_toolbar",toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!1,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"AppName",title:"业务名称",sortable:!0,formatter:$scope.action.operateAppNameFormatter,events:{"click #app_editor2":function(e,value,row,index){appLevelService.list({},{},function(response){$scope.appLevelList=response.data}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.app.appedits=!0,$scope.isActive=!0,$scope.app.editAppId=row.AppId,$scope.app.editCode=row.AppCode,$scope.app.editAppName=row.AppName,$scope.app.appLevelSelected=row.Level.Id,$scope.app.editOwn=row.AppOwn,$scope.app.editDevOwn=row.DevOwn,$scope.app.editOpsOwn=row.OpsOwn,$scope.app.editComment=row.Comment})}}},{field:"AppCode",title:"业务代号",sortable:!0},{field:"Level",title:"业务等级",sortable:!0,formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"AppOwn",title:"业务负责人",sortable:!0},{field:"DevOwn",title:"开发负责人",sortable:!0},{field:"OpsOwn",title:"运维负责人",sortable:!0},{field:"Comment",title:"备注",sortable:!0}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",appService.listObject({enable:0},function(response){$scope.appTable.options.data=response.rows})):($scope.deleteName="删除",appService.listObject({enable:1},function(response){$scope.appTable.options.data=response.rows}))},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",appService.listObject({search:$scope.appTable.state.searchText,enable:0},function(response){$scope.appTable.options.data=response.rows})):($scope.deleteName="删除",appService.listObject({search:$scope.appTable.state.searchText,enable:1},function(response){$scope.appTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"AppId",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,index){ids[index]=val.AppId});var params={appid:ids.toString()};utilService.swalConfirm("确认删除业务模块?",function(result){result&&appService.delete(params,{},function(response){utilService.alert(response.msg),$scope.appTable.state.refresh()})})},settings:function(){alert("待添加。。。。。。")}}},$scope.appTable.state.refresh()}]).controller("AppAddController",["$scope","$uibModalInstance","AppLevelService","UtilService",function($scope,$uibModalInstance,appLevelService,utilService){$scope.addAppCancel=function(){$uibModalInstance.dismiss()},$scope.addApp=function(){$uibModalInstance.close($scope.app)},$scope.addmore=function(){$scope.addMore=!$scope.addMore},appLevelService.list({},{},function(response){$scope.appLevelList=response.data}),$scope.showAddLevel=function(){$("#addLevel").modal("show")},$scope.addAppLevel=function(){var params={appLevel:$scope.level};appLevelService.add(params,{},function(response){utilService.alert(response.msg),appLevelService.list({},{},function(response){$scope.appLevelList=response.data}),$("#addLevel").modal("hide"),$scope.level=[]})}}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("AppServiceModule",["ngResource"]).factory("AppService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.app,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"appid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("AppLevelService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.appLevel,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _ipSubnetController=__webpack_require__(45),_ipSubnetController2=_interopRequireDefault(_ipSubnetController),_ipAddressController=__webpack_require__(46),_ipAddressController2=_interopRequireDefault(_ipAddressController),_ipService=__webpack_require__(47),_ipService2=_interopRequireDefault(_ipService);exports.default=angular.module("IpModule",[_ipSubnetController2.default,_ipAddressController2.default,_ipService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("IpSubnetControllerModule",[]).controller("IpSubNetListController",["$scope","IpSubNetService","UtilService","$uibModal","$state",function($scope,IpSubNetService,utilService,$uibModal,$state){$scope.ip={ipscreen:!1,ipedits:!1},$scope.ipSubnet={id:null,subnet_address:null,vlan:null,format:"json",sort:"id",order:"asc",enable:1},$scope.ipSubnetEdit={id:null,subnet_address:null,subnetDescription:null,vlan:null,allowAllocation:null,checkIpState:null},$scope.action={showAddIpSubnet:function(){var modalInstance=$uibModal.open({templateUrl:"add_ip.html",controller:"addIpController"});modalInstance.result.then(function(result){var params={subnetAddress:result.subnetAddress+"/"+result.subnetMask,subnetDescription:result.subnetDescription,vlan:result.vlan,allowAllocation:result.allowAllocation,checkIpState:result.checkIpState};IpSubNetService.add(params,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh()})})},hideSearch:function(){$scope.ip.ipscreen=!1,$scope.isActive=!1},showSearch:function(){$scope.ip.ipscreen=!0,$scope.ip.ipedits=!1,$scope.isActive=!0},operateUseAbleFormatter:function(value,row,index){if(row.Enable)return['<progress id="ip_use" value="" max="100" min="0"></progress>0%']},operateIpFormatter:function(value,row,index){if(row.enable)return['<a id="ip_detail" style="cursor: pointer">查看详情</a>']},hideeditIp:function(){$scope.ip.ipedits=!1,$scope.isActive=!1},ipremove:function(value,row,index){utilService.swalConfirm("确认删除IP子网，IP子网下的IP将同时删除?",function(result){result&&IpSubNetService.delete($scope.ipSubnetEdit,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh(),$scope.ip.ipedits=!1,$scope.isActive=!1})})},updateIp:function(){IpSubNetService.update($scope.ipSubnetEdit,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh(),$scope.ip.ipedits=!1,$scope.isActive=!1})},clearAll:function(){$scope.ipSubnet={id:null,subnet_address:null,vlan:null,format:"json",sort:"id",order:"asc",enable:1}},searchAll:function(){IpSubNetService.list($scope.ipSubnet).$promise.then(function(response){$scope.ipTable.options.data=response.rows})}},$scope.ipTable={options:{data:[],striped:!0,pagination:!0,idField:"id",toolbar:"#ip_toolbar",locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!1,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"subnet_address",title:"IP子网",sortable:!0,formatter:function(value,row,index){return'<a id="ipsubnet_editor2" style="text-decoration:none;cursor:pointer">'+value+"</a>"},events:{"click #ipsubnet_editor2":function(e,value,row,index){$scope.$apply(function(){$scope.ip.ipscreen=!1,$scope.ip.ipedits=!0,$scope.isActive=!0,$scope.ipSubnetEdit.id=row.id,$scope.ipSubnetEdit.subnet_address=row.subnet_address,$scope.ipSubnetEdit.allowAllocation=row.allow_allocation,$scope.ipSubnetEdit.checkIpState=row.check_ip_state,$scope.ipSubnetEdit.vlan=row.vlan,$scope.ipSubnetEdit.subnetDescription=row.subnet_description})}}},{field:"vlan",title:"VLAN",sortable:!1},{field:"check_ip_state",title:"检测主机状态",sortable:!1,formatter:function(value,row,index){return 0===value?"不检测":"检测"}},{field:"allow_allocation",title:"是否允许分配",formatter:function(value,row,index){return 0===value?"不允许":"允许"}},{field:"subnet_description",title:"描述"},{field:"operate",title:"操作",align:"center",formatter:$scope.action.operateIpFormatter,events:{"click #ip_detail":function(e,value,row,index){$state.go("root.ipdetails",{object:row})}}}]},state:{searchText:"",searchFilter:!0,refresh:function(){IpSubNetService.listObject({enable:1},function(response){$scope.ipTable.options.data=response.rows})},query:function(){IpSubNetService.listObject({search:$scope.ipTable.state.searchText,enable:1},function(response){$scope.ipTable.options.data=response.rows})},selections:[],removeSelector:"#batch_remove",id:"id",deleteAll:function(){var ids=[];
angular.forEach(this.selections,function(val,idx){ids[idx]=val.id});var params={id:ids.toString()};utilService.swalConfirm("确认删除IP子网?",function(result){result&&IpSubNetService.delete(params,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh()})})},settings:function(){}}},$scope.ipTable.state.refresh(),$scope.ipTable_recycle=!0,$scope.ipTable_back=function(){$scope.hardDelete&&($scope.hardDelete=!1,$scope.ipTable.state.refresh())}}]).controller("addIpController",["$scope","$uibModalInstance","$uibModal","IpSubNetService","UtilService",function($scope,$uibModalInstance,$uibModal,IpSubNetService,utilService){$scope.ip={subnetMask:24,subnetDescription:null,vlan:null,allowAllocation:1,checkIpState:0},$scope.addIpCancel=function(){$uibModalInstance.dismiss()},$("#ipadd").mask("0ZZ.0ZZ.0ZZ.0ZZ",{translation:{Z:{pattern:/[0-9]/,optional:!0}}}),$("#ipadd").mask("099.099.099.099"),$scope.addIp=function(){$uibModalInstance.close($scope.ip)}}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("IpAddressControllerModule",[]).controller("IpAddressController",["$scope","IpAddressService","IpAddressUpdateService","IpAddressMonitorService","IpSubNetService","UtilService","$stateParams","$interval",function($scope,IpAddressService,IpAddressUpdateService,IpAddressMonitorService,IpSubNetService,utilService,$stateParams,$interval){$scope.screenIpForm=!1,$scope.editIpForm=!1,$scope.isActive=!1,$scope.ipAddressMonitor={used_ip_address:0,unused_ip_address:0,disable_modify_ip_address:0,use_rate_ip_address:0},$scope.callAtInterval=function(){IpAddressMonitorService.query($scope.ipAddressSearch,function(response){$scope.ipAddressMonitor=response})},$interval(function(){$scope.callAtInterval()},3e3),$scope.ipAddress={ipSubnetPrefix:null,ipSubnetMiddle:null,ipSubnetLast:null,batchSetHostname:null,hostnamePrefix:null,deviceType:null,port:null,owner:null,description:null,allowModify:null,location:null},$scope.ipAddressSearch={ip_subnet:null,ipAdress:null,hostnamePrefix:null,deviceType:null,port:null,owner:null,description:null,allowModify:null,location:null,format:"json",sort:"id",order:"asc",enable:1},$scope.ipAddressEdit={id:null,ip_address:null,hostname:null,deviceType:null,location:null,port:null,owner:null,description:null,allowModify:null},IpSubNetService.listObject({},function(response){$scope.IpSubnetList=response.rows,$scope.IpSubnetPrefixList=[],angular.isArray($scope.IpSubnetList)&&angular.forEach($scope.IpSubnetList,function(ipSubnetObject,index){$scope.IpSubnetList[0].flag="true";var subnet_address=ipSubnetObject.subnet_address;if(angular.isDefined(subnet_address)){var subnetSplit=subnet_address.split("."),ipSubnetPrefix=subnetSplit[0]+"."+subnetSplit[1]+"."+subnetSplit[2]+".";0==index&&($scope.ipAddress.ipSubnetPrefix=ipSubnetPrefix),$scope.IpSubnetPrefixList.push(ipSubnetPrefix)}})}),angular.isDefined($stateParams.object)&&null!==$stateParams.object&&($scope.activeIpSubnet=$stateParams.object.id,$scope.ipAddressSearch.ip_subnet=$stateParams.object.id),$scope.DeviceTypeList=["服务器","云主机"],$scope.ipAddress.deviceType=$scope.DeviceTypeList[0],$scope.action={displayAllocationIp:function(){$("#add_sub_ip").modal("show")},cancelAllocationIp:function(){$("#add_sub_ip").modal("hide")},saveAllocationIp:function(){IpAddressService.update($scope.ipAddress,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh(),$("#add_sub_ip").modal("hide")})},search:function(){$scope.screenIpForm=!0,$scope.isActive=!0},hideEdit:function(){$scope.editIpForm=!1},ipSubnetActive:function(index){angular.forEach($scope.IpSubnetList,function(ipSubnetObject,idx){ipSubnetObject.id==index?$scope.IpSubnetList[idx].flag=!0:$scope.IpSubnetList[idx].flag=!1}),$scope.ipAddressSearch.ip_subnet=index,IpAddressService.list($scope.ipAddressSearch).$promise.then(function(response){$scope.ipTable.options.data=response.rows;var ipfanwei=$scope.ipTable.options.data[0].ip_address,ifss=(ipfanwei.substring(ipfanwei.lastIndexOf("1")),ipfanwei.substring(0,ipfanwei.lastIndexOf("1")));ipfanwei=ifss+"0",$scope.ipAddress.ipSubnetPrefix=ipfanwei})},updateIp:function(){IpAddressUpdateService.update($scope.ipAddressEdit,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh(),$scope.editIpForm=!1,$scope.isActive=!1})},hideSearch:function(){$scope.screenIpForm=!1},searchAll:function(){IpAddressService.list($scope.ipAddressSearch).$promise.then(function(response){$scope.ipTable.options.data=response.rows,console.log(response.rows)})}},$scope.ipTable={options:{idField:"id",data:[],striped:!0,pagination:!0,locale:"zh_CN",showTrash:!0,showSettings:!1,showRefresh:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,searchDisplay:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"ip_address",title:"IP地址",sortable:!0,formatter:function(value,row,index){return'<a id="ip_editor2" style="text-decoration:none;cursor:pointer">'+value+"</a>"},events:{"click #ip_editor2":function(e,value,row,index){$scope.$apply(function(){$scope.screenIpForm=!1,$scope.editIpForm=!0,$scope.isActive=!0,$scope.ipAddressEdit.id=row.id,$scope.ipAddressEdit.ip_address=row.ip_address,$scope.ipAddressEdit.hostname=row.hostname,$scope.ipAddressEdit.allowModify=row.allow_modify,$scope.ipAddressEdit.description=row.description,$scope.ipAddressEdit.deviceType=row.device_type,$scope.ipAddressEdit.owner=row.owner,$scope.ipAddressEdit.location=row.location,$scope.ipAddressEdit.port=row.port})}}},{field:"device_type",title:"设备类型",sortable:!1},{field:"hostname",title:"主机名",sortable:!1},{field:"allow_modify",title:"是否允许修改",sortable:!1,formatter:function(value,row,index){return 0==value?"不允许":"允许"}},{field:"state",title:"状态",sortable:!1,formatter:function(value,row,index){return 0==value?"下线":"在线"}},{field:"port",title:"端口",sortable:!0},{field:"owner",title:"负责人",sortable:!1},{field:"location",title:"所在地",sortable:!1},{field:"ip_subnet",title:"IP子网名称",sortable:!1,formatter:function(value,row,index){return angular.isDefined(row.ip_subnet)?row.ip_subnet.subnet_address:"未知"}},{field:"description",title:"描述",sortable:!1}]},state:{searchText:"",searchFilter:!0,refresh:function(){IpAddressService.listObject({enable:1},function(response){$scope.ipTable.options.data=response.rows})},query:function(){IpAddressService.listObject($scope.ipAddressSearch,function(response){$scope.ipTable.options.data=response.rows})},selections:[],removeSelector:"#batch_remove",id:"id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.id});var params={id:ids.toString()};utilService.swalConfirm("确认删除IP?",function(result){result&&IpAddressService.delete(params,{},function(response){utilService.alert(response.msg),$scope.ipTable.state.refresh()})})}}}}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("IpServiceModule",["ngResource"]).factory("IpSubNetService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.subnet,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"networkipid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("IpAddressService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.ip_address,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"networkipid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("IpAddressUpdateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.ip_update,{timestamp:utilService.getTimestamp()},{update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("IpAddressMonitorService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.ip_monitor,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _roomController=__webpack_require__(49),_roomController2=_interopRequireDefault(_roomController),_roomService=__webpack_require__(50),_roomService2=_interopRequireDefault(_roomService);exports.default=angular.module("RoomModule",[_roomController2.default,_roomService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("RoomControllerModule",[]).controller("RoomListController",["$scope","$rootScope","RoomService","RoomStateService","DatacenterService","FloorService","UtilService","$uibModal",function($scope,$rootScope,roomService,roomStateService,datacenterService,floorService,utilService,$uibModal){$scope.floorList=floorService.list(),$scope.roomedits=!1,$scope.hardDelete=!1,$scope.deleteName="删除",$scope.room={roomname:"",roomno:"",businessContact:"",technicalContact:"",receivingContact:"",maintenanceContact:"",comment:"",floor:{},state:{},datacenter:{}},$scope.editRoom={roomId:"",roomName:"",roomNo:"",businessContact:"",technicalContact:"",receivingContact:"",maintenanceContact:"",comment:"",floor:{},state:{},datacenter:{}},$scope.action={showAddRoom:function(){roomStateService.list({enable:1},function(response){$scope.roomStateList=response.data}),datacenterService.listObject({enable:1},function(response){$scope.datacenterList=response.rows});var modalInstance=$uibModal.open({templateUrl:"add_room_dialog.html",controller:"RoomAddController"});modalInstance.result.then(function(result){var params={roomname:result.roomname,floor:result.floor,roomno:result.roomno,stateId:result.state.Id,dcId:result.datacenter.Dcid,businessContact:result.businessContact,technicalContact:result.technicalContact,receivingContact:result.receivingContact,maintenanceContact:result.maintenanceContact,comment:result.comment};roomService.add(params,{},function(response){utilService.alert(response.msg),$scope.roomTable.state.refresh()})})},showRoomContact:function(){$("#room_contact_dialog").modal("show")},showRoomState:function(){$("#room_state_dialog").modal("show")},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",roomService.listObject({enable:0},function(response){$scope.roomTable.options.data=response.rows})},operateRoomNameFormatter:function(value,row,index){return $scope.hardDelete?row.RoomName:['<a id="room_editor2" style="text-decoration:none;cursor:pointer">'+row.RoomName+"</a>"]},roomBatchRemove:function(){var ids=$scope.roomTable.state.selections,params={roomid:ids.toString()};$scope.hardDelete?(params={roomid:ids.toString(),hardDelete:!0},utilService.swalConfirm("确认删除机房?",function(result){result&&roomService.delete(params,{},function(response){utilService.alert(response.msg),roomService.listObject({enable:0},function(response){$scope.roomTable.options.data=response.rows})})})):utilService.swalConfirm("确认删除机房?",function(result){result&&roomService.delete(params,{},function(response){utilService.alert(response.msg),$scope.roomTable.state.refresh()})})},hideeditRoom:function(){$scope.roomedits=!1,$scope.isActive=!1},hideSearch:function(){$scope.roomscreen=!1,$scope.isActive=!1},showSearch:function(){$scope.roomscreen=!0,$scope.isActive=!0,roomStateService.list({},function(response){$scope.roomStateList=response.data}),datacenterService.listObject({enable:1},function(response){$scope.datacenterList=response.rows})},roomremove:function(value,row,index){var params={roomid:$scope.editRoom.roomId};utilService.swalConfirm("确认删除机房?",function(result){result&&roomService.delete(params,{},function(response){utilService.alert(response.msg),$scope.roomTable.state.refresh(),$scope.roomedits=!1,$scope.isActive=!1})})},updateRoom:function(){var editRoomObj={roomId:$scope.editRoom.roomId,roomName:$scope.editRoom.roomName,stateId:$scope.editRoom.state,floor:$scope.editRoom.floor,roomNo:$scope.editRoom.roomNo,dcId:$scope.editRoom.datacenter,comment:$scope.editRoom.comment,businessContact:$scope.editRoom.businessContact,technicalContact:$scope.editRoom.technicalContact,receivingContact:$scope.editRoom.receivingContact,maintenanceContact:$scope.editRoom.maintenanceContact};roomService.update(editRoomObj,{},function(response){utilService.alert(response.msg),$scope.roomTable.state.refresh(),$scope.roomedits=!1,$scope.isActive=!1})},clearAll:function(){$scope.search={searchText:"",roomState:{},roomDC:{}}},searchAll:function(){$scope.search.roomStateTags=[],$scope.search.roomDCTags=[];for(var key in $scope.search.roomState)$scope.search.roomState[key]&&$scope.search.roomStateTags.push(key);for(var key in $scope.search.roomDC)$scope.search.roomDC[key]&&$scope.search.roomDCTags.push(key);var params={roomname:$scope.search.searchText,state:$scope.search.roomStateTags,datacenter:$scope.search.roomDCTags,enable:!0};roomService.list(params).$promise.then(function(response){$scope.roomTable.options.data=response.data})}},$scope.roomTable={options:{data:[],striped:!0,pagination:!0,idField:"RoomId",locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,searchDisplay:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"RoomName",title:"机房名称",sortable:!0,formatter:$scope.action.operateRoomNameFormatter,events:{"click #room_editor2":function(e,value,row,index){roomStateService.list({enable:1},function(response){$scope.roomStateList=response.data}),datacenterService.listObject({enable:1},function(response){$scope.datacenterList=response.rows}),$scope.roomedits=!0,$scope.isActive=!0,$scope.$apply(function(){$scope.editRoom.roomId=row.RoomId,$scope.editRoom.roomName=row.RoomName,$scope.editRoom={roomId:row.RoomId,roomName:row.RoomName,roomNo:row.RoomNo,datacenter:row.Datacenter.Dcid,businessContact:row.BusinessContact,technicalContact:row.TechnicalContact,receivingContact:row.ReceivingContact,maintenanceContact:row.MaintenanceContact,comment:row.Comment,floor:row.Floor,state:row.State.Id}})}}},{field:"Floor",title:"所在楼层",sortable:!0,formatter:function(value,row,index){return row.Floor+"楼"}},{field:"RoomNo",title:"房间号",sortable:!0},{field:"Datacenter",title:"所属数据中心",formatter:function(value,row,index){return null!==value?value.Dcname:""}},{field:"BusinessContact",title:"机房商务联系人",visible:!1},{field:"TechnicalContact",title:"机房技术联系人",visible:!1},{field:"ReceivingContact",title:"机房收货联系人",visible:!1},{field:"MaintenanceContact",title:"机房运维联系人",visible:!1},{field:"State",title:"机房状态",sortable:!0,align:"left",formatter:function(value,row,index){if(null!==value){var stateContent="";return stateContent='<span class="state-circle" style="background:'+value.Color+'"></span>'+value.State+"</span>"}return""}},{field:"Comment",title:"备注",visible:!1}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",roomService.listObject({enable:0},function(response){$scope.roomTable.options.data=response.rows})):($scope.deleteName="删除",roomService.listObject({enable:1},function(response){$scope.roomTable.options.data=response.rows}))},query:function(){roomService.listObject({search:$scope.roomTable.state.searchText,enable:1},function(response){$scope.roomTable.options.data=response.rows})},selections:[],removeSelector:"#batch_remove",id:"RoomId",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.RoomId});var params={roomid:ids.toString()};utilService.swalConfirm("确认删除机房?",function(result){result&&roomService.delete(params,{},function(response){utilService.alert(response.msg),$scope.roomTable.state.refresh()})})},settings:function(){$uibModal.open({templateUrl:"room_state.html",controller:"roomStateController"})}}},$scope.search={searchText:$scope.roomTable.state.searchText,roomState:{},roomStateTags:[],roomDC:{},roomDCTags:[]},$scope.roomTable.state.refresh(),$rootScope.$on("childEmit",function(event,data){$scope.roomTable.state.refresh()})}]).controller("RoomAddController",["$scope","$rootScope","UtilService","$uibModalInstance","RoomStateService","DatacenterService","FloorService","StateColorService","RoomService",function($scope,$rootScope,utilService,$uibModalInstance,roomStateService,datacenterService,floorService,stateColorService,roomService){$scope.floorList=floorService.list(),$scope.room={refresh:function(){roomStateService.list({enable:1},function(response){$scope.roomStateList=response.data}),datacenterService.listObject({enable:1},function(response){$scope.datacenterList=response.rows})},addRoom:function(){$uibModalInstance.close($scope.room)},addRoomCancel:function(){$uibModalInstance.dismiss()},showAddRoomStates:function(){$("#addRoomState").modal("show"),stateColorService.list({},function(response){$scope.mycolors=response.data})},addRoomState:function(){var params={roomState:$scope.addRoomStates,color:$scope.selectedColor};roomStateService.add(params,{},function(response){$("#addRoomState").modal("hide"),utilService.alert(response.msg),$scope.room.refresh()})},addmore:function(){$scope.room.addMore=!$scope.room.addMore},testifyRoom:function(){if($scope.room.roomname){var params={enable:!0,roomname:$scope.room.roomname};roomService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此机房已存在！"),$scope.room.roomname="")})}}},$scope.room.refresh()}]).controller("roomStateController",["$scope","$rootScope","$uibModalInstance","StateColorService","RoomStateService","UtilService",function($scope,$rootScope,$uibModalInstance,stateColorService,roomStateService,utilService){$scope.showAddColors=!1,$scope.showEditColors=!1,$scope.settings={init:function(){stateColorService.list({},function(response){$scope.mycolors=response.data})},settingsCancel:function(){$uibModalInstance.dismiss()},refresh:function(){roomStateService.list({},{},function(response){$scope.RoomState=response.data})},addColors:function(){$scope.showAddColors=!0},addState:function(){var params={roomState:$scope.addRoomState,color:$scope.selectedColor};roomStateService.add(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh(),$scope.showAddColors=!1})},addCancel:function(){$scope.showAddColors=!1},editState:function(state){$scope.showEditColors=!0,$scope.editRoomStateId=state.Id,$scope.editRoomState=state.State,$scope.selectedColor=state.Color},editSave:function(){var params={roomStateId:$scope.editRoomStateId,roomState:$scope.editRoomState,color:$scope.currentColor};roomStateService.update(params,{},function(response){utilService.alert(response.msg),$scope.showEditColors=!1,$scope.settings.refresh(),$rootScope.$emit("childEmit")})},editCancel:function(){$scope.showEditColors=!1},deleteState:function(state){var params={roomStateId:state.Id.toString()};roomStateService.delete(params,{},function(response){utilService.alert(response.msg),$scope.settings.refresh()})}},$scope.settings.init(),$scope.settings.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("RoomServiceModule",["ngResource"]).factory("RoomService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.room,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"roomid",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("RoomStateService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.roomState,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("FloorService",function(){return{list:function($resource){for(var floorObjArray=[],floor=1;floor<=20;floor++){var floorObj={id:""+floor,name:floor+"楼"};floorObjArray.push(floorObj)}return floorObjArray}}}).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _supplierController=__webpack_require__(52),_supplierController2=_interopRequireDefault(_supplierController),_supplierService=__webpack_require__(16),_supplierService2=_interopRequireDefault(_supplierService);exports.default=angular.module("SupplierModule",[_supplierController2.default,_supplierService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("SupplierControllerModule",[]).controller("SupplierListController",["$rootScope","$scope","SupplierService","UtilService","$uibModal",function($rootScope,$scope,supplierService,utilService,$uibModal){$scope.supplier={screen:!1,edits:!1,editSupplierId:"",editSupplier:"",editBusinessContact:"",editBusinessTelPhone:"",editBusinessMobilePhone:"",editTechnologyEmail:"",editOfficeAddress:"",editComment:""},$scope.search={searchText:"",selectedBusinessContact:{},selectedBusinessTags:[],selectedTechnologyContact:{},selectedTechnologyTags:[],startTime:"",endTime:""},$scope.supplier.screen=!1,$scope.action={showAddSupplier:function(){var modalInstance=$uibModal.open({templateUrl:"add_supplier.html",controller:"supplierAddController"});modalInstance.result.then(function(result){var params={supplier:result.supplier,businesscontact:result.businessContact,businesstelphone:result.businesstelphone,mobilephone:result.businessmobilephone,businessemail:result.businessemail,technologycontact:result.technologycontact,telphone:result.technologymobilephone,technologymobilephone:result.technologymobilephone,technologyemail:result.technologyemail,officeaddress:result.officeaddress,comment:result.comment};supplierService.add(params,{},function(response){utilService.alert(response.msg),$scope.supplierTable.state.refresh()})})},supplierremove:function(value,row,index){var params={supplierid:$scope.supplier.editSupplierId};utilService.swalConfirm("确认删除供应商?",function(result){result&&supplierService.delete(params,{},function(response){utilService.alert(response.msg),$scope.supplierTable.state.refresh(),$scope.supplier.edits=!1,$scope.isActive=!1})})},updateSupplier:function(){var params={supplierid:$scope.supplier.editSupplierId,supplier:$scope.supplier.editSupplier,businesscontact:$scope.supplier.editBusinessContact,businesstelphone:$scope.supplier.editBusinessTelPhone,mobilephone:$scope.supplier.editBusinessMobilePhone,businessemail:$scope.supplier.editBusinessEmail,technologycontact:$scope.supplier.editTechnologyContact,telphone:$scope.supplier.editTechnologyTelphone,technologymobilephone:$scope.supplier.editTechnologyMobilePhone,technologyemail:$scope.supplier.editTechnologyEmail,officeaddress:$scope.supplier.editOfficeAddress,comment:$scope.supplier.editComment};supplierService.update(params,{},function(response){utilService.alert(response.msg),$scope.supplierTable.state.refresh(),$scope.supplier.edits=!1,$scope.isActive=!1})},operateSupplierNameFormatter:function(value,row,index){return $scope.hardDelete?row.Supplier:['<a id="supplier_editor2" style="text-decoration:none;cursor:pointer">'+row.Supplier+"</a>"]},showEdit:function(){$scope.businessContact=[],$scope.technologyContact=[],$scope.supplier.screen=!0,$scope.isActive=!0,supplierService.listObject({enable:1},function(response){angular.forEach(response.rows,function(val,idx){val.BusinessContact&&$scope.businessContact.push(val.BusinessContact),val.TechnologyContact&&$scope.technologyContact.push(val.TechnologyContact)});for(var key in $scope.businessContact)for(var data=$scope.businessContact[key],j=0;j<key;j++)data==$scope.businessContact[j]&&$scope.businessContact.splice(key,1);for(var key in $scope.technologyContact)for(var data=$scope.technologyContact[key],j=0;j<key;j++)data==$scope.technologyContact[j]&&$scope.technologyContact.splice(key,1)})},hideEdit:function(){$scope.supplier.screen=!1,$scope.isActive=!1},editSupplierCancel:function(){$scope.supplier.edits=!1,$scope.isActive=!1},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",supplierService.listObject({enable:0},function(response){$scope.supplierTable.options.data=response.rows})},clearSearch:function(){$scope.search.searchText="",$scope.search.selectedBusinessContact={},$scope.search.selectedTechnologyContact={},$scope.search.startTime="",$scope.search.endTime=""},searchAll:function(){$scope.search.selectedBusinessTags=[],$scope.search.selectedTechnologyTags=[];for(var key in $scope.search.selectedBusinessContact)$scope.search.selectedBusinessContact[key]&&$scope.search.selectedBusinessTags.push(key);for(var key in $scope.search.selectedTechnologyContact)$scope.search.selectedTechnologyContact[key]&&$scope.search.selectedTechnologyTags.push(key);var params={name:$scope.search.searchText.toString(),businesscontact:$scope.search.selectedBusinessTags.toString(),technologycontact:$scope.search.selectedTechnologyTags.toString(),start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};supplierService.list(params).$promise.then(function(response){$scope.supplierTable.options.data=response.data})}},$scope.supplierTable={options:{idField:"Id",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{title:"供应商名称",field:"Supplier",formatter:$scope.action.operateSupplierNameFormatter,events:{"click #supplier_editor2":function(e,value,row,index){row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.supplier.edits=!0,$scope.isActive=!0,$scope.supplier.editSupplierId=row.Id,$scope.supplier.editSupplier=row.Supplier,$scope.supplier.editBusinessContact=row.BusinessContact,$scope.supplier.editBusinessTelPhone=row.BusinessTelPhone,$scope.supplier.editBusinessMobilePhone=row.BusinessMobilePhone,$scope.supplier.editBusinessEmail=row.BusinessEmail,$scope.supplier.editTechnologyContact=row.TechnologyContact,$scope.supplier.editTechnologyTelphone=row.TechnologyTelphone,$scope.supplier.editTechnologyMobilePhone=row.TechnologyMobilePhone,$scope.supplier.editTechnologyEmail=row.TechnologyEmail,$scope.supplier.editOfficeAddress=row.OfficeAddress,$scope.supplier.editComment=row.Comment})}}},{field:"BusinessContact",title:"商务联系人",sortable:!0},{field:"BusinessTelPhone",title:"商务联系电话",sortable:!0},{field:"BusinessMobilePhone",title:"商务联系手机",sortable:!0},{field:"BusinessEmail",title:"商务邮箱",sortable:!0},{field:"TechnologyContact",title:"技术联系人",sortable:!0},{field:"TechnologyTelphone",title:"技术联系电话",sortable:!0},{field:"TechnologyMobilePhone",title:"技术联系手机",sortable:!0},{field:"TechnologyEmail",title:"技术邮箱",sortable:!0},{field:"OfficeAddress",title:"公司地址",sortable:!0},{field:"Comment",title:"备注"}]},state:{searchText:"",refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",supplierService.listObject({enable:0},function(response){$scope.supplierTable.options.data=response.rows})):($scope.deleteName="删除",supplierService.listObject({enable:1},function(response){$scope.supplierTable.options.data=response.rows}))},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",supplierService.listObject({search:$scope.supplierTable.state.searchText,enable:0},function(response){$scope.supplierTable.options.data=response.rows})):($scope.deleteName="删除",supplierService.listObject({search:$scope.supplierTable.state.searchText,enable:1},function(response){$scope.supplierTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={supplierid:ids.toString()};utilService.swalConfirm("确认删除供应商?",function(result){result&&supplierService.delete(params,{},function(response){utilService.alert(response.msg),$scope.supplierTable.state.refresh(),$scope.isActive=!1})})},settings:function(){alert("waiting for update..........")}}},$scope.supplierTable.state.refresh()}]).controller("supplierAddController",["$scope","$uibModalInstance","SupplierService","UtilService",function($scope,$uibModalInstance,supplierService,utilService){$scope.addSupplierCancel=function(){$uibModalInstance.dismiss()},$scope.addSupplier=function(){$uibModalInstance.close($scope.supplier)},$scope.addmore=function(){$scope.addMore=!$scope.addMore},$scope.testifySupplier=function(item){if(item){var params={name:item.toString(),enable:!0};supplierService.list(params).$promise.then(function(response){0!==response.data.length&&(utilService.alert("此供应商已存在！"),$scope.supplier.supplier="")})}}}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _userController=__webpack_require__(54),_userController2=_interopRequireDefault(_userController),_userService=__webpack_require__(57),_userService2=_interopRequireDefault(_userService);exports.default=angular.module("UserModule",[_userController2.default,_userService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){
(function(angular,$){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _list_user=(__webpack_require__(15),__webpack_require__(55)),_list_role=(_interopRequireDefault(_list_user),__webpack_require__(56));_interopRequireDefault(_list_role);exports.default=angular.module("UserControllerModule",[]).controller("UserTableController",["$scope","$rootScope","UserService","UtilService","$uibModal","RoleService",function($scope,$rootScope,userService,utilService,$uibModal,roleService){$scope.showPasswd=!1,$("#editPassword").change(function(){var user_editPassword=$("#editPassword").val();user_editPassword.length>5?$("#editPassword2").attr("disabled",!1):$("#editPassword2").attr("disabled",!0)}),$scope.user={edits:!1,screen:!1,editId:"",editUserRoleId:"",editLoginName:"",editpassword:"",editPassword2:"",editUserName:"",editContactPhone:"",editEmail:""},$scope.action={showAddUser:function(){var modalInstance=$uibModal.open({templateUrl:"add_user.html",controller:"UserAddController"});modalInstance.result.then(function(result){var params={username:result.name,roleId:result.role.Id,login:result.loginName,password:result.psd,contactphone:result.contactphone,email:result.email};userService.add(params,{},function(response){utilService.alert(response.msg),$scope.userTable.state.refresh()})}),$(function(){$("#loginname").bind("change",function(){var loginname=$("#loginname").val();""==loginname?($(".error").show(),$(".error").html("用户名不能为空"),$("#loginnametpis").attr("class","user-error"),$("#loginnametpis").show()):loginname.length<3?($(".error").show(),$(".error").html("用户名不能少于3位"),$("#usernametpis").attr("class","user-error"),$("#usernametpis").show()):($(".error").hide(),$("#usernametpis").attr("class","user-ok"),$("#usernametpis").show())}),$("#loginpswd").bind("change",function(){var password=$("#password").val();""==password?($(".error").show(),$(".error").html("密码不能为空"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):password.length<6?($(".error").show(),$(".error").html("密码不能少于6位"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):($(".error").hide(),$("#passwordtpis").attr("class","user-ok"),$("#passwordtpis").show())}),$("#password").bind("input propertychange",function(){var password=$("#password").val();""==password?($(".error").show(),$(".error").html("密码不能为空"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):password.length<6?($(".error").show(),$(".error").html("密码不能少于6位"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):($(".error").hide(),$("#passwordtpis").attr("class","user-ok"),$("#passwordtpis").show())})})},updateUser:function(){if($scope.showPasswd){if(""==$scope.user.editPassword||null==$scope.user.editPassword)return void utilService.alert("请输入密码");if(""==$scope.user.editPassword2||null==$scope.user.editPassword2)return void utilService.alert("请输入确认密码");if($scope.user.editPassword!=$scope.user.editPassword2)return void utilService.alert("密码与确认密码不一致");var params={userid:$scope.user.editId,userrole:$scope.user.editUserRoleId,username:$scope.user.editUserName,loginname:$scope.user.editLoginName,password:$scope.user.editPassword2,contactphone:$scope.user.editContactPhone,email:$scope.user.editEmail};userService.update(params,{},function(response){utilService.alert(response.msg),$scope.userTable.state.refresh(),$scope.user.edits=!1,$scope.isActive=!1})}else{var params={userid:$scope.user.editId,userrole:$scope.user.editUserRoleId,username:$scope.user.editUserName,loginname:$scope.user.editLoginName,contactphone:$scope.user.editContactPhone,email:$scope.user.editEmail};userService.update(params,{},function(response){utilService.alert(response.msg),$scope.userTable.state.refresh()})}},operateLoginNameFormatter:function(value,row,index){return"1"==row.Userid?'<a id="user_editor2" style="text-decoration:none;cursor:pointer">'+row.LoginName+"</a>":['<a id="user_editor2" style="text-decoration:none;cursor:pointer">'+row.LoginName+"</a>"]},operateUserRoleFormatter:function(value,row,index){return row.Role.Name},operateRegisterTimeStyle:function(value,row,index){if(null!==row.RegisterTime){var datetimes=row.RegisterTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""},editRemoveUser:function(value,row,index){utilService.swalConfirm("确认删除该用户?",function(result){if(result){var params={userId:$scope.user.userId};userService.delete(params,{},function(response){utilService.alert(response.msg),$scope.userTable.state.refresh(),$scope.user.edits=!1,$scope.isActive=!1})}})},editCancelUser:function(){$scope.user.edits=!1,$scope.isActive=!1},userBatchRemove:function(value,row,index){var ids=$scope.userTabel.state.selections,params={userId:ids.toString()};utilService.swalConfirm("确认删除用户?",function(){userService.delete(params,{},function(response){utilService.alert(response.msg),$scope.userTabel.state.refresh()})})},showEdit:function(){$scope.user.screen=!0,$scope.isActive=!0},hideEdit:function(){$scope.user.screen=!1,$scope.isActive=!1},showEditPasswd:function(){$scope.showPasswd?$scope.showPasswd=!1:$scope.showPasswd=!0}},$scope.userTable={options:{idField:"Userid",data:[],striped:!0,pagination:!0,locale:"zh_CN",showTrash:!0,showRefresh:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0,formatter:function(e,value,row,index){1==value.Userid?this.checkboxEnabled=!1:this.checkboxEnabled=!0}},{title:"登录名称",field:"LoginName",sortable:!0,formatter:$scope.action.operateLoginNameFormatter,events:{"click #user_editor2":function(e,value,row,index){roleService.list({},{},function(response){$scope.editUserRoleList=response.data}),$scope.showPasswd=!1,$scope.$apply(function(){return $scope.user.editPassword="",$scope.user.editPassword2="",$scope.user.edits=!0,$scope.isActive=!0,$scope.user.editId=row.Userid,$scope.user.editUserName=row.Name,$scope.user.editLoginName=row.LoginName,$scope.user.editContactPhone=row.ContactPhone,$scope.user.editEmail=row.Email,"1"==row.Userid?($(".a-del").hide(),$("#editUserRole").attr("disabled",!0),$("#editUserRole").css("color","#99a"),$scope.user.editUserRoleId=row.Role.Id):($(".a-del").show(),$("#editUserRole").attr("disabled",!1),$("#editUserRole").css("color","#1d8be0"),$scope.user.editUserRoleId=row.Role.Id)})}}},{title:"用户角色",field:"role_id",sortable:!0,formatter:$scope.action.operateUserRoleFormatter},{title:"用户姓名",field:"Name"},{title:"联系电话",field:"ContactPhone"},{title:"用户邮箱",field:"Email"},{title:"创建时间",field:"RegisterTime",formatter:$scope.action.operateRegisterTimeStyle}]},state:{refresh:function(){userService.list({},{},function(response){$scope.userTable.options.data=response.data})},selections:[],removeSelector:"#batch_remove",id:"Userid",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Userid});var params={userId:ids.toString()};utilService.swalConfirm("确认删除用户?",function(){userService.delete(params,{},function(response){utilService.alert(response.msg),$scope.userTable.state.refresh()})})},settings:function(){alert("waiting for update......")}}},$scope.userTable.state.refresh()}]).controller("UserAddController",["$scope","$rootScope","UserService","UtilService","$uibModalInstance","RoleService",function($scope,$rootScope,userService,utilService,$uibModalInstance,roleService){roleService.list({},{},function(response){$scope.roleList=response.data}),$scope.action={addUserCancel:function(){$uibModalInstance.dismiss()},addUser:function(){$uibModalInstance.close($scope.user)}}}]).controller("RoleTableController",["$scope","$rootScope","RoleService","UtilService","$uibModal","$compile","RoleMenuService",function($scope,$rootScope,roleService,utilService,$uibModal,$compile,roleMenuService){function toggleChildren(currentNode,state){currentNode.state.checked!=state&&$("#edit_menu_select").treeview("toggleNodeChecked",[currentNode.nodeId,{silent:!0}]);var sons=currentNode.nodes;if(sons)for(var i in sons)toggleChildren(sons[i],state)}$scope.role={edits:!1,screen:!1,editRoleId:"",editRoleName:"",editRoleItems:""},$scope.action={showEdit:function(){$scope.role.screen=!0,$scope.isActive=!0},hideEdit:function(){$scope.role.screen=!1,$scope.isActive=!1},EditRoleCancel:function(){$scope.role.edits=!1,$scope.isActive=!1},operateRoleFormatter:function(value,row,index){return"8"==row.Id?['<a id="role_editor" style="padding:3px 6px 3px 6px" class="label label-success" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>&nbsp;编辑',"</a>","&nbsp",'<a id="#" style="padding:3px 6px 3px 6px" class="label lab_disabled" href="javascript:void(0)" title="删除">','<i class="glyphicon glyphicon-remove"></i>&nbsp;删除',"</a>"].join(""):['<a id="role_editor" style="padding:3px 6px 3px 6px" class="label label-success disabled" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>&nbsp;编辑',"</a>","&nbsp",'<a id="role_remove" style="padding:3px 6px 3px 6px" class="label label-danger disabled" href="javascript:void(0)" title="删除">','<i class="glyphicon glyphicon-remove"></i>&nbsp;删除',"</a>"].join("")},operateCreateTimeStyle:function(value,row,index){if(null!==row.CreateTime){var datetimes=row.CreateTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""},operateUpdateTimeStyle:function(value,row,index){if(null!==row.UpdateTime){var datetimes=row.UpdateTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""},operateRoleNameFormatter:function(value,row,index){return"8"==row.Id?row.Name:['<a id="role_editor2" style="text-decoration:none;cursor:pointer">'+row.Name+"</a>"]},showAddRole:function(){var modalInstance=$uibModal.open({templateUrl:"dest/template/system/add/add_role.html",controller:"RoleAddController"});modalInstance.result.then(function(result){var params={role:result.roleName,menuIds:result.roleItems.toString()};roleService.add(params,{},function(response){$scope.roleTable.state.refresh()})})},roleBatchRemove:function(){var ids=getIdSelections(),params={roleId:ids.toString()};utilService.swalConfirm("确认删除角色?",function(){roleService.delete(params,{},function(response){utilService.alert(response.msg),$rootScope.$role_table.bootstrapTable("refresh")})})},updateRole:function(){var nodes=$("#edit_menu_select").treeview("getChecked").map(function(t){return t.id||null}).join(","),params={roleId:$scope.role.editRoleId,role:$scope.role.editRoleName,menuIds:nodes.toString()};roleService.update(params,{},function(response){$scope.role.edits=!1,$scope.roleTable.state.refresh(),$scope.isActive=!1})},EditRemoveRole:function(){var params={roleId:$scope.role.editRoleId};utilService.swalConfirm("确认删除该角色?",function(result){result&&roleService.delete(params,{},function(response){utilService.alert(response.msg),$scope.roleTable.state.refresh(),$scope.role.edits=!1,$scope.isActive=!1})})}},$scope.roleTable={options:{idField:"RoleId",data:[],pagination:"true",showRefresh:!0,showTrash:!0,showToggle:!1,showColumns:!0,detailView:!1,showExport:!0,pageNumber:1,pageSize:10,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",search:!0,pageList:[25,50],sidePagination:"client",showFooter:!1,showPaginationSwitch:!1,minimumCountColumns:2,columns:[{checkbox:!0,formatter:function(e,value,row,index){8==value.Id?this.checkboxEnabled=!1:this.checkboxEnabled=!0}},{field:"Name",title:"菜单权限",sortable:!0,formatter:$scope.action.operateRoleNameFormatter,events:{"click #role_editor2":function(e,value,row,index){roleMenuService.list({role:row.Id},function(response){var json=JSON.stringify(response);json=json.replace(/\"children\":/g,'"nodes":').replace(/\"selected\":/g,'"checked":').replace(/\"false\"/g,"false"),$("#edit_menu_select").treeview({data:JSON.parse(json),backColor:"#fff",showCheckbox:!0,highlightSelected:!1,onNodeChecked:function(event,node){var that=$(this),parentId=node.parentId,childrens=node.nodes;that.treeview("getSiblings",node);if(void 0!==childrens&&void 0==parentId&&toggleChildren(node,!0),void 0==childrens&&void 0!==parentId){that.treeview("getSiblings",node)}},onNodeUnchecked:function(event,node){var childrens=node.nodes,parentId=node.parentId;void 0!==childrens&&void 0==parentId&&toggleChildren(node,!1)}})}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.role.edits=!0,$scope.isActive=!0,$scope.role.editRoleId=row.Id,$scope.role.editRoleName=row.Name})}}},{field:"CreateBy",title:"创建者",sortable:!0},{field:"CreateTime",title:"创建时间",sortable:!0,formatter:$scope.action.operateCreateTimeStyle},{field:"UpdateBy",title:"更新者",sortable:!0},{field:"UpdateTime",title:"更新时间",sortable:!0,formatter:$scope.action.operateUpdateTimeStyle}]},state:{refresh:function(){roleService.list({},{},function(response){$scope.roleTable.options.data=response.data})},removeSelector:"#batch_remove",selections:[],id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={roleId:ids.toString()};utilService.swalConfirm("确认删除角色?",function(){roleService.delete(params,{},function(response){utilService.alert(response.msg),$scope.roleTable.state.refresh()})})},settings:function(){alert("waiting for update.........")}}},$scope.roleTable.state.refresh()}]).controller("RoleAddController",["$scope","$rootScope","RoleService","UtilService","MenuService","$uibModalInstance",function($scope,$rootScope,roleService,utilService,menuService,$uibModalInstance){function toggleChildren(currentNode,state){currentNode.state.checked!=state&&$("#menu_select_div").treeview("toggleNodeChecked",[currentNode.nodeId,{silent:!0}]);var sons=currentNode.nodes;if(sons)for(var i in sons)toggleChildren(sons[i],state)}menuService.list({type:1},function(response){var json=JSON.stringify(response);json=json.replace(/\"children\":/g,'"nodes":').replace(/\"selected\":/g,'"checked":'),$("#menu_select_div").treeview({data:JSON.parse(json),backColor:"#fff",showCheckbox:!0,highlightSelected:!1,onNodeChecked:function(event,node){var childrens=node.nodes;childrens&&toggleChildren(node,!0)},onNodeUnchecked:function(event,node){var childrens=node.nodes;childrens&&toggleChildren(node,!1)}})}),$scope.role={roleName:"",roleItems:""},$scope.action={roleCancel:function(){$uibModalInstance.dismiss()},roleAddRole:function(){var nodes=$("#menu_select_div").treeview("getChecked").map(function(t){return t.id||null}).join(",");$scope.role.roleItems=nodes,$uibModalInstance.close($scope.role)}}}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports){module.exports='<div ncy-breadcrumb></div>\n<div ng-controller="UserTableController">\n    <div class="searchBar">\n        <div class="pull-right">\n            <!--<button ng-click="action.showEdit()" class="btn btn-default select">\n                筛选<i class="glyphicon glyphicon-glass"></i>\n            </button>-->\n            <button ng-click="action.showAddUser()" class="btn btn-blues">\n                <i class="glyphicon glyphicon-plus"></i>&nbsp;添加用户\n            </button>\n        </div>\n    </div>\n    <table bs-table-control="userTable"></table>\n\n    <form class="editMenu" ng-show="user.screen">\n        <div class="editMenu-header">\n            <span class="header">选择</span>\n        </div>\n        <div class="editMenu-body"></div>\n        <div class="editMenu-footer">\n            <div class="searchBar text-center">\n                <button class="btn btn-close" ng-click="action.hideEdit()">取消</button>\n                <button class="btn btn-blues">保存</button>\n            </div>\n        </div>\n    </form>\n\n    <!--编辑用户弹出框 START-->\n    <div ng-class="{true:\'editMenu\',false:\'editMenuhide\'}[isActive]" ng-show="user.edits">\n        <div class="editMenu-header">\n            <span class="header"><i class="glyphicon glyphicon-edit"></i>&nbsp;编辑用户</span>\n            <span class="hidden" ng-model="user.editId"></span>\n        </div>\n        <form name="editUserForm" class="editMenu-body">\n            <div class="item">\n                <label class="col-md-4">用户姓名<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <input name="editUserName" ng-model="user.editUserName" type="text"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-4">用户角色<span class="required">*</span></label>\n                <select id="editUserRole" name="editUserRole" ng-model="user.editUserRoleId" class="col-md-8"\n                        ng-options="role.Id as role.Name for role in editUserRoleList">\n                </select>\n            </div>\n            <div class="item">\n                <label class="col-md-4">登录名称<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <input name="editLoginName" ng-maxlength="16" ng-minlength="5" maxlength="16" required ng-model="user.editLoginName" type="text" placeholder="请输入登录名称"/>\n\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-4">修改密码<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <a ng-click="action.showEditPasswd();" style="text-decoration: underline!important;cursor: pointer">修改</a>\n                </div>\n            </div>\n\n            <div class="item" ng-show="showPasswd">\n                <label class="col-md-4">密码<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <input type="password" ng-minlength="6" maxlength="16" id="editPassword" ng-maxlength="16" placeholder="请输入密码" name="editPassword" ng-model="user.editPassword" style="border: transparent;outline: 0;background: transparent;"/>\n                </div>\n            </div>\n\n            <div class="item" ng-show="showPasswd">\n                <label class="col-md-4">确认密码<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <input type="password" ng-minlength="6" ng-maxlength="16" maxlength="16" disabled="disabled" id="editPassword2" placeholder="请输入确认密码" name="editPassword2" ng-model="user.editPassword2" style="border: transparent;outline: 0;background: transparent;"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-4">联系电话<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <input name="editContactPhone" type="tel" maxlength="11" required ng-model="user.editContactPhone" placeholder="请输入联系电话"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-4">用户邮箱<span class="required">*</span></label>\n                <div class="col-md-8">\n                    <input type="email" name="editEmail" style="width: 100%" ng-model="user.editEmail" ng-pattern="/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/" placeholder="请输入邮箱" required/>\n\n                    <span class="edit-error" ng-show="!editUserequiredrForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editPassword.$error.required &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editLoginName.$error.required &&\n                    editUserForm.editEmail.$error.required">邮箱必填!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editPassword.$error.required &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editLoginName.$error.required &&\n                    editUserForm.editEmail.$error.email">邮箱格式错误!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editPassword.$error.required &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editEmail.$error.email &&\n                    editUserForm.editLoginName.$error.required">登录名称必填!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editPassword.$error.required &&\n                    !editUserForm.editLoginName.$error.required &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editEmail.$error.email &&\n                    editUserForm.editLoginName.$error.minlength">登录名称太短!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.required &&\n                    !editUserForm.editLoginName.$error.required &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editEmail.$error.email &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    editUserForm.editPassword.$error.minlength">密码太短!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editLoginName.$error.required &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editEmail.$error.email &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    editUserForm.editPassword.$error.required">密码不能为空!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editContactPhone.$error.required &&\n                    !editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editLoginName.$error.required &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editEmail.$error.email &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    !editUserForm.editPassword.$error.required &&\n                    user.editPassword!=user.editPassword2 && editUserForm.editPassword2.$valid">两次密码输入不一致!</span>\n\n                    <span class="edit-error" ng-show="!editUserForm.editPassword.$error.minlength &&\n                    !editUserForm.editLoginName.$error.required &&\n                    !editUserForm.editPassword2.$error.minlength &&\n                    !editUserForm.editPassword2.$error.required &&\n                    !editUserForm.editEmail.$error.email &&\n                    !editUserForm.editLoginName.$error.minlength &&\n                    !editUserForm.editPassword.$error.required &&\n                    editUserForm.editContactPhone.$error.required">联系电话必填!</span>\n\n                </div>\n            </div>\n        </form>\n        <div class="editMenu-footer">\n            <div class="searBar text-center">\n                <a class="btn btn-remover a-del" type="button" ng-click="action.editRemoveUser()">删除此用户</a>\n                <button type="button" class="btn btn-close" ng-click="action.editCancelUser()">取消</button>\n                <button type="submit" class="btn btn-blues" ng-click="action.updateUser()" ng-disabled="editUserForm.$invalid">保存</button>\n            </div>\n        </div>\n    </div>\n    <!--编辑用户弹出框 END-->\n</div>\n\n<!--添加用户弹出框 START-->\n<script id="add_user.html" type="text/ng-template">\n    <form class="inside-content" name="addUserForm" ng-submit="action.addUser()">\n        <div class="modal-header">\n            <h5 class="modal-title">添加用户\n                <span class="add-close" ng-click="action.addUserCancel()">&times;</span>\n            </h5>\n        </div>\n        <div class="modal-body modal-user">\n            <div class="item">\n                <label class="col-md-3">用户姓名<span class="required">*</span></label>\n                <div class="col-md-9">\n                    <input type="text" name="username" ng-minlength="3" ng-maxlength="20" ng-model="user.name" placeholder="请输入用户姓名" required="required">\n                    <small class="userok" ng-show="addUserForm.username.$dirty && addUserForm.username.$valid"><i class="glyphicon glyphicon-ok"></i></small>\n                    <span class="usererror" ng-show="addUserForm.username.$error.required">用户姓名必填!</span>\n                    <span class="usererror" ng-show="addUserForm.username.$error.minlength">用户姓名太短!</span>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-3">用户角色<span class="required">*</span></label>\n                <div class="col-md-9">\n                    <select ng-model="user.role" name="userrole" ng-options="role.Name for role in roleList">\n                        <option value="">--请选择--</option>\n                    </select>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-3">登录名称<span class="required">*</span></label>\n                <div class="col-md-9">\n                    <input type="text" id="loginname" ng-minlength="5" ng-maxlength="16" maxlength="16" name="login" placeholder="请输入登录名称" ng-model="user.loginName" required="required"/>\n                    <small class="userok" ng-show="addUserForm.login.$dirty && addUserForm.login.$valid"><i class="glyphicon glyphicon-ok"></i></small>\n                    <span class="usererror" ng-show="addUserForm.login.$error.minlength">登录名太短!</span>\n                    <span class="usererror" ng-show="addUserForm.login.$error.required">登录名必填!</span>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-3">登录密码<span class="required">*</span></label>\n                <div class="col-md-9">\n                    <input type="password" id="loginpswd" ng-minlength="6" ng-maxlength="16" maxlength="16" name="password" placeholder="请输入(6~16位)登录密码" ng-model="user.psd" required="required"/>\n                    <small class="userok" ng-show="addUserForm.password.$dirty && addUserForm.password.$valid"><i class="glyphicon glyphicon-ok"></i></small>\n                    <span class="usererror" ng-show="addUserForm.password.$error.minlength">密码太短!</span>\n                    <span class="usererror" ng-show="addUserForm.password.$error.maxlength">密码太长!</span>\n                    <span class="usererror" ng-show="addUserForm.password.$error.required">密码必填!</span>\n\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-sm-3">确认密码<span class="required">*</span></label>\n                <div class="col-sm-9">\n                    <input type="password" id="loginpswds" ng-minlength="6" ng-maxlength="16" maxlength="16" name="comfirm_password"  placeholder="确认密码(与密码保持一致)" ng-model="user.confirmPsd" required="required"/>\n                    <small class="userok" ng-show="addUserForm.comfirm_password.$valid && user.confirmPsd == user.psd "><i class="glyphicon glyphicon-ok"></i></small>\n                    <span class="usererror" ng-show="user.confirmPsd != user.psd">两次密码输入不一致!</span>\n                    <!--<span class="usererror" ng-show="addUserForm.comfirm_password.$error.required">密码必填!</span>-->\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-3">联系电话<span class="required">*</span></label>\n                <div class="col-md-9">\n                    <input type="tel" id="userphone" ng-maxlength="11" maxlength="11" name="contactphone" style="text-align: left"  ng-model="user.contactphone" required="required" placeholder="请输入用户联系电话">\n                    <small class="userok" ng-show="addUserForm.contactphone.$dirty && addUserForm.contactphone.$valid"><i class="glyphicon glyphicon-ok"></i></small>\n                    <span class="usererror" ng-show="addUserForm.contactphone.$error.required">联系电话必填!</span>\n                <!--    <span class="usererror" ng-show="addUserForm.contactphone.$touched">联系电话格式错误!</span>--><!--ng-pattern="/^1[34578]\\d{9}$/" -->\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-3 control-label">用户邮箱<span class="required">*</span></label>\n                <div class="col-md-9">\n                    <input type="email" id="useremail" ng-pattern="/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/" name="email" ng-model="user.email" required="required" placeholder="请输入用户邮箱"/>\n                    <small class="userok" ng-show="addUserForm.email.$dirty && addUserForm.email.$valid"><i class="glyphicon glyphicon-ok"></i></small>\n                    <span class="usererror" ng-show="addUserForm.email.$error.required">邮箱必填!</span>\n                    <span class="usererror" ng-show="addUserForm.email.$error.email">邮箱格式错误!</span>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-close" ng-click="action.addUserCancel()">取消</button>\n            <button class="btn btn-blues" ng-disabled="addUserForm.$invalid">保存</button>\n        </div>\n    </form>\n</script>\n<!--添加用户弹出框 END-->'},function(module,exports){module.exports='<div ncy-breadcrumb></div>\n<div ng-controller="RoleTableController">\n    <div class="searchBar">\n        <div class="pull-right">\n            <!--<button ng-click="action.showEdit()" class="btn btn-default select">\n                筛选<i class="glyphicon glyphicon-glass"></i>\n            </button>-->\n            <button ng-click="action.showAddRole()" class="btn btn-blues">\n                <i class="glyphicon glyphicon-plus"></i>&nbsp;添加菜单权限\n            </button>\n        </div>\n    </div>\n    <table bs-table-control="roleTable"></table>\n\n    <form class="editMenu" ng-show="role.screen">\n        <div class="editMenu-header">\n            <span class="header">选择</span>\n        </div>\n        <div class="editMenu-body"></div>\n        <div class="editMenu-footer">\n            <button type="button" class="btn btn-close" ng-click="action.hideEdit()">取消</button>\n            <button type="submit" class="btn btn-blues" ng-click="action.SearchRole()">保存</button>\n        </div>\n    </form>\n\n    <!--编辑菜单权限出框 START-->\n    <form name="editRoleForm" ng-class="{true:\'editMenu\',false:\'editMenuhide\'}[isActive]" ng-show="role.edits"  ng-submit="action.updateRole()">\n        <div class="editMenu-header">\n            <span class="header">编辑菜单权限</span>\n            <input type="hidden" class="hidden" ng-model="role.editRoleId"/>\n        </div>\n        <div class="modal-body">\n            <div class="modal-item">\n                <ul class="list-inline">\n                    <li>菜单权限名称</li>\n                    <li><input type="text" class="form-control" ng-model="role.editRoleName" style="width: 275px;border: 1px solid #aaa" /></li>\n                </ul>\n            </div>\n            <div class="modal-item">\n                <ul class="list-inline">\n                    <li style="vertical-align: top">选择菜单</li>\n                    <li><div id="edit_menu_select"  ng-model="role.editRoleItems"\n                             style="width:281px;height:auto;min-height:300px;overflow-y: auto;"></div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div class="editMenu-footer">\n            <div class="searchBar text-center">\n                <a class="btn btn-remover a-del" type="button" ng-click="action.EditRemoveRole()">删除此菜单权限</a>\n                <button type="button" class="btn btn-close" ng-click="action.EditRoleCancel()">取消</button>\n                <button type="submit" class="btn btn-blues">保存</button>\n            </div>\n        </div>\n    </form>\n    <!--编辑角色弹出框 END-->\n</div>';
},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("UserServiceModule",["ngResource"]).factory("UserService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.user,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("RoleService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.role,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("RoleMenuService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.roleEdit,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _classController=__webpack_require__(59),_classService=(_interopRequireDefault(_classController),__webpack_require__(63)),_classService2=_interopRequireDefault(_classService);exports.default=angular.module("AssetsModule",[_classService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$,jQuery){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15),_angularTouch=__webpack_require__(60),_angularTouch2=_interopRequireDefault(_angularTouch),_angularUiGrid=__webpack_require__(62);_interopRequireDefault(_angularUiGrid);exports.default=angular.module("AssetsControllerModule",[_angularTouch2.default,"ui.grid"]).controller("CmdbClassController",["$scope","$rootScope","AssetsService","CiService",function($scope,$rootScope,assetsService,ciService){function operateCiFormatter(){return['<button type="button" class="btn-small" ng-click="grid.appScope.showEditCi(row.entity)" >编辑</button>&nbsp','<button type="button" class="btn-small" ng-click="grid.appScope.deleteCi(row.entity)" >删除</button>'].join("")}$scope.gridOptions={enableSorting:!0,columnDefs:[{displayName:"名称",field:"name",width:200},{displayName:"描述",field:"description",width:200},{displayName:"操作",field:"operation",width:200,cellTemplate:operateCiFormatter()}]},$scope.assets={id:"",name:"",description:"",inherits:"",superclass:"",active:""},$scope.upateAssets={id:"",name:"",description:"",inherits:"",superclass:"",active:""},$scope.ci={model:{assets:"",name:"",description:"",class:"",show:"",active:"",editmode:""},updateModel:{id:"",name:"",description:"",class:"",show:"",active:"",editmode:""}},$scope.showAddAssets=function(){$scope.assets={id:"",name:"",description:"",inherits:"",superclass:"",active:""},$("#addAssetsDialog").modal("show")},$scope.showAddCi=function(){$scope.ci.model={name:"",description:"",class:"",show:"",active:"",editmode:""},$("#addCiDialog").modal("show")},$scope.showEditCi=function(row){$scope.ci.updateModel={id:row.id,name:row.name,description:row.description,class:"",show:"",active:"",editmode:""},$("#editCiDialog").modal("show")},$scope.reloadGrid=function(){ciService.get({assets:$scope.currentAssets},{},function(response){$scope.gridOptions.data=response.cidata})},$scope.deleteCi=function(row){ciService.delete({id:row.id,assets:$scope.currentAssets},{},function(response){bootbox.alert({size:"small",title:"消息提示",message:response.msg}),$scope.reloadGrid()})},$scope.addAssets=function(){assetsService.add($scope.assets,{},function(response){$("#addAssetsDialog").modal("hide"),bootbox.alert({size:"small",title:"消息提示",message:response.msg}),$("#assets_class_list").jstree(!0).refresh()})},$scope.addCi=function(){ciService.add({name:$scope.ci.model.name,description:$scope.ci.model.description,assets:$scope.currentAssets},{},function(response){$("#addCiDialog").modal("hide"),bootbox.alert({size:"small",title:"消息提示",message:response.msg}),$scope.reloadGrid()})},$scope.editCi=function(){var ciModelStr=JSON.stringify($scope.ci.updateModel);ciService.update({json:ciModelStr,id:$scope.ci.updateModel.id,assets:$scope.currentAssets},{},function(response){$("#editCiDialog").modal("hide"),bootbox.alert({size:"small",title:"消息提示",message:response.msg}),$scope.reloadGrid()})},$("#assets_class_list").jstree({plugins:["wholerow","types","contextmenu"],core:{themes:{responsive:!1},data:{url:function(node){return _api_config.cmdb.uri.assets+"?access_token="+$rootScope.token+"&timestamp="+utilService.getTimestamp()},data:function(node){return{parent:node.id}}}},types:{default:{icon:"fa fa-folder icon-warning icon-lg"},file:{icon:"fa fa-file icon-warning icon-lg"}},contextmenu:{items:{delete:{label:"删除",action:function(data){var treeInstance=jQuery.jstree.reference(data.reference),nodeObj=treeInstance.get_node(data.reference);assetsService.delete({id:nodeObj.id},{},function(response){$("#assets_class_list").jstree(!0).refresh()})}}}}}),$("#assets_class_list").on("select_node.jstree",function(e,data){$scope.$apply(function(){$scope.upateAssets.id=data.node.original.id,$scope.upateAssets.name=data.node.original.name,$scope.upateAssets.description=data.node.original.text,$scope.currentAssets=data.node.original.name,ciService.get({assets:$scope.currentAssets},{},function(response){$scope.gridOptions.data=response.cidata})})})}]).controller("CustomListController",["$scope","$state","$rootScope","AssetsService","CiService","CustomService",function($scope,$state,$rootScope,assetsService,ciService,customService){$rootScope.$custom_table=$("#mycustom_table"),$rootScope.assertName=$state.current.name,$rootScope.assets=[],$rootScope.assetModel={id:""},ciService.get({assets:$rootScope.assertName},{},function(response){$rootScope.assets=response.cidata,$scope.columns=[];var idColumn={field:"id",title:"ID",visible:!1};$scope.columns.push(idColumn),angular.forEach(response.cidata,function(cidata,index){var column={field:cidata.name,title:cidata.description};$rootScope.assetModel[cidata.name]="",$scope.columns.push(column)});var operateColumn={field:"operate",title:"操作",formatter:function(value,row,index){return['<a id="custom_editor" href="javascript:void(0)" title="编辑">','<i class="glyphicon glyphicon-edit"></i>',"</a>","&nbsp",'<a id="custom_remove" href="javascript:void(0)" title="删除">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")},events:{"click #custom_editor":function(e,value,row,index){$scope.assetModel.id=row.id,console.log($scope.assetModel),angular.forEach(row,function(rowValue,rowKey){console.log(rowKey),angular.forEach($scope.assetModel,function(modelValue,modelKey){console.log(modelKey),rowKey==modelKey&&($scope.assetModel[rowKey]=rowValue)})}),$("#edit_custom_dialog").modal("show")},"click #custom_remove":function(e,value,row,index){customService.delete({id:row.id,assets:$rootScope.assertName},{},function(response){customService.get({assets:$rootScope.assertName},{},function(response){$rootScope.$custom_table.bootstrapTable("load",{data:response.data})})})}}};$scope.columns.push(operateColumn),customService.get({assets:$rootScope.assertName},{},function(response){$rootScope.$custom_table.bootstrapTable({height:getHeight(),idField:"id",locale:"zh_CN",showRefresh:!1,showToggle:!0,showColumns:!0,showExport:!0,searchOnEnterKey:!1,search:!1,data:response.data,columns:$scope.columns})})}),$scope.updateCustomAssets=function(){var assetModelStr=JSON.stringify($scope.assetModel);customService.update({json:assetModelStr,id:$scope.assetModel.id,assets:$rootScope.assertName},{},function(response){$rootScope.$custom_table.bootstrapTable("refresh")})}}]).controller("CustomAddController",["$scope","$state","$rootScope","AssetsService","CiService","CustomService",function($scope,$state,$rootScope,assetsService,ciService,customService){$scope.assertDescription=$state.current.name,$scope.addCustomAssets=function(){var assetModelStr=JSON.stringify($rootScope.assetModel);customService.add({json:assetModelStr,assets:$rootScope.assertName},{},function(response){bootbox.alert({size:"small",title:"消息提示",message:response.msg}),customService.get({assets:$rootScope.assertName},{},function(response){$rootScope.$custom_table.bootstrapTable("load",{data:response.data})})})}}]).controller("CustomController",["$scope","$state","$rootScope","AssetsService","CiService","CustomService",function($scope,$state,$rootScope,assetsService,ciService,customService){$scope.tabs=[{title:"自定义资产列表",template:"dest/template/object/list/list.html",active:!1},{title:"添加自定义资产",template:"dest/template/object/add/add.html",active:!1}]}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14),__webpack_require__(14))},function(module,exports,__webpack_require__){__webpack_require__(61),module.exports="ngTouch"},function(module,exports){/**
	 * @license AngularJS v1.5.8
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function nodeName_(element){return angular.lowercase(element.nodeName||element[0]&&element[0].nodeName)}function $TouchProvider($provide,$compileProvider){var ngClickOverrideEnabled=!1,ngClickDirectiveAdded=!1;this.ngClickOverrideEnabled=function(enabled){return angular.isDefined(enabled)?(enabled&&!ngClickDirectiveAdded&&(ngClickDirectiveAdded=!0,ngTouchClickDirectiveFactory.$$moduleName="ngTouch",$compileProvider.directive("ngClick",ngTouchClickDirectiveFactory),$provide.decorator("ngClickDirective",["$delegate",function($delegate){if(ngClickOverrideEnabled)$delegate.shift();else for(var i=$delegate.length-1;i>=0;){if("ngTouch"===$delegate[i].$$moduleName){$delegate.splice(i,1);break}i--}return $delegate}])),ngClickOverrideEnabled=enabled,this):ngClickOverrideEnabled},this.$get=function(){return{ngClickOverrideEnabled:function(){return ngClickOverrideEnabled}}}}function makeSwipeDirective(directiveName,direction,eventName){ngTouch.directive(directiveName,["$parse","$swipe",function($parse,$swipe){var MAX_VERTICAL_DISTANCE=75,MAX_VERTICAL_RATIO=.3,MIN_HORIZONTAL_DISTANCE=30;return function(scope,element,attr){function validSwipe(coords){if(!startCoords)return!1;var deltaY=Math.abs(coords.y-startCoords.y),deltaX=(coords.x-startCoords.x)*direction;return valid&&deltaY<MAX_VERTICAL_DISTANCE&&deltaX>0&&deltaX>MIN_HORIZONTAL_DISTANCE&&deltaY/deltaX<MAX_VERTICAL_RATIO}var startCoords,valid,swipeHandler=$parse(attr[directiveName]),pointerTypes=["touch"];angular.isDefined(attr.ngSwipeDisableMouse)||pointerTypes.push("mouse"),$swipe.bind(element,{start:function(coords,event){startCoords=coords,valid=!0},cancel:function(event){valid=!1},end:function(coords,event){validSwipe(coords)&&scope.$apply(function(){element.triggerHandler(eventName),swipeHandler(scope,{$event:event})})}},pointerTypes)}}])}var ngTouch=angular.module("ngTouch",[]);ngTouch.provider("$touch",$TouchProvider),$TouchProvider.$inject=["$provide","$compileProvider"],ngTouch.factory("$swipe",[function(){function getCoordinates(event){var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=originalEvent.changedTouches&&originalEvent.changedTouches[0]||touches[0];return{x:e.clientX,y:e.clientY}}function getEvents(pointerTypes,eventType){var res=[];return angular.forEach(pointerTypes,function(pointerType){var eventName=POINTER_EVENTS[pointerType][eventType];eventName&&res.push(eventName)}),res.join(" ")}var MOVE_BUFFER_RADIUS=10,POINTER_EVENTS={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(element,eventHandlers,pointerTypes){var totalX,totalY,startCoords,lastPos,active=!1;pointerTypes=pointerTypes||["mouse","touch","pointer"],element.on(getEvents(pointerTypes,"start"),function(event){startCoords=getCoordinates(event),active=!0,totalX=0,totalY=0,lastPos=startCoords,eventHandlers.start&&eventHandlers.start(startCoords,event)});var events=getEvents(pointerTypes,"cancel");events&&element.on(events,function(event){active=!1,eventHandlers.cancel&&eventHandlers.cancel(event)}),element.on(getEvents(pointerTypes,"move"),function(event){if(active&&startCoords){var coords=getCoordinates(event);if(totalX+=Math.abs(coords.x-lastPos.x),totalY+=Math.abs(coords.y-lastPos.y),lastPos=coords,!(totalX<MOVE_BUFFER_RADIUS&&totalY<MOVE_BUFFER_RADIUS))return totalY>totalX?(active=!1,void(eventHandlers.cancel&&eventHandlers.cancel(event))):(event.preventDefault(),void(eventHandlers.move&&eventHandlers.move(coords,event)))}}),element.on(getEvents(pointerTypes,"end"),function(event){active&&(active=!1,eventHandlers.end&&eventHandlers.end(getCoordinates(event),event))})}}}]);var ngTouchClickDirectiveFactory=["$parse","$timeout","$rootElement",function($parse,$timeout,$rootElement){function hit(x1,y1,x2,y2){return Math.abs(x1-x2)<CLICKBUSTER_THRESHOLD&&Math.abs(y1-y2)<CLICKBUSTER_THRESHOLD}function checkAllowableRegions(touchCoordinates,x,y){for(var i=0;i<touchCoordinates.length;i+=2)if(hit(touchCoordinates[i],touchCoordinates[i+1],x,y))return touchCoordinates.splice(i,i+2),!0;return!1}function onClick(event){if(!(Date.now()-lastPreventedTime>PREVENT_DURATION)){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;x<1&&y<1||lastLabelClickCoordinates&&lastLabelClickCoordinates[0]===x&&lastLabelClickCoordinates[1]===y||(lastLabelClickCoordinates&&(lastLabelClickCoordinates=null),"label"===nodeName_(event.target)&&(lastLabelClickCoordinates=[x,y]),checkAllowableRegions(touchCoordinates,x,y)||(event.stopPropagation(),event.preventDefault(),event.target&&event.target.blur&&event.target.blur()))}}function onTouchStart(event){var touches=event.touches&&event.touches.length?event.touches:[event],x=touches[0].clientX,y=touches[0].clientY;touchCoordinates.push(x,y),$timeout(function(){for(var i=0;i<touchCoordinates.length;i+=2)if(touchCoordinates[i]==x&&touchCoordinates[i+1]==y)return void touchCoordinates.splice(i,i+2)},PREVENT_DURATION,!1)}function preventGhostClick(x,y){touchCoordinates||($rootElement[0].addEventListener("click",onClick,!0),$rootElement[0].addEventListener("touchstart",onTouchStart,!0),touchCoordinates=[]),lastPreventedTime=Date.now(),checkAllowableRegions(touchCoordinates,x,y)}var lastPreventedTime,touchCoordinates,lastLabelClickCoordinates,TAP_DURATION=750,MOVE_TOLERANCE=12,PREVENT_DURATION=2500,CLICKBUSTER_THRESHOLD=25,ACTIVE_CLASS_NAME="ng-click-active";return function(scope,element,attr){function resetState(){tapping=!1,element.removeClass(ACTIVE_CLASS_NAME)}var tapElement,startTime,touchStartX,touchStartY,clickHandler=$parse(attr.ngClick),tapping=!1;element.on("touchstart",function(event){tapping=!0,tapElement=event.target?event.target:event.srcElement,3==tapElement.nodeType&&(tapElement=tapElement.parentNode),element.addClass(ACTIVE_CLASS_NAME),startTime=Date.now();var originalEvent=event.originalEvent||event,touches=originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=touches[0];touchStartX=e.clientX,touchStartY=e.clientY}),element.on("touchcancel",function(event){resetState()}),element.on("touchend",function(event){var diff=Date.now()-startTime,originalEvent=event.originalEvent||event,touches=originalEvent.changedTouches&&originalEvent.changedTouches.length?originalEvent.changedTouches:originalEvent.touches&&originalEvent.touches.length?originalEvent.touches:[originalEvent],e=touches[0],x=e.clientX,y=e.clientY,dist=Math.sqrt(Math.pow(x-touchStartX,2)+Math.pow(y-touchStartY,2));tapping&&diff<TAP_DURATION&&dist<MOVE_TOLERANCE&&(preventGhostClick(x,y),tapElement&&tapElement.blur(),angular.isDefined(attr.disabled)&&attr.disabled!==!1||element.triggerHandler("click",[event])),resetState()}),element.onclick=function(event){},element.on("click",function(event,touchend){scope.$apply(function(){clickHandler(scope,{$event:touchend||event})})}),element.on("mousedown",function(event){element.addClass(ACTIVE_CLASS_NAME)}),element.on("mousemove mouseup",function(event){element.removeClass(ACTIVE_CLASS_NAME)})}}];makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular)},function(module,exports,__webpack_require__){(function(angular){/*!
	 * ui-grid - v3.2.8 - 2016-09-09
	 * Copyright (c) 2016 ; License: MIT 
	 */
!function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",ENTITY_BINDING:"$$this",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function($compile,$parse,gridUtil,uiGridConstants){var uiGridCell={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){function compileTemplate(){var compiledElementFn=$scope.col.compiledElementFn;compiledElementFn($scope,function(clonedElement,scope){$elm.append(clonedElement)})}if(uiGridCtrl&&$scope.col.compiledElementFn)compileTemplate();else if(uiGridCtrl&&!$scope.col.compiledElementFn)$scope.col.getCompiledElementFn().then(function(compiledElementFn){compiledElementFn($scope,function(clonedElement,scope){$elm.append(clonedElement)})});else{var html=$scope.col.cellTemplate.replace(uiGridConstants.MODEL_COL_FIELD,"row.entity."+gridUtil.preEval($scope.col.field)).replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)"),cellElement=$compile(html)($scope);$elm.append(cellElement)}},post:function($scope,$elm,$attrs,uiGridCtrl){var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass);var classAdded,updateClass=function(grid){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.cellClass)?$scope.col.cellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.cellClass,contents.addClass(classAdded)};$scope.col.cellClass&&updateClass();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN,uiGridConstants.dataChange.EDIT]),cellChangeFunction=function(n,o){if(n!==o){(classAdded||$scope.col.cellClass)&&updateClass();var newColClass=$scope.col.getColClass(!1);newColClass!==initColClass&&($elm.removeClass(initColClass),$elm.addClass(newColClass),initColClass=newColClass)}},rowWatchDereg=$scope.$watch("row",cellChangeFunction),deregisterFunction=function(){dataChangeDereg(),rowWatchDereg()};$scope.$on("$destroy",deregisterFunction),$elm.on("$destroy",deregisterFunction)}}}};return uiGridCell}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(i18nService,uiGridConstants,gridUtil){var service={initialize:function($scope,uiGridCtrl){$scope.grid=uiGridCtrl.grid,uiGridCtrl.columnMenuScope=$scope,$scope.menuShown=!1},setColMenuItemWatch:function($scope){var deregFunction=$scope.$watch("col.menuItems",function(n){"undefined"!=typeof n&&n&&angular.isArray(n)?(n.forEach(function(item){"undefined"!=typeof item.context&&item.context||(item.context={}),item.context.col=$scope.col}),$scope.menuItems=$scope.defaultMenuItems.concat(n)):$scope.menuItems=$scope.defaultMenuItems});$scope.$on("$destroy",deregFunction)},sortable:function($scope){return!!($scope.grid.options.enableSorting&&"undefined"!=typeof $scope.col&&$scope.col&&$scope.col.enableSorting)},isActiveSort:function($scope,direction){return"undefined"!=typeof $scope.col&&"undefined"!=typeof $scope.col.sort&&"undefined"!=typeof $scope.col.sort.direction&&$scope.col.sort.direction===direction},suppressRemoveSort:function($scope){return!(!$scope.col||!$scope.col.suppressRemoveSort)},hideable:function($scope){return"undefined"==typeof $scope.col||!$scope.col||!$scope.col.colDef||$scope.col.colDef.enableHiding!==!1},getDefaultMenuItems:function($scope){return[{title:i18nService.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function($event){$event.stopPropagation(),$scope.sortColumn($event,uiGridConstants.ASC)},shown:function(){return service.sortable($scope)},active:function(){return service.isActiveSort($scope,uiGridConstants.ASC)}},{title:i18nService.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function($event){$event.stopPropagation(),$scope.sortColumn($event,uiGridConstants.DESC)},shown:function(){return service.sortable($scope)},active:function(){return service.isActiveSort($scope,uiGridConstants.DESC)}},{title:i18nService.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function($event){$event.stopPropagation(),$scope.unsortColumn()},shown:function(){return service.sortable($scope)&&"undefined"!=typeof $scope.col&&"undefined"!=typeof $scope.col.sort&&"undefined"!=typeof $scope.col.sort.direction&&null!==$scope.col.sort.direction&&!service.suppressRemoveSort($scope)}},{title:i18nService.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return service.hideable($scope)},action:function($event){$event.stopPropagation(),$scope.hideColumn()}}]},getColumnElementPosition:function($scope,column,$columnElement){var positionData={};return positionData.left=$columnElement[0].offsetLeft,positionData.top=$columnElement[0].offsetTop,positionData.parentLeft=$columnElement[0].offsetParent.offsetLeft,positionData.offset=0,column.grid.options.offsetLeft&&(positionData.offset=column.grid.options.offsetLeft),positionData.height=gridUtil.elementHeight($columnElement,!0),positionData.width=gridUtil.elementWidth($columnElement,!0),positionData},repositionMenu:function($scope,column,positionData,$elm,$columnElement){var menu=$elm[0].querySelectorAll(".ui-grid-menu"),renderContainerElm=gridUtil.closestElm($columnElement,".ui-grid-render-container"),renderContainerOffset=renderContainerElm.getBoundingClientRect().left-$scope.grid.element[0].getBoundingClientRect().left,containerScrollLeft=renderContainerElm.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,myWidth=column.lastMenuWidth?column.lastMenuWidth:$scope.lastMenuWidth?$scope.lastMenuWidth:170,paddingRight=column.lastMenuPaddingRight?column.lastMenuPaddingRight:$scope.lastMenuPaddingRight?$scope.lastMenuPaddingRight:10;if(0!==menu.length){var mid=menu[0].querySelectorAll(".ui-grid-menu-mid");0===mid.length||angular.element(mid).hasClass("ng-hide")||(myWidth=gridUtil.elementWidth(menu,!0),$scope.lastMenuWidth=myWidth,column.lastMenuWidth=myWidth,paddingRight=parseInt(gridUtil.getStyles(angular.element(menu)[0]).paddingRight,10),$scope.lastMenuPaddingRight=paddingRight,column.lastMenuPaddingRight=paddingRight)}var left=positionData.left+renderContainerOffset-containerScrollLeft+positionData.parentLeft+positionData.width-myWidth+paddingRight;left<positionData.offset&&(left=positionData.offset),$elm.css("left",left+"px"),$elm.css("top",positionData.top+positionData.height+"px")}};return service}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function($timeout,gridUtil,uiGridConstants,uiGridColumnMenuService,$document){var uiGridColumnMenu={priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridColumnMenuService.initialize($scope,uiGridCtrl),$scope.defaultMenuItems=uiGridColumnMenuService.getDefaultMenuItems($scope),$scope.menuItems=$scope.defaultMenuItems,uiGridColumnMenuService.setColMenuItemWatch($scope),$scope.showMenu=function(column,$columnElement,event){$scope.col=column;var colElementPosition=uiGridColumnMenuService.getColumnElementPosition($scope,column,$columnElement);$scope.menuShown?($scope.colElement=$columnElement,$scope.colElementPosition=colElementPosition,$scope.hideThenShow=!0,$scope.$broadcast("hide-menu",{originalEvent:event})):($scope.menuShown=!0,uiGridColumnMenuService.repositionMenu($scope,column,colElementPosition,$elm,$columnElement),$scope.colElement=$columnElement,$scope.colElementPosition=colElementPosition,$scope.$broadcast("show-menu",{originalEvent:event}))},$scope.hideMenu=function(broadcastTrigger){$scope.menuShown=!1,broadcastTrigger||$scope.$broadcast("hide-menu")},$scope.$on("menu-hidden",function(){$scope.hideThenShow?(delete $scope.hideThenShow,uiGridColumnMenuService.repositionMenu($scope,$scope.col,$scope.colElementPosition,$elm,$scope.colElement),$scope.$broadcast("show-menu"),$scope.menuShown=!0):($scope.hideMenu(!0),$scope.col&&gridUtil.focus.bySelector($document,".ui-grid-header-cell."+$scope.col.getColClass()+" .ui-grid-column-menu-button",$scope.col.grid,!1))}),$scope.$on("menu-shown",function(){$timeout(function(){uiGridColumnMenuService.repositionMenu($scope,$scope.col,$scope.colElementPosition,$elm,$scope.colElement),gridUtil.focus.bySelector($document,".ui-grid-menu-items .ui-grid-menu-item",!0),delete $scope.colElementPosition,delete $scope.columnElement},200)}),$scope.sortColumn=function(event,dir){event.stopPropagation(),$scope.grid.sortColumn($scope.col,dir,!0).then(function(){$scope.grid.refresh(),$scope.hideMenu()})},$scope.unsortColumn=function(){$scope.col.unsort(),$scope.grid.refresh(),$scope.hideMenu()};var setFocusOnHideColumn=function(){$timeout(function(){var thisIndex,focusToGridMenu=function(){return gridUtil.focus.byId("grid-menu",$scope.grid)};$scope.grid.columns.some(function(element,index){if(angular.equals(element,$scope.col))return thisIndex=index,!0});var previousVisibleCol;if($scope.grid.columns.some(function(element,index){if(!element.visible)return!1;if(index<thisIndex)previousVisibleCol=element;else{if(index>thisIndex&&!previousVisibleCol)return previousVisibleCol=element,!0;if(index>thisIndex&&previousVisibleCol)return!0}}),previousVisibleCol){var colClass=previousVisibleCol.getColClass();gridUtil.focus.bySelector($document,".ui-grid-header-cell."+colClass+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(reason){if("canceled"!==reason)return focusToGridMenu()})}else focusToGridMenu()})};$scope.hideColumn=function(){$scope.col.colDef.visible=!1,$scope.col.visible=!1,$scope.grid.queueGridRefresh(),$scope.hideMenu(),$scope.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),$scope.grid.api.core.raise.columnVisibilityChanged($scope.col),setFocusOnHideColumn()}},controller:["$scope",function($scope){var self=this;$scope.$watch("menuItems",function(n){self.menuItems=n})}]};return uiGridColumnMenu}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function($compile,$templateCache,i18nService,gridUtil){return{compile:function(){return{pre:function($scope,$elm,$attrs,controllers){$scope.col.updateFilters=function(filterable){if($elm.children().remove(),filterable){var template=$scope.col.filterHeaderTemplate;$elm.append($compile(template)($scope))}},$scope.$on("$destroy",function(){delete $scope.col.updateFilters})},post:function($scope,$elm,$attrs,controllers){$scope.aria=i18nService.getSafeText("headerCell.aria"),$scope.removeFilter=function(colFilter,index){colFilter.term=null,gridUtil.focus.bySelector($elm,".ui-grid-filter-input-"+index)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function($timeout,gridUtil,uiGridConstants,$compile){var uiGridFooterCell={priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(tElement,tAttrs,transclude){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var cellFooter=$compile($scope.col.footerCellTemplate)($scope);$elm.append(cellFooter)},post:function($scope,$elm,$attrs,uiGridCtrl){$scope.grid=uiGridCtrl.grid;var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass);var classAdded,updateClass=function(grid){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.footerCellClass)?$scope.col.footerCellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.footerCellClass,contents.addClass(classAdded)};$scope.col.footerCellClass&&updateClass(),$scope.col.updateAggregationValue();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateClass,[uiGridConstants.dataChange.COLUMN]);$scope.grid.api.core.on.rowsRendered($scope,$scope.col.updateAggregationValue),$scope.grid.api.core.on.rowsRendered($scope,updateClass),$scope.$on("$destroy",dataChangeDereg)}}}};return uiGridFooterCell}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil,$timeout){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer,containerCtrl.footer=$elm;var footerTemplate=$scope.grid.options.footerTemplate;gridUtil.getTemplate(footerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);if($elm.append(newElm),containerCtrl){var footerViewport=$elm[0].getElementsByClassName("ui-grid-footer-viewport")[0];footerViewport&&(containerCtrl.footerViewport=footerViewport)}})},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid;gridUtil.disableAnimations($elm),containerCtrl.footer=$elm;var footerViewport=$elm[0].getElementsByClassName("ui-grid-footer-viewport")[0];footerViewport&&(containerCtrl.footerViewport=footerViewport)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function($templateCache,$compile,uiGridConstants,gridUtil,$timeout){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,uiGridCtrl){$scope.grid=uiGridCtrl.grid;var footerTemplate=$scope.grid.options.gridFooterTemplate;gridUtil.getTemplate(footerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.append(newElm)})},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function($compile,uiGridConstants,gridUtil){var defaultTemplate="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var groupPanelTemplate=$scope.grid.options.groupPanelTemplate||defaultTemplate;gridUtil.getTemplate(groupPanelTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.append(newElm)})},post:function($scope,$elm,$attrs,uiGridCtrl){$elm.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function($compile,$timeout,$window,$document,gridUtil,uiGridConstants,ScrollEvent,i18nService){var mousedownTimeout=500,changeModeTimeout=500,uiGridHeaderCell={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function($scope,$elm,$attrs){var cellHeader=$compile($scope.col.headerCellTemplate)($scope);$elm.append(cellHeader)},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];$scope.i18n={headerCell:i18nService.getSafeText("headerCell"),sort:i18nService.getSafeText("sort")},$scope.isSortPriorityVisible=function(){return angular.isNumber($scope.col.sort.priority)&&$scope.grid.columns.some(function(element,index){return angular.isNumber(element.sort.priority)&&element!==$scope.col})},$scope.getSortDirectionAriaLabel=function(){var col=$scope.col,sortDirectionText=col.sort.direction===uiGridConstants.ASC?$scope.i18n.sort.ascending:col.sort.direction===uiGridConstants.DESC?$scope.i18n.sort.descending:$scope.i18n.sort.none,label=sortDirectionText;return $scope.isSortPriorityVisible()&&(label=label+". "+$scope.i18n.headerCell.priority+" "+col.sort.priority),label},$scope.grid=uiGridCtrl.grid,$scope.renderContainer=uiGridCtrl.grid.renderContainers[renderContainerCtrl.containerId];var initColClass=$scope.col.getColClass(!1);$elm.addClass(initColClass),$scope.menuShown=!1,$scope.asc=uiGridConstants.ASC,$scope.desc=uiGridConstants.DESC;var classAdded,previousMouseX,$contentsElm=(angular.element($elm[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element($elm[0].querySelectorAll(".ui-grid-cell-contents"))),filterDeregisters=[];$scope.downFn=function(event){event.stopPropagation(),"undefined"!=typeof event.originalEvent&&void 0!==event.originalEvent&&(event=event.originalEvent),event.button&&0!==event.button||(previousMouseX=event.pageX,$scope.mousedownStartTime=(new Date).getTime(),$scope.mousedownTimeout=$timeout(function(){},mousedownTimeout),$scope.mousedownTimeout.then(function(){$scope.colMenu&&uiGridCtrl.columnMenuScope.showMenu($scope.col,$elm,event)}),uiGridCtrl.fireEvent(uiGridConstants.events.COLUMN_HEADER_CLICK,{event:event,columnName:$scope.col.colDef.name}),$scope.offAllEvents(),"touchstart"===event.type?($document.on("touchend",$scope.upFn),$document.on("touchmove",$scope.moveFn)):"mousedown"===event.type&&($document.on("mouseup",$scope.upFn),$document.on("mousemove",$scope.moveFn)))},$scope.upFn=function(event){event.stopPropagation(),$timeout.cancel($scope.mousedownTimeout),$scope.offAllEvents(),$scope.onDownEvents(event.type);var mousedownEndTime=(new Date).getTime(),mousedownTime=mousedownEndTime-$scope.mousedownStartTime;mousedownTime>mousedownTimeout||$scope.sortable&&$scope.handleClick(event)},$scope.moveFn=function(event){var changeValue=event.pageX-previousMouseX;0!==changeValue&&($timeout.cancel($scope.mousedownTimeout),$scope.offAllEvents(),$scope.onDownEvents(event.type))},$scope.clickFn=function(event){event.stopPropagation(),$contentsElm.off("click",$scope.clickFn)},$scope.offAllEvents=function(){$contentsElm.off("touchstart",$scope.downFn),$contentsElm.off("mousedown",$scope.downFn),$document.off("touchend",$scope.upFn),$document.off("mouseup",$scope.upFn),$document.off("touchmove",$scope.moveFn),$document.off("mousemove",$scope.moveFn),$contentsElm.off("click",$scope.clickFn)},$scope.onDownEvents=function(type){switch(type){case"touchmove":case"touchend":$contentsElm.on("click",$scope.clickFn),$contentsElm.on("touchstart",$scope.downFn),$timeout(function(){$contentsElm.on("mousedown",$scope.downFn)},changeModeTimeout);break;case"mousemove":case"mouseup":$contentsElm.on("click",$scope.clickFn),$contentsElm.on("mousedown",$scope.downFn),$timeout(function(){$contentsElm.on("touchstart",$scope.downFn)},changeModeTimeout);break;default:$contentsElm.on("click",$scope.clickFn),$contentsElm.on("touchstart",$scope.downFn),$contentsElm.on("mousedown",$scope.downFn)}};var updateHeaderOptions=function(grid){var contents=$elm;classAdded&&(contents.removeClass(classAdded),classAdded=null),classAdded=angular.isFunction($scope.col.headerCellClass)?$scope.col.headerCellClass($scope.grid,$scope.row,$scope.col,$scope.rowRenderIndex,$scope.colRenderIndex):$scope.col.headerCellClass,contents.addClass(classAdded),$timeout(function(){var rightMostContainer=$scope.grid.renderContainers.right?$scope.grid.renderContainers.right:$scope.grid.renderContainers.body;$scope.isLastCol=$scope.col===rightMostContainer.visibleColumnCache[rightMostContainer.visibleColumnCache.length-1]}),uiGridCtrl.grid.options.enableSorting&&$scope.col.enableSorting?$scope.sortable=!0:$scope.sortable=!1;var oldFilterable=$scope.filterable;uiGridCtrl.grid.options.enableFiltering&&$scope.col.enableFiltering?$scope.filterable=!0:$scope.filterable=!1,oldFilterable!==$scope.filterable&&("undefined"!=typeof $scope.col.updateFilters&&$scope.col.updateFilters($scope.filterable),$scope.filterable?($scope.col.filters.forEach(function(filter,i){filterDeregisters.push($scope.$watch("col.filters["+i+"].term",function(n,o){n!==o&&(uiGridCtrl.grid.api.core.raise.filterChanged(),uiGridCtrl.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),uiGridCtrl.grid.queueGridRefresh())}))}),$scope.$on("$destroy",function(){filterDeregisters.forEach(function(filterDeregister){filterDeregister()})})):filterDeregisters.forEach(function(filterDeregister){filterDeregister()})),$scope.col.grid.options&&$scope.col.grid.options.enableColumnMenus!==!1&&$scope.col.colDef&&$scope.col.colDef.enableColumnMenu!==!1?$scope.colMenu=!0:$scope.colMenu=!1,$scope.offAllEvents(),($scope.sortable||$scope.colMenu)&&($scope.onDownEvents(),$scope.$on("$destroy",function(){$scope.offAllEvents()}))};updateHeaderOptions();var dataChangeDereg=$scope.grid.registerDataChangeCallback(updateHeaderOptions,[uiGridConstants.dataChange.COLUMN]);$scope.$on("$destroy",dataChangeDereg),$scope.handleClick=function(event){var add=!1;event.shiftKey&&(add=!0),uiGridCtrl.grid.sortColumn($scope.col,add).then(function(){uiGridCtrl.columnMenuScope&&uiGridCtrl.columnMenuScope.hideMenu(),uiGridCtrl.grid.refresh()})},$scope.toggleMenu=function(event){event.stopPropagation(),uiGridCtrl.columnMenuScope.menuShown&&uiGridCtrl.columnMenuScope.col===$scope.col?uiGridCtrl.columnMenuScope.hideMenu():uiGridCtrl.columnMenuScope.showMenu($scope.col,$elm)}}}}};return uiGridHeaderCell}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function($templateCache,$compile,uiGridConstants,gridUtil,$timeout,ScrollEvent){var defaultTemplate="ui-grid/ui-grid-header",emptyTemplate="ui-grid/ui-grid-no-header";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,controllers){function updateHeaderReferences(){containerCtrl.header=containerCtrl.colContainer.header=$elm;var headerCanvases=$elm[0].getElementsByClassName("ui-grid-header-canvas");headerCanvases.length>0?containerCtrl.headerCanvas=containerCtrl.colContainer.headerCanvas=headerCanvases[0]:containerCtrl.headerCanvas=null}function scrollHandler(evt){if(!uiGridCtrl.grid.isScrollingHorizontally){var newScrollLeft=gridUtil.normalizeScrollLeft(containerCtrl.headerViewport,uiGridCtrl.grid),horizScrollPercentage=containerCtrl.colContainer.scrollHorizontal(newScrollLeft),scrollEvent=new ScrollEvent(uiGridCtrl.grid,null,containerCtrl.colContainer,ScrollEvent.Sources.ViewPortScroll);scrollEvent.newScrollLeft=newScrollLeft,horizScrollPercentage>-1&&(scrollEvent.x={percentage:horizScrollPercentage}),uiGridCtrl.grid.scrollContainers(null,scrollEvent)}}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer,updateHeaderReferences();var headerTemplate;headerTemplate=$scope.grid.options.showHeader?$scope.grid.options.headerTemplate?$scope.grid.options.headerTemplate:defaultTemplate:emptyTemplate,gridUtil.getTemplate(headerTemplate).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);if($elm.replaceWith(newElm),$elm=newElm,updateHeaderReferences(),containerCtrl){var headerViewport=$elm[0].getElementsByClassName("ui-grid-header-viewport")[0];headerViewport&&(containerCtrl.headerViewport=headerViewport,angular.element(headerViewport).on("scroll",scrollHandler),$scope.$on("$destroy",function(){angular.element(headerViewport).off("scroll",scrollHandler)}))}$scope.grid.queueRefresh()})},post:function($scope,$elm,$attrs,controllers){function updateColumnWidths(){var columnCache=containerCtrl.colContainer.visibleColumnCache,ret="",canvasWidth=0;return columnCache.forEach(function(column){ret+=column.getColClassDefinition(),canvasWidth+=column.drawnWidth}),containerCtrl.colContainer.canvasWidth=canvasWidth,ret}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid;gridUtil.disableAnimations($elm),containerCtrl.header=$elm;var headerViewport=$elm[0].getElementsByClassName("ui-grid-header-viewport")[0];headerViewport&&(containerCtrl.headerViewport=headerViewport),uiGridCtrl&&uiGridCtrl.grid.registerStyleComputation({priority:15,func:updateColumnWidths})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(gridUtil,i18nService,uiGridConstants){var service={initialize:function($scope,grid){grid.gridMenuScope=$scope,$scope.grid=grid,$scope.registeredMenuItems=[],$scope.$on("$destroy",function(){$scope.grid&&$scope.grid.gridMenuScope&&($scope.grid.gridMenuScope=null),$scope.grid&&($scope.grid=null),$scope.registeredMenuItems&&($scope.registeredMenuItems=null)}),$scope.registeredMenuItems=[],grid.api.registerMethod("core","addToGridMenu",service.addToGridMenu),grid.api.registerMethod("core","removeFromGridMenu",service.removeFromGridMenu)},addToGridMenu:function(grid,menuItems){angular.isArray(menuItems)?grid.gridMenuScope?(grid.gridMenuScope.registeredMenuItems=grid.gridMenuScope.registeredMenuItems?grid.gridMenuScope.registeredMenuItems:[],grid.gridMenuScope.registeredMenuItems=grid.gridMenuScope.registeredMenuItems.concat(menuItems)):gridUtil.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):gridUtil.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(grid,id){var foundIndex=-1;grid&&grid.gridMenuScope&&grid.gridMenuScope.registeredMenuItems.forEach(function(value,index){value.id===id&&(foundIndex>-1?gridUtil.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):foundIndex=index)}),foundIndex>-1&&grid.gridMenuScope.registeredMenuItems.splice(foundIndex,1)},getMenuItems:function($scope){var menuItems=[];$scope.grid.options.gridMenuCustomItems&&(angular.isArray($scope.grid.options.gridMenuCustomItems)?menuItems=menuItems.concat($scope.grid.options.gridMenuCustomItems):gridUtil.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var clearFilters=[{title:i18nService.getSafeText("gridMenu.clearAllFilters"),action:function($event){$scope.grid.clearAllFilters(void 0,!0,void 0)},shown:function(){return $scope.grid.options.enableFiltering},order:100}];return menuItems=menuItems.concat(clearFilters),menuItems=menuItems.concat($scope.registeredMenuItems),$scope.grid.options.gridMenuShowHideColumns!==!1&&(menuItems=menuItems.concat(service.showHideColumns($scope))),menuItems.sort(function(a,b){return a.order-b.order}),menuItems},showHideColumns:function($scope){var showHideColumns=[];return $scope.grid.options.columnDefs&&0!==$scope.grid.options.columnDefs.length&&0!==$scope.grid.columns.length?(showHideColumns.push({title:i18nService.getSafeText("gridMenu.columns"),order:300}),$scope.grid.options.gridMenuTitleFilter=$scope.grid.options.gridMenuTitleFilter?$scope.grid.options.gridMenuTitleFilter:function(title){return title},$scope.grid.options.columnDefs.forEach(function(colDef,index){if(colDef.enableHiding!==!1){var menuItem={icon:"ui-grid-icon-ok",action:function($event){$event.stopPropagation(),service.toggleColumnVisibility(this.context.gridCol)},shown:function(){return this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible},context:{gridCol:$scope.grid.getColumn(colDef.name||colDef.field)},leaveOpen:!0,order:301+2*index};service.setMenuItemTitle(menuItem,colDef,$scope.grid),showHideColumns.push(menuItem),menuItem={icon:"ui-grid-icon-cancel",action:function($event){$event.stopPropagation(),service.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:$scope.grid.getColumn(colDef.name||colDef.field)},leaveOpen:!0,order:301+2*index+1},service.setMenuItemTitle(menuItem,colDef,$scope.grid),showHideColumns.push(menuItem)}}),showHideColumns):showHideColumns},setMenuItemTitle:function(menuItem,colDef,grid){var title=grid.options.gridMenuTitleFilter(colDef.displayName||gridUtil.readableColumnName(colDef.name)||colDef.field);"string"==typeof title?menuItem.title=title:title.then?(menuItem.title="",title.then(function(successValue){menuItem.title=successValue},function(errorValue){menuItem.title=errorValue})):(gridUtil.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),menuItem.title="badconfig")},toggleColumnVisibility:function(gridCol){gridCol.colDef.visible=!(gridCol.colDef.visible===!0||void 0===gridCol.colDef.visible),gridCol.grid.refresh(),gridCol.grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),gridCol.grid.api.core.raise.columnVisibilityChanged(gridCol)}};return service}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(gridUtil,uiGridConstants,uiGridGridMenuService,i18nService){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];$scope.i18n={aria:i18nService.getSafeText("gridMenu.aria")},uiGridGridMenuService.initialize($scope,uiGridCtrl.grid),$scope.shown=!1,$scope.toggleMenu=function(){$scope.shown?($scope.$broadcast("hide-menu"),$scope.shown=!1):($scope.menuItems=uiGridGridMenuService.getMenuItems($scope),$scope.$broadcast("show-menu"),$scope.shown=!0)},$scope.$on("menu-hidden",function(){$scope.shown=!1,gridUtil.focus.bySelector($elm,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function($compile,$timeout,$window,$document,gridUtil,uiGridConstants,i18nService){var uiGridMenu={priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function($scope,$elm,$attrs,uiGridCtrl){$scope.dynamicStyles="";var setupHeightStyle=function(gridHeight){var gridMenuMaxHeight=gridHeight-uiGridCtrl.grid.headerHeight-20;$scope.dynamicStyles=[".grid"+uiGridCtrl.grid.id+" .ui-grid-menu-mid {","max-height: "+gridMenuMaxHeight+"px;","}"].join(" ")};uiGridCtrl&&(setupHeightStyle(uiGridCtrl.grid.gridHeight),uiGridCtrl.grid.api.core.on.gridDimensionChanged($scope,function(oldGridHeight,oldGridWidth,newGridHeight,newGridWidth){setupHeightStyle(newGridHeight);
})),$scope.i18n={close:i18nService.getSafeText("columnMenu.close")},$scope.showMenu=function(event,args){$scope.shown?$scope.shownMid||($scope.shownMid=!0,$scope.$emit("menu-shown")):($scope.shown=!0,$timeout(function(){$scope.shownMid=!0,$scope.$emit("menu-shown")}));var docEventType="click";args&&args.originalEvent&&args.originalEvent.type&&"touchstart"===args.originalEvent.type&&(docEventType=args.originalEvent.type),angular.element(document).off("click touchstart",applyHideMenu),$elm.off("keyup",checkKeyUp),$elm.off("keydown",checkKeyDown),$timeout(function(){angular.element(document).on(docEventType,applyHideMenu),$elm.on("keyup",checkKeyUp),$elm.on("keydown",checkKeyDown)}),gridUtil.focus.bySelector($elm,"button[type=button]",!0)},$scope.hideMenu=function(event){$scope.shown&&($scope.shownMid=!1,$timeout(function(){$scope.shownMid||($scope.shown=!1,$scope.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",applyHideMenu),$elm.off("keyup",checkKeyUp),$elm.off("keydown",checkKeyDown)},$scope.$on("hide-menu",function(event,args){$scope.hideMenu(event,args)}),$scope.$on("show-menu",function(event,args){$scope.showMenu(event,args)});var applyHideMenu=function(){$scope.shown&&$scope.$apply(function(){$scope.hideMenu()})},checkKeyUp=function(event){27===event.keyCode&&$scope.hideMenu()},checkKeyDown=function(event){var setFocus=function(elm){return elm.focus(),event.preventDefault(),!1};if(9===event.keyCode){var firstMenuItem,lastMenuItem,menuItemButtons=$elm[0].querySelectorAll("button:not(.ng-hide)");menuItemButtons.length>0&&(firstMenuItem=menuItemButtons[0],lastMenuItem=menuItemButtons[menuItemButtons.length-1],event.target!==lastMenuItem||event.shiftKey?event.target===firstMenuItem&&event.shiftKey&&setFocus(lastMenuItem):setFocus(firstMenuItem))}};"undefined"!=typeof $scope.autoHide&&void 0!==$scope.autoHide||($scope.autoHide=!0),$scope.autoHide&&angular.element($window).on("resize",applyHideMenu),$scope.$on("$destroy",function(){angular.element(document).off("click touchstart",applyHideMenu)}),$scope.$on("$destroy",function(){angular.element($window).off("resize",applyHideMenu)}),uiGridCtrl&&$scope.$on("$destroy",uiGridCtrl.grid.api.core.on.scrollBegin($scope,applyHideMenu)),$scope.$on("$destroy",$scope.$on(uiGridConstants.events.ITEM_DRAGGING,applyHideMenu))}};return uiGridMenu}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(gridUtil,$compile,i18nService){var uiGridMenuItem={priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function($scope,$elm){$scope.templateUrl&&gridUtil.getTemplate($scope.templateUrl).then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);$elm.replaceWith(newElm)})},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];"undefined"!=typeof $scope.shown&&null!==$scope.shown||($scope.shown=function(){return!0}),$scope.itemShown=function(){var context={};return $scope.context&&(context.context=$scope.context),"undefined"!=typeof uiGridCtrl&&uiGridCtrl&&(context.grid=uiGridCtrl.grid),$scope.shown.call(context)},$scope.itemAction=function($event,title){if($event.stopPropagation(),"function"==typeof $scope.action){var context={};$scope.context&&(context.context=$scope.context),"undefined"!=typeof uiGridCtrl&&uiGridCtrl&&(context.grid=uiGridCtrl.grid),$scope.action.call(context,$event,title),$scope.leaveOpen?gridUtil.focus.bySelector(angular.element(gridUtil.closestElm($elm,".ui-grid-menu-items")),"button[type=button]",!0):$scope.$emit("hide-menu")}},$scope.i18n=i18nService.get()}}}};return uiGridMenuItem}])}(),function(){"use strict";var oneBinders=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(v){var baseDirectiveName="uiGridOneBind",directiveName=(v.aria?baseDirectiveName+"Aria":baseDirectiveName)+(v.directiveName?v.directiveName:v.tag);oneBinders.directive(directiveName,["gridUtil",function(gridUtil){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(scope,iElement,iAttrs,controllers){var appendGridId=function(val){var grid;if(scope.grid)grid=scope.grid;else if(scope.col&&scope.col.grid)grid=scope.col.grid;else if(!controllers.some(function(controller){if(controller&&controller.grid)return grid=controller.grid,!0}))throw gridUtil.logError("["+directiveName+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+val),new Error("No valid grid could be found");if(grid){var idRegex=new RegExp(grid.id.toString());idRegex.test(val)||(val=grid.id.toString()+"-"+val)}return val},rmWatcher=scope.$watch(iAttrs[directiveName],function(newV){if(newV){if(v.appendGridId){var newIdString=null;angular.forEach(newV.split(" "),function(s){newIdString=(newIdString?newIdString+" ":"")+appendGridId(s)}),newV=newIdString}switch(v.method){case"attr":v.aria?iElement[v.method]("aria-"+v.tag.toLowerCase(),newV):iElement[v.method](v.tag.toLowerCase(),newV);break;case"addClass":if(angular.isObject(newV)&&!angular.isArray(newV)){var results=[],nonNullFound=!1;if(angular.forEach(newV,function(value,index){null!==value&&"undefined"!=typeof value&&(nonNullFound=!0,value&&results.push(index))}),!nonNullFound)return;newV=results}if(!newV)return;iElement.addClass(angular.isArray(newV)?newV.join(" "):newV);break;default:iElement[v.method](newV)}rmWatcher()}},!0)}}}])})}(),function(){"use strict";var module=angular.module("ui.grid");module.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function($timeout,$document,uiGridConstants,gridUtil,ScrollEvent){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=$scope.grid=uiGridCtrl.grid;if(!$scope.rowContainerName)throw"No row render container name specified";if(!$scope.colContainerName)throw"No column render container name specified";if(!grid.renderContainers[$scope.rowContainerName])throw"Row render container '"+$scope.rowContainerName+"' is not registered.";if(!grid.renderContainers[$scope.colContainerName])throw"Column render container '"+$scope.colContainerName+"' is not registered.";var rowContainer=$scope.rowContainer=grid.renderContainers[$scope.rowContainerName],colContainer=$scope.colContainer=grid.renderContainers[$scope.colContainerName];containerCtrl.containerId=$scope.containerId,containerCtrl.rowContainer=rowContainer,containerCtrl.colContainer=colContainer},post:function($scope,$elm,$attrs,controllers){function update(){var ret="",canvasWidth=colContainer.canvasWidth,viewportWidth=colContainer.getViewportWidth(),canvasHeight=rowContainer.getCanvasHeight(),viewportHeight=rowContainer.getViewportHeight();colContainer.needsHScrollbarPlaceholder()&&(viewportHeight-=grid.scrollbarHeight);var headerViewportWidth,footerViewportWidth;return headerViewportWidth=footerViewportWidth=colContainer.getHeaderViewportWidth(),ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-canvas { width: "+canvasWidth+"px; height: "+canvasHeight+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { width: "+(canvasWidth+grid.scrollbarWidth)+"px; }",ret+=renderContainer.explicitHeaderCanvasHeight?"\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { height: "+renderContainer.explicitHeaderCanvasHeight+"px; }":"\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-canvas { height: inherit; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-viewport { width: "+viewportWidth+"px; height: "+viewportHeight+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-header-viewport { width: "+headerViewportWidth+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-footer-canvas { width: "+(canvasWidth+grid.scrollbarWidth)+"px; }",ret+="\n .grid"+uiGridCtrl.grid.id+" .ui-grid-render-container-"+$scope.containerId+" .ui-grid-footer-viewport { width: "+footerViewportWidth+"px; }"}var uiGridCtrl=controllers[0],containerCtrl=controllers[1],grid=uiGridCtrl.grid,rowContainer=containerCtrl.rowContainer,colContainer=containerCtrl.colContainer,scrollTop=null,scrollLeft=null,renderContainer=grid.renderContainers[$scope.containerId];$elm.addClass("ui-grid-render-container-"+$scope.containerId),gridUtil.on.mousewheel($elm,function(event){var scrollEvent=new ScrollEvent(grid,rowContainer,colContainer,ScrollEvent.Sources.RenderContainerMouseWheel);if(0!==event.deltaY){var scrollYAmount=event.deltaY*-1*event.deltaFactor;scrollTop=containerCtrl.viewport[0].scrollTop,scrollEvent.verticalScrollLength=rowContainer.getVerticalScrollLength();var scrollYPercentage=(scrollTop+scrollYAmount)/scrollEvent.verticalScrollLength;scrollYPercentage>=1&&scrollTop<scrollEvent.verticalScrollLength&&(containerCtrl.viewport[0].scrollTop=scrollEvent.verticalScrollLength),scrollYPercentage<0?scrollYPercentage=0:scrollYPercentage>1&&(scrollYPercentage=1),scrollEvent.y={percentage:scrollYPercentage,pixels:scrollYAmount}}if(0!==event.deltaX){var scrollXAmount=event.deltaX*event.deltaFactor;scrollLeft=gridUtil.normalizeScrollLeft(containerCtrl.viewport,grid),scrollEvent.horizontalScrollLength=colContainer.getCanvasWidth()-colContainer.getViewportWidth();var scrollXPercentage=(scrollLeft+scrollXAmount)/scrollEvent.horizontalScrollLength;scrollXPercentage<0?scrollXPercentage=0:scrollXPercentage>1&&(scrollXPercentage=1),scrollEvent.x={percentage:scrollXPercentage,pixels:scrollXAmount}}0!==event.deltaY&&(scrollEvent.atTop(scrollTop)||scrollEvent.atBottom(scrollTop))||0!==event.deltaX&&(scrollEvent.atLeft(scrollLeft)||scrollEvent.atRight(scrollLeft))||(event.preventDefault(),event.stopPropagation(),scrollEvent.fireThrottledScrollingEvent("",scrollEvent))}),$elm.bind("$destroy",function(){$elm.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(eventName){$elm.unbind(eventName)})}),uiGridCtrl.grid.registerStyleComputation({priority:6,func:update})}}}}}]),module.controller("uiGridRenderContainer",["$scope","gridUtil",function($scope,gridUtil){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(gridUtil){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function($scope,$elm,$attrs,controllers){function compileTemplate(){$scope.row.getRowTemplateFn.then(function(compiledElementFn){var newScope=$scope.$new();compiledElementFn(newScope,function(newElm,scope){clonedElement&&(clonedElement.remove(),cloneScope.$destroy()),$elm.empty().append(newElm),clonedElement=newElm,cloneScope=newScope})})}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];uiGridCtrl.grid;$scope.grid=uiGridCtrl.grid,$scope.colContainer=containerCtrl.colContainer;var clonedElement,cloneScope;compileTemplate(),$scope.$watch("row.getRowTemplateFn",function(newFunc,oldFunc){newFunc!==oldFunc&&compileTemplate()})},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(gridUtil,$interpolate){return{link:function($scope,$elm,$attrs,uiGridCtrl){var interpolateFn=$interpolate($elm.text(),!0);interpolateFn&&$scope.$watch(interpolateFn,function(value){$elm.text(value)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(gridUtil,ScrollEvent,uiGridConstants,$log){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function($scope,$elm,$attrs,controllers){function scrollHandler(evt){var newScrollTop=$elm[0].scrollTop,newScrollLeft=gridUtil.normalizeScrollLeft($elm,grid),vertScrollPercentage=rowContainer.scrollVertical(newScrollTop),horizScrollPercentage=colContainer.scrollHorizontal(newScrollLeft),scrollEvent=new ScrollEvent(grid,rowContainer,colContainer,ScrollEvent.Sources.ViewPortScroll);scrollEvent.newScrollLeft=newScrollLeft,scrollEvent.newScrollTop=newScrollTop,horizScrollPercentage>-1&&(scrollEvent.x={percentage:horizScrollPercentage}),vertScrollPercentage>-1&&(scrollEvent.y={percentage:vertScrollPercentage}),grid.scrollContainers($scope.$parent.containerId,scrollEvent)}function syncVerticalScroll(scrollEvent){containerCtrl.prevScrollArgs=scrollEvent;var newScrollTop=scrollEvent.getNewScrollTop(rowContainer,containerCtrl.viewport);$elm[0].scrollTop=newScrollTop}function syncHorizontalScroll(scrollEvent){containerCtrl.prevScrollArgs=scrollEvent;var newScrollLeft=scrollEvent.getNewScrollLeft(colContainer,containerCtrl.viewport);$elm[0].scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.viewport,newScrollLeft,grid)}function syncHorizontalHeader(scrollEvent){var newScrollLeft=scrollEvent.getNewScrollLeft(colContainer,containerCtrl.viewport);containerCtrl.headerViewport&&(containerCtrl.headerViewport.scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.viewport,newScrollLeft,grid))}function syncHorizontalFooter(scrollEvent){var newScrollLeft=scrollEvent.getNewScrollLeft(colContainer,containerCtrl.viewport);containerCtrl.footerViewport&&(containerCtrl.footerViewport.scrollLeft=gridUtil.denormalizeScrollLeft(containerCtrl.viewport,newScrollLeft,grid))}var uiGridCtrl=controllers[0],containerCtrl=controllers[1];$scope.containerCtrl=containerCtrl;var rowContainer=containerCtrl.rowContainer,colContainer=containerCtrl.colContainer,grid=uiGridCtrl.grid;$scope.grid=uiGridCtrl.grid,$scope.rowContainer=containerCtrl.rowContainer,$scope.colContainer=containerCtrl.colContainer,containerCtrl.viewport=$elm,$elm.on("scroll",scrollHandler);$scope.$parent.bindScrollVertical&&grid.addVerticalScrollSync($scope.$parent.containerId,syncVerticalScroll),$scope.$parent.bindScrollHorizontal&&(grid.addHorizontalScrollSync($scope.$parent.containerId,syncHorizontalScroll),grid.addHorizontalScrollSync($scope.$parent.containerId+"header",syncHorizontalHeader),grid.addHorizontalScrollSync($scope.$parent.containerId+"footer",syncHorizontalFooter))},controller:["$scope",function($scope){this.rowStyle=function(index){var rowContainer=$scope.rowContainer,colContainer=$scope.colContainer,styles={};if(0===index&&0!==rowContainer.currentTopRow){var hiddenRowWidth=rowContainer.currentTopRow*rowContainer.grid.options.rowHeight;styles["margin-top"]=hiddenRowWidth+"px"}return 0!==colContainer.currentFirstColumn&&(colContainer.grid.isRTL()?styles["margin-right"]=colContainer.columnOffset+"px":styles["margin-left"]=colContainer.columnOffset+"px"),styles}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function($scope,$elm,$attr){$scope.$watch($attr.uiGridVisible,function(visible){$elm[visible?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function uiGridDirective($compile,$templateCache,$timeout,$window,gridUtil,uiGridConstants){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){function checkSize(){$elm[0].offsetWidth<=0&&sizeChecks<maxSizeChecks?(setTimeout(checkSize,sizeCheckInterval),sizeChecks++):$timeout(init)}function setup(){angular.element($window).on("resize",gridResize),$elm.on("$destroy",function(){angular.element($window).off("resize",gridResize)}),$scope.$watch(function(){return grid.hasLeftContainer()},function(newValue,oldValue){newValue!==oldValue&&grid.refreshCanvas(!0)}),$scope.$watch(function(){return grid.hasRightContainer()},function(newValue,oldValue){newValue!==oldValue&&grid.refreshCanvas(!0)})}function init(){grid.gridWidth=$scope.gridWidth=gridUtil.elementWidth($elm),grid.canvasWidth=uiGridCtrl.grid.gridWidth,grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm),grid.gridHeight<=grid.options.rowHeight&&grid.options.enableMinHeightCheck&&autoAdjustHeight(),grid.refreshCanvas(!0)}function autoAdjustHeight(){var contentHeight=grid.options.minRowsToShow*grid.options.rowHeight,headerHeight=grid.options.showHeader?grid.options.headerRowHeight:0,footerHeight=grid.calcFooterHeight(),scrollbarHeight=0;grid.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(scrollbarHeight=gridUtil.getScrollbarWidth());var maxNumberOfFilters=0;if(angular.forEach(grid.options.columnDefs,function(col){col.hasOwnProperty("filter")?maxNumberOfFilters<1&&(maxNumberOfFilters=1):col.hasOwnProperty("filters")&&maxNumberOfFilters<col.filters.length&&(maxNumberOfFilters=col.filters.length)}),grid.options.enableFiltering&&!maxNumberOfFilters){var allColumnsHaveFilteringTurnedOff=grid.options.columnDefs.length&&grid.options.columnDefs.every(function(col){return col.enableFiltering===!1});allColumnsHaveFilteringTurnedOff||(maxNumberOfFilters=1)}var filterHeight=maxNumberOfFilters*headerHeight,newHeight=headerHeight+contentHeight+footerHeight+scrollbarHeight+filterHeight;$elm.css("height",newHeight+"px"),grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm)}function gridResize($event){grid.gridWidth=$scope.gridWidth=gridUtil.elementWidth($elm),grid.gridHeight=$scope.gridHeight=gridUtil.elementHeight($elm),grid.refreshCanvas(!0)}var grid=uiGridCtrl.grid;uiGridCtrl.scrollbars=[],grid.element=$elm;var sizeCheckInterval=100,maxSizeChecks=20,sizeChecks=0;setup(),init(),grid.renderingComplete(),checkSize()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function($scope,$elm,$attrs,gridUtil,$q,uiGridConstants,$templateCache,gridClassFactory,$timeout,$parse,$compile){function columnDefsWatchFunction(n,o){n&&n!==o&&(self.grid.options.columnDefs=$scope.uiGrid.columnDefs,self.grid.buildColumns({orderByColumnDefs:!0}).then(function(){self.grid.preCompileCellTemplates(),self.grid.callDataChangeCallbacks(uiGridConstants.dataChange.COLUMN)}))}function dataWatchFunction(newData){var promises=[];if(self.grid.options.fastWatch&&(newData=angular.isString($scope.uiGrid.data)?self.grid.appScope[$scope.uiGrid.data]:$scope.uiGrid.data),mostRecentData=newData,newData){var hasColumns=self.grid.columns.length>(self.grid.rowHeaderColumns?self.grid.rowHeaderColumns.length:0);!hasColumns&&!$attrs.uiGridColumns&&0===self.grid.options.columnDefs.length&&newData.length>0&&self.grid.buildColumnDefsFromData(newData),!hasColumns&&(self.grid.options.columnDefs.length>0||newData.length>0)&&promises.push(self.grid.buildColumns().then(function(){self.grid.preCompileCellTemplates()})),$q.all(promises).then(function(){self.grid.modifyRows(mostRecentData).then(function(){self.grid.redrawInPlace(!0),$scope.$evalAsync(function(){self.grid.refreshCanvas(!0),self.grid.callDataChangeCallbacks(uiGridConstants.dataChange.ROW)})})})}}var self=this;self.grid=gridClassFactory.createGrid($scope.uiGrid),self.grid.appScope=self.grid.appScope||$scope.$parent,$elm.addClass("grid"+self.grid.id),self.grid.rtl="rtl"===gridUtil.getStyles($elm[0]).direction,$scope.grid=self.grid,$attrs.uiGridColumns&&$attrs.$observe("uiGridColumns",function(value){self.grid.options.columnDefs=value,self.grid.buildColumns().then(function(){self.grid.preCompileCellTemplates(),self.grid.refreshCanvas(!0)})});var deregFunctions=[];self.grid.options.fastWatch?(self.uiGrid=$scope.uiGrid,angular.isString($scope.uiGrid.data)?(deregFunctions.push($scope.$parent.$watch($scope.uiGrid.data,dataWatchFunction)),deregFunctions.push($scope.$parent.$watch(function(){return self.grid.appScope[$scope.uiGrid.data]?self.grid.appScope[$scope.uiGrid.data].length:void 0},dataWatchFunction))):(deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.data},dataWatchFunction)),deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.data.length},function(){dataWatchFunction($scope.uiGrid.data)}))),deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.columnDefs},columnDefsWatchFunction)),deregFunctions.push($scope.$parent.$watch(function(){return $scope.uiGrid.columnDefs.length},function(){columnDefsWatchFunction($scope.uiGrid.columnDefs)}))):(angular.isString($scope.uiGrid.data)?deregFunctions.push($scope.$parent.$watchCollection($scope.uiGrid.data,dataWatchFunction)):deregFunctions.push($scope.$parent.$watchCollection(function(){return $scope.uiGrid.data},dataWatchFunction)),deregFunctions.push($scope.$parent.$watchCollection(function(){return $scope.uiGrid.columnDefs},columnDefsWatchFunction)));var mostRecentData,styleWatchDereg=$scope.$watch(function(){return self.grid.styleComputations},function(){self.grid.refreshCanvas(!0)});$scope.$on("$destroy",function(){deregFunctions.forEach(function(deregFn){deregFn()}),styleWatchDereg()}),self.fireEvent=function(eventName,args){"undefined"!=typeof args&&void 0!==args||(args={}),"undefined"!=typeof args.grid&&void 0!==args.grid||(args.grid=self.grid),$scope.$broadcast(eventName,args)},self.innerCompile=function(elm){$compile(elm)($scope)}}]),angular.module("ui.grid").directive("uiGrid",uiGridDirective),uiGridDirective.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(gridUtil){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){function monkeyPatchedGetViewportWidth(){var self=this,viewportWidth=0;self.visibleColumnCache.forEach(function(column){viewportWidth+=column.drawnWidth});var adjustment=self.getViewportAdjustment();return viewportWidth+=adjustment.width}function updateContainerWidth(){if("left"===$scope.side||"right"===$scope.side){for(var cols=grid.renderContainers[$scope.side].visibleColumnCache,width=0,i=0;i<cols.length;i++){var col=cols[i];width+=col.drawnWidth||col.width||0}return width}}function updateContainerDimensions(){var ret="";return"left"!==$scope.side&&"right"!==$scope.side||(myWidth=updateContainerWidth(),$elm.attr("style",null),ret+=".grid"+grid.id+" .ui-grid-pinned-container-"+$scope.side+", .grid"+grid.id+" .ui-grid-pinned-container-"+$scope.side+" .ui-grid-render-container-"+$scope.side+" .ui-grid-viewport { width: "+myWidth+"px; } "),ret}var grid=uiGridCtrl.grid,myWidth=0;$elm.addClass("ui-grid-pinned-container-"+$scope.side),"left"!==$scope.side&&"right"!==$scope.side||(grid.renderContainers[$scope.side].getViewportWidth=monkeyPatchedGetViewportWidth),grid.renderContainers.body.registerViewportAdjuster(function(adjustment){return myWidth=updateContainerWidth(),adjustment.width-=myWidth,adjustment.side=$scope.side,adjustment}),grid.registerStyleComputation({priority:15,func:updateContainerDimensions})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function($q,$compile,$parse,gridUtil,uiGridConstants,GridOptions,GridColumn,GridRow,GridApi,rowSorter,rowSearcher,GridRenderContainer,$timeout,ScrollEvent){function RowHashMap(){}var Grid=function(options){function vertical(scrollEvent){self.isScrollingVertically=!1,self.api.core.raise.scrollEnd(scrollEvent),self.scrollDirection=uiGridConstants.scrollDirection.NONE}function horizontal(scrollEvent){self.isScrollingHorizontally=!1,self.api.core.raise.scrollEnd(scrollEvent),self.scrollDirection=uiGridConstants.scrollDirection.NONE}var self=this;if(void 0===options||"undefined"==typeof options.id||!options.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(options.id))throw new Error("Grid id '"+options.id+'" is invalid. It must follow CSS selector syntax rules.');self.id=options.id,delete options.id,self.options=GridOptions.initialize(options),self.appScope=self.options.appScopeProvider,self.headerHeight=self.options.headerRowHeight,self.footerHeight=self.calcFooterHeight(),self.columnFooterHeight=self.calcColumnFooterHeight(),self.rtl=!1,self.gridHeight=0,self.gridWidth=0,self.columnBuilders=[],self.rowBuilders=[],self.rowsProcessors=[],self.columnsProcessors=[],self.styleComputations=[],self.viewportAdjusters=[],self.rowHeaderColumns=[],self.dataChangeCallbacks={},self.verticalScrollSyncCallBackFns={},self.horizontalScrollSyncCallBackFns={},self.renderContainers={},self.renderContainers.body=new GridRenderContainer("body",self),self.cellValueGetterCache={},self.getRowTemplateFn=null,self.rows=[],self.columns=[],self.isScrollingVertically=!1,self.isScrollingHorizontally=!1,self.scrollDirection=uiGridConstants.scrollDirection.NONE,self.disableScrolling=!1;var debouncedVertical=gridUtil.debounce(vertical,self.options.scrollDebounce),debouncedVerticalMinDelay=gridUtil.debounce(vertical,0),debouncedHorizontal=gridUtil.debounce(horizontal,self.options.scrollDebounce),debouncedHorizontalMinDelay=gridUtil.debounce(horizontal,0);self.flagScrollingVertically=function(scrollEvent){self.isScrollingVertically||self.isScrollingHorizontally||self.api.core.raise.scrollBegin(scrollEvent),self.isScrollingVertically=!0,0!==self.options.scrollDebounce&&scrollEvent.withDelay?debouncedVertical(scrollEvent):debouncedVerticalMinDelay(scrollEvent)},self.flagScrollingHorizontally=function(scrollEvent){self.isScrollingVertically||self.isScrollingHorizontally||self.api.core.raise.scrollBegin(scrollEvent),self.isScrollingHorizontally=!0,0!==self.options.scrollDebounce&&scrollEvent.withDelay?debouncedHorizontal(scrollEvent):debouncedHorizontalMinDelay(scrollEvent)},self.scrollbarHeight=0,self.scrollbarWidth=0,self.options.enableHorizontalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(self.scrollbarHeight=gridUtil.getScrollbarWidth()),self.options.enableVerticalScrollbar===uiGridConstants.scrollbars.ALWAYS&&(self.scrollbarWidth=gridUtil.getScrollbarWidth()),self.api=new GridApi(self),self.api.registerMethod("core","refresh",this.refresh),self.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),self.api.registerMethod("core","refreshRows",this.refreshRows),self.api.registerMethod("core","queueRefresh",this.queueRefresh),self.api.registerMethod("core","handleWindowResize",this.handleWindowResize),self.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),self.api.registerMethod("core","scrollToIfNecessary",function(gridRow,gridCol){return self.scrollToIfNecessary(gridRow,gridCol)}),self.api.registerMethod("core","scrollTo",function(rowEntity,colDef){return self.scrollTo(rowEntity,colDef)}),self.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),self.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),self.api.registerMethod("core","sortHandleNulls",rowSorter.handleNulls),self.api.registerEvent("core","sortChanged"),self.api.registerEvent("core","columnVisibilityChanged"),self.api.registerMethod("core","notifyDataChange",this.notifyDataChange),self.api.registerMethod("core","clearAllFilters",this.clearAllFilters),self.registerDataChangeCallback(self.columnRefreshCallback,[uiGridConstants.dataChange.COLUMN]),self.registerDataChangeCallback(self.processRowsCallback,[uiGridConstants.dataChange.EDIT]),self.registerDataChangeCallback(self.updateFooterHeightCallback,[uiGridConstants.dataChange.OPTIONS]),self.registerStyleComputation({priority:10,func:self.getFooterStyles})};Grid.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var height=0;return this.options.showGridFooter&&(height+=this.options.gridFooterHeight),height+=this.calcColumnFooterHeight()},Grid.prototype.calcColumnFooterHeight=function(){var height=0;return this.options.showColumnFooter&&(height+=this.options.columnFooterHeight),height},Grid.prototype.getFooterStyles=function(){var style=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return style+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},Grid.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},Grid.prototype.isRTL=function(){return this.rtl},Grid.prototype.registerColumnBuilder=function(columnBuilder){this.columnBuilders.push(columnBuilder)},Grid.prototype.buildColumnDefsFromData=function(dataRows){this.options.columnDefs=gridUtil.getColumnsFromData(dataRows,this.options.excludeProperties)},Grid.prototype.registerRowBuilder=function(rowBuilder){this.rowBuilders.push(rowBuilder)},Grid.prototype.registerDataChangeCallback=function(callback,types,_this){var uid=gridUtil.nextUid();types||(types=[uiGridConstants.dataChange.ALL]),Array.isArray(types)||gridUtil.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+types),this.dataChangeCallbacks[uid]={callback:callback,types:types,_this:_this};var self=this,deregisterFunction=function(){delete self.dataChangeCallbacks[uid]};return deregisterFunction},Grid.prototype.callDataChangeCallbacks=function(type,options){angular.forEach(this.dataChangeCallbacks,function(callback,uid){callback.types.indexOf(uiGridConstants.dataChange.ALL)===-1&&callback.types.indexOf(type)===-1&&type!==uiGridConstants.dataChange.ALL||(callback._this?callback.callback.apply(callback._this,this):callback.callback(this))},this)},Grid.prototype.notifyDataChange=function(type){var constants=uiGridConstants.dataChange;type===constants.ALL||type===constants.COLUMN||type===constants.EDIT||type===constants.ROW||type===constants.OPTIONS?this.callDataChangeCallbacks(type):gridUtil.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+type)},Grid.prototype.columnRefreshCallback=function(grid){grid.buildColumns(),grid.queueGridRefresh()},Grid.prototype.processRowsCallback=function(grid){grid.queueGridRefresh()},Grid.prototype.updateFooterHeightCallback=function(grid){grid.footerHeight=grid.calcFooterHeight(),grid.columnFooterHeight=grid.calcColumnFooterHeight()},Grid.prototype.getColumn=function(name){var columns=this.columns.filter(function(column){return column.colDef.name===name});return columns.length>0?columns[0]:null;
},Grid.prototype.getColDef=function(name){var colDefs=this.options.columnDefs.filter(function(colDef){return colDef.name===name});return colDefs.length>0?colDefs[0]:null},Grid.prototype.assignTypes=function(){var self=this;self.options.columnDefs.forEach(function(colDef,index){if(!colDef.type){var col=new GridColumn(colDef,index,self),firstRow=self.rows.length>0?self.rows[0]:null;firstRow?colDef.type=gridUtil.guessType(self.getCellValue(firstRow,col)):colDef.type="string"}})},Grid.prototype.isRowHeaderColumn=function(column){return this.rowHeaderColumns.indexOf(column)!==-1},Grid.prototype.addRowHeaderColumn=function(colDef,order){var self=this;void 0===order&&(order=0);var rowHeaderCol=new GridColumn(colDef,gridUtil.nextUid(),self);rowHeaderCol.isRowHeader=!0,self.isRTL()?(self.createRightContainer(),rowHeaderCol.renderContainer="right"):(self.createLeftContainer(),rowHeaderCol.renderContainer="left"),self.columnBuilders[0](colDef,rowHeaderCol,self.options).then(function(){rowHeaderCol.enableFiltering=!1,rowHeaderCol.enableSorting=!1,rowHeaderCol.enableHiding=!1,rowHeaderCol.headerPriority=order,self.rowHeaderColumns.push(rowHeaderCol),self.rowHeaderColumns=self.rowHeaderColumns.sort(function(a,b){return a.headerPriority-b.headerPriority}),self.buildColumns().then(function(){self.preCompileCellTemplates(),self.queueGridRefresh()})})},Grid.prototype.getOnlyDataColumns=function(){var self=this,cols=[];return self.columns.forEach(function(col){self.rowHeaderColumns.indexOf(col)===-1&&cols.push(col)}),cols},Grid.prototype.buildColumns=function(opts){var options={orderByColumnDefs:!1};angular.extend(options,opts);var i,self=this,builderPromises=[],headerOffset=self.rowHeaderColumns.length;for(i=0;i<self.columns.length;i++)self.getColDef(self.columns[i].name)||(self.columns.splice(i,1),i--);for(var j=self.rowHeaderColumns.length-1;j>=0;j--)self.columns.unshift(self.rowHeaderColumns[j]);if(self.options.columnDefs.forEach(function(colDef,index){self.preprocessColDef(colDef);var col=self.getColumn(colDef.name);col?col.updateColumnDef(colDef,!1):(col=new GridColumn(colDef,gridUtil.nextUid(),self),self.columns.splice(index+headerOffset,0,col)),self.columnBuilders.forEach(function(builder){builderPromises.push(builder.call(self,colDef,col,self.options))})}),options.orderByColumnDefs){var columnCache=self.columns.slice(0),len=Math.min(self.options.columnDefs.length,self.columns.length);for(i=0;i<len;i++)self.columns[i+headerOffset].name!==self.options.columnDefs[i].name?columnCache[i+headerOffset]=self.getColumn(self.options.columnDefs[i].name):columnCache[i+headerOffset]=self.columns[i+headerOffset];self.columns.length=0,Array.prototype.splice.apply(self.columns,[0,0].concat(columnCache))}return $q.all(builderPromises).then(function(){self.rows.length>0&&self.assignTypes()})},Grid.prototype.preCompileCellTemplate=function(col){var self=this,html=col.cellTemplate.replace(uiGridConstants.MODEL_COL_FIELD,self.getQualifiedColField(col));html=html.replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)");var compiledElementFn=$compile(html);col.compiledElementFn=compiledElementFn,col.compiledElementFnDefer&&col.compiledElementFnDefer.resolve(col.compiledElementFn)},Grid.prototype.preCompileCellTemplates=function(){var self=this;self.columns.forEach(function(col){col.cellTemplate?self.preCompileCellTemplate(col):col.cellTemplatePromise&&col.cellTemplatePromise.then(function(){self.preCompileCellTemplate(col)})})},Grid.prototype.getQualifiedColField=function(col){var base="row.entity";return col.field===uiGridConstants.ENTITY_BINDING?base:gridUtil.preEval(base+"."+col.field)},Grid.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new GridRenderContainer("left",this,{disableColumnOffset:!0}))},Grid.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new GridRenderContainer("right",this,{disableColumnOffset:!0}))},Grid.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},Grid.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},Grid.prototype.preprocessColDef=function(colDef){var self=this;if(!colDef.field&&!colDef.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===colDef.name&&void 0!==colDef.field){for(var newName=colDef.field,counter=2;self.getColumn(newName);)newName=colDef.field+counter.toString(),counter++;colDef.name=newName}},Grid.prototype.newInN=function(o,n,oAccessor,nAccessor){for(var self=this,t=[],i=0;i<n.length;i++){for(var nV=nAccessor?n[i][nAccessor]:n[i],found=!1,j=0;j<o.length;j++){var oV=oAccessor?o[j][oAccessor]:o[j];if(self.options.rowEquality(nV,oV)){found=!0;break}}found||t.push(nV)}return t},Grid.prototype.getRow=function(rowEntity,lookInRows){var self=this;lookInRows="undefined"==typeof lookInRows?self.rows:lookInRows;var rows=lookInRows.filter(function(row){return self.options.rowEquality(row.entity,rowEntity)});return rows.length>0?rows[0]:null},Grid.prototype.modifyRows=function(newRawData){var self=this,oldRows=self.rows.slice(0),oldRowHash=self.rowHashMap||self.createRowHashMap();self.rowHashMap=self.createRowHashMap(),self.rows.length=0,newRawData.forEach(function(newEntity,i){var newRow;newRow=self.options.enableRowHashing?oldRowHash.get(newEntity):self.getRow(newEntity,oldRows),newRow||(newRow=self.processRowBuilders(new GridRow(newEntity,i,self))),self.rows.push(newRow),self.rowHashMap.put(newEntity,newRow)}),self.assignTypes();var p1=$q.when(self.processRowsProcessors(self.rows)).then(function(renderableRows){return self.setVisibleRows(renderableRows)}),p2=$q.when(self.processColumnsProcessors(self.columns)).then(function(renderableColumns){return self.setVisibleColumns(renderableColumns)});return $q.all([p1,p2])},Grid.prototype.addRows=function(newRawData){for(var self=this,existingRowCount=self.rows.length,i=0;i<newRawData.length;i++){var newRow=self.processRowBuilders(new GridRow(newRawData[i],i+existingRowCount,self));if(self.options.enableRowHashing){var found=self.rowHashMap.get(newRow.entity);found&&(found.row=newRow)}self.rows.push(newRow)}},Grid.prototype.processRowBuilders=function(gridRow){var self=this;return self.rowBuilders.forEach(function(builder){builder.call(self,gridRow,self.options)}),gridRow},Grid.prototype.registerStyleComputation=function(styleComputationInfo){this.styleComputations.push(styleComputationInfo)},Grid.prototype.registerRowsProcessor=function(processor,priority){if(!angular.isFunction(processor))throw"Attempt to register non-function rows processor: "+processor;this.rowsProcessors.push({processor:processor,priority:priority}),this.rowsProcessors.sort(function(a,b){return a.priority-b.priority})},Grid.prototype.removeRowsProcessor=function(processor){var idx=-1;this.rowsProcessors.forEach(function(rowsProcessor,index){rowsProcessor.processor===processor&&(idx=index)}),idx!==-1&&this.rowsProcessors.splice(idx,1)},Grid.prototype.processRowsProcessors=function(renderableRows){function startProcessor(i,renderedRowsToProcess){var processor=self.rowsProcessors[i].processor;return $q.when(processor.call(self,renderedRowsToProcess,self.columns)).then(function(processedRows){if(!processedRows)throw"Processor at index "+i+" did not return a set of renderable rows";if(!angular.isArray(processedRows))throw"Processor at index "+i+" did not return an array";return i++,i<=self.rowsProcessors.length-1?startProcessor(i,processedRows):void finished.resolve(processedRows)})}var self=this,myRenderableRows=renderableRows.slice(0);if(0===self.rowsProcessors.length)return $q.when(myRenderableRows);var finished=$q.defer();return startProcessor(0,myRenderableRows),finished.promise},Grid.prototype.setVisibleRows=function(rows){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];container.canvasHeightShouldUpdate=!0,"undefined"==typeof container.visibleRowCache?container.visibleRowCache=[]:container.visibleRowCache.length=0}for(var ri=0;ri<rows.length;ri++){var row=rows[ri],targetContainer="undefined"!=typeof row.renderContainer&&row.renderContainer?row.renderContainer:"body";row.visible&&self.renderContainers[targetContainer].visibleRowCache.push(row)}self.api.core.raise.rowsRendered(this.api)},Grid.prototype.registerColumnsProcessor=function(processor,priority){if(!angular.isFunction(processor))throw"Attempt to register non-function rows processor: "+processor;this.columnsProcessors.push({processor:processor,priority:priority}),this.columnsProcessors.sort(function(a,b){return a.priority-b.priority})},Grid.prototype.removeColumnsProcessor=function(processor){var idx=this.columnsProcessors.indexOf(processor);"undefined"!=typeof idx&&void 0!==idx&&this.columnsProcessors.splice(idx,1)},Grid.prototype.processColumnsProcessors=function(renderableColumns){function startProcessor(i,renderedColumnsToProcess){var processor=self.columnsProcessors[i].processor;return $q.when(processor.call(self,renderedColumnsToProcess,self.rows)).then(function(processedColumns){if(!processedColumns)throw"Processor at index "+i+" did not return a set of renderable rows";if(!angular.isArray(processedColumns))throw"Processor at index "+i+" did not return an array";return i++,i<=self.columnsProcessors.length-1?startProcessor(i,myRenderableColumns):void finished.resolve(myRenderableColumns)})}var self=this,myRenderableColumns=renderableColumns.slice(0);if(0===self.columnsProcessors.length)return $q.when(myRenderableColumns);var finished=$q.defer();return startProcessor(0,myRenderableColumns),finished.promise},Grid.prototype.setVisibleColumns=function(columns){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];container.visibleColumnCache.length=0}for(var ci=0;ci<columns.length;ci++){var column=columns[ci];column.visible&&("undefined"!=typeof column.renderContainer&&column.renderContainer?self.renderContainers[column.renderContainer].visibleColumnCache.push(column):self.renderContainers.body.visibleColumnCache.push(column))}},Grid.prototype.handleWindowResize=function($event){var self=this;return self.gridWidth=gridUtil.elementWidth(self.element),self.gridHeight=gridUtil.elementHeight(self.element),self.queueRefresh()},Grid.prototype.queueRefresh=function(){var self=this;return self.refreshCanceller&&$timeout.cancel(self.refreshCanceller),self.refreshCanceller=$timeout(function(){self.refreshCanvas(!0)}),self.refreshCanceller.then(function(){self.refreshCanceller=null}),self.refreshCanceller},Grid.prototype.queueGridRefresh=function(){var self=this;return self.gridRefreshCanceller&&$timeout.cancel(self.gridRefreshCanceller),self.gridRefreshCanceller=$timeout(function(){self.refresh(!0)}),self.gridRefreshCanceller.then(function(){self.gridRefreshCanceller=null}),self.gridRefreshCanceller},Grid.prototype.updateCanvasHeight=function(){var self=this;for(var containerId in self.renderContainers)if(self.renderContainers.hasOwnProperty(containerId)){var container=self.renderContainers[containerId];container.canvasHeightShouldUpdate=!0}},Grid.prototype.buildStyles=function(){var self=this;self.customStyles="",self.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(compInfo){var ret=compInfo.func.call(self);angular.isString(ret)&&(self.customStyles+="\n"+ret)})},Grid.prototype.minColumnsToRender=function(){var self=this,viewport=this.getViewportWidth(),min=0,totalWidth=0;return self.columns.forEach(function(col,i){if(totalWidth<viewport)totalWidth+=col.drawnWidth,min++;else{for(var currWidth=0,j=i;j>=i-min;j--)currWidth+=self.columns[j].drawnWidth;currWidth<viewport&&min++}}),min},Grid.prototype.getBodyHeight=function(){var bodyHeight=this.getViewportHeight();return bodyHeight},Grid.prototype.getViewportHeight=function(){var self=this,viewPortHeight=this.gridHeight-this.headerHeight-this.footerHeight,adjustment=self.getViewportAdjustment();return viewPortHeight+=adjustment.height},Grid.prototype.getViewportWidth=function(){var self=this,viewPortWidth=this.gridWidth,adjustment=self.getViewportAdjustment();return viewPortWidth+=adjustment.width},Grid.prototype.getHeaderViewportWidth=function(){var viewPortWidth=this.getViewportWidth();return viewPortWidth},Grid.prototype.addVerticalScrollSync=function(containerId,callBackFn){this.verticalScrollSyncCallBackFns[containerId]=callBackFn},Grid.prototype.addHorizontalScrollSync=function(containerId,callBackFn){this.horizontalScrollSyncCallBackFns[containerId]=callBackFn},Grid.prototype.scrollContainers=function(sourceContainerId,scrollEvent){if(scrollEvent.y){var verts=["body","left","right"];this.flagScrollingVertically(scrollEvent),"body"===sourceContainerId?verts=["left","right"]:"left"===sourceContainerId?verts=["body","right"]:"right"===sourceContainerId&&(verts=["body","left"]);for(var i=0;i<verts.length;i++){var id=verts[i];this.verticalScrollSyncCallBackFns[id]&&this.verticalScrollSyncCallBackFns[id](scrollEvent)}}if(scrollEvent.x){var horizs=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(scrollEvent),"body"===sourceContainerId&&(horizs=["bodyheader","bodyfooter"]);for(var j=0;j<horizs.length;j++){var idh=horizs[j];this.horizontalScrollSyncCallBackFns[idh]&&this.horizontalScrollSyncCallBackFns[idh](scrollEvent)}}},Grid.prototype.registerViewportAdjuster=function(func){this.viewportAdjusters.push(func)},Grid.prototype.removeViewportAdjuster=function(func){var idx=this.viewportAdjusters.indexOf(func);"undefined"!=typeof idx&&void 0!==idx&&this.viewportAdjusters.splice(idx,1)},Grid.prototype.getViewportAdjustment=function(){var self=this,adjustment={height:0,width:0};return self.viewportAdjusters.forEach(function(func){adjustment=func.call(this,adjustment)}),adjustment},Grid.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},Grid.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},Grid.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},Grid.prototype.searchRows=function(renderableRows){return rowSearcher.search(this,renderableRows,this.columns)},Grid.prototype.sortByColumn=function(renderableRows){return rowSorter.sort(this,renderableRows,this.columns)},Grid.prototype.getCellValue=function(row,col){return"undefined"!=typeof row.entity["$$"+col.uid]?row.entity["$$"+col.uid].rendered:this.options.flatEntityAccess&&"undefined"!=typeof col.field?row.entity[col.field]:(col.cellValueGetterCache||(col.cellValueGetterCache=$parse(row.getEntityQualifiedColField(col))),col.cellValueGetterCache(row))},Grid.prototype.getCellDisplayValue=function(row,col){if(!col.cellDisplayGetterCache){var custom_filter=col.cellFilter?" | "+col.cellFilter:"";"undefined"!=typeof row.entity["$$"+col.uid]?col.cellDisplayGetterCache=$parse(row.entity["$$"+col.uid].rendered+custom_filter):this.options.flatEntityAccess&&"undefined"!=typeof col.field?col.cellDisplayGetterCache=$parse(row.entity[col.field]+custom_filter):col.cellDisplayGetterCache=$parse(row.getEntityQualifiedColField(col)+custom_filter)}return col.cellDisplayGetterCache(row)},Grid.prototype.getNextColumnSortPriority=function(){var self=this,p=0;return self.columns.forEach(function(col){col.sort&&void 0!==col.sort.priority&&col.sort.priority>=p&&(p=col.sort.priority+1)}),p},Grid.prototype.resetColumnSorting=function(excludeCol){var self=this;self.columns.forEach(function(col){col===excludeCol||col.suppressRemoveSort||(col.sort={})})},Grid.prototype.getColumnSorting=function(){var myCols,self=this,sortedCols=[];return myCols=self.columns.slice(0),myCols.sort(rowSorter.prioritySort).forEach(function(col){col.sort&&"undefined"!=typeof col.sort.direction&&col.sort.direction&&(col.sort.direction===uiGridConstants.ASC||col.sort.direction===uiGridConstants.DESC)&&sortedCols.push(col)}),sortedCols},Grid.prototype.sortColumn=function(column,directionOrAdd,add){var self=this,direction=null;if("undefined"==typeof column||!column)throw new Error("No column parameter provided");if("boolean"==typeof directionOrAdd?add=directionOrAdd:direction=directionOrAdd,add?void 0===column.sort.priority&&(column.sort.priority=self.getNextColumnSortPriority()):(self.resetColumnSorting(column),column.sort.priority=void 0,column.sort.priority=self.getNextColumnSortPriority()),direction)column.sort.direction=direction;else{var i=column.sortDirectionCycle.indexOf(column.sort.direction?column.sort.direction:null);i=(i+1)%column.sortDirectionCycle.length,column.colDef&&column.suppressRemoveSort&&!column.sortDirectionCycle[i]&&(i=(i+1)%column.sortDirectionCycle.length),column.sortDirectionCycle[i]?column.sort.direction=column.sortDirectionCycle[i]:removeSortOfColumn(column,self)}return self.api.core.raise.sortChanged(self,self.getColumnSorting()),$q.when(column)};var removeSortOfColumn=function(column,grid){grid.columns.forEach(function(col){col.sort&&void 0!==col.sort.priority&&col.sort.priority>column.sort.priority&&(col.sort.priority-=1)}),column.sort={}};return Grid.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},Grid.prototype.createRowHashMap=function(){var self=this,hashMap=new RowHashMap;return hashMap.grid=self,hashMap},Grid.prototype.refresh=function(rowsAltered){var self=this,p1=self.processRowsProcessors(self.rows).then(function(renderableRows){self.setVisibleRows(renderableRows)}),p2=self.processColumnsProcessors(self.columns).then(function(renderableColumns){self.setVisibleColumns(renderableColumns)});return $q.all([p1,p2]).then(function(){self.redrawInPlace(rowsAltered),self.refreshCanvas(!0)})},Grid.prototype.refreshRows=function(){var self=this;return self.processRowsProcessors(self.rows).then(function(renderableRows){self.setVisibleRows(renderableRows),self.redrawInPlace(),self.refreshCanvas(!0)})},Grid.prototype.refreshCanvas=function(buildStyles){var self=this;buildStyles&&self.buildStyles();var p=$q.defer(),containerHeadersToRecalc=[];for(var containerId in self.renderContainers)if(self.renderContainers.hasOwnProperty(containerId)){var container=self.renderContainers[containerId];if(null===container.canvasWidth||isNaN(container.canvasWidth))continue;(container.header||container.headerCanvas)&&(container.explicitHeaderHeight=container.explicitHeaderHeight||null,container.explicitHeaderCanvasHeight=container.explicitHeaderCanvasHeight||null,containerHeadersToRecalc.push(container))}return containerHeadersToRecalc.length>0?(buildStyles&&self.buildStyles(),$timeout(function(){var i,container,rebuildStyles=!1,maxHeaderHeight=0,maxHeaderCanvasHeight=0,getHeight=function(oldVal,newVal){return oldVal!==newVal&&(rebuildStyles=!0),newVal};for(i=0;i<containerHeadersToRecalc.length;i++)if(container=containerHeadersToRecalc[i],null!==container.canvasWidth&&!isNaN(container.canvasWidth)){if(container.header){var headerHeight=container.headerHeight=getHeight(container.headerHeight,parseInt(gridUtil.outerElementHeight(container.header),10)),topBorder=gridUtil.getBorderSize(container.header,"top"),bottomBorder=gridUtil.getBorderSize(container.header,"bottom"),innerHeaderHeight=parseInt(headerHeight-topBorder-bottomBorder,10);innerHeaderHeight=innerHeaderHeight<0?0:innerHeaderHeight,container.innerHeaderHeight=innerHeaderHeight,!container.explicitHeaderHeight&&innerHeaderHeight>maxHeaderHeight&&(maxHeaderHeight=innerHeaderHeight)}if(container.headerCanvas){var headerCanvasHeight=container.headerCanvasHeight=getHeight(container.headerCanvasHeight,parseInt(gridUtil.outerElementHeight(container.headerCanvas),10));!container.explicitHeaderCanvasHeight&&headerCanvasHeight>maxHeaderCanvasHeight&&(maxHeaderCanvasHeight=headerCanvasHeight)}}for(i=0;i<containerHeadersToRecalc.length;i++)container=containerHeadersToRecalc[i],maxHeaderHeight>0&&"undefined"!=typeof container.headerHeight&&null!==container.headerHeight&&(container.explicitHeaderHeight||container.headerHeight<maxHeaderHeight)&&(container.explicitHeaderHeight=getHeight(container.explicitHeaderHeight,maxHeaderHeight)),maxHeaderCanvasHeight>0&&"undefined"!=typeof container.headerCanvasHeight&&null!==container.headerCanvasHeight&&(container.explicitHeaderCanvasHeight||container.headerCanvasHeight<maxHeaderCanvasHeight)&&(container.explicitHeaderCanvasHeight=getHeight(container.explicitHeaderCanvasHeight,maxHeaderCanvasHeight));buildStyles&&rebuildStyles&&self.buildStyles(),p.resolve()})):$timeout(function(){p.resolve()}),p.promise},Grid.prototype.redrawInPlace=function(rowsAdded){var self=this;for(var i in self.renderContainers){var container=self.renderContainers[i];rowsAdded?(container.adjustRows(container.prevScrollTop,null),container.adjustColumns(container.prevScrollLeft,null)):(container.adjustRows(null,container.prevScrolltopPercentage),container.adjustColumns(null,container.prevScrollleftPercentage))}},Grid.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},Grid.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},Grid.prototype.scrollToIfNecessary=function(gridRow,gridCol){var self=this,scrollEvent=new ScrollEvent(self,"uiGrid.scrollToIfNecessary"),visRowCache=self.renderContainers.body.visibleRowCache,visColCache=self.renderContainers.body.visibleColumnCache,topBound=self.renderContainers.body.prevScrollTop+self.headerHeight;topBound=topBound<0?0:topBound;var leftBound=self.renderContainers.body.prevScrollLeft,bottomBound=self.renderContainers.body.prevScrollTop+self.gridHeight-self.renderContainers.body.headerHeight-self.footerHeight-self.scrollbarWidth,rightBound=self.renderContainers.body.prevScrollLeft+Math.ceil(self.renderContainers.body.getViewportWidth());if(null!==gridRow){var seekRowIndex=visRowCache.indexOf(gridRow),scrollLength=self.renderContainers.body.getCanvasHeight()-self.renderContainers.body.getViewportHeight(),pixelsToSeeRow=seekRowIndex*self.options.rowHeight+self.headerHeight;pixelsToSeeRow=pixelsToSeeRow<0?0:pixelsToSeeRow;var scrollPixels,percentage;pixelsToSeeRow<topBound?(scrollPixels=self.renderContainers.body.prevScrollTop-(topBound-pixelsToSeeRow),percentage=scrollPixels/scrollLength,scrollEvent.y={percentage:percentage}):pixelsToSeeRow>bottomBound&&(scrollPixels=pixelsToSeeRow-bottomBound+self.renderContainers.body.prevScrollTop,percentage=scrollPixels/scrollLength,scrollEvent.y={percentage:percentage})}if(null!==gridCol){for(var seekColumnIndex=visColCache.indexOf(gridCol),horizScrollLength=self.renderContainers.body.getCanvasWidth()-self.renderContainers.body.getViewportWidth(),columnLeftEdge=0,i=0;i<seekColumnIndex;i++){var col=visColCache[i];columnLeftEdge+=col.drawnWidth}columnLeftEdge=columnLeftEdge<0?0:columnLeftEdge;var columnRightEdge=columnLeftEdge+gridCol.drawnWidth;columnRightEdge=columnRightEdge<0?0:columnRightEdge;var horizScrollPixels,horizPercentage;columnLeftEdge<leftBound?(horizScrollPixels=self.renderContainers.body.prevScrollLeft-(leftBound-columnLeftEdge),horizPercentage=horizScrollPixels/horizScrollLength,horizPercentage=horizPercentage>1?1:horizPercentage,scrollEvent.x={percentage:horizPercentage}):columnRightEdge>rightBound&&(horizScrollPixels=columnRightEdge-rightBound+self.renderContainers.body.prevScrollLeft,horizPercentage=horizScrollPixels/horizScrollLength,horizPercentage=horizPercentage>1?1:horizPercentage,scrollEvent.x={percentage:horizPercentage})}var deferred=$q.defer();if(scrollEvent.y||scrollEvent.x){scrollEvent.withDelay=!1,self.scrollContainers("",scrollEvent);var dereg=self.api.core.on.scrollEnd(null,function(){deferred.resolve(scrollEvent),dereg()})}else deferred.resolve();return deferred.promise},Grid.prototype.scrollTo=function(rowEntity,colDef){var gridRow=null,gridCol=null;return null!==rowEntity&&"undefined"!=typeof rowEntity&&(gridRow=this.getRow(rowEntity)),null!==colDef&&"undefined"!=typeof colDef&&(gridCol=this.getColumn(colDef.name?colDef.name:colDef.field)),this.scrollToIfNecessary(gridRow,gridCol)},Grid.prototype.clearAllFilters=function(refreshRows,clearConditions,clearFlags){if(void 0===refreshRows&&(refreshRows=!0),void 0===clearConditions&&(clearConditions=!1),void 0===clearFlags&&(clearFlags=!1),this.columns.forEach(function(column){column.filters.forEach(function(filter){filter.term=void 0,clearConditions&&(filter.condition=void 0),clearFlags&&(filter.flags=void 0)})}),refreshRows)return this.refreshRows()},RowHashMap.prototype={put:function(key,value){this[this.grid.options.rowIdentity(key)]=value},get:function(key){return this[this.grid.options.rowIdentity(key)]},remove:function(key){var value=this[key=this.grid.options.rowIdentity(key)];return delete this[key],value}},Grid}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function($q,$rootScope,gridUtil,uiGridConstants,GridRow,uiGridGridMenuService){function registerEventWithAngular(eventId,handler,grid,_this){return $rootScope.$on(eventId,function(event){var args=Array.prototype.slice.call(arguments);args.splice(0,1),handler.apply(_this?_this:grid.api,args)})}var GridApi=function(grid){this.grid=grid,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",GridRow.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",GridRow.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged"),this.registerEvent("core","gridDimensionChanged")};return GridApi.prototype.suppressEvents=function(listenerFuncs,callBackFn){var self=this,listeners=angular.isArray(listenerFuncs)?listenerFuncs:[listenerFuncs],foundListeners=self.listeners.filter(function(listener){return listeners.some(function(l){return listener.handler===l})});foundListeners.forEach(function(l){l.dereg()}),callBackFn(),foundListeners.forEach(function(l){l.dereg=registerEventWithAngular(l.eventId,l.handler,self.grid,l._this)})},GridApi.prototype.registerEvent=function(featureName,eventName){var self=this;self[featureName]||(self[featureName]={});var feature=self[featureName];feature.on||(feature.on={},feature.raise={});var eventId=self.grid.id+featureName+eventName;feature.raise[eventName]=function(){$rootScope.$emit.apply($rootScope,[eventId].concat(Array.prototype.slice.call(arguments)))},feature.on[eventName]=function(scope,handler,_this){if(null!==scope&&"undefined"==typeof scope.$on)return void gridUtil.logError("asked to listen on "+featureName+".on."+eventName+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var deregAngularOn=registerEventWithAngular(eventId,handler,self.grid,_this),listener={handler:handler,dereg:deregAngularOn,eventId:eventId,scope:scope,_this:_this};self.listeners.push(listener);var removeListener=function(){listener.dereg();var index=self.listeners.indexOf(listener);self.listeners.splice(index,1)};return scope&&scope.$on("$destroy",function(){removeListener()}),removeListener}},GridApi.prototype.registerEventsFromObject=function(eventObjectMap){var self=this,features=[];angular.forEach(eventObjectMap,function(featProp,featPropName){var feature={name:featPropName,events:[]};angular.forEach(featProp,function(prop,propName){feature.events.push(propName)}),features.push(feature)}),features.forEach(function(feature){feature.events.forEach(function(event){self.registerEvent(feature.name,event)})})},GridApi.prototype.registerMethod=function(featureName,methodName,callBackFn,_this){this[featureName]||(this[featureName]={});var feature=this[featureName];feature[methodName]=gridUtil.createBoundedWrapper(_this||this.grid,callBackFn)},GridApi.prototype.registerMethodsFromObject=function(methodMap,_this){var self=this,features=[];angular.forEach(methodMap,function(featProp,featPropName){var feature={name:featPropName,methods:[]};angular.forEach(featProp,function(prop,propName){feature.methods.push({name:propName,fn:prop})}),features.push(feature)}),features.forEach(function(feature){feature.methods.forEach(function(method){self.registerMethod(feature.name,method.name,method.fn,_this)})})},GridApi}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(gridUtil,uiGridConstants,i18nService){function GridColumn(colDef,uid,grid){var self=this;self.grid=grid,self.uid=uid,self.updateColumnDef(colDef,!0),self.aggregationValue=void 0,self.updateAggregationValue=function(){if(!self.aggregationType)return void(self.aggregationValue=void 0);var result=0,visibleRows=self.grid.getVisibleRows(),cellValues=function(){var values=[];return visibleRows.forEach(function(row){var cellValue=self.grid.getCellValue(row,self),cellNumber=Number(cellValue);isNaN(cellNumber)||values.push(cellNumber)}),values};angular.isFunction(self.aggregationType)?self.aggregationValue=self.aggregationType(visibleRows,self):self.aggregationType===uiGridConstants.aggregationTypes.count?self.aggregationValue=self.grid.getVisibleRowCount():self.aggregationType===uiGridConstants.aggregationTypes.sum?(cellValues().forEach(function(value){result+=value}),self.aggregationValue=result):self.aggregationType===uiGridConstants.aggregationTypes.avg?(cellValues().forEach(function(value){result+=value}),result/=cellValues().length,self.aggregationValue=result):self.aggregationType===uiGridConstants.aggregationTypes.min?self.aggregationValue=Math.min.apply(null,cellValues()):self.aggregationType===uiGridConstants.aggregationTypes.max?self.aggregationValue=Math.max.apply(null,cellValues()):self.aggregationValue=" "},this.getAggregationValue=function(){return self.aggregationValue}}return GridColumn.prototype.hideColumn=function(){this.colDef.visible=!1},GridColumn.prototype.setPropertyOrDefault=function(colDef,propName,defaultValue){var self=this;"undefined"!=typeof colDef[propName]&&colDef[propName]?self[propName]=colDef[propName]:"undefined"!=typeof self[propName]?self[propName]=self[propName]:self[propName]=defaultValue?defaultValue:{}},GridColumn.prototype.updateColumnDef=function(colDef,isNew){var self=this;if(self.colDef=colDef,void 0===colDef.name)throw new Error("colDef.name is required for column at index "+self.grid.options.columnDefs.indexOf(colDef));if(self.displayName=void 0===colDef.displayName?gridUtil.readableColumnName(colDef.name):colDef.displayName,!angular.isNumber(self.width)||!self.hasCustomWidth||colDef.allowCustomWidthOverride){var colDefWidth=colDef.width,parseErrorMsg="Cannot parse column width '"+colDefWidth+"' for column named '"+colDef.name+"'";if(self.hasCustomWidth=!1,angular.isString(colDefWidth)||angular.isNumber(colDefWidth))if(angular.isString(colDefWidth))if(gridUtil.endsWith(colDefWidth,"%")){var percentStr=colDefWidth.replace(/%/g,""),percent=parseInt(percentStr,10);if(isNaN(percent))throw new Error(parseErrorMsg);self.width=colDefWidth}else if(colDefWidth.match(/^(\d+)$/))self.width=parseInt(colDefWidth.match(/^(\d+)$/)[1],10);else{if(!colDefWidth.match(/^\*+$/))throw new Error(parseErrorMsg);self.width=colDefWidth}else self.width=colDefWidth;else self.width="*"}["minWidth","maxWidth"].forEach(function(name){var minOrMaxWidth=colDef[name],parseErrorMsg="Cannot parse column "+name+" '"+minOrMaxWidth+"' for column named '"+colDef.name+"'";if(angular.isString(minOrMaxWidth)||angular.isNumber(minOrMaxWidth))if(angular.isString(minOrMaxWidth)){
if(!minOrMaxWidth.match(/^(\d+)$/))throw new Error(parseErrorMsg);self[name]=parseInt(minOrMaxWidth.match(/^(\d+)$/)[1],10)}else self[name]=minOrMaxWidth;else self[name]="minWidth"===name?30:9e3}),self.field=void 0===colDef.field?colDef.name:colDef.field,"string"!=typeof self.field&&gridUtil.logError("Field is not a string, this is likely to break the code, Field is: "+self.field),self.name=colDef.name,self.displayName=void 0===colDef.displayName?gridUtil.readableColumnName(colDef.name):colDef.displayName,self.aggregationType=angular.isDefined(colDef.aggregationType)?colDef.aggregationType:null,self.footerCellTemplate=angular.isDefined(colDef.footerCellTemplate)?colDef.footerCellTemplate:null,"undefined"==typeof colDef.cellTooltip||colDef.cellTooltip===!1?self.cellTooltip=!1:colDef.cellTooltip===!0?self.cellTooltip=function(row,col){return self.grid.getCellValue(row,col)}:"function"==typeof colDef.cellTooltip?self.cellTooltip=colDef.cellTooltip:self.cellTooltip=function(row,col){return col.colDef.cellTooltip},"undefined"==typeof colDef.headerTooltip||colDef.headerTooltip===!1?self.headerTooltip=!1:colDef.headerTooltip===!0?self.headerTooltip=function(col){return col.displayName}:"function"==typeof colDef.headerTooltip?self.headerTooltip=colDef.headerTooltip:self.headerTooltip=function(col){return col.colDef.headerTooltip},self.footerCellClass=colDef.footerCellClass,self.cellClass=colDef.cellClass,self.headerCellClass=colDef.headerCellClass,self.cellFilter=colDef.cellFilter?colDef.cellFilter:"",self.sortCellFiltered=!!colDef.sortCellFiltered,self.filterCellFiltered=!!colDef.filterCellFiltered,self.headerCellFilter=colDef.headerCellFilter?colDef.headerCellFilter:"",self.footerCellFilter=colDef.footerCellFilter?colDef.footerCellFilter:"",self.visible=gridUtil.isNullOrUndefined(colDef.visible)||colDef.visible,self.headerClass=colDef.headerClass,self.enableSorting="undefined"==typeof colDef.enableSorting||colDef.enableSorting,self.sortingAlgorithm=colDef.sortingAlgorithm,self.sortDirectionCycle="undefined"!=typeof colDef.sortDirectionCycle?colDef.sortDirectionCycle:[null,uiGridConstants.ASC,uiGridConstants.DESC],"undefined"==typeof self.suppressRemoveSort&&(self.suppressRemoveSort="undefined"!=typeof colDef.suppressRemoveSort&&colDef.suppressRemoveSort),self.enableFiltering="undefined"==typeof colDef.enableFiltering||colDef.enableFiltering,self.setPropertyOrDefault(colDef,"menuItems",[]),isNew&&self.setPropertyOrDefault(colDef,"sort");var defaultFilters=[];colDef.filter?defaultFilters.push(colDef.filter):colDef.filters?defaultFilters=colDef.filters:defaultFilters.push({}),isNew?(self.setPropertyOrDefault(colDef,"filter"),self.setPropertyOrDefault(colDef,"filters",defaultFilters)):self.filters.length===defaultFilters.length&&self.filters.forEach(function(filter,index){"undefined"!=typeof defaultFilters[index].placeholder&&(filter.placeholder=defaultFilters[index].placeholder),"undefined"!=typeof defaultFilters[index].ariaLabel&&(filter.ariaLabel=defaultFilters[index].ariaLabel),"undefined"!=typeof defaultFilters[index].flags&&(filter.flags=defaultFilters[index].flags),"undefined"!=typeof defaultFilters[index].type&&(filter.type=defaultFilters[index].type),"undefined"!=typeof defaultFilters[index].selectOptions&&(filter.selectOptions=defaultFilters[index].selectOptions)})},GridColumn.prototype.unsort=function(){this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},GridColumn.prototype.getColClass=function(prefixDot){var cls=uiGridConstants.COL_CLASS_PREFIX+this.uid;return prefixDot?"."+cls:cls},GridColumn.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},GridColumn.prototype.isPinnedRight=function(){return"right"===this.renderContainer},GridColumn.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},GridColumn.prototype.getRenderContainer=function(){var self=this,containerId=self.renderContainer;return null!==containerId&&""!==containerId&&void 0!==containerId||(containerId="body"),self.grid.renderContainers[containerId]},GridColumn.prototype.showColumn=function(){this.colDef.visible=!0},GridColumn.prototype.getAggregationText=function(){var self=this;if(self.colDef.aggregationHideLabel)return"";if(self.colDef.aggregationLabel)return self.colDef.aggregationLabel;switch(self.colDef.aggregationType){case uiGridConstants.aggregationTypes.count:return i18nService.getSafeText("aggregation.count");case uiGridConstants.aggregationTypes.sum:return i18nService.getSafeText("aggregation.sum");case uiGridConstants.aggregationTypes.avg:return i18nService.getSafeText("aggregation.avg");case uiGridConstants.aggregationTypes.min:return i18nService.getSafeText("aggregation.min");case uiGridConstants.aggregationTypes.max:return i18nService.getSafeText("aggregation.max");default:return""}},GridColumn.prototype.getCellTemplate=function(){var self=this;return self.cellTemplatePromise},GridColumn.prototype.getCompiledElementFn=function(){var self=this;return self.compiledElementFnDefer.promise},GridColumn}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){return{initialize:function(baseOptions){return baseOptions.onRegisterApi=baseOptions.onRegisterApi||angular.noop(),baseOptions.data=baseOptions.data||[],baseOptions.columnDefs=baseOptions.columnDefs||[],baseOptions.excludeProperties=baseOptions.excludeProperties||["$$hashKey"],baseOptions.enableRowHashing=baseOptions.enableRowHashing!==!1,baseOptions.rowIdentity=baseOptions.rowIdentity||function(row){return gridUtil.hashKey(row)},baseOptions.getRowIdentity=baseOptions.getRowIdentity||function(row){return row.$$hashKey},baseOptions.flatEntityAccess=baseOptions.flatEntityAccess===!0,baseOptions.showHeader="undefined"==typeof baseOptions.showHeader||baseOptions.showHeader,baseOptions.showHeader?baseOptions.headerRowHeight="undefined"!=typeof baseOptions.headerRowHeight?baseOptions.headerRowHeight:30:baseOptions.headerRowHeight=0,baseOptions.rowHeight=baseOptions.rowHeight||30,baseOptions.minRowsToShow="undefined"!=typeof baseOptions.minRowsToShow?baseOptions.minRowsToShow:10,baseOptions.showGridFooter=baseOptions.showGridFooter===!0,baseOptions.showColumnFooter=baseOptions.showColumnFooter===!0,baseOptions.columnFooterHeight="undefined"!=typeof baseOptions.columnFooterHeight?baseOptions.columnFooterHeight:30,baseOptions.gridFooterHeight="undefined"!=typeof baseOptions.gridFooterHeight?baseOptions.gridFooterHeight:30,baseOptions.columnWidth="undefined"!=typeof baseOptions.columnWidth?baseOptions.columnWidth:50,baseOptions.maxVisibleColumnCount="undefined"!=typeof baseOptions.maxVisibleColumnCount?baseOptions.maxVisibleColumnCount:200,baseOptions.virtualizationThreshold="undefined"!=typeof baseOptions.virtualizationThreshold?baseOptions.virtualizationThreshold:20,baseOptions.columnVirtualizationThreshold="undefined"!=typeof baseOptions.columnVirtualizationThreshold?baseOptions.columnVirtualizationThreshold:10,baseOptions.excessRows="undefined"!=typeof baseOptions.excessRows?baseOptions.excessRows:4,baseOptions.scrollThreshold="undefined"!=typeof baseOptions.scrollThreshold?baseOptions.scrollThreshold:4,baseOptions.excessColumns="undefined"!=typeof baseOptions.excessColumns?baseOptions.excessColumns:4,baseOptions.horizontalScrollThreshold="undefined"!=typeof baseOptions.horizontalScrollThreshold?baseOptions.horizontalScrollThreshold:2,baseOptions.aggregationCalcThrottle="undefined"!=typeof baseOptions.aggregationCalcThrottle?baseOptions.aggregationCalcThrottle:500,baseOptions.wheelScrollThrottle="undefined"!=typeof baseOptions.wheelScrollThrottle?baseOptions.wheelScrollThrottle:70,baseOptions.scrollDebounce="undefined"!=typeof baseOptions.scrollDebounce?baseOptions.scrollDebounce:300,baseOptions.enableSorting=baseOptions.enableSorting!==!1,baseOptions.enableFiltering=baseOptions.enableFiltering===!0,baseOptions.enableColumnMenus=baseOptions.enableColumnMenus!==!1,baseOptions.enableVerticalScrollbar="undefined"!=typeof baseOptions.enableVerticalScrollbar?baseOptions.enableVerticalScrollbar:uiGridConstants.scrollbars.ALWAYS,baseOptions.enableHorizontalScrollbar="undefined"!=typeof baseOptions.enableHorizontalScrollbar?baseOptions.enableHorizontalScrollbar:uiGridConstants.scrollbars.ALWAYS,baseOptions.enableMinHeightCheck=baseOptions.enableMinHeightCheck!==!1,baseOptions.minimumColumnSize="undefined"!=typeof baseOptions.minimumColumnSize?baseOptions.minimumColumnSize:10,baseOptions.rowEquality=baseOptions.rowEquality||function(entityA,entityB){return entityA===entityB},baseOptions.headerTemplate=baseOptions.headerTemplate||null,baseOptions.footerTemplate=baseOptions.footerTemplate||"ui-grid/ui-grid-footer",baseOptions.gridFooterTemplate=baseOptions.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",baseOptions.rowTemplate=baseOptions.rowTemplate||"ui-grid/ui-grid-row",baseOptions.appScopeProvider=baseOptions.appScopeProvider||null,baseOptions}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){function GridRenderContainer(name,grid,options){var self=this;self.name=name,self.grid=grid,self.visibleRowCache=[],self.visibleColumnCache=[],self.renderedRows=[],self.renderedColumns=[],self.prevScrollTop=0,self.prevScrolltopPercentage=0,self.prevRowScrollIndex=0,self.prevScrollLeft=0,self.prevScrollleftPercentage=0,self.prevColumnScrollIndex=0,self.columnStyles="",self.viewportAdjusters=[],self.hasHScrollbar=!1,self.hasVScrollbar=!1,self.canvasHeightShouldUpdate=!0,self.$$canvasHeight=0,options&&angular.isObject(options)&&angular.extend(self,options),grid.registerStyleComputation({priority:5,func:function(){return self.updateColumnWidths(),self.columnStyles}})}return GridRenderContainer.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},GridRenderContainer.prototype.containsColumn=function(col){return this.visibleColumnCache.indexOf(col)!==-1},GridRenderContainer.prototype.minRowsToRender=function(){for(var self=this,minRows=0,rowAddedHeight=0,viewPortHeight=self.getViewportHeight(),i=self.visibleRowCache.length-1;rowAddedHeight<viewPortHeight&&i>=0;i--)rowAddedHeight+=self.visibleRowCache[i].height,minRows++;return minRows},GridRenderContainer.prototype.minColumnsToRender=function(){for(var self=this,viewportWidth=this.getViewportWidth(),min=0,totalWidth=0,i=0;i<self.visibleColumnCache.length;i++){var col=self.visibleColumnCache[i];if(totalWidth<viewportWidth)totalWidth+=col.drawnWidth?col.drawnWidth:0,min++;else{for(var currWidth=0,j=i;j>=i-min;j--)currWidth+=self.visibleColumnCache[j].drawnWidth?self.visibleColumnCache[j].drawnWidth:0;currWidth<viewportWidth&&min++}}return min},GridRenderContainer.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},GridRenderContainer.prototype.registerViewportAdjuster=function(func){this.viewportAdjusters.push(func)},GridRenderContainer.prototype.removeViewportAdjuster=function(func){var idx=this.viewportAdjusters.indexOf(func);idx>-1&&this.viewportAdjusters.splice(idx,1)},GridRenderContainer.prototype.getViewportAdjustment=function(){var self=this,adjustment={height:0,width:0};return self.viewportAdjusters.forEach(function(func){adjustment=func.call(this,adjustment)}),adjustment},GridRenderContainer.prototype.getMargin=function(side){var self=this,amount=0;return self.viewportAdjusters.forEach(function(func){var adjustment=func.call(this,{height:0,width:0});adjustment.side&&adjustment.side===side&&(amount+=adjustment.width*-1)}),amount},GridRenderContainer.prototype.getViewportHeight=function(){var self=this,headerHeight=self.headerHeight?self.headerHeight:self.grid.headerHeight,viewPortHeight=self.grid.gridHeight-headerHeight-self.grid.footerHeight,adjustment=self.getViewportAdjustment();return viewPortHeight+=adjustment.height},GridRenderContainer.prototype.getViewportWidth=function(){var self=this,viewportWidth=self.grid.gridWidth,adjustment=self.getViewportAdjustment();return viewportWidth+=adjustment.width},GridRenderContainer.prototype.getHeaderViewportWidth=function(){var viewportWidth=this.getViewportWidth();return viewportWidth},GridRenderContainer.prototype.getCanvasHeight=function(){var self=this;if(!self.canvasHeightShouldUpdate)return self.$$canvasHeight;var oldCanvasHeight=self.$$canvasHeight;return self.$$canvasHeight=0,self.visibleRowCache.forEach(function(row){self.$$canvasHeight+=row.height}),self.canvasHeightShouldUpdate=!1,self.grid.api.core.raise.canvasHeightChanged(oldCanvasHeight,self.$$canvasHeight),self.$$canvasHeight},GridRenderContainer.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight},GridRenderContainer.prototype.getHorizontalScrollLength=function(){return this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth},GridRenderContainer.prototype.getCanvasWidth=function(){var self=this,ret=self.canvasWidth;return ret},GridRenderContainer.prototype.setRenderedRows=function(newRows){this.renderedRows.length=newRows.length;for(var i=0;i<newRows.length;i++)this.renderedRows[i]=newRows[i]},GridRenderContainer.prototype.setRenderedColumns=function(newColumns){this.renderedColumns.length=newColumns.length;for(var i=0;i<newColumns.length;i++)this.renderedColumns[i]=newColumns[i];this.updateColumnOffset()},GridRenderContainer.prototype.updateColumnOffset=function(){for(var hiddenColumnsWidth=0,i=0;i<this.currentFirstColumn;i++)hiddenColumnsWidth+=this.visibleColumnCache[i].drawnWidth;this.columnOffset=hiddenColumnsWidth},GridRenderContainer.prototype.scrollVertical=function(newScrollTop){var vertScrollPercentage=-1;if(newScrollTop!==this.prevScrollTop){var yDiff=newScrollTop-this.prevScrollTop;yDiff>0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.DOWN),yDiff<0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.UP);var vertScrollLength=this.getVerticalScrollLength();return vertScrollPercentage=newScrollTop/vertScrollLength,vertScrollPercentage>1&&(vertScrollPercentage=1),vertScrollPercentage<0&&(vertScrollPercentage=0),this.adjustScrollVertical(newScrollTop,vertScrollPercentage),vertScrollPercentage}},GridRenderContainer.prototype.scrollHorizontal=function(newScrollLeft){var horizScrollPercentage=-1;if(newScrollLeft!==this.prevScrollLeft){var xDiff=newScrollLeft-this.prevScrollLeft;xDiff>0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.RIGHT),xDiff<0&&(this.grid.scrollDirection=uiGridConstants.scrollDirection.LEFT);var horizScrollLength=this.getHorizontalScrollLength();return horizScrollPercentage=0!==horizScrollLength?newScrollLeft/horizScrollLength:0,this.adjustScrollHorizontal(newScrollLeft,horizScrollPercentage),horizScrollPercentage}},GridRenderContainer.prototype.adjustScrollVertical=function(scrollTop,scrollPercentage,force){(this.prevScrollTop!==scrollTop||force)&&("undefined"!=typeof scrollTop&&void 0!==scrollTop&&null!==scrollTop||(scrollTop=(this.getCanvasHeight()-this.getViewportHeight())*scrollPercentage),this.adjustRows(scrollTop,scrollPercentage,!1),this.prevScrollTop=scrollTop,this.prevScrolltopPercentage=scrollPercentage,this.grid.queueRefresh())},GridRenderContainer.prototype.adjustScrollHorizontal=function(scrollLeft,scrollPercentage,force){(this.prevScrollLeft!==scrollLeft||force)&&("undefined"!=typeof scrollLeft&&void 0!==scrollLeft&&null!==scrollLeft||(scrollLeft=(this.getCanvasWidth()-this.getViewportWidth())*scrollPercentage),this.adjustColumns(scrollLeft,scrollPercentage),this.prevScrollLeft=scrollLeft,this.prevScrollleftPercentage=scrollPercentage,this.grid.queueRefresh())},GridRenderContainer.prototype.adjustRows=function(scrollTop,scrollPercentage,postDataLoaded){var self=this,minRows=self.minRowsToRender(),rowCache=self.visibleRowCache,maxRowIndex=rowCache.length-minRows;"undefined"!=typeof scrollPercentage&&null!==scrollPercentage||!scrollTop||(scrollPercentage=scrollTop/self.getVerticalScrollLength());var rowIndex=Math.ceil(Math.min(maxRowIndex,maxRowIndex*scrollPercentage));rowIndex>maxRowIndex&&(rowIndex=maxRowIndex);var newRange=[];if(rowCache.length>self.grid.options.virtualizationThreshold){if("undefined"!=typeof scrollTop&&null!==scrollTop){if(!self.grid.suppressParentScrollDown&&self.prevScrollTop<scrollTop&&rowIndex<self.prevRowScrollIndex+self.grid.options.scrollThreshold&&rowIndex<maxRowIndex)return;if(!self.grid.suppressParentScrollUp&&self.prevScrollTop>scrollTop&&rowIndex>self.prevRowScrollIndex-self.grid.options.scrollThreshold&&rowIndex<maxRowIndex)return}var rangeStart={},rangeEnd={};rangeStart=Math.max(0,rowIndex-self.grid.options.excessRows),rangeEnd=Math.min(rowCache.length,rowIndex+minRows+self.grid.options.excessRows),newRange=[rangeStart,rangeEnd]}else{var maxLen=self.visibleRowCache.length;newRange=[0,Math.max(maxLen,minRows+self.grid.options.excessRows)]}self.updateViewableRowRange(newRange),self.prevRowScrollIndex=rowIndex},GridRenderContainer.prototype.adjustColumns=function(scrollLeft,scrollPercentage){var self=this,minCols=self.minColumnsToRender(),columnCache=self.visibleColumnCache,maxColumnIndex=columnCache.length-minCols;"undefined"!=typeof scrollPercentage&&null!==scrollPercentage||!scrollLeft||(scrollPercentage=scrollLeft/self.getHorizontalScrollLength());var colIndex=Math.ceil(Math.min(maxColumnIndex,maxColumnIndex*scrollPercentage));colIndex>maxColumnIndex&&(colIndex=maxColumnIndex);var newRange=[];if(columnCache.length>self.grid.options.columnVirtualizationThreshold&&self.getCanvasWidth()>self.getViewportWidth()){var rangeStart=Math.max(0,colIndex-self.grid.options.excessColumns),rangeEnd=Math.min(columnCache.length,colIndex+minCols+self.grid.options.excessColumns);newRange=[rangeStart,rangeEnd]}else{var maxLen=self.visibleColumnCache.length;newRange=[0,Math.max(maxLen,minCols+self.grid.options.excessColumns)]}self.updateViewableColumnRange(newRange),self.prevColumnScrollIndex=colIndex},GridRenderContainer.prototype.updateViewableRowRange=function(renderedRange){var rowArr=this.visibleRowCache.slice(renderedRange[0],renderedRange[1]);this.currentTopRow=renderedRange[0],this.setRenderedRows(rowArr)},GridRenderContainer.prototype.updateViewableColumnRange=function(renderedRange){var columnArr=this.visibleColumnCache.slice(renderedRange[0],renderedRange[1]);this.currentFirstColumn=renderedRange[0],this.setRenderedColumns(columnArr)},GridRenderContainer.prototype.headerCellWrapperStyle=function(){var self=this;if(0!==self.currentFirstColumn){var offset=self.columnOffset;return self.grid.isRTL()?{"margin-right":offset+"px"}:{"margin-left":offset+"px"}}return null},GridRenderContainer.prototype.updateColumnWidths=function(){var self=this,asterisksArray=[],asteriskNum=0,usedWidthSum=0,ret="",availableWidth=self.grid.getViewportWidth()-self.grid.scrollbarWidth,columnCache=[];angular.forEach(self.grid.renderContainers,function(container,name){columnCache=columnCache.concat(container.visibleColumnCache)}),columnCache.forEach(function(column,i){var width=0;column.visible&&(angular.isNumber(column.width)?(width=parseInt(column.width,10),usedWidthSum+=width,column.drawnWidth=width):gridUtil.endsWith(column.width,"%")?(width=parseInt(parseInt(column.width.replace(/%/g,""),10)/100*availableWidth),width>column.maxWidth&&(width=column.maxWidth),width<column.minWidth&&(width=column.minWidth),usedWidthSum+=width,column.drawnWidth=width):angular.isString(column.width)&&column.width.indexOf("*")!==-1&&(asteriskNum+=column.width.length,asterisksArray.push(column)))});var remainingWidth=availableWidth-usedWidthSum;if(asterisksArray.length>0){var asteriskVal=remainingWidth/asteriskNum;asterisksArray.forEach(function(column){var width=parseInt(column.width.length*asteriskVal,10);width>column.maxWidth&&(width=column.maxWidth),width<column.minWidth&&(width=column.minWidth),usedWidthSum+=width,column.drawnWidth=width})}for(var processColumnUpwards=function(column){column.drawnWidth<column.maxWidth&&leftoverWidth>0&&(column.drawnWidth++,usedWidthSum++,leftoverWidth--,columnsToChange=!0)},leftoverWidth=availableWidth-usedWidthSum,columnsToChange=!0;leftoverWidth>0&&columnsToChange;)columnsToChange=!1,asterisksArray.forEach(processColumnUpwards);var processColumnDownwards=function(column){column.drawnWidth>column.minWidth&&excessWidth>0&&(column.drawnWidth--,usedWidthSum--,excessWidth--,columnsToChange=!0)},excessWidth=usedWidthSum-availableWidth;for(columnsToChange=!0;excessWidth>0&&columnsToChange;)columnsToChange=!1,asterisksArray.forEach(processColumnDownwards);var canvasWidth=0;self.visibleColumnCache.forEach(function(column){column.visible&&(canvasWidth+=column.drawnWidth)}),columnCache.forEach(function(column){ret+=column.getColClassDefinition()}),self.canvasWidth=canvasWidth,this.columnStyles=ret},GridRenderContainer.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},GridRenderContainer.prototype.getViewportStyle=function(){var self=this,styles={};return self.hasHScrollbar=!1,self.hasVScrollbar=!1,self.grid.disableScrolling?(styles["overflow-x"]="hidden",styles["overflow-y"]="hidden",styles):("body"===self.name?(self.hasHScrollbar=self.grid.options.enableHorizontalScrollbar!==uiGridConstants.scrollbars.NEVER,self.grid.isRTL()?self.grid.hasLeftContainerColumns()||(self.hasVScrollbar=self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER):self.grid.hasRightContainerColumns()||(self.hasVScrollbar=self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER)):"left"===self.name?self.hasVScrollbar=!!self.grid.isRTL()&&self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER:self.hasVScrollbar=!self.grid.isRTL()&&self.grid.options.enableVerticalScrollbar!==uiGridConstants.scrollbars.NEVER,styles["overflow-x"]=self.hasHScrollbar?"scroll":"hidden",styles["overflow-y"]=self.hasVScrollbar?"scroll":"hidden",styles)},GridRenderContainer}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){function GridRow(entity,index,grid){this.grid=grid,this.entity=entity,this.uid=gridUtil.nextUid(),this.visible=!0,this.$$height=grid.options.rowHeight}return Object.defineProperty(GridRow.prototype,"height",{get:function(){return this.$$height},set:function(height){height!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=height)}}),GridRow.prototype.getQualifiedColField=function(col){return"row."+this.getEntityQualifiedColField(col)},GridRow.prototype.getEntityQualifiedColField=function(col){var base="entity";return col.field===uiGridConstants.ENTITY_BINDING?base:gridUtil.preEval(base+"."+col.field)},GridRow.prototype.setRowInvisible=function(row){row&&row.setThisRowInvisible&&row.setThisRowInvisible("user")},GridRow.prototype.clearRowInvisible=function(row){row&&row.clearThisRowInvisible&&row.clearThisRowInvisible("user")},GridRow.prototype.setThisRowInvisible=function(reason,fromRowsProcessor){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[reason]=!0,this.evaluateRowVisibility(fromRowsProcessor)},GridRow.prototype.clearThisRowInvisible=function(reason,fromRowsProcessor){"undefined"!=typeof this.invisibleReason&&delete this.invisibleReason[reason],this.evaluateRowVisibility(fromRowsProcessor)},GridRow.prototype.evaluateRowVisibility=function(fromRowProcessor){var newVisibility=!0;"undefined"!=typeof this.invisibleReason&&angular.forEach(this.invisibleReason,function(value,key){value&&(newVisibility=!1)}),"undefined"!=typeof this.visible&&this.visible===newVisibility||(this.visible=newVisibility,fromRowProcessor||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},GridRow}])}(),function(){"use strict";angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function($parse,$filter){var GridRowColumn=function GridRowColumn(row,col){if(!(this instanceof GridRowColumn))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=row,this.col=col};return GridRowColumn.prototype.getIntersectionValueRaw=function(){var getter=$parse(this.row.getEntityQualifiedColField(this.col)),context=this.row;return getter(context)},GridRowColumn}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(gridUtil){function ScrollEvent(grid,sourceRowContainer,sourceColContainer,source){var self=this;if(!grid)throw new Error("grid argument is required");self.grid=grid,self.source=source,self.withDelay=!0,self.sourceRowContainer=sourceRowContainer,self.sourceColContainer=sourceColContainer,self.newScrollLeft=null,self.newScrollTop=null,self.x=null,self.y=null,self.verticalScrollLength=-9999999,self.horizontalScrollLength=-999999,self.fireThrottledScrollingEvent=gridUtil.throttle(function(sourceContainerId){self.grid.scrollContainers(sourceContainerId,self)},self.grid.options.wheelScrollThrottle,{trailing:!0})}return ScrollEvent.prototype.getNewScrollLeft=function(colContainer,viewport){var self=this;if(!self.newScrollLeft){var scrollXPercentage,scrollWidth=colContainer.getCanvasWidth()-colContainer.getViewportWidth(),oldScrollLeft=gridUtil.normalizeScrollLeft(viewport,self.grid);if("undefined"!=typeof self.x.percentage&&void 0!==self.x.percentage)scrollXPercentage=self.x.percentage;else{if("undefined"==typeof self.x.pixels||void 0===self.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");scrollXPercentage=self.x.percentage=(oldScrollLeft+self.x.pixels)/scrollWidth}return Math.max(0,scrollXPercentage*scrollWidth)}return self.newScrollLeft},ScrollEvent.prototype.getNewScrollTop=function(rowContainer,viewport){var self=this;if(!self.newScrollTop){var scrollYPercentage,scrollLength=rowContainer.getVerticalScrollLength(),oldScrollTop=viewport[0].scrollTop;if("undefined"!=typeof self.y.percentage&&void 0!==self.y.percentage)scrollYPercentage=self.y.percentage;else{if("undefined"==typeof self.y.pixels||void 0===self.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");scrollYPercentage=self.y.percentage=(oldScrollTop+self.y.pixels)/scrollLength}return Math.max(0,scrollYPercentage*scrollLength)}return self.newScrollTop},ScrollEvent.prototype.atTop=function(scrollTop){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===scrollTop},ScrollEvent.prototype.atBottom=function(scrollTop){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&scrollTop>0},ScrollEvent.prototype.atLeft=function(scrollLeft){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===scrollLeft},ScrollEvent.prototype.atRight=function(scrollLeft){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&scrollLeft>0},ScrollEvent.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},ScrollEvent}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(gridUtil,$q,$compile,$templateCache,uiGridConstants,Grid,GridColumn,GridRow){var service={createGrid:function(options){options="undefined"!=typeof options?options:{},options.id=gridUtil.newId();var grid=new Grid(options);if(grid.options.rowTemplate){var rowTemplateFnPromise=$q.defer();grid.getRowTemplateFn=rowTemplateFnPromise.promise,gridUtil.getTemplate(grid.options.rowTemplate).then(function(template){var rowTemplateFn=$compile(template);rowTemplateFnPromise.resolve(rowTemplateFn)},function(res){throw new Error("Couldn't fetch/use row template '"+grid.options.rowTemplate+"'")})}return grid.registerColumnBuilder(service.defaultColumnBuilder),grid.registerRowBuilder(service.rowTemplateAssigner),grid.registerRowsProcessor(function(rows){return rows.forEach(function(row){row.evaluateRowVisibility(!0)},50),rows}),grid.registerColumnsProcessor(function(columns){return columns.forEach(function(column){column.visible=!angular.isDefined(column.colDef.visible)||column.colDef.visible}),columns},50),grid.registerRowsProcessor(grid.searchRows,100),grid.options.externalSort&&angular.isFunction(grid.options.externalSort)?grid.registerRowsProcessor(grid.options.externalSort,200):grid.registerRowsProcessor(grid.sortByColumn,200),grid},defaultColumnBuilder:function(colDef,col,gridOptions){var templateGetPromises=[],processTemplate=function(templateType,providedType,defaultTemplate,filterType,tooltipType){colDef[templateType]?col[providedType]=colDef[templateType]:col[providedType]=defaultTemplate,templateGetPromises.push(gridUtil.getTemplate(col[providedType]).then(function(template){angular.isFunction(template)&&(template=template());var tooltipCall="cellTooltip"===tooltipType?"col.cellTooltip(row,col)":"col.headerTooltip(col)";tooltipType&&col[tooltipType]===!1?template=template.replace(uiGridConstants.TOOLTIP,""):tooltipType&&col[tooltipType]&&(template=template.replace(uiGridConstants.TOOLTIP,'title="{{'+tooltipCall+' CUSTOM_FILTERS }}"')),filterType?col[templateType]=template.replace(uiGridConstants.CUSTOM_FILTERS,function(){return col[filterType]?"|"+col[filterType]:""}):col[templateType]=template},function(res){throw new Error("Couldn't fetch/use colDef."+templateType+" '"+colDef[templateType]+"'")}))};return processTemplate("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),col.cellTemplatePromise=templateGetPromises[0],processTemplate("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),processTemplate("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),processTemplate("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),col.compiledElementFnDefer=$q.defer(),$q.all(templateGetPromises)},rowTemplateAssigner:function(row){var grid=this;if(row.rowTemplate){var perRowTemplateFnPromise=$q.defer();row.getRowTemplateFn=perRowTemplateFnPromise.promise,gridUtil.getTemplate(row.rowTemplate).then(function(template){var rowTemplateFn=$compile(template);perRowTemplateFnPromise.resolve(rowTemplateFn)},function(res){throw new Error("Couldn't fetch/use row template '"+row.rowTemplate+"'")})}else row.rowTemplate=grid.options.rowTemplate,row.getRowTemplateFn=grid.getRowTemplateFn;return row.getRowTemplateFn}};return service}])}(),function(){function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var module=angular.module("ui.grid");module.service("rowSearcher",["gridUtil","uiGridConstants",function(gridUtil,uiGridConstants){var defaultCondition=uiGridConstants.filter.CONTAINS,rowSearcher={};return rowSearcher.getTerm=function(filter){if("undefined"==typeof filter.term)return filter.term;var term=filter.term;return"string"==typeof term&&(term=term.trim()),term},rowSearcher.stripTerm=function(filter){var term=rowSearcher.getTerm(filter);return"string"==typeof term?escapeRegExp(term.replace(/(^\*|\*$)/g,"")):term},rowSearcher.guessCondition=function(filter){if("undefined"==typeof filter.term||!filter.term)return defaultCondition;var term=rowSearcher.getTerm(filter);if(/\*/.test(term)){var regexpFlags="";filter.flags&&filter.flags.caseSensitive||(regexpFlags+="i");var reText=term.replace(/(\\)?\*/g,function($0,$1){return $1?$0:"[\\s\\S]*?"});return new RegExp("^"+reText+"$",regexpFlags)}return defaultCondition},rowSearcher.setupFilters=function(filters){for(var newFilters=[],filtersLength=filters.length,i=0;i<filtersLength;i++){var filter=filters[i];if(filter.noTerm||!gridUtil.isNullOrUndefined(filter.term)){var newFilter={},regexpFlags="";
filter.flags&&filter.flags.caseSensitive||(regexpFlags+="i"),gridUtil.isNullOrUndefined(filter.term)||(newFilter.term=rowSearcher.stripTerm(filter)),newFilter.noTerm=filter.noTerm,filter.condition?newFilter.condition=filter.condition:newFilter.condition=rowSearcher.guessCondition(filter),newFilter.flags=angular.extend({caseSensitive:!1,date:!1},filter.flags),newFilter.condition===uiGridConstants.filter.STARTS_WITH&&(newFilter.startswithRE=new RegExp("^"+newFilter.term,regexpFlags)),newFilter.condition===uiGridConstants.filter.ENDS_WITH&&(newFilter.endswithRE=new RegExp(newFilter.term+"$",regexpFlags)),newFilter.condition===uiGridConstants.filter.CONTAINS&&(newFilter.containsRE=new RegExp(newFilter.term,regexpFlags)),newFilter.condition===uiGridConstants.filter.EXACT&&(newFilter.exactRE=new RegExp("^"+newFilter.term+"$",regexpFlags)),newFilters.push(newFilter)}}return newFilters},rowSearcher.runColumnFilter=function(grid,row,column,filter){var value,conditionType=typeof filter.condition,term=filter.term;if(value=column.filterCellFiltered?grid.getCellDisplayValue(row,column):grid.getCellValue(row,column),filter.condition instanceof RegExp)return filter.condition.test(value);if("function"===conditionType)return filter.condition(term,value,row,column);if(filter.startswithRE)return filter.startswithRE.test(value);if(filter.endswithRE)return filter.endswithRE.test(value);if(filter.containsRE)return filter.containsRE.test(value);if(filter.exactRE)return filter.exactRE.test(value);if(filter.condition===uiGridConstants.filter.NOT_EQUAL){var regex=new RegExp("^"+term+"$");return!regex.exec(value)}if("number"==typeof value&&"string"==typeof term){var tempFloat=parseFloat(term.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(tempFloat)||(term=tempFloat)}return filter.flags.date===!0&&(value=new Date(value),term=new Date(term.replace(/\\/g,""))),filter.condition===uiGridConstants.filter.GREATER_THAN?value>term:filter.condition===uiGridConstants.filter.GREATER_THAN_OR_EQUAL?value>=term:filter.condition===uiGridConstants.filter.LESS_THAN?value<term:filter.condition!==uiGridConstants.filter.LESS_THAN_OR_EQUAL||value<=term},rowSearcher.searchColumn=function(grid,row,column,filters){if(grid.options.useExternalFiltering)return!0;for(var filtersLength=filters.length,i=0;i<filtersLength;i++){var filter=filters[i];if(!gridUtil.isNullOrUndefined(filter.term)&&""!==filter.term||filter.noTerm){var ret=rowSearcher.runColumnFilter(grid,row,column,filter);if(!ret)return!1}}return!0},rowSearcher.search=function(grid,rows,columns){if(rows){if(!grid.options.enableFiltering)return rows;for(var filterData=[],colsLength=columns.length,hasTerm=function(filters){var hasTerm=!1;return filters.forEach(function(filter){(!gridUtil.isNullOrUndefined(filter.term)&&""!==filter.term||filter.noTerm)&&(hasTerm=!0)}),hasTerm},i=0;i<colsLength;i++){var col=columns[i];"undefined"!=typeof col.filters&&hasTerm(col.filters)&&filterData.push({col:col,filters:rowSearcher.setupFilters(col.filters)})}if(filterData.length>0){for(var foreachRow=function(grid,row,col,filters){row.visible&&!rowSearcher.searchColumn(grid,row,col,filters)&&(row.visible=!1)},foreachFilterCol=function(grid,filterData){for(var rowsLength=rows.length,i=0;i<rowsLength;i++)foreachRow(grid,rows[i],filterData.col,filterData.filters)},filterDataLength=filterData.length,j=0;j<filterDataLength;j++)foreachFilterCol(grid,filterData[j]);grid.api.core.raise.rowsVisibleChanged&&grid.api.core.raise.rowsVisibleChanged()}return rows}},rowSearcher}])}(),function(){var module=angular.module("ui.grid");module.service("rowSorter",["$parse","uiGridConstants",function($parse,uiGridConstants){var currencyRegexStr="("+uiGridConstants.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",rowSorter=(new RegExp("^[-+]?"+currencyRegexStr+"[\\d,.]+"+currencyRegexStr+"%?$"),{colSortFnCache:{}});return rowSorter.guessSortFn=function(itemType){switch(itemType){case"number":return rowSorter.sortNumber;case"numberStr":return rowSorter.sortNumberStr;case"boolean":return rowSorter.sortBool;case"string":return rowSorter.sortAlpha;case"date":return rowSorter.sortDate;case"object":return rowSorter.basicSort;default:throw new Error("No sorting function found for type:"+itemType)}},rowSorter.handleNulls=function(a,b){if(!a&&0!==a&&a!==!1||!b&&0!==b&&b!==!1){if(!a&&0!==a&&a!==!1&&!b&&0!==b&&b!==!1)return 0;if(!a&&0!==a&&a!==!1)return 1;if(!b&&0!==b&&b!==!1)return-1}return null},rowSorter.basicSort=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a===b?0:a<b?-1:1},rowSorter.sortNumber=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a-b},rowSorter.sortNumberStr=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var numA,numB,badA=!1,badB=!1;return numA=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(numA)&&(badA=!0),numB=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(numB)&&(badB=!0),badA&&badB?0:badA?1:badB?-1:numA-numB},rowSorter.sortAlpha=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;var strA=a.toString().toLowerCase(),strB=b.toString().toLowerCase();return strA===strB?0:strA.localeCompare(strB)},rowSorter.sortDate=function(a,b){var nulls=rowSorter.handleNulls(a,b);if(null!==nulls)return nulls;a instanceof Date||(a=new Date(a)),b instanceof Date||(b=new Date(b));var timeA=a.getTime(),timeB=b.getTime();return timeA===timeB?0:timeA<timeB?-1:1},rowSorter.sortBool=function(a,b){var nulls=rowSorter.handleNulls(a,b);return null!==nulls?nulls:a&&b?0:a||b?a?1:-1:0},rowSorter.getSortFn=function(grid,col,rows){var sortFn;return rowSorter.colSortFnCache[col.colDef.name]?sortFn=rowSorter.colSortFnCache[col.colDef.name]:void 0!==col.sortingAlgorithm?(sortFn=col.sortingAlgorithm,rowSorter.colSortFnCache[col.colDef.name]=col.sortingAlgorithm):col.sortCellFiltered&&col.cellFilter?(sortFn=rowSorter.sortAlpha,rowSorter.colSortFnCache[col.colDef.name]=sortFn):(sortFn=rowSorter.guessSortFn(col.colDef.type),sortFn?rowSorter.colSortFnCache[col.colDef.name]=sortFn:sortFn=rowSorter.sortAlpha),sortFn},rowSorter.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||void 0===a.sort.priority?-1:b.sort.priority||void 0===b.sort.priority?1:0},rowSorter.sort=function(grid,rows,columns){if(rows){if(grid.options.useExternalSorting)return rows;var sortCols=[];if(columns.forEach(function(col){!col.sort||col.sort.ignoreSort||!col.sort.direction||col.sort.direction!==uiGridConstants.ASC&&col.sort.direction!==uiGridConstants.DESC||sortCols.push(col)}),sortCols=sortCols.sort(rowSorter.prioritySort),0===sortCols.length)return rows;var col,direction,setIndex=function(row,idx){row.entity.$$uiGridIndex=idx};rows.forEach(setIndex);var r=rows.slice(0),rowSortFn=function(rowA,rowB){for(var sortFn,tem=0,idx=0;0===tem&&idx<sortCols.length;){col=sortCols[idx],direction=sortCols[idx].sort.direction,sortFn=rowSorter.getSortFn(grid,col,r);var propA,propB;col.sortCellFiltered?(propA=grid.getCellDisplayValue(rowA,col),propB=grid.getCellDisplayValue(rowB,col)):(propA=grid.getCellValue(rowA,col),propB=grid.getCellValue(rowB,col)),tem=sortFn(propA,propB,rowA,rowB,direction),idx++}return 0===tem?rowA.entity.$$uiGridIndex-rowB.entity.$$uiGridIndex:direction===uiGridConstants.ASC?tem:0-tem},newRows=rows.sort(rowSortFn),clearIndex=function(row,idx){delete row.entity.$$uiGridIndex};return rows.forEach(clearIndex),newRows}},rowSorter}])}(),function(){function getStyles(elem){var e=elem;return"undefined"!=typeof e.length&&e.length&&(e=elem[0]),e.ownerDocument.defaultView.getComputedStyle(e,null)}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0,sides=["Top","Right","Bottom","Left"];i<4;i+=2){var side=sides[i];if("margin"===extra){var marg=parseFloat(styles[extra+side]);isNaN(marg)||(val+=marg)}if(isBorderBox){if("content"===extra){var padd=parseFloat(styles["padding"+side]);isNaN(padd)||(val-=padd)}if("margin"!==extra){var bordermarg=parseFloat(styles["border"+side+"Width"]);isNaN(bordermarg)||(val-=bordermarg)}}else{var nocontentPad=parseFloat(styles["padding"+side]);if(isNaN(nocontentPad)||(val+=nocontentPad),"padding"!==extra){var nocontentnopad=parseFloat(styles["border"+side+"Width"]);isNaN(nocontentnopad)||(val+=nocontentnopad)}}}return val}function getWidthOrHeight(elem,name,extra){var val,valueIsBorderBox=!0,styles=getStyles(elem),isBorderBox="border-box"===styles.boxSizing;if(val<=0||null==val){if(val=styles[name],(val<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&!0,val=parseFloat(val)||0}var ret=val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles);return ret}function getLineHeight(elm){elm=angular.element(elm)[0];var parent=elm.parentElement;return parent||(parent=document.getElementsByTagName("body")[0]),parseInt(getStyles(parent).fontSize)||parseInt(getStyles(elm).fontSize)||16}var bindPolyfill,module=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(bindPolyfill=function(){var slice=Array.prototype.slice;return function(context){var fn=this,args=slice.call(arguments,1);return args.length?function(){return arguments.length?fn.apply(context,args.concat(slice.call(arguments))):fn.apply(context,args)}:function(){return arguments.length?fn.apply(context,arguments):fn.call(context)}}});var rnumnonpx=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),rdisplayswap=/^(block|none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},uid=["0","0","0","0"],uidPrefix="uiGrid-";module.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function($log,$window,$document,$http,$templateCache,$timeout,$interval,$injector,$q,$interpolate,uiGridConstants){function mousewheelHandler(fn,event){var $elm=angular.element(this),delta=0,deltaX=0,deltaY=0,absDelta=0;if(event.originalEvent&&(event=event.originalEvent),"detail"in event&&(deltaY=event.detail*-1),"wheelDelta"in event&&(deltaY=event.wheelDelta),"wheelDeltaY"in event&&(deltaY=event.wheelDeltaY),"wheelDeltaX"in event&&(deltaX=event.wheelDeltaX*-1),"axis"in event&&event.axis===event.HORIZONTAL_AXIS&&(deltaX=deltaY*-1,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in event&&(deltaY=event.deltaY*-1,delta=deltaY),"deltaX"in event&&(deltaX=event.deltaX,0===deltaY&&(delta=deltaX*-1)),0!==deltaY||0!==deltaX){if(1===event.deltaMode){var lineHeight=$elm.data("mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===event.deltaMode){var pageHeight=$elm.data("mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(event,absDelta)&&(lowestDelta/=40)),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta);var newEvent={originalEvent:event,deltaX:deltaX,deltaY:deltaY,deltaFactor:lowestDelta,preventDefault:function(){event.preventDefault()},stopPropagation:function(){event.stopPropagation()}};nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),fn.call($elm[0],newEvent)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return"mousewheel"===orgEvent.type&&absDelta%120===0}var s={augmentWidthOrHeight:augmentWidthOrHeight,getStyles:getStyles,createBoundedWrapper:function(object,method){return function(){return method.apply(object,arguments)}},readableColumnName:function(columnName){return"undefined"==typeof columnName||void 0===columnName||null===columnName?columnName:("string"!=typeof columnName&&(columnName=String(columnName)),columnName.replace(/_+/g," ").replace(/^[A-Z]+$/,function(match){return angular.lowercase(angular.uppercase(match.charAt(0))+match.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(match){return angular.uppercase(match.charAt(0))+match.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(data,excludeProperties){var columnDefs=[];if(!data||"undefined"==typeof data[0]||void 0===data[0])return[];angular.isUndefined(excludeProperties)&&(excludeProperties=[]);var item=data[0];return angular.forEach(item,function(prop,propName){excludeProperties.indexOf(propName)===-1&&columnDefs.push({name:propName})}),columnDefs},newId:function(){var seedId=(new Date).getTime();return function(){return seedId+=1}}(),getTemplate:function(template){if($templateCache.get(template))return s.postProcessTemplate($templateCache.get(template));if(angular.isFunction(template.then))return template.then(s.postProcessTemplate);try{if(angular.element(template).length>0)return $q.when(template).then(s.postProcessTemplate)}catch(err){}return s.logDebug("fetching url",template),$http({method:"GET",url:template}).then(function(result){var templateHtml=result.data.trim();return $templateCache.put(template,templateHtml),templateHtml},function(err){throw new Error("Could not get template "+template+": "+err)}).then(s.postProcessTemplate)},postProcessTemplate:function(template){var startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol();return"{{"===startSym&&"}}"===endSym||(template=template.replace(/\{\{/g,startSym),template=template.replace(/\}\}/g,endSym)),$q.when(template)},guessType:function(item){var itemType=typeof item;switch(itemType){case"number":case"boolean":case"string":return itemType;default:return angular.isDate(item)?"date":"object"}},elementWidth:function(elem){},elementHeight:function(elem){},getScrollbarWidth:function(){var outer=document.createElement("div");outer.style.visibility="hidden",outer.style.width="100px",outer.style.msOverflowStyle="scrollbar",document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%",outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;return outer.parentNode.removeChild(outer),widthNoScroll-widthWithScroll},swap:function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret},fakeElement:function(elem,options,callback,args){var ret,name,newElement=angular.element(elem).clone()[0];for(name in options)newElement.style[name]=options[name];return angular.element(document.body).append(newElement),ret=callback.call(newElement,newElement),angular.element(newElement).remove(),ret},normalizeWheelEvent:function(event){var lowestDelta,lowestDeltaXY,fn,orgEvent=event||window.event,delta=([].slice.call(arguments,1),0),deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0;return orgEvent.originalEvent&&(orgEvent=orgEvent.originalEvent),orgEvent.wheelDelta&&(delta=orgEvent.wheelDelta),orgEvent.detail&&(delta=orgEvent.detail*-1),deltaY=delta,void 0!==orgEvent.axis&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaY=0,deltaX=delta*-1),orgEvent.deltaY&&(deltaY=orgEvent.deltaY*-1,delta=deltaY),orgEvent.deltaX&&(deltaX=orgEvent.deltaX,delta=deltaX*-1),void 0!==orgEvent.wheelDeltaY&&(deltaY=orgEvent.wheelDeltaY),void 0!==orgEvent.wheelDeltaX&&(deltaX=orgEvent.wheelDeltaX),absDelta=Math.abs(delta),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta),absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDeltaXY||absDeltaXY<lowestDeltaXY)&&(lowestDeltaXY=absDeltaXY),fn=delta>0?"floor":"ceil",delta=Math[fn](delta/lowestDelta),deltaX=Math[fn](deltaX/lowestDeltaXY),deltaY=Math[fn](deltaY/lowestDeltaXY),{delta:delta,deltaX:deltaX,deltaY:deltaY}},isTouchEnabled:function(){var bool;return("ontouchstart"in $window||$window.DocumentTouch&&$document instanceof DocumentTouch)&&(bool=!0),bool},isNullOrUndefined:function(obj){return void 0===obj||null===obj},endsWith:function(str,suffix){return!(!str||!suffix||"string"!=typeof str)&&str.indexOf(suffix,str.length-suffix.length)!==-1},arrayContainsObjectWithProperty:function(array,propertyName,propertyValue){var found=!1;return angular.forEach(array,function(object){object[propertyName]===propertyValue&&(found=!0)}),found},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(element){var $animate;try{$animate=$injector.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?$animate.enabled(element,!1):$animate.enabled(!1,element)}catch(e){}},enableAnimations:function(element){var $animate;try{return $animate=$injector.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?$animate.enabled(element,!0):$animate.enabled(!0,element),$animate}catch(e){}},nextUid:function(){for(var digit,index=uid.length;index;){if(index--,digit=uid[index].charCodeAt(0),57===digit)return uid[index]="A",uidPrefix+uid.join("");if(90!==digit)return uid[index]=String.fromCharCode(digit+1),uidPrefix+uid.join("");uid[index]="0"}return uid.unshift("0"),uidPrefix+uid.join("")},hashKey:function(obj){var key,objType=typeof obj;return"object"===objType&&null!==obj?"function"==typeof(key=obj.$$hashKey)?key=obj.$$hashKey():"undefined"!=typeof obj.$$hashKey&&obj.$$hashKey?key=obj.$$hashKey:void 0===key&&(key=obj.$$hashKey=s.nextUid()):key=obj,objType+":"+key},resetUids:function(){uid=["0","0","0"]},logError:function(logMessage){uiGridConstants.LOG_ERROR_MESSAGES&&$log.error(logMessage)},logWarn:function(logMessage){uiGridConstants.LOG_WARN_MESSAGES&&$log.warn(logMessage)},logDebug:function(){uiGridConstants.LOG_DEBUG_MESSAGES&&$log.debug.apply($log,arguments)}};s.focus={queue:[],byId:function(id,Grid){this._purgeQueue();var promise=$timeout(function(){var elementID=(Grid&&Grid.id?Grid.id+"-":"")+id,element=$window.document.getElementById(elementID);element?element.focus():s.logWarn("[focus.byId] Element id "+elementID+" was not found.")});return this.queue.push(promise),promise},byElement:function(element){if(!angular.isElement(element))return s.logWarn("Trying to focus on an element that isn't an element."),$q.reject("not-element");element=angular.element(element),this._purgeQueue();var promise=$timeout(function(){element&&element[0].focus()});return this.queue.push(promise),promise},bySelector:function(parentElement,querySelector,aSync){var self=this;if(!angular.isElement(parentElement))throw new Error("The parent element is not an element.");parentElement=angular.element(parentElement);var focusBySelector=function(){var element=parentElement[0].querySelector(querySelector);return self.byElement(element)};if(this._purgeQueue(),aSync){var promise=$timeout(focusBySelector);return this.queue.push($timeout(focusBySelector)),promise}return focusBySelector()},_purgeQueue:function(){this.queue.forEach(function(element){$timeout.cancel(element)}),this.queue=[]}},["width","height"].forEach(function(name){var capsName=angular.uppercase(name.charAt(0))+name.substr(1);s["element"+capsName]=function(elem,extra){var e=elem;if(e&&"undefined"!=typeof e.length&&e.length&&(e=elem[0]),e){var styles=getStyles(e);return 0===e.offsetWidth&&rdisplayswap.test(styles.display)?s.swap(e,cssShow,function(){return getWidthOrHeight(e,name,extra)}):getWidthOrHeight(e,name,extra)}return null},s["outerElement"+capsName]=function(elem,margin){return elem?s["element"+capsName].call(this,elem,margin?"margin":"border"):null}}),s.closestElm=function(el,selector){"undefined"!=typeof el.length&&el.length&&(el=el[0]);var matchesFn;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(fn){return"function"==typeof document.body[fn]&&(matchesFn=fn,!0)});for(var parent;null!==el;){if(parent=el.parentElement,null!==parent&&parent[matchesFn](selector))return parent;el=parent}return null},s.type=function(obj){var text=Function.prototype.toString.call(obj.constructor);return text.match(/function (.*?)\(/)[1]},s.getBorderSize=function(elem,borderType){"undefined"!=typeof elem.length&&elem.length&&(elem=elem[0]);var styles=getStyles(elem);borderType=borderType?"border"+borderType.charAt(0).toUpperCase()+borderType.slice(1):"border",borderType+="Width";var val=parseInt(styles[borderType],10);return isNaN(val)?0:val},s.detectBrowser=function(){var userAgent=$window.navigator.userAgent,browsers={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var key in browsers)if(browsers[key].test(userAgent))return key;return"unknown"},s.rtlScrollType=function rtlScrollType(){if(rtlScrollType.type)return rtlScrollType.type;var definer=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],type="reverse";return document.body.appendChild(definer),definer.scrollLeft>0?type="default":(definer.scrollLeft=1,0===definer.scrollLeft&&(type="negative")),angular.element(definer).remove(),rtlScrollType.type=type,type},s.normalizeScrollLeft=function(element,grid){"undefined"!=typeof element.length&&element.length&&(element=element[0]);var scrollLeft=element.scrollLeft;if(grid.isRTL())switch(s.rtlScrollType()){case"default":return element.scrollWidth-scrollLeft-element.clientWidth;case"negative":return Math.abs(scrollLeft);case"reverse":return scrollLeft}return scrollLeft},s.denormalizeScrollLeft=function(element,scrollLeft,grid){if("undefined"!=typeof element.length&&element.length&&(element=element[0]),grid.isRTL())switch(s.rtlScrollType()){case"default":var maxScrollLeft=element.scrollWidth-element.clientWidth;return maxScrollLeft-scrollLeft;case"negative":return scrollLeft*-1;case"reverse":return scrollLeft}return scrollLeft},s.preEval=function(path){var m=uiGridConstants.BRACKET_REGEXP.exec(path);if(m)return(m[1]?s.preEval(m[1]):m[1])+m[2]+(m[3]?s.preEval(m[3]):m[3]);path=path.replace(uiGridConstants.APOS_REGEXP,"\\'");var parts=path.split(uiGridConstants.DOT_REGEXP),preparsed=[parts.shift()];return angular.forEach(parts,function(part){preparsed.push(part.replace(uiGridConstants.FUNC_REGEXP,"']$1"))}),preparsed.join("['")},s.debounce=function(func,wait,immediate){function debounce(){context=this,args=arguments;var later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout;return timeout&&$timeout.cancel(timeout),timeout=$timeout(later,wait,!1),callNow&&(result=func.apply(context,args)),result}var timeout,args,context,result;return debounce.cancel=function(){$timeout.cancel(timeout),timeout=null},debounce},s.throttle=function(func,wait,options){function runFunc(endDate){lastCall=+new Date,func.apply(context,args),$interval(function(){queued=null},0,1,!1)}options=options||{};var context,args,lastCall=0,queued=null;return function(){if(context=this,args=arguments,null===queued){var sinceLast=+new Date-lastCall;sinceLast>wait?runFunc():options.trailing&&(queued=$interval(runFunc,wait-sinceLast,1,!1))}}},s.on={},s.off={},s._events={},s.addOff=function(eventName){s.off[eventName]=function(elm,fn){var idx=s._events[eventName].indexOf(fn);idx>0&&s._events[eventName].removeAt(idx)}};var nullLowestDeltaTimeout,lowestDelta,mouseWheeltoBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return s.on.mousewheel=function(elm,fn){if(elm&&fn){var $elm=angular.element(elm);$elm.data("mousewheel-line-height",getLineHeight($elm)),$elm.data("mousewheel-page-height",s.elementHeight($elm)),$elm.data("mousewheel-callbacks")||$elm.data("mousewheel-callbacks",{});var cbs=$elm.data("mousewheel-callbacks");cbs[fn]=(Function.prototype.bind||bindPolyfill).call(mousewheelHandler,$elm[0],fn);for(var i=mouseWheeltoBind.length;i;)$elm.on(mouseWheeltoBind[--i],cbs[fn])}},s.off.mousewheel=function(elm,fn){var $elm=angular.element(elm),cbs=$elm.data("mousewheel-callbacks"),handler=cbs[fn];if(handler)for(var i=mouseWheeltoBind.length;i;)$elm.off(mouseWheeltoBind[--i],handler);delete cbs[fn],0===Object.keys(cbs).length&&($elm.removeData("mousewheel-line-height"),$elm.removeData("mousewheel-page-height"),$elm.removeData("mousewheel-callbacks"))},s}]),module.filter("px",function(){return function(str){return str.match(/^[\d\.]+$/)?str+"px":str}})}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){var lang={aggregate:{label:"položky"},groupPanel:{description:"Přesuňte záhlaví zde pro vytvoření skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji položky:",selectedItems:"Vybrané položky:",totalItems:"Celkem položek:",size:"Velikost strany:",first:"První strana",next:"Další strana",previous:"Předchozí strana",last:"Poslední strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seřadit od A-Z",descending:"Seřadit od Z-A",remove:"Odebrat seřazení"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem řádků: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat všechna data do csv",exporterVisibleAsCsv:"Exportovat viditelná data do csv",exporterSelectedAsCsv:"Exportovat vybraná data do csv",exporterAllAsPdf:"Exportovat všechna data do pdf",exporterVisibleAsPdf:"Exportovat viditelná data do pdf",exporterSelectedAsPdf:"Exportovat vybraná data do pdf",clearAllFilters:"Odstranit všechny filtry"},importer:{noHeaders:"Názvy sloupců se nepodařilo získat, obsahuje soubor záhlaví?",noObjects:"Data se nepodařilo zpracovat, obsahuje soubor řádky mimo záhlaví?",invalidCsv:"Soubor nelze zpracovat, jedná se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musí obsahovat json. Ukončuji.."},pagination:{sizes:"položek na stránku",totalItems:"položek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupení",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return $delegate.add("cs",lang),$delegate.add("cz",lang),$delegate.add("cs-cz",lang),$delegate.add("cs-CZ",lang),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rækker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter markerede data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter markerede data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Gå til første",pageBack:"Gå tilbage",pageSelected:"Valgte side",pageForward:"Gå frem",pageToLast:"Gå til sidste"},sizes:"genstande per side",totalItems:"genstande",through:"gennem",of:"af"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter für Spalte",removeFilter:"Filter löschen",columnMenuButtonLabel:"Spaltenmenü"},priority:"Priorität:",filterLabel:"Filter für Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},columnMenu:{close:"Schließen"},gridMenu:{aria:{buttonLabel:"Tabellenmenü"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als PDF exportieren",clearAllFilters:"Alle Filter zurücksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurück",pageSelected:"Ausgwählte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"Einträge pro Seite",totalItems:"Einträge",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",
pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por página",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Máx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fa",{aggregate:{label:"قلم"},groupPanel:{description:"عنوان یک ستون را بگیر و به گروهی از آن ستون رها کن."},search:{placeholder:"جستجو...",showingItems:"نمایش اقلام:",selectedItems:"قلم‌های انتخاب شده:",totalItems:"مجموع اقلام:",size:"اندازه‌ی صفحه:",first:"اولین صفحه",next:"صفحه‌ی‌بعدی",previous:"صفحه‌ی‌ قبلی",last:"آخرین صفحه"},menu:{text:"ستون‌های انتخابی:"},sort:{ascending:"ترتیب صعودی",descending:"ترتیب نزولی",remove:"حذف مرتب کردن"},column:{hide:"پنهان‌کردن ستون"},aggregation:{count:"تعداد: ",sum:"مجموع: ",avg:"میانگین: ",min:"کمترین: ",max:"بیشترین: "},pinning:{pinLeft:"پین کردن سمت چپ",pinRight:"پین کردن سمت راست",unpin:"حذف پین"},gridMenu:{columns:"ستون‌ها:",importerTitle:"وارد کردن فایل",exporterAllAsCsv:"خروجی تمام داده‌ها در فایل csv",exporterVisibleAsCsv:"خروجی داده‌های قابل مشاهده در فایل csv",exporterSelectedAsCsv:"خروجی داده‌های انتخاب‌شده در فایل csv",exporterAllAsPdf:"خروجی تمام داده‌ها در فایل pdf",exporterVisibleAsPdf:"خروجی داده‌های قابل مشاهده در فایل pdf",exporterSelectedAsPdf:"خروجی داده‌های انتخاب‌شده در فایل pdf",clearAllFilters:"پاک کردن تمام فیلتر"},importer:{noHeaders:"نام ستون قابل استخراج نیست. آیا فایل عنوان دارد؟",noObjects:"اشیا قابل استخراج نیستند. آیا به جز عنوان‌ها در فایل داده وجود دارد؟",invalidCsv:"فایل قابل پردازش نیست. آیا فرمت  csv  معتبر است؟",invalidJson:"فایل قابل پردازش نیست. آیا فرمت json   معتبر است؟",jsonNotArray:"فایل json وارد شده باید حاوی آرایه باشد. عملیات ساقط شد."},pagination:{sizes:"اقلام در هر صفحه",totalItems:"اقلام",of:"از"},grouping:{group:"گروه‌بندی",ungroup:"حذف گروه‌بندی",aggregate_count:"Agg: تعداد",aggregate_sum:"Agg: جمع",aggregate_max:"Agg: بیشینه",aggregate_min:"Agg: کمینه",aggregate_avg:"Agg: میانگین",aggregate_remove:"Agg: حذف"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("fr",{headerCell:{aria:{defaultFilterLabel:"Filtre de la colonne",removeFilter:"Supprimer le filtre",columnMenuButtonLabel:"Menu de la colonne"},priority:"Priorité:",filterLabel:"Filtre de la colonne: "},aggregate:{label:"éléments"},groupPanel:{description:"Faites glisser une en-tête de colonne ici pour créer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des éléments :",selectedItems:"Éléments sélectionnés :",totalItems:"Nombre total d'éléments:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",none:"Aucun tri",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},columnMenu:{close:"Fermer"},gridMenu:{aria:{buttonLabel:"Menu du tableau"},columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il une en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau, abandon."},pagination:{aria:{pageToFirst:"Aller à la première page",pageBack:"Page précédente",pageSelected:"Page sélectionnée",pageForward:"Page suivante",pageToLast:"Aller à la dernière page"},sizes:"éléments par page",totalItems:"éléments",through:"à",of:"sur"},grouping:{group:"Grouper",ungroup:"Dégrouper",aggregate_count:"Agg: Compter",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"},validate:{error:"Erreur:",minLength:"La valeur doit être supérieure ou égale à THRESHOLD caractères.",maxLength:"La valeur doit être inférieure ou égale à THRESHOLD caractères.",required:"Une valeur est nécéssaire."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF",clearAllFilters:"Մաքրել բոլոր ֆիլտրերը"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},pagination:{aria:{pageToFirst:"Prima",pageBack:"Indietro",pageSelected:"Pagina selezionata",pageForward:"Avanti",pageToLast:"Ultima"},sizes:"elementi per pagina",totalItems:"elementi",through:"a",of:"di"},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ja",{aggregate:{label:"項目"},groupPanel:{description:"ここに列ヘッダをドラッグアンドドロップして、その列でグループ化します。"},search:{placeholder:"検索...",showingItems:"表示中の項目:",selectedItems:"選択した項目:",totalItems:"項目の総数:",size:"ページサイズ:",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"前のページ"},menu:{text:"列の選択:"},sort:{ascending:"昇順に並べ替え",descending:"降順に並べ替え",remove:"並べ替えの解除"},column:{hide:"列の非表示"},aggregation:{count:"合計行数: ",sum:"合計: ",avg:"平均: ",min:"最小: ",max:"最大: "},pinning:{pinLeft:"左に固定",pinRight:"右に固定",unpin:"固定解除"},gridMenu:{columns:"列:",importerTitle:"ファイルのインポート",exporterAllAsCsv:"すべてのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"表示中のデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択したデータをCSV形式でエクスポート",exporterAllAsPdf:"すべてのデータをPDF形式でエクスポート",exporterVisibleAsPdf:"表示中のデータをPDF形式でエクスポート",exporterSelectedAsPdf:"選択したデータをPDF形式でエクスポート",clearAllFilters:"すべてのフィルタを清掃してください"},importer:{noHeaders:"列名を取得できません。ファイルにヘッダが含まれていることを確認してください。",noObjects:"オブジェクトを取得できません。ファイルにヘッダ以外のデータが含まれていることを確認してください。",invalidCsv:"ファイルを処理できません。ファイルが有効なCSV形式であることを確認してください。",invalidJson:"ファイルを処理できません。ファイルが有効なJSON形式であることを確認してください。",jsonNotArray:"インポートしたJSONファイルには配列が含まれている必要があります。処理を中止します。"},pagination:{aria:{pageToFirst:"最初のページ",pageBack:"前のページ",pageSelected:"現在のページ",pageForward:"次のページ",pageToLast:"最後のページ"},sizes:"項目/ページ",totalItems:"項目",through:"から",of:"項目/全"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기",clearAllFilters:"모든 필터를 청소"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("no",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter utvalgte data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter utvalgte data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filter dla kolumny",removeFilter:"Usuń filter",columnMenuButtonLabel:"Menu kolumny"},priority:"Prioritet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"Przeciągnij nagłówek kolumny tutaj, aby pogrupować według niej."},search:{placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"Następna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnąco",descending:"Sortuj malejąco",none:"Brak sortowania",remove:"Wyłącz sortowanie"},column:{hide:"Ukryj kolumne"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"Średnia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Menu Grida"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",clearAllFilters:"Wyczyść filtry"},importer:{noHeaders:"Nie udało się wczytać nazw kolumn. Czy plik posiada nagłówek?",noObjects:"Nie udalo się wczytać pozycji. Czy plik zawiera dane??",invalidCsv:"Nie udało się przetworzyć pliku, jest to prawidlowy plik CSV??",invalidJson:"Nie udało się przetworzyć pliku, jest to prawidlowy plik Json?",jsonNotArray:"Importowany plik json musi zawierać tablicę, importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"Następna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stronę",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: Średnia",aggregate_remove:"Zbiorczo: Usuń"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O ficheiro tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no ficheiro, além dos cabeçalhos?",invalidCsv:"Ficheiro não pode ser processado. É um CSV válido?",invalidJson:"Ficheiro não pode ser processado. É um Json válido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Próxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),$delegate}])}])}(),function(){
angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ru",{headerCell:{aria:{defaultFilterLabel:"Фильтр столбца",removeFilter:"Удалить фильтр",columnMenuButtonLabel:"Меню столбца"},priority:"Приоритет:",filterLabel:"Фильтр столбца: "},aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",none:"Без сортировки",remove:"Убрать сортировку"},column:{hide:"Спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},pinning:{pinLeft:"Закрепить слева",pinRight:"Закрепить справа",unpin:"Открепить"},columnMenu:{close:"Закрыть"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Столбцы:",importerTitle:"Импортировать файл",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF",clearAllFilters:"Очистите все фильтры"},importer:{noHeaders:"Не удалось получить названия столбцов, есть ли в файле заголовок?",noObjects:"Не удалось получить данные, есть ли в файле строки кроме заголовка?",invalidCsv:"Не удалось обработать файл, это правильный CSV-файл?",invalidJson:"Не удалось обработать файл, это правильный JSON?",jsonNotArray:"Импортируемый JSON-файл должен содержать массив, операция отменена."},pagination:{aria:{pageToFirst:"Первая страница",pageBack:"Предыдущая страница",pageSelected:"Выбранная страница",pageForward:"Следующая страница",pageToLast:"Последняя страница"},sizes:"строк на страницу",totalItems:"строк",through:"по",of:"из"},grouping:{group:"Группировать",ungroup:"Разгруппировать",aggregate_count:"Группировать: Count",aggregate_sum:"Для группы: Сумма",aggregate_max:"Для группы: Максимум",aggregate_min:"Для группы: Минимум",aggregate_avg:"Для группы: Среднее",aggregate_remove:"Для группы: Пусто"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengör alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ta",{aggregate:{label:"உருப்படிகள்"},groupPanel:{description:"ஒரு பத்தியை குழுவாக அமைக்க அப்பத்தியின் தலைப்பை இங்கே  இழுத்து வரவும் "},search:{placeholder:"தேடல் ...",showingItems:"உருப்படிகளை காண்பித்தல்:",selectedItems:"தேர்ந்தெடுக்கப்பட்ட  உருப்படிகள்:",totalItems:"மொத்த உருப்படிகள்:",size:"பக்க அளவு: ",first:"முதல் பக்கம்",next:"அடுத்த பக்கம்",previous:"முந்தைய பக்கம் ",last:"இறுதி பக்கம்"},menu:{text:"பத்திகளை தேர்ந்தெடு:"},sort:{ascending:"மேலிருந்து கீழாக",descending:"கீழிருந்து மேலாக",remove:"வரிசையை நீக்கு"},column:{hide:"பத்தியை மறைத்து வை "},aggregation:{count:"மொத்த வரிகள்:",sum:"மொத்தம்: ",avg:"சராசரி: ",min:"குறைந்தபட்ச: ",max:"அதிகபட்ச: "},pinning:{pinLeft:"இடதுபுறமாக தைக்க ",pinRight:"வலதுபுறமாக தைக்க",unpin:"பிரி"},gridMenu:{columns:"பத்திகள்:",importerTitle:"கோப்பு : படித்தல்",exporterAllAsCsv:"எல்லா தரவுகளையும் கோப்பாக்கு: csv",exporterVisibleAsCsv:"இருக்கும் தரவுகளை கோப்பாக்கு: csv",exporterSelectedAsCsv:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: csv",exporterAllAsPdf:"எல்லா தரவுகளையும் கோப்பாக்கு: pdf",exporterVisibleAsPdf:"இருக்கும் தரவுகளை கோப்பாக்கு: pdf",exporterSelectedAsPdf:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"பத்தியின் தலைப்புகளை பெற இயலவில்லை, கோப்பிற்கு தலைப்பு உள்ளதா?",noObjects:"இலக்குகளை உருவாக்க முடியவில்லை, கோப்பில் தலைப்புகளை தவிர தரவு ஏதேனும் உள்ளதா? ",invalidCsv:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - csv",invalidJson:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - json",jsonNotArray:"படித்த கோப்பில் வரிசைகள் உள்ளது, நடைமுறை ரத்து செய் : json"},pagination:{sizes:"உருப்படிகள் / பக்கம்",totalItems:"உருப்படிகள் "},grouping:{group:"குழு",ungroup:"பிரி",aggregate_count:"மதிப்பீட்டு : எண்ணு",aggregate_sum:"மதிப்பீட்டு : கூட்டல்",aggregate_max:"மதிப்பீட்டு : அதிகபட்சம்",aggregate_min:"மதிப்பீட்டு : குறைந்தபட்சம்",aggregate_avg:"மதிப்பீட்டு : சராசரி",aggregate_remove:"மதிப்பீட்டு : நீக்கு"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("tr",{headerCell:{aria:{defaultFilterLabel:"Sütun için filtre",removeFilter:"Filtreyi Kaldır",columnMenuButtonLabel:"Sütun Menüsü"},priority:"Öncelik:",filterLabel:"Sütun için filtre: "},aggregate:{label:"kayıtlar"},groupPanel:{description:"Sütuna göre gruplamak için sütun başlığını buraya sürükleyin ve bırakın."},search:{placeholder:"Arama...",showingItems:"Gösterilen Kayıt:",selectedItems:"Seçili Kayıt:",totalItems:"Toplam Kayıt:",size:"Sayfa Boyutu:",first:"İlk Sayfa",next:"Sonraki Sayfa",previous:"Önceki Sayfa",last:"Son Sayfa"},menu:{text:"Sütunları Seç:"},sort:{ascending:"Artan Sırada Sırala",descending:"Azalan Sırada Sırala",none:"Sıralama Yapma",remove:"Sıralamayı Kaldır"},column:{hide:"Sütunu Gizle"},aggregation:{count:"toplam satır: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"Sağa Sabitle",unpin:"Sabitlemeyi Kaldır"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo Menü"},columns:"Sütunlar:",importerTitle:"Dosya içeri aktar",exporterAllAsCsv:"Bütün veriyi CSV olarak dışarı aktar",exporterVisibleAsCsv:"Görünen veriyi CSV olarak dışarı aktar",exporterSelectedAsCsv:"Seçili veriyi CSV olarak dışarı aktar",exporterAllAsPdf:"Bütün veriyi PDF olarak dışarı aktar",exporterVisibleAsPdf:"Görünen veriyi PDF olarak dışarı aktar",exporterSelectedAsPdf:"Seçili veriyi PDF olarak dışarı aktar",clearAllFilters:"Bütün filtreleri kaldır"},importer:{noHeaders:"Sütun isimleri üretilemiyor, dosyanın bir başlığı var mı?",noObjects:"Nesneler üretilemiyor, dosyada başlıktan başka bir veri var mı?",invalidCsv:"Dosya işlenemedi, geçerli bir CSV dosyası mı?",invalidJson:"Dosya işlenemedi, geçerli bir Json dosyası mı?",jsonNotArray:"Alınan Json dosyasında bir dizi bulunmalıdır, işlem iptal ediliyor."},pagination:{aria:{pageToFirst:"İlk sayfaya",pageBack:"Geri git",pageSelected:"Seçili sayfa",pageForward:"İleri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne sayısı",totalItems:"kayıtlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: Sayı",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("ua",{headerCell:{aria:{defaultFilterLabel:"Фільтр стовпчика",removeFilter:"Видалити фільтр",columnMenuButtonLabel:"Меню ствпчика"},priority:"Пріоритет:",filterLabel:"Фільтр стовпчика: "},aggregate:{label:"елементи"},groupPanel:{description:"Для групування за стовпчиком перетягніть сюди його назву."},search:{placeholder:"Пошук...",showingItems:"Показати елементи:",selectedItems:"Обрані елементи:",totalItems:"Усього елементів:",size:"Розмір сторінки:",first:"Перша сторінка",next:"Наступна сторінка",previous:"Попередня сторінка",last:"Остання сторінка"},menu:{text:"Обрати ствпчики:"},sort:{ascending:"За зростанням",descending:"За спаданням",none:"Без сортування",remove:"Прибрати сортування"},column:{hide:"Приховати стовпчик"},aggregation:{count:"усього рядків: ",sum:"ітого: ",avg:"середнє: ",min:"мін: ",max:"макс: "},pinning:{pinLeft:"Закріпити ліворуч",pinRight:"Закріпити праворуч",unpin:"Відкріпити"},columnMenu:{close:"Закрити"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Стовпчики:",importerTitle:"Імпортувати файл",exporterAllAsCsv:"Експортувати все в CSV",exporterVisibleAsCsv:"Експортувати видимі дані в CSV",exporterSelectedAsCsv:"Експортувати обрані дані в CSV",exporterAllAsPdf:"Експортувати все в PDF",exporterVisibleAsPdf:"Експортувати видимі дані в PDF",exporterSelectedAsPdf:"Експортувати обрані дані в PDF",clearAllFilters:"Очистити всі фільтри"},importer:{noHeaders:"Не вдалося отримати назви стовпчиків, чи є в файлі заголовок?",noObjects:"Не вдалося отримати дані, чи є в файлі рядки окрім заголовка?",invalidCsv:"Не вдалося обробити файл, чи це коректний CSV-файл?",invalidJson:"Не вдалося обробити файл, чи це коректний JSON?",jsonNotArray:"JSON-файл що імпортується повинен містити масив, операцію скасовано."},pagination:{aria:{pageToFirst:"Перша сторінка",pageBack:"Попередня сторінка",pageSelected:"Обрана сторінка",pageForward:"Наступна сторінка",pageToLast:"Остання сторінка"},sizes:"рядків на сторінку",totalItems:"рядків",through:"по",of:"з"},grouping:{group:"Групувати",ungroup:"Розгрупувати",aggregate_count:"Групувати: Кількість",aggregate_sum:"Для групи: Сума",aggregate_max:"Для групи: Максимум",aggregate_min:"Для групи: Мінімум",aggregate_avg:"Для групи: Серднє",aggregate_remove:"Для групи: Пусто"}}),$delegate}])}])}(),function(){var DIRECTIVE_ALIASES=["uiT","uiTranslate"],FILTER_ALIASES=["t","uiTranslate"],module=angular.module("ui.grid.i18n");module.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),module.service("i18nService",["$log","i18nConstants","$rootScope",function($log,i18nConstants,$rootScope){var langCache={_langs:{},current:null,get:function(lang){return this._langs[lang.toLowerCase()]},add:function(lang,strings){var lower=lang.toLowerCase();this._langs[lower]||(this._langs[lower]={}),angular.extend(this._langs[lower],strings)},getAllLangs:function(){var langs=[];if(!this._langs)return langs;for(var key in this._langs)langs.push(key);return langs},setCurrent:function(lang){this.current=lang.toLowerCase()},getCurrentLang:function(){return this.current}},service={add:function(langs,stringMaps){"object"==typeof langs?angular.forEach(langs,function(lang){lang&&langCache.add(lang,stringMaps)}):langCache.add(langs,stringMaps)},getAllLangs:function(){return langCache.getAllLangs()},get:function(lang){var language=lang?lang:service.getCurrentLang();return langCache.get(language)},getSafeText:function(path,lang){var language=lang?lang:service.getCurrentLang(),trans=langCache.get(language);if(!trans)return i18nConstants.MISSING;for(var paths=path.split("."),current=trans,i=0;i<paths.length;++i){if(void 0===current[paths[i]]||null===current[paths[i]])return i18nConstants.MISSING;current=current[paths[i]]}return current},setCurrentLang:function(lang){lang&&(langCache.setCurrent(lang),$rootScope.$broadcast(i18nConstants.UPDATE_EVENT))},getCurrentLang:function(){var lang=langCache.getCurrentLang();return lang||(lang=i18nConstants.DEFAULT_LANG,langCache.setCurrent(lang)),lang}};return service}]);var localeDirective=function(i18nService,i18nConstants){return{compile:function(){return{pre:function($scope,$elm,$attrs){var alias=i18nConstants.LOCALE_DIRECTIVE_ALIAS,lang=$scope.$eval($attrs[alias]);lang?$scope.$watch($attrs[alias],function(){i18nService.setCurrentLang(lang)}):$attrs.$$observers&&$attrs.$observe(alias,function(){i18nService.setCurrentLang($attrs[alias]||i18nConstants.DEFAULT_LANG)})}}}}};module.directive("uiI18n",["i18nService","i18nConstants",localeDirective]);var uitDirective=function($parse,i18nService,i18nConstants){return{restrict:"EA",compile:function(){return{pre:function($scope,$elm,$attrs){var observer,alias1=DIRECTIVE_ALIASES[0],alias2=DIRECTIVE_ALIASES[1],token=$attrs[alias1]||$attrs[alias2]||$elm.html(),missing=i18nConstants.MISSING+token;if($attrs.$$observers){var prop=$attrs[alias1]?alias1:alias2;observer=$attrs.$observe(prop,function(result){result&&$elm.html($parse(result)(i18nService.getCurrentLang())||missing)})}var getter=$parse(token),listener=$scope.$on(i18nConstants.UPDATE_EVENT,function(evt){observer?observer($attrs[alias1]||$attrs[alias2]):$elm.html(getter(i18nService.get())||missing)});$scope.$on("$destroy",listener),$elm.html(getter(i18nService.get())||missing)}}}}};angular.forEach(DIRECTIVE_ALIASES,function(alias){module.directive(alias,["$parse","i18nService","i18nConstants",uitDirective])});var uitFilter=function($parse,i18nService,i18nConstants){return function(data){var getter=$parse(data);return getter(i18nService.get())||i18nConstants.MISSING+data}};angular.forEach(FILTER_ALIASES,function(alias){module.filter(alias,["$parse","i18nService","i18nConstants",uitFilter])})}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"列过滤器",removeFilter:"移除过滤器",columnMenuButtonLabel:"列菜单"},priority:"优先级:",filterLabel:"列过滤器: "},aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",none:"无序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},columnMenu:{close:"关闭"},gridMenu:{aria:{buttonLabel:"表格菜单"},columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{aria:{pageToFirst:"第一页",pageBack:"上一页",pageSelected:"当前页",pageForward:"下一页",pageToLast:"最后一页"},sizes:"行每页",totalItems:"行",through:"至",of:"共"},grouping:{group:"分组",ungroup:"取消分组",aggregate_count:"合计: 计数",aggregate_sum:"合计: 求和",aggregate_max:"合计: 最大",aggregate_min:"合计: 最小",aggregate_avg:"合计: 平均",aggregate_remove:"合计: 移除"}}),$delegate}])}])}(),function(){angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("i18nService",["$delegate",function($delegate){return $delegate.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),$delegate}])}])}(),function(){"use strict";var module=angular.module("ui.grid.autoResize",["ui.grid"]);module.directive("uiGridAutoResize",["$timeout","gridUtil",function($timeout,gridUtil){return{require:"uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){function getDimensions(){prevGridHeight=gridUtil.elementHeight($elm),prevGridWidth=gridUtil.elementWidth($elm)}function startTimeout(){clearTimeout(resizeTimeoutId),resizeTimeoutId=setTimeout(function(){var newGridHeight=gridUtil.elementHeight($elm),newGridWidth=gridUtil.elementWidth($elm);newGridHeight!==prevGridHeight||newGridWidth!==prevGridWidth?(uiGridCtrl.grid.gridHeight=newGridHeight,uiGridCtrl.grid.gridWidth=newGridWidth,uiGridCtrl.grid.api.core.raise.gridDimensionChanged(prevGridHeight,prevGridWidth,newGridHeight,newGridWidth),$scope.$apply(function(){uiGridCtrl.grid.refresh().then(function(){getDimensions(),startTimeout()})})):startTimeout()},250)}var prevGridWidth,prevGridHeight;getDimensions();var resizeTimeoutId;startTimeout(),$scope.$on("$destroy",function(){clearTimeout(resizeTimeoutId)})}}}])}(),function(){"use strict";var module=angular.module("ui.grid.cellNav",["ui.grid"]);module.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),module.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(gridUtil,uiGridConstants,uiGridCellNavConstants,GridRowColumn,$q){var UiGridCellNav=function(rowContainer,colContainer,leftColContainer,rightColContainer){this.rows=rowContainer.visibleRowCache,this.columns=colContainer.visibleColumnCache,this.leftColumns=leftColContainer?leftColContainer.visibleColumnCache:[],this.rightColumns=rightColContainer?rightColContainer.visibleColumnCache:[],this.bodyContainer=rowContainer};return UiGridCellNav.prototype.getFocusableCols=function(){var allColumns=this.leftColumns.concat(this.columns,this.rightColumns);return allColumns.filter(function(col){return col.colDef.allowCellFocus})},UiGridCellNav.prototype.getFocusableRows=function(){return this.rows.filter(function(row){return row.allowCellFocus!==!1})},UiGridCellNav.prototype.getNextRowCol=function(direction,curRow,curCol){switch(direction){case uiGridCellNavConstants.direction.LEFT:return this.getRowColLeft(curRow,curCol);case uiGridCellNavConstants.direction.RIGHT:return this.getRowColRight(curRow,curCol);case uiGridCellNavConstants.direction.UP:return this.getRowColUp(curRow,curCol);case uiGridCellNavConstants.direction.DOWN:return this.getRowColDown(curRow,curCol);case uiGridCellNavConstants.direction.PG_UP:return this.getRowColPageUp(curRow,curCol);case uiGridCellNavConstants.direction.PG_DOWN:return this.getRowColPageDown(curRow,curCol)}},UiGridCellNav.prototype.initializeSelection=function(){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows();if(0===focusableCols.length||0===focusableRows.length)return null;return new GridRowColumn(focusableRows[0],focusableCols[0])},UiGridCellNav.prototype.getRowColLeft=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);curColIndex===-1&&(curColIndex=1);var nextColIndex=0===curColIndex?focusableCols.length-1:curColIndex-1;return nextColIndex>curColIndex?0===curRowIndex?new GridRowColumn(curRow,focusableCols[nextColIndex]):new GridRowColumn(focusableRows[curRowIndex-1],focusableCols[nextColIndex]):new GridRowColumn(curRow,focusableCols[nextColIndex])},UiGridCellNav.prototype.getRowColRight=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);curColIndex===-1&&(curColIndex=0);var nextColIndex=curColIndex===focusableCols.length-1?0:curColIndex+1;return nextColIndex<curColIndex?curRowIndex===focusableRows.length-1?new GridRowColumn(curRow,focusableCols[nextColIndex]):new GridRowColumn(focusableRows[curRowIndex+1],focusableCols[nextColIndex]):new GridRowColumn(curRow,focusableCols[nextColIndex])},UiGridCellNav.prototype.getRowColDown=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);return curColIndex===-1&&(curColIndex=0),curRowIndex===focusableRows.length-1?new GridRowColumn(curRow,focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex+1],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColPageDown=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);curColIndex===-1&&(curColIndex=0);var pageSize=this.bodyContainer.minRowsToRender();return curRowIndex>=focusableRows.length-pageSize?new GridRowColumn(focusableRows[focusableRows.length-1],focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex+pageSize],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColUp=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);return curColIndex===-1&&(curColIndex=0),0===curRowIndex?new GridRowColumn(curRow,focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex-1],focusableCols[curColIndex])},UiGridCellNav.prototype.getRowColPageUp=function(curRow,curCol){var focusableCols=this.getFocusableCols(),focusableRows=this.getFocusableRows(),curColIndex=focusableCols.indexOf(curCol),curRowIndex=focusableRows.indexOf(curRow);curColIndex===-1&&(curColIndex=0);var pageSize=this.bodyContainer.minRowsToRender();return curRowIndex-pageSize<0?new GridRowColumn(focusableRows[0],focusableCols[curColIndex]):new GridRowColumn(focusableRows[curRowIndex-pageSize],focusableCols[curColIndex])},UiGridCellNav}]),module.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(gridUtil,uiGridConstants,uiGridCellNavConstants,$q,UiGridCellNav,GridRowColumn,ScrollEvent){var service={initializeGrid:function(grid){grid.registerColumnBuilder(service.cellNavColumnBuilder),grid.cellNav={},grid.cellNav.lastRowCol=null,grid.cellNav.focusedCells=[],service.defaultGridOptions(grid.options);var publicApi={events:{cellNav:{navigate:function(newRowCol,oldRowCol){},viewPortKeyDown:function(event,rowCol){},viewPortKeyPress:function(event,rowCol){}}},methods:{cellNav:{scrollToFocus:function(rowEntity,colDef){return service.scrollToFocus(grid,rowEntity,colDef)},getFocusedCell:function(){return grid.cellNav.lastRowCol},getCurrentSelection:function(){return grid.cellNav.focusedCells},rowColSelectIndex:function(rowCol){for(var index=-1,i=0;i<grid.cellNav.focusedCells.length;i++)if(grid.cellNav.focusedCells[i].col.uid===rowCol.col.uid&&grid.cellNav.focusedCells[i].row.uid===rowCol.row.uid){index=i;break}return index}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.modifierKeysToMultiSelectCells=gridOptions.modifierKeysToMultiSelectCells===!0},decorateRenderContainers:function(grid){var rightContainer=grid.hasRightContainer()?grid.renderContainers.right:null,leftContainer=grid.hasLeftContainer()?grid.renderContainers.left:null;null!==leftContainer&&(grid.renderContainers.left.cellNav=new UiGridCellNav(grid.renderContainers.body,leftContainer,rightContainer,grid.renderContainers.body)),null!==rightContainer&&(grid.renderContainers.right.cellNav=new UiGridCellNav(grid.renderContainers.body,rightContainer,grid.renderContainers.body,leftContainer)),grid.renderContainers.body.cellNav=new UiGridCellNav(grid.renderContainers.body,grid.renderContainers.body,leftContainer,rightContainer)},getDirection:function(evt){return evt.keyCode===uiGridConstants.keymap.LEFT||evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey?uiGridCellNavConstants.direction.LEFT:evt.keyCode===uiGridConstants.keymap.RIGHT||evt.keyCode===uiGridConstants.keymap.TAB?uiGridCellNavConstants.direction.RIGHT:evt.keyCode===uiGridConstants.keymap.UP||evt.keyCode===uiGridConstants.keymap.ENTER&&evt.shiftKey?uiGridCellNavConstants.direction.UP:evt.keyCode===uiGridConstants.keymap.PG_UP?uiGridCellNavConstants.direction.PG_UP:evt.keyCode===uiGridConstants.keymap.DOWN||evt.keyCode===uiGridConstants.keymap.ENTER&&!evt.ctrlKey&&!evt.altKey?uiGridCellNavConstants.direction.DOWN:evt.keyCode===uiGridConstants.keymap.PG_DOWN?uiGridCellNavConstants.direction.PG_DOWN:null},cellNavColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.allowCellFocus=void 0===colDef.allowCellFocus||colDef.allowCellFocus,$q.all(promises)},scrollToFocus:function(grid,rowEntity,colDef){var gridRow=null,gridCol=null;return"undefined"!=typeof rowEntity&&null!==rowEntity&&(gridRow=grid.getRow(rowEntity)),"undefined"!=typeof colDef&&null!==colDef&&(gridCol=grid.getColumn(colDef.name?colDef.name:colDef.field)),grid.api.core.scrollToIfNecessary(gridRow,gridCol).then(function(){var rowCol={row:gridRow,col:gridCol};null!==gridRow&&null!==gridCol&&grid.cellNav.broadcastCellNav(rowCol)})},getLeftWidth:function(grid,upToCol){var width=0;if(!upToCol)return width;var lastIndex=grid.renderContainers.body.visibleColumnCache.indexOf(upToCol);grid.renderContainers.body.visibleColumnCache.forEach(function(col,index){index<lastIndex&&(width+=col.drawnWidth)});var percentage=0===lastIndex?0:(lastIndex+1)/grid.renderContainers.body.visibleColumnCache.length;return width+=upToCol.drawnWidth*percentage}};return service}]),module.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile",function(gridUtil,uiGridCellNavService,uiGridCellNavConstants,uiGridConstants,GridRowColumn,$timeout,$compile){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){var _scope=$scope,grid=uiGridCtrl.grid;uiGridCellNavService.initializeGrid(grid),uiGridCtrl.cellNav={},uiGridCtrl.cellNav.makeRowCol=function(obj){return obj instanceof GridRowColumn||(obj=new GridRowColumn(obj.row,obj.col)),obj},uiGridCtrl.cellNav.getActiveCell=function(){var elms=$elm[0].getElementsByClassName("ui-grid-cell-focus");if(elms.length>0)return elms[0]},uiGridCtrl.cellNav.broadcastCellNav=grid.cellNav.broadcastCellNav=function(newRowCol,modifierDown,originEvt){modifierDown=!(void 0===modifierDown||!modifierDown),newRowCol=uiGridCtrl.cellNav.makeRowCol(newRowCol),uiGridCtrl.cellNav.broadcastFocus(newRowCol,modifierDown,originEvt),_scope.$broadcast(uiGridCellNavConstants.CELL_NAV_EVENT,newRowCol,modifierDown,originEvt)},uiGridCtrl.cellNav.clearFocus=grid.cellNav.clearFocus=function(){grid.cellNav.focusedCells=[],_scope.$broadcast(uiGridCellNavConstants.CELL_NAV_EVENT)},uiGridCtrl.cellNav.broadcastFocus=function(rowCol,modifierDown,originEvt){modifierDown=!(void 0===modifierDown||!modifierDown),rowCol=uiGridCtrl.cellNav.makeRowCol(rowCol);var row=rowCol.row,col=rowCol.col,rowColSelectIndex=uiGridCtrl.grid.api.cellNav.rowColSelectIndex(rowCol);if(null===grid.cellNav.lastRowCol||rowColSelectIndex===-1){var newRowCol=new GridRowColumn(row,col);null!==grid.cellNav.lastRowCol&&grid.cellNav.lastRowCol.row===newRowCol.row&&grid.cellNav.lastRowCol.col===newRowCol.col||(grid.api.cellNav.raise.navigate(newRowCol,grid.cellNav.lastRowCol),grid.cellNav.lastRowCol=newRowCol),uiGridCtrl.grid.options.modifierKeysToMultiSelectCells&&modifierDown?grid.cellNav.focusedCells.push(rowCol):grid.cellNav.focusedCells=[rowCol]}else grid.options.modifierKeysToMultiSelectCells&&modifierDown&&rowColSelectIndex>=0&&grid.cellNav.focusedCells.splice(rowColSelectIndex,1)},uiGridCtrl.cellNav.handleKeyDown=function(evt){var direction=uiGridCellNavService.getDirection(evt);if(null===direction)return null;var containerId="body";evt.uiGridTargetRenderContainerId&&(containerId=evt.uiGridTargetRenderContainerId);var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();if(lastRowCol){var rowCol=uiGridCtrl.grid.renderContainers[containerId].cellNav.getNextRowCol(direction,lastRowCol.row,lastRowCol.col),focusableCols=uiGridCtrl.grid.renderContainers[containerId].cellNav.getFocusableCols(),rowColSelectIndex=uiGridCtrl.grid.api.cellNav.rowColSelectIndex(rowCol);return direction===uiGridCellNavConstants.direction.LEFT&&rowCol.col===focusableCols[focusableCols.length-1]&&rowCol.row===lastRowCol.row&&evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey?(grid.cellNav.focusedCells.splice(rowColSelectIndex,1),uiGridCtrl.cellNav.clearFocus(),!0):direction!==uiGridCellNavConstants.direction.RIGHT||rowCol.col!==focusableCols[0]||rowCol.row!==lastRowCol.row||evt.keyCode!==uiGridConstants.keymap.TAB||evt.shiftKey?(grid.scrollToIfNecessary(rowCol.row,rowCol.col).then(function(){uiGridCtrl.cellNav.broadcastCellNav(rowCol)}),evt.stopPropagation(),evt.preventDefault(),!1):(grid.cellNav.focusedCells.splice(rowColSelectIndex,1),
uiGridCtrl.cellNav.clearFocus(),!0)}}},post:function($scope,$elm,$attrs,uiGridCtrl){function addAriaLiveRegion(){var ariaNotifierDomElt='<div id="'+grid.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="region" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',ariaNotifier=$compile(ariaNotifierDomElt)($scope);$elm.prepend(ariaNotifier),$scope.$on(uiGridCellNavConstants.CELL_NAV_EVENT,function(evt,rowCol,modifierDown,originEvt){function setNotifyText(text){text!==ariaNotifier.text()&&(ariaNotifier[0].style.clip="rect(0px,0px,0px,0px)",ariaNotifier[0].innerHTML="",ariaNotifier[0].style.visibility="hidden",ariaNotifier[0].style.visibility="visible",""!==text&&(ariaNotifier[0].style.clip="auto",ariaNotifier[0].appendChild(document.createTextNode(text+" ")),ariaNotifier[0].style.visibility="hidden",ariaNotifier[0].style.visibility="visible"))}if(!originEvt||"focus"!==originEvt.type){for(var values=[],currentSelection=grid.api.cellNav.getCurrentSelection(),i=0;i<currentSelection.length;i++)values.push(grid.getCellDisplayValue(currentSelection[i].row,currentSelection[i].col));var cellText=values.toString();setNotifyText(cellText)}})}var grid=uiGridCtrl.grid;addAriaLiveRegion()}}}}}]),module.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function($timeout,$document,gridUtil,uiGridConstants,uiGridCellNavService,$compile,uiGridCellNavConstants){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1],uiGridCellnavCtrl=controllers[2];if(uiGridCtrl.grid.api.cellNav){var containerId=renderContainerCtrl.containerId,grid=uiGridCtrl.grid;if(uiGridCellNavService.decorateRenderContainers(grid),"body"===containerId){uiGridCtrl.grid.options.modifierKeysToMultiSelectCells?$elm.attr("aria-multiselectable",!0):$elm.attr("aria-multiselectable",!1);var focuser=$compile('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+grid.id+"-aria-speakable "+grid.id+'-grid-container" aria-owns="'+grid.id+'-grid-container"></div>')($scope);$elm.append(focuser),focuser.on("focus",function(evt){evt.uiGridTargetRenderContainerId=containerId;var rowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null===rowCol&&(rowCol=uiGridCtrl.grid.renderContainers[containerId].cellNav.getNextRowCol(uiGridCellNavConstants.direction.DOWN,null,null),rowCol.row&&rowCol.col&&uiGridCtrl.cellNav.broadcastCellNav(rowCol))}),uiGridCellnavCtrl.setAriaActivedescendant=function(id){$elm.attr("aria-activedescendant",id)},uiGridCellnavCtrl.removeAriaActivedescendant=function(id){$elm.attr("aria-activedescendant")===id&&$elm.attr("aria-activedescendant","")},uiGridCtrl.focus=function(){gridUtil.focus.byElement(focuser[0])};var viewPortKeyDownWasRaisedForRowCol=null;focuser.on("keydown",function(evt){evt.uiGridTargetRenderContainerId=containerId;var rowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell(),result=uiGridCtrl.cellNav.handleKeyDown(evt);null===result&&(uiGridCtrl.grid.api.cellNav.raise.viewPortKeyDown(evt,rowCol),viewPortKeyDownWasRaisedForRowCol=rowCol)}),focuser.on("keypress",function(evt){viewPortKeyDownWasRaisedForRowCol&&($timeout(function(){uiGridCtrl.grid.api.cellNav.raise.viewPortKeyPress(evt,viewPortKeyDownWasRaisedForRowCol)},4),viewPortKeyDownWasRaisedForRowCol=null)}),$scope.$on("$destroy",function(){focuser.off()})}}}}}}}]),module.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function($timeout,$document,gridUtil,uiGridConstants,uiGridCellNavService,uiGridCellNavConstants,$log,$compile){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];if(uiGridCtrl.grid.api.cellNav){var containerId=renderContainerCtrl.containerId;if("body"===containerId){var grid=uiGridCtrl.grid;grid.api.core.on.scrollBegin($scope,function(args){var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null!==lastRowCol&&renderContainerCtrl.colContainer.containsColumn(lastRowCol.col)&&uiGridCtrl.cellNav.clearFocus()}),grid.api.core.on.scrollEnd($scope,function(args){var lastRowCol=uiGridCtrl.grid.api.cellNav.getFocusedCell();null!==lastRowCol&&renderContainerCtrl.colContainer.containsColumn(lastRowCol.col)&&uiGridCtrl.cellNav.broadcastCellNav(lastRowCol)}),grid.api.cellNav.on.navigate($scope,function(){uiGridCtrl.focus()})}}}}}}}]),module.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function($timeout,$document,uiGridCellNavService,gridUtil,uiGridCellNavConstants,uiGridConstants,GridRowColumn){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function($scope,$elm,$attrs,controllers){function preventMouseDown(evt){evt.preventDefault()}function setFocused(){if(!$scope.focused){var div=$elm.find("div");div.addClass("ui-grid-cell-focus"),$elm.attr("aria-selected",!0),uiGridCellnavCtrl.setAriaActivedescendant($elm.attr("id")),$scope.focused=!0}}function clearFocus(){if($scope.focused){var div=$elm.find("div");div.removeClass("ui-grid-cell-focus"),$elm.attr("aria-selected",!1),uiGridCellnavCtrl.removeAriaActivedescendant($elm.attr("id")),$scope.focused=!1}}var uiGridCtrl=controllers[0],uiGridCellnavCtrl=controllers[1];if(uiGridCtrl.grid.api.cellNav&&$scope.col.colDef.allowCellFocus){var grid=uiGridCtrl.grid;$scope.focused=!1,$elm.attr("tabindex",-1),$elm.find("div").on("click",function(evt){uiGridCtrl.cellNav.broadcastCellNav(new GridRowColumn($scope.row,$scope.col),evt.ctrlKey||evt.metaKey,evt),evt.stopPropagation(),$scope.$apply()}),$elm.on("mousedown",preventMouseDown),uiGridCtrl.grid.api.edit&&(uiGridCtrl.grid.api.edit.on.beginCellEdit($scope,function(){$elm.off("mousedown",preventMouseDown)}),uiGridCtrl.grid.api.edit.on.afterCellEdit($scope,function(){$elm.on("mousedown",preventMouseDown)}),uiGridCtrl.grid.api.edit.on.cancelCellEdit($scope,function(){$elm.on("mousedown",preventMouseDown)})),$elm.on("focus",function(evt){uiGridCtrl.cellNav.broadcastCellNav(new GridRowColumn($scope.row,$scope.col),!1,evt),evt.stopPropagation(),$scope.$apply()}),$scope.$on(uiGridCellNavConstants.CELL_NAV_EVENT,function(evt,rowCol,modifierDown){var isFocused=grid.cellNav.focusedCells.some(function(focusedRowCol,index){return focusedRowCol.row===$scope.row&&focusedRowCol.col===$scope.col});isFocused?setFocused():clearFocus()}),$scope.$on("$destroy",function(){$elm.find("div").off(),$elm.off()})}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.edit",["ui.grid"]);module.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),module.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function($q,uiGridConstants,gridUtil){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options),grid.registerColumnBuilder(service.editColumnBuilder),grid.edit={};var publicApi={events:{edit:{afterCellEdit:function(rowEntity,colDef,newValue,oldValue){},beginCellEdit:function(rowEntity,colDef,triggerEvent){},cancelCellEdit:function(rowEntity,colDef){}}},methods:{edit:{}}};grid.api.registerEventsFromObject(publicApi.events)},defaultGridOptions:function(gridOptions){gridOptions.cellEditableCondition=void 0===gridOptions.cellEditableCondition||gridOptions.cellEditableCondition,gridOptions.enableCellEditOnFocus=void 0!==gridOptions.enableCellEditOnFocus&&gridOptions.enableCellEditOnFocus},editColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableCellEdit=void 0===colDef.enableCellEdit?void 0===gridOptions.enableCellEdit?"object"!==colDef.type:gridOptions.enableCellEdit:colDef.enableCellEdit,colDef.cellEditableCondition=void 0===colDef.cellEditableCondition?gridOptions.cellEditableCondition:colDef.cellEditableCondition,colDef.enableCellEdit&&(colDef.editableCellTemplate=colDef.editableCellTemplate||gridOptions.editableCellTemplate||"ui-grid/cellEditor",promises.push(gridUtil.getTemplate(colDef.editableCellTemplate).then(function(template){col.editableCellTemplate=template},function(res){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+colDef.editableCellTemplate+"'")}))),colDef.enableCellEditOnFocus=void 0===colDef.enableCellEditOnFocus?gridOptions.enableCellEditOnFocus:colDef.enableCellEditOnFocus,$q.all(promises)},isStartEditKey:function(evt){return!(evt.metaKey||evt.keyCode===uiGridConstants.keymap.ESC||evt.keyCode===uiGridConstants.keymap.SHIFT||evt.keyCode===uiGridConstants.keymap.CTRL||evt.keyCode===uiGridConstants.keymap.ALT||evt.keyCode===uiGridConstants.keymap.WIN||evt.keyCode===uiGridConstants.keymap.CAPSLOCK||evt.keyCode===uiGridConstants.keymap.LEFT||evt.keyCode===uiGridConstants.keymap.TAB&&evt.shiftKey||evt.keyCode===uiGridConstants.keymap.RIGHT||evt.keyCode===uiGridConstants.keymap.TAB||evt.keyCode===uiGridConstants.keymap.UP||evt.keyCode===uiGridConstants.keymap.ENTER&&evt.shiftKey||evt.keyCode===uiGridConstants.keymap.DOWN||evt.keyCode===uiGridConstants.keymap.ENTER)}};return service}]),module.directive("uiGridEdit",["gridUtil","uiGridEditService",function(gridUtil,uiGridEditService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridEditService.initializeGrid(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridViewport",["uiGridEditConstants",function(uiGridEditConstants){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0];if(uiGridCtrl.grid.api.edit&&uiGridCtrl.grid.api.cellNav){var containerId=controllers[1].containerId;"body"===containerId&&($scope.$on(uiGridEditConstants.events.CANCEL_CELL_EDIT,function(){uiGridCtrl.focus()}),$scope.$on(uiGridEditConstants.events.END_CELL_EDIT,function(){uiGridCtrl.focus()}))}}}}}}]),module.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function($compile,$injector,$timeout,uiGridConstants,uiGridEditConstants,gridUtil,$parse,uiGridEditService,$rootScope,$q){var touchstartTimeout=500;if($injector.has("uiGridCellNavService")){$injector.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function registerBeginEditEvents(){$elm.on("dblclick",beginEdit),$elm.on("touchstart",touchStart),uiGridCtrl&&uiGridCtrl.grid.api.cellNav&&(viewPortKeyDownDereg=uiGridCtrl.grid.api.cellNav.on.viewPortKeyDown($scope,function(evt,rowCol){null!==rowCol&&(rowCol.row!==$scope.row||rowCol.col!==$scope.col||$scope.col.colDef.enableCellEditOnFocus||beginEditKeyDown(evt))}),cellNavNavigateDereg=uiGridCtrl.grid.api.cellNav.on.navigate($scope,function(newRowCol,oldRowCol){$scope.col.colDef.enableCellEditOnFocus&&(oldRowCol&&newRowCol.row===oldRowCol.row&&newRowCol.col===oldRowCol.col||newRowCol.row!==$scope.row||newRowCol.col!==$scope.col||$timeout(function(){beginEdit()}))})),$scope.beginEditEventsWired=!0}function touchStart(event){"undefined"!=typeof event.originalEvent&&void 0!==event.originalEvent&&(event=event.originalEvent),$elm.on("touchend",touchEnd),cancelTouchstartTimeout=$timeout(function(){},touchstartTimeout),cancelTouchstartTimeout.then(function(){setTimeout(beginEdit,0),$elm.off("touchend",touchEnd)})}function touchEnd(event){$timeout.cancel(cancelTouchstartTimeout),$elm.off("touchend",touchEnd)}function cancelBeginEditEvents(){$elm.off("dblclick",beginEdit),$elm.off("keydown",beginEditKeyDown),$elm.off("touchstart",touchStart),cellNavNavigateDereg(),viewPortKeyDownDereg(),$scope.beginEditEventsWired=!1}function beginEditKeyDown(evt){uiGridEditService.isStartEditKey(evt)&&beginEdit(evt)}function shouldEdit(col,row){return!row.isSaving&&(angular.isFunction(col.colDef.cellEditableCondition)?col.colDef.cellEditableCondition($scope):col.colDef.cellEditableCondition)}function beginEdit(triggerEvent){$scope.grid.api.core.scrollToIfNecessary($scope.row,$scope.col).then(function(){beginEditAfterScroll(triggerEvent)})}function beginEditAfterScroll(triggerEvent){if(!inEdit&&shouldEdit($scope.col,$scope.row)){var modelField=$scope.row.getQualifiedColField($scope.col);$scope.col.colDef.editModelField&&(modelField=gridUtil.preEval("row.entity."+$scope.col.colDef.editModelField)),cellModel=$parse(modelField),origCellValue=cellModel($scope),html=$scope.col.editableCellTemplate,html=html.replace(uiGridConstants.MODEL_COL_FIELD,modelField),html=html.replace(uiGridConstants.COL_FIELD,"grid.getCellValue(row, col)");var optionFilter=$scope.col.colDef.editDropdownFilter?"|"+$scope.col.colDef.editDropdownFilter:"";html=html.replace(uiGridConstants.CUSTOM_FILTERS,optionFilter);var inputType="text";switch($scope.col.colDef.type){case"boolean":inputType="checkbox";break;case"number":inputType="number";break;case"date":inputType="date"}html=html.replace("INPUT_TYPE",inputType);var editDropdownOptionsFunction=$scope.col.colDef.editDropdownOptionsFunction;if(editDropdownOptionsFunction)$q.when(editDropdownOptionsFunction($scope.row.entity,$scope.col.colDef)).then(function(result){$scope.editDropdownOptionsArray=result});else{var editDropdownRowEntityOptionsArrayPath=$scope.col.colDef.editDropdownRowEntityOptionsArrayPath;editDropdownRowEntityOptionsArrayPath?$scope.editDropdownOptionsArray=resolveObjectFromPath($scope.row.entity,editDropdownRowEntityOptionsArrayPath):$scope.editDropdownOptionsArray=$scope.col.colDef.editDropdownOptionsArray}$scope.editDropdownIdLabel=$scope.col.colDef.editDropdownIdLabel?$scope.col.colDef.editDropdownIdLabel:"id",$scope.editDropdownValueLabel=$scope.col.colDef.editDropdownValueLabel?$scope.col.colDef.editDropdownValueLabel:"value";var createEditor=function(){inEdit=!0,cancelBeginEditEvents();var cellElement=angular.element(html);$elm.append(cellElement),editCellScope=$scope.$new(),$compile(cellElement)(editCellScope);var gridCellContentsEl=angular.element($elm.children()[0]);gridCellContentsEl.addClass("ui-grid-cell-contents-hidden")};$rootScope.$$phase?createEditor():$scope.$apply(createEditor);var deregOnGridScroll=$scope.col.grid.api.core.on.scrollBegin($scope,function(){$scope.grid.disableScrolling||(endEdit(),$scope.grid.api.edit.raise.afterCellEdit($scope.row.entity,$scope.col.colDef,cellModel($scope),origCellValue),deregOnGridScroll(),deregOnEndCellEdit(),deregOnCancelCellEdit())}),deregOnEndCellEdit=$scope.$on(uiGridEditConstants.events.END_CELL_EDIT,function(){endEdit(),$scope.grid.api.edit.raise.afterCellEdit($scope.row.entity,$scope.col.colDef,cellModel($scope),origCellValue),deregOnEndCellEdit(),deregOnGridScroll(),deregOnCancelCellEdit()}),deregOnCancelCellEdit=$scope.$on(uiGridEditConstants.events.CANCEL_CELL_EDIT,function(){cancelEdit(),deregOnCancelCellEdit(),deregOnGridScroll(),deregOnEndCellEdit()});$scope.$broadcast(uiGridEditConstants.events.BEGIN_CELL_EDIT,triggerEvent),$timeout(function(){$scope.grid.api.edit.raise.beginCellEdit($scope.row.entity,$scope.col.colDef,triggerEvent)})}}function endEdit(){if($scope.grid.disableScrolling=!1,inEdit){uiGridCtrl&&uiGridCtrl.grid.api.cellNav&&uiGridCtrl.focus();var gridCellContentsEl=angular.element($elm.children()[0]);editCellScope.$destroy();for(var children=$elm.children(),i=1;i<children.length;i++)angular.element(children[i]).remove();gridCellContentsEl.removeClass("ui-grid-cell-contents-hidden"),inEdit=!1,registerBeginEditEvents(),$scope.grid.api.core.notifyDataChange(uiGridConstants.dataChange.EDIT)}}function cancelEdit(){$scope.grid.disableScrolling=!1,inEdit&&(cellModel.assign($scope,origCellValue),$scope.$apply(),$scope.grid.api.edit.raise.cancelCellEdit($scope.row.entity,$scope.col.colDef),endEdit())}function resolveObjectFromPath(object,path){path=path.replace(/\[(\w+)\]/g,".$1"),path=path.replace(/^\./,"");for(var a=path.split(".");a.length;){var n=a.shift();if(!(n in object))return;object=object[n]}return object}var html,origCellValue,cellModel,cancelTouchstartTimeout,editCellScope,inEdit=!1;if($scope.col.colDef.enableCellEdit){var cellNavNavigateDereg=function(){},viewPortKeyDownDereg=function(){},setEditable=function(){$scope.col.colDef.enableCellEdit&&$scope.row.enableCellEdit!==!1?$scope.beginEditEventsWired||registerBeginEditEvents():$scope.beginEditEventsWired&&cancelBeginEditEvents()};setEditable();var rowWatchDereg=$scope.$watch("row",function(n,o){n!==o&&setEditable()});$scope.$on("$destroy",rowWatchDereg)}}}}]),module.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(gridUtil,uiGridConstants,uiGridEditConstants,$timeout,uiGridEditService){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl,renderContainerCtrl,ngModel;controllers[0]&&(uiGridCtrl=controllers[0]),controllers[1]&&(renderContainerCtrl=controllers[1]),controllers[2]&&(ngModel=controllers[2]),$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(evt,triggerEvent){if($timeout(function(){if($elm[0].focus(),$elm[0].select&&$scope.col.colDef.enableCellEditOnFocus||!uiGridCtrl||!uiGridCtrl.grid.api.cellNav)$elm[0].select();else try{$elm[0].setSelectionRange($elm[0].value.length,$elm[0].value.length)}catch(ex){}}),uiGridCtrl&&uiGridCtrl.grid.api.cellNav)var viewPortKeyDownUnregister=uiGridCtrl.grid.api.cellNav.on.viewPortKeyPress($scope,function(evt,rowCol){uiGridEditService.isStartEditKey(evt)&&(ngModel.$setViewValue(String.fromCharCode("number"==typeof evt.which?evt.which:evt.keyCode),evt),ngModel.$render()),viewPortKeyDownUnregister()});$elm.on("blur",function(evt){$scope.stopEdit(evt)})}),$scope.deepEdit=!1,$scope.stopEdit=function(evt){$scope.inputForm&&!$scope.inputForm.$valid?(evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)):$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT),$scope.deepEdit=!1},$elm.on("click",function(evt){"checkbox"!==$elm[0].type&&($scope.deepEdit=!0,$timeout(function(){$scope.grid.disableScrolling=!0}))}),$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)}if(!$scope.deepEdit||evt.keyCode!==uiGridConstants.keymap.LEFT&&evt.keyCode!==uiGridConstants.keymap.RIGHT&&evt.keyCode!==uiGridConstants.keymap.UP&&evt.keyCode!==uiGridConstants.keymap.DOWN)if(uiGridCtrl&&uiGridCtrl.grid.api.cellNav)evt.uiGridTargetRenderContainerId=renderContainerCtrl.containerId,null!==uiGridCtrl.cellNav.handleKeyDown(evt)&&$scope.stopEdit(evt);else switch(evt.keyCode){case uiGridConstants.keymap.ENTER:case uiGridConstants.keymap.TAB:evt.stopPropagation(),evt.preventDefault(),$scope.stopEdit(evt)}else evt.stopPropagation();return!0})}}}}}]),module.directive("uiGridEditor",["$filter",function($filter){function parseDateString(dateString){if("undefined"==typeof dateString||""===dateString)return null;var parts=dateString.split("-");if(3!==parts.length)return null;var year=parseInt(parts[0],10),month=parseInt(parts[1],10),day=parseInt(parts[2],10);return month<1||year<1||day<1?null:new Date(year,month-1,day)}return{priority:-100,require:"?ngModel",link:function(scope,element,attrs,ngModel){2===angular.version.minor&&attrs.type&&"date"===attrs.type&&ngModel&&(ngModel.$formatters.push(function(modelValue){return ngModel.$setValidity(null,!modelValue||!isNaN(modelValue.getTime())),$filter("date")(modelValue,"yyyy-MM-dd")}),ngModel.$parsers.push(function(viewValue){if(viewValue&&viewValue.length>0){var dateValue=parseDateString(viewValue);return ngModel.$setValidity(null,dateValue&&!isNaN(dateValue.getTime())),dateValue}return ngModel.$setValidity(null,!0),null}))}}}]),module.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(uiGridConstants,uiGridEditConstants){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl=controllers[0],renderContainerCtrl=controllers[1];$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){$elm[0].focus(),$elm[0].style.width=$elm[0].parentElement.offsetWidth-1+"px",$elm.on("blur",function(evt){$scope.stopEdit(evt)})}),$scope.stopEdit=function(evt){$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)},$elm.on("keydown",function(evt){switch(evt.keyCode){case uiGridConstants.keymap.ESC:evt.stopPropagation(),$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)}if(uiGridCtrl&&uiGridCtrl.grid.api.cellNav)evt.uiGridTargetRenderContainerId=renderContainerCtrl.containerId,null!==uiGridCtrl.cellNav.handleKeyDown(evt)&&$scope.stopEdit(evt);else switch(evt.keyCode){case uiGridConstants.keymap.ENTER:case uiGridConstants.keymap.TAB:evt.stopPropagation(),evt.preventDefault(),$scope.stopEdit(evt)}return!0})}}}}}]),module.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(gridUtil,uiGridConstants,uiGridEditConstants,$timeout){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function($scope,$elm,$attrs){},post:function($scope,$elm,$attrs,controllers){var uiGridCtrl,renderContainerCtrl;controllers[0]&&(uiGridCtrl=controllers[0]),controllers[1]&&(renderContainerCtrl=controllers[1]);var handleFileSelect=(uiGridCtrl.grid,function(event){var target=event.srcElement||event.target;target&&target.files&&target.files.length>0?("function"==typeof $scope.col.colDef.editFileChooserCallback?$scope.col.colDef.editFileChooserCallback($scope.row,$scope.col,target.files):gridUtil.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),target.form.reset(),$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)):$scope.$emit(uiGridEditConstants.events.CANCEL_CELL_EDIT)});$elm[0].addEventListener("change",handleFileSelect,!1),$scope.$on(uiGridEditConstants.events.BEGIN_CELL_EDIT,function(){$elm[0].focus(),$elm[0].select(),$elm.on("blur",function(evt){$scope.$emit(uiGridEditConstants.events.END_CELL_EDIT)})})}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.expandable",["ui.grid"]);module.service("uiGridExpandableService",["gridUtil","$compile",function(gridUtil,$compile){var service={initializeGrid:function(grid){grid.expandable={},grid.expandable.expandedAll=!1,grid.options.enableExpandable=grid.options.enableExpandable!==!1,grid.options.expandableRowHeight=grid.options.expandableRowHeight||150,grid.options.expandableRowHeaderWidth=grid.options.expandableRowHeaderWidth||40,grid.options.enableExpandable&&!grid.options.expandableRowTemplate&&(gridUtil.logError("You have not set the expandableRowTemplate, disabling expandable module"),grid.options.enableExpandable=!1);var publicApi={events:{expandable:{rowExpandedBeforeStateChanged:function(scope,row){},rowExpandedStateChanged:function(scope,row){}}},methods:{expandable:{toggleRowExpansion:function(rowEntity){var row=grid.getRow(rowEntity);null!==row&&service.toggleRowExpansion(grid,row)},expandAllRows:function(){service.expandAllRows(grid)},collapseAllRows:function(){service.collapseAllRows(grid)},toggleAllRows:function(){service.toggleAllRows(grid)},expandRow:function(rowEntity){var row=grid.getRow(rowEntity);null===row||row.isExpanded||service.toggleRowExpansion(grid,row)},collapseRow:function(rowEntity){var row=grid.getRow(rowEntity);null!==row&&row.isExpanded&&service.toggleRowExpansion(grid,row)},getExpandedRows:function(){return service.getExpandedRows(grid).map(function(gridRow){return gridRow.entity})}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},toggleRowExpansion:function(grid,row){grid.api.expandable.raise.rowExpandedBeforeStateChanged(row),row.isExpanded=!row.isExpanded,angular.isUndefined(row.expandedRowHeight)&&(row.expandedRowHeight=grid.options.expandableRowHeight),row.isExpanded?row.height=row.grid.options.rowHeight+row.expandedRowHeight:(row.height=row.grid.options.rowHeight,grid.expandable.expandedAll=!1),grid.api.expandable.raise.rowExpandedStateChanged(row)},expandAllRows:function(grid,$scope){grid.renderContainers.body.visibleRowCache.forEach(function(row){row.isExpanded||service.toggleRowExpansion(grid,row)}),grid.expandable.expandedAll=!0,grid.queueGridRefresh()},collapseAllRows:function(grid){grid.renderContainers.body.visibleRowCache.forEach(function(row){row.isExpanded&&service.toggleRowExpansion(grid,row)}),grid.expandable.expandedAll=!1,grid.queueGridRefresh()},toggleAllRows:function(grid){grid.expandable.expandedAll?service.collapseAllRows(grid):service.expandAllRows(grid)},getExpandedRows:function(grid){return grid.rows.filter(function(row){return row.isExpanded})}};return service}]),module.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(uiGridExpandableService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridExpandableService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.options.enableExpandable&&uiGridCtrl.grid.options.enableExpandableRowHeader!==!1){var expandableRowHeaderColDef={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:uiGridCtrl.grid.options.expandableRowHeaderWidth||40};expandableRowHeaderColDef.cellTemplate=$templateCache.get("ui-grid/expandableRowHeader"),expandableRowHeaderColDef.headerCellTemplate=$templateCache.get("ui-grid/expandableTopRowHeader"),uiGridCtrl.grid.addRowHeaderColumn(expandableRowHeaderColDef,-90)}},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGrid",["uiGridExpandableService","$templateCache",function(uiGridExpandableService,$templateCache){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.api.core.on.renderingComplete($scope,function(){$scope.row&&$scope.row.grid&&$scope.row.grid.options&&$scope.row.grid.options.enableExpandable&&(uiGridCtrl.grid.parentRow=$scope.row)})},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(uiGridExpandableService,$timeout,$compile,uiGridConstants,gridUtil,$interval,$log){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){gridUtil.getTemplate($scope.grid.options.expandableRowTemplate).then(function(template){if($scope.grid.options.expandableRowScope){var expandableRowScope=$scope.grid.options.expandableRowScope;for(var property in expandableRowScope)expandableRowScope.hasOwnProperty(property)&&($scope[property]=expandableRowScope[property])}var expandedRowElement=$compile(template)($scope);$elm.append(expandedRowElement),$scope.row.expandedRendered=!0})},post:function($scope,$elm,$attrs,uiGridCtrl){$scope.$on("$destroy",function(){$scope.row.expandedRendered=!1})}}}}}]),module.directive("uiGridRow",["$compile","gridUtil","$templateCache",function($compile,gridUtil,$templateCache){return{priority:-200,scope:!1,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,controllers){$scope.grid.options.enableExpandable&&($scope.expandableRow={},$scope.expandableRow.shouldRenderExpand=function(){var ret="body"===$scope.colContainer.name&&$scope.grid.options.enableExpandable!==!1&&$scope.row.isExpanded&&(!$scope.grid.isScrollingVertically||$scope.row.expandedRendered);return ret},$scope.expandableRow.shouldRenderFiller=function(){var ret=$scope.row.isExpanded&&("body"!==$scope.colContainer.name||$scope.grid.isScrollingVertically&&!$scope.row.expandedRendered);return ret})},post:function($scope,$elm,$attrs,controllers){}}}}}]),module.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function($compile,gridUtil,$templateCache){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),expandedRowFillerElement=$templateCache.get("ui-grid/expandableScrollFiller"),expandedRowElement=$templateCache.get("ui-grid/expandableRow");return rowRepeatDiv.append(expandedRowElement),rowRepeatDiv.append(expandedRowFillerElement),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.exporter",["ui.grid"]);module.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),module.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function($q,uiGridExporterConstants,gridUtil,$compile,$interval,i18nService){var service={delay:100,initializeGrid:function(grid){grid.exporter={},this.defaultGridOptions(grid.options);var publicApi={events:{exporter:{}},methods:{exporter:{csvExport:function(rowTypes,colTypes){service.csvExport(grid,rowTypes,colTypes)},pdfExport:function(rowTypes,colTypes){service.pdfExport(grid,rowTypes,colTypes)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.addToGridMenu?service.addToMenu(grid):$interval(function(){grid.api.core.addToGridMenu&&service.addToMenu(grid)},this.delay,1)},defaultGridOptions:function(gridOptions){gridOptions.exporterSuppressMenu=gridOptions.exporterSuppressMenu===!0,gridOptions.exporterMenuLabel=gridOptions.exporterMenuLabel?gridOptions.exporterMenuLabel:"Export",gridOptions.exporterSuppressColumns=gridOptions.exporterSuppressColumns?gridOptions.exporterSuppressColumns:[],gridOptions.exporterCsvColumnSeparator=gridOptions.exporterCsvColumnSeparator?gridOptions.exporterCsvColumnSeparator:",",gridOptions.exporterCsvFilename=gridOptions.exporterCsvFilename?gridOptions.exporterCsvFilename:"download.csv",gridOptions.exporterPdfFilename=gridOptions.exporterPdfFilename?gridOptions.exporterPdfFilename:"download.pdf",gridOptions.exporterOlderExcelCompatibility=gridOptions.exporterOlderExcelCompatibility===!0,gridOptions.exporterPdfDefaultStyle=gridOptions.exporterPdfDefaultStyle?gridOptions.exporterPdfDefaultStyle:{fontSize:11},gridOptions.exporterPdfTableStyle=gridOptions.exporterPdfTableStyle?gridOptions.exporterPdfTableStyle:{margin:[0,5,0,15]},gridOptions.exporterPdfTableHeaderStyle=gridOptions.exporterPdfTableHeaderStyle?gridOptions.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},gridOptions.exporterPdfHeader=gridOptions.exporterPdfHeader?gridOptions.exporterPdfHeader:null,gridOptions.exporterPdfFooter=gridOptions.exporterPdfFooter?gridOptions.exporterPdfFooter:null,gridOptions.exporterPdfOrientation=gridOptions.exporterPdfOrientation?gridOptions.exporterPdfOrientation:"landscape",gridOptions.exporterPdfPageSize=gridOptions.exporterPdfPageSize?gridOptions.exporterPdfPageSize:"A4",gridOptions.exporterPdfMaxGridWidth=gridOptions.exporterPdfMaxGridWidth?gridOptions.exporterPdfMaxGridWidth:720,
gridOptions.exporterMenuAllData=void 0===gridOptions.exporterMenuAllData||gridOptions.exporterMenuAllData,gridOptions.exporterMenuVisibleData=void 0===gridOptions.exporterMenuVisibleData||gridOptions.exporterMenuVisibleData,gridOptions.exporterMenuSelectedData=void 0===gridOptions.exporterMenuSelectedData||gridOptions.exporterMenuSelectedData,gridOptions.exporterMenuCsv=void 0===gridOptions.exporterMenuCsv||gridOptions.exporterMenuCsv,gridOptions.exporterMenuPdf=void 0===gridOptions.exporterMenuPdf||gridOptions.exporterMenuPdf,gridOptions.exporterPdfCustomFormatter=gridOptions.exporterPdfCustomFormatter&&"function"==typeof gridOptions.exporterPdfCustomFormatter?gridOptions.exporterPdfCustomFormatter:function(docDef){return docDef},gridOptions.exporterHeaderFilterUseName=gridOptions.exporterHeaderFilterUseName===!0,gridOptions.exporterFieldCallback=gridOptions.exporterFieldCallback?gridOptions.exporterFieldCallback:function(grid,row,col,value){return value},gridOptions.exporterAllDataFn=gridOptions.exporterAllDataFn?gridOptions.exporterAllDataFn:null,null==gridOptions.exporterAllDataFn&&gridOptions.exporterAllDataPromise&&(gridOptions.exporterAllDataFn=gridOptions.exporterAllDataPromise)},addToMenu:function(grid){grid.api.core.addToGridMenu(grid,[{title:i18nService.getSafeText("gridMenu.exporterAllAsCsv"),action:function($event){this.grid.api.exporter.csvExport(uiGridExporterConstants.ALL,uiGridExporterConstants.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:i18nService.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function($event){this.grid.api.exporter.csvExport(uiGridExporterConstants.VISIBLE,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuVisibleData},order:201},{title:i18nService.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function($event){this.grid.api.exporter.csvExport(uiGridExporterConstants.SELECTED,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:i18nService.getSafeText("gridMenu.exporterAllAsPdf"),action:function($event){this.grid.api.exporter.pdfExport(uiGridExporterConstants.ALL,uiGridExporterConstants.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:i18nService.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function($event){this.grid.api.exporter.pdfExport(uiGridExporterConstants.VISIBLE,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuVisibleData},order:204},{title:i18nService.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function($event){this.grid.api.exporter.pdfExport(uiGridExporterConstants.SELECTED,uiGridExporterConstants.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuSelectedData&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(grid,rowTypes,colTypes){var self=this;this.loadAllDataIfNeeded(grid,rowTypes,colTypes).then(function(){var exportColumnHeaders=grid.options.showHeader?self.getColumnHeaders(grid,colTypes):[],exportData=self.getData(grid,rowTypes,colTypes),csvContent=self.formatAsCsv(exportColumnHeaders,exportData,grid.options.exporterCsvColumnSeparator);self.downloadFile(grid.options.exporterCsvFilename,csvContent,grid.options.exporterCsvColumnSeparator,grid.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(grid,rowTypes,colTypes){if(rowTypes===uiGridExporterConstants.ALL&&grid.rows.length!==grid.options.totalItems&&grid.options.exporterAllDataFn)return grid.options.exporterAllDataFn().then(function(){grid.modifyRows(grid.options.data)});var deferred=$q.defer();return deferred.resolve(),deferred.promise},getColumnHeaders:function(grid,colTypes){var columns,headers=[];if(colTypes===uiGridExporterConstants.ALL)columns=grid.columns;else{var leftColumns=grid.renderContainers.left?grid.renderContainers.left.visibleColumnCache.filter(function(column){return column.visible}):[],bodyColumns=grid.renderContainers.body?grid.renderContainers.body.visibleColumnCache.filter(function(column){return column.visible}):[],rightColumns=grid.renderContainers.right?grid.renderContainers.right.visibleColumnCache.filter(function(column){return column.visible}):[];columns=leftColumns.concat(bodyColumns,rightColumns)}return columns.forEach(function(gridCol,index){gridCol.colDef.exporterSuppressExport!==!0&&grid.options.exporterSuppressColumns.indexOf(gridCol.name)===-1&&headers.push({name:gridCol.field,displayName:grid.options.exporterHeaderFilter?grid.options.exporterHeaderFilterUseName?grid.options.exporterHeaderFilter(gridCol.name):grid.options.exporterHeaderFilter(gridCol.displayName):gridCol.displayName,width:gridCol.drawnWidth?gridCol.drawnWidth:gridCol.width,align:"number"===gridCol.colDef.type?"right":"left"})}),headers},getData:function(grid,rowTypes,colTypes,applyCellFilters){var rows,columns,data=[];switch(rowTypes){case uiGridExporterConstants.ALL:rows=grid.rows;break;case uiGridExporterConstants.VISIBLE:rows=grid.getVisibleRows();break;case uiGridExporterConstants.SELECTED:grid.api.selection?rows=grid.api.selection.getSelectedGridRows():gridUtil.logError("selection feature must be enabled to allow selected rows to be exported")}if(colTypes===uiGridExporterConstants.ALL)columns=grid.columns;else{var leftColumns=grid.renderContainers.left?grid.renderContainers.left.visibleColumnCache.filter(function(column){return column.visible}):[],bodyColumns=grid.renderContainers.body?grid.renderContainers.body.visibleColumnCache.filter(function(column){return column.visible}):[],rightColumns=grid.renderContainers.right?grid.renderContainers.right.visibleColumnCache.filter(function(column){return column.visible}):[];columns=leftColumns.concat(bodyColumns,rightColumns)}return rows.forEach(function(row,index){if(row.exporterEnableExporting!==!1){var extractedRow=[];columns.forEach(function(gridCol,index){if((gridCol.visible||colTypes===uiGridExporterConstants.ALL)&&gridCol.colDef.exporterSuppressExport!==!0&&grid.options.exporterSuppressColumns.indexOf(gridCol.name)===-1){var cellValue=applyCellFilters?grid.getCellDisplayValue(row,gridCol):grid.getCellValue(row,gridCol),extractedField={value:grid.options.exporterFieldCallback(grid,row,gridCol,cellValue)};gridCol.colDef.exporterPdfAlign&&(extractedField.alignment=gridCol.colDef.exporterPdfAlign),extractedRow.push(extractedField)}}),data.push(extractedRow)}}),data},formatAsCsv:function(exportColumnHeaders,exportData,separator){var self=this,bareHeaders=exportColumnHeaders.map(function(header){return{value:header.displayName}}),csv=bareHeaders.length>0?self.formatRowAsCsv(this,separator)(bareHeaders)+"\n":"";return csv+=exportData.map(this.formatRowAsCsv(this,separator)).join("\n")},formatRowAsCsv:function(exporter,separator){return function(row){return row.map(exporter.formatFieldAsCsv).join(separator)}},formatFieldAsCsv:function(field){return null==field.value?"":"number"==typeof field.value?field.value:"boolean"==typeof field.value?field.value?"TRUE":"FALSE":"string"==typeof field.value?'"'+field.value.replace(/"/g,'""')+'"':JSON.stringify(field.value)},isIE:function(){var match=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),isIE=!1;return match!==-1&&(isIE=!0),isIE},downloadFile:function(fileName,csvContent,columnSeparator,exporterOlderExcelCompatibility){var rawFile,D=document,a=D.createElement("a"),strMimeType="application/octet-stream;charset=utf-8",ieVersion=this.isIE();if(navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([exporterOlderExcelCompatibility?"\ufeff":"",csvContent],{type:strMimeType}),fileName);if(ieVersion){var frame=D.createElement("iframe");return document.body.appendChild(frame),frame.contentWindow.document.open("text/html","replace"),frame.contentWindow.document.write("sep="+columnSeparator+"\r\n"+csvContent),frame.contentWindow.document.close(),frame.contentWindow.focus(),frame.contentWindow.document.execCommand("SaveAs",!0,fileName),document.body.removeChild(frame),!0}if("download"in a){var blob=new Blob([exporterOlderExcelCompatibility?"\ufeff":"",csvContent],{type:strMimeType});rawFile=URL.createObjectURL(blob),a.setAttribute("download",fileName)}else rawFile="data:"+strMimeType+","+encodeURIComponent(csvContent),a.setAttribute("target","_blank");a.href=rawFile,a.setAttribute("style","display:none;"),D.body.appendChild(a),setTimeout(function(){if(a.click)a.click();else if(document.createEvent){var eventObj=document.createEvent("MouseEvents");eventObj.initEvent("click",!0,!0),a.dispatchEvent(eventObj)}D.body.removeChild(a)},this.delay)},pdfExport:function(grid,rowTypes,colTypes){var self=this;this.loadAllDataIfNeeded(grid,rowTypes,colTypes).then(function(){var exportColumnHeaders=self.getColumnHeaders(grid,colTypes),exportData=self.getData(grid,rowTypes,colTypes),docDefinition=self.prepareAsPdf(grid,exportColumnHeaders,exportData);self.isIE()||navigator.appVersion.indexOf("Edge")!==-1?self.downloadPDF(grid.options.exporterPdfFilename,docDefinition):pdfMake.createPdf(docDefinition).open()})},downloadPDF:function(fileName,docDefinition){var ieVersion,D=document;D.createElement("a");ieVersion=this.isIE();var blob,doc=pdfMake.createPdf(docDefinition);doc.getBuffer(function(buffer){if(blob=new Blob([buffer]),navigator.msSaveBlob)return navigator.msSaveBlob(blob,fileName);if(ieVersion){var frame=D.createElement("iframe");return document.body.appendChild(frame),frame.contentWindow.document.open("text/html","replace"),frame.contentWindow.document.write(blob),frame.contentWindow.document.close(),frame.contentWindow.focus(),frame.contentWindow.document.execCommand("SaveAs",!0,fileName),document.body.removeChild(frame),!0}})},prepareAsPdf:function(grid,exportColumnHeaders,exportData){var headerWidths=this.calculatePdfHeaderWidths(grid,exportColumnHeaders),headerColumns=exportColumnHeaders.map(function(header){return{text:header.displayName,style:"tableHeader"}}),stringData=exportData.map(this.formatRowAsPdf(this)),allData=[headerColumns].concat(stringData),docDefinition={pageOrientation:grid.options.exporterPdfOrientation,pageSize:grid.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:headerWidths,body:allData}}],styles:{tableStyle:grid.options.exporterPdfTableStyle,tableHeader:grid.options.exporterPdfTableHeaderStyle},defaultStyle:grid.options.exporterPdfDefaultStyle};return grid.options.exporterPdfLayout&&(docDefinition.layout=grid.options.exporterPdfLayout),grid.options.exporterPdfHeader&&(docDefinition.header=grid.options.exporterPdfHeader),grid.options.exporterPdfFooter&&(docDefinition.footer=grid.options.exporterPdfFooter),grid.options.exporterPdfCustomFormatter&&(docDefinition=grid.options.exporterPdfCustomFormatter(docDefinition)),docDefinition},calculatePdfHeaderWidths:function(grid,exportHeaders){var baseGridWidth=0;exportHeaders.forEach(function(value){"number"==typeof value.width&&(baseGridWidth+=value.width)});var extraColumns=0;exportHeaders.forEach(function(value){if("*"===value.width&&(extraColumns+=100),"string"==typeof value.width&&value.width.match(/(\d)*%/)){var percent=parseInt(value.width.match(/(\d)*%/)[0]);value.width=baseGridWidth*percent/100,extraColumns+=value.width}});var gridWidth=baseGridWidth+extraColumns;return exportHeaders.map(function(header){return"*"===header.width?header.width:header.width*grid.options.exporterPdfMaxGridWidth/gridWidth})},formatRowAsPdf:function(exporter){return function(row){return row.map(exporter.formatFieldAsPdfString)}},formatFieldAsPdfString:function(field){var returnVal;return returnVal=null==field.value?"":"number"==typeof field.value?field.value.toString():"boolean"==typeof field.value?field.value?"TRUE":"FALSE":"string"==typeof field.value?field.value.replace(/"/g,'""'):JSON.stringify(field.value).replace(/^"/,"").replace(/"$/,""),field.alignment&&"string"==typeof field.alignment&&(returnVal={text:returnVal,alignment:field.alignment}),returnVal}};return service}]),module.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(uiGridExporterConstants,uiGridExporterService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridExporterService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.exporter.$scope=$scope}}}])}(),function(){"use strict";var module=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);module.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),module.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function($q,uiGridGroupingConstants,gridUtil,rowSorter,GridRow,gridClassFactory,i18nService,uiGridConstants,uiGridTreeBaseService){var service={initializeGrid:function(grid,$scope){uiGridTreeBaseService.initializeGrid(grid,$scope),grid.grouping={},grid.grouping.groupHeaderCache={},service.defaultGridOptions(grid.options),grid.registerRowsProcessor(service.groupRows,400),grid.registerColumnBuilder(service.groupingColumnBuilder),grid.registerColumnsProcessor(service.groupingColumnProcessor,400);var publicApi={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(getExpanded){var grouping=service.getGrouping(grid);return grouping.grouping.forEach(function(group){group.colName=group.col.name,delete group.col}),grouping.aggregations.forEach(function(aggregation){aggregation.colName=aggregation.col.name,delete aggregation.col}),grouping.aggregations=grouping.aggregations.filter(function(aggregation){return!aggregation.aggregation.source||"grouping"!==aggregation.aggregation.source}),getExpanded&&(grouping.rowExpandedStates=service.getRowExpandedStates(grid.grouping.groupingHeaderCache)),grouping},setGrouping:function(config){service.setGrouping(grid,config)},groupColumn:function(columnName){var column=grid.getColumn(columnName);service.groupColumn(grid,column)},ungroupColumn:function(columnName){var column=grid.getColumn(columnName);service.ungroupColumn(grid,column)},clearGrouping:function(){service.clearGrouping(grid)},aggregateColumn:function(columnName,aggregationDef,aggregationLabel){var column=grid.getColumn(columnName);service.aggregateColumn(grid,column,aggregationDef,aggregationLabel)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.on.sortChanged($scope,service.tidyPriorities)},defaultGridOptions:function(gridOptions){gridOptions.enableGrouping=gridOptions.enableGrouping!==!1,gridOptions.groupingShowCounts=gridOptions.groupingShowCounts!==!1,gridOptions.groupingNullLabel="undefined"==typeof gridOptions.groupingNullLabel?"Null":gridOptions.groupingNullLabel,gridOptions.enableGroupHeaderSelection=gridOptions.enableGroupHeaderSelection===!0},groupingColumnBuilder:function(colDef,col,gridOptions){if(colDef.enableGrouping!==!1){"undefined"==typeof col.grouping&&"undefined"!=typeof colDef.grouping?(col.grouping=angular.copy(colDef.grouping),"undefined"!=typeof col.grouping.groupPriority&&col.grouping.groupPriority>-1&&(col.treeAggregationFn=uiGridTreeBaseService.nativeAggregations()[uiGridGroupingConstants.aggregation.COUNT].aggregationFn,col.treeAggregationFinalizerFn=service.groupedFinalizerFn)):"undefined"==typeof col.grouping&&(col.grouping={}),"undefined"!=typeof col.grouping&&"undefined"!=typeof col.grouping.groupPriority&&col.grouping.groupPriority>=0&&(col.suppressRemoveSort=!0);var groupColumn={name:"ui.grid.grouping.group",title:i18nService.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return"undefined"==typeof this.context.col.grouping||"undefined"==typeof this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){service.groupColumn(this.context.col.grid,this.context.col)}},ungroupColumn={name:"ui.grid.grouping.ungroup",title:i18nService.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return"undefined"!=typeof this.context.col.grouping&&"undefined"!=typeof this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){service.ungroupColumn(this.context.col.grid,this.context.col)}},aggregateRemove={name:"ui.grid.grouping.aggregateRemove",title:i18nService.get().grouping.aggregate_remove,shown:function(){return"undefined"!=typeof this.context.col.treeAggregationFn},action:function(){service.aggregateColumn(this.context.col.grid,this.context.col,null)}},addAggregationMenu=function(type,title){title=title||i18nService.get().grouping["aggregate_"+type]||type;var menuItem={name:"ui.grid.grouping.aggregate"+type,title:title,shown:function(){return"undefined"==typeof this.context.col.treeAggregation||"undefined"==typeof this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==type},action:function(){service.aggregateColumn(this.context.col.grid,this.context.col,type)}};gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.aggregate"+type)||col.menuItems.push(menuItem)};col.colDef.groupingShowGroupingMenu!==!1&&(gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.group")||col.menuItems.push(groupColumn),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.ungroup")||col.menuItems.push(ungroupColumn)),col.colDef.groupingShowAggregationMenu!==!1&&(angular.forEach(uiGridTreeBaseService.nativeAggregations(),function(aggregationDef,name){addAggregationMenu(name)}),angular.forEach(gridOptions.treeCustomAggregations,function(aggregationDef,name){addAggregationMenu(name,aggregationDef.menuTitle)}),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.grouping.aggregateRemove")||col.menuItems.push(aggregateRemove))}},groupingColumnProcessor:function(columns,rows){return columns=service.moveGroupColumns(this,columns,rows)},groupedFinalizerFn:function(aggregation){var col=this;"undefined"!=typeof aggregation.groupVal?(aggregation.rendered=aggregation.groupVal,col.grid.options.groupingShowCounts&&"date"!==col.colDef.type&&(aggregation.rendered+=" ("+aggregation.value+")")):aggregation.rendered=null},moveGroupColumns:function(grid,columns,rows){return grid.options.moveGroupColumns===!1?columns:(columns.forEach(function(column,index){column.groupingPosition=index}),columns.sort(function(a,b){var a_group,b_group;return a_group=a.isRowHeader?a.headerPriority:"undefined"==typeof a.grouping||"undefined"==typeof a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,b_group=b.isRowHeader?b.headerPriority:"undefined"==typeof b.grouping||"undefined"==typeof b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==a_group&&null===b_group?-1:null!==b_group&&null===a_group?1:null!==a_group&&null!==b_group?a_group-b_group:a.groupingPosition-b.groupingPosition}),columns.forEach(function(column,index){delete column.groupingPosition}),columns)},groupColumn:function(grid,column){"undefined"==typeof column.grouping&&(column.grouping={});var existingGrouping=service.getGrouping(grid);column.grouping.groupPriority=existingGrouping.grouping.length,column.sort?"undefined"!=typeof column.sort.direction&&null!==column.sort.direction||(column.sort.direction=uiGridConstants.ASC):column.sort={direction:uiGridConstants.ASC},column.treeAggregation={type:uiGridGroupingConstants.aggregation.COUNT,source:"grouping"},column.treeAggregationFn=uiGridTreeBaseService.nativeAggregations()[uiGridGroupingConstants.aggregation.COUNT].aggregationFn,column.treeAggregationFinalizerFn=service.groupedFinalizerFn,grid.api.grouping.raise.groupingChanged(column),grid.api.core.raise.sortChanged(grid,grid.getColumnSorting()),grid.queueGridRefresh()},ungroupColumn:function(grid,column){"undefined"!=typeof column.grouping&&(delete column.grouping.groupPriority,delete column.treeAggregation,delete column.customTreeAggregationFinalizer,service.tidyPriorities(grid),grid.api.grouping.raise.groupingChanged(column),grid.queueGridRefresh())},aggregateColumn:function(grid,column,aggregationType){"undefined"!=typeof column.grouping&&"undefined"!=typeof column.grouping.groupPriority&&column.grouping.groupPriority>=0&&service.ungroupColumn(grid,column);var aggregationDef={};"undefined"!=typeof grid.options.treeCustomAggregations[aggregationType]?aggregationDef=grid.options.treeCustomAggregations[aggregationType]:"undefined"!=typeof uiGridTreeBaseService.nativeAggregations()[aggregationType]&&(aggregationDef=uiGridTreeBaseService.nativeAggregations()[aggregationType]),column.treeAggregation={type:aggregationType,label:i18nService.get().aggregation[aggregationDef.label]||aggregationDef.label},column.treeAggregationFn=aggregationDef.aggregationFn,column.treeAggregationFinalizerFn=aggregationDef.finalizerFn,grid.api.grouping.raise.aggregationChanged(column),grid.queueGridRefresh()},setGrouping:function(grid,config){"undefined"!=typeof config&&(service.clearGrouping(grid),config.grouping&&config.grouping.length&&config.grouping.length>0&&config.grouping.forEach(function(group){var col=grid.getColumn(group.colName);col&&service.groupColumn(grid,col)}),config.aggregations&&config.aggregations.length&&config.aggregations.forEach(function(aggregation){var col=grid.getColumn(aggregation.colName);col&&service.aggregateColumn(grid,col,aggregation.aggregation.type)}),config.rowExpandedStates&&service.applyRowExpandedStates(grid.grouping.groupingHeaderCache,config.rowExpandedStates))},clearGrouping:function(grid){var currentGrouping=service.getGrouping(grid);currentGrouping.grouping.length>0&&currentGrouping.grouping.forEach(function(group){group.col||(group.col=grid.getColumn(group.colName)),service.ungroupColumn(grid,group.col)}),currentGrouping.aggregations.length>0&&currentGrouping.aggregations.forEach(function(aggregation){aggregation.col||(aggregation.col=grid.getColumn(aggregation.colName)),service.aggregateColumn(grid,aggregation.col,null)})},tidyPriorities:function(grid){"undefined"!=typeof grid&&"undefined"==typeof grid.grid||"undefined"==typeof this.grid||(grid=this.grid);var groupArray=[],sortArray=[];grid.columns.forEach(function(column,index){"undefined"!=typeof column.grouping&&"undefined"!=typeof column.grouping.groupPriority&&column.grouping.groupPriority>=0?groupArray.push(column):"undefined"!=typeof column.sort&&"undefined"!=typeof column.sort.priority&&column.sort.priority>=0&&sortArray.push(column)}),groupArray.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),groupArray.forEach(function(column,index){column.grouping.groupPriority=index,column.suppressRemoveSort=!0,"undefined"==typeof column.sort&&(column.sort={}),column.sort.priority=index});var i=groupArray.length;sortArray.sort(function(a,b){return a.sort.priority-b.sort.priority}),sortArray.forEach(function(column,index){column.sort.priority=i,column.suppressRemoveSort=column.colDef.suppressRemoveSort,i++})},groupRows:function(renderableRows){if(0===renderableRows.length)return renderableRows;var grid=this;grid.grouping.oldGroupingHeaderCache=grid.grouping.groupingHeaderCache||{},grid.grouping.groupingHeaderCache={};for(var processingState=service.initialiseProcessingState(grid),updateProcessingState=function(groupFieldState,stateIndex){var fieldValue=grid.getCellValue(row,groupFieldState.col);groupFieldState.initialised&&0===rowSorter.getSortFn(grid,groupFieldState.col,renderableRows)(fieldValue,groupFieldState.currentValue)||(service.insertGroupHeader(grid,renderableRows,i,processingState,stateIndex),i++)},i=0;i<renderableRows.length;i++){var row=renderableRows[i];row.visible&&processingState.forEach(updateProcessingState)}return delete grid.grouping.oldGroupingHeaderCache,renderableRows},initialiseProcessingState:function(grid){var processingState=[],columnSettings=service.getGrouping(grid);return columnSettings.grouping.forEach(function(groupItem,index){processingState.push({fieldName:groupItem.field,col:groupItem.col,initialised:!1,currentValue:null,currentRow:null})}),processingState},getGrouping:function(grid){var groupArray=[],aggregateArray=[];return grid.columns.forEach(function(column,columnIndex){column.grouping&&"undefined"!=typeof column.grouping.groupPriority&&column.grouping.groupPriority>=0&&groupArray.push({field:column.field,col:column,groupPriority:column.grouping.groupPriority,grouping:column.grouping}),column.treeAggregation&&column.treeAggregation.type&&aggregateArray.push({field:column.field,col:column,aggregation:column.treeAggregation})}),groupArray.sort(function(a,b){return a.groupPriority-b.groupPriority}),groupArray.forEach(function(group,index){group.grouping.groupPriority=index,group.groupPriority=index,delete group.grouping}),{grouping:groupArray,aggregations:aggregateArray}},insertGroupHeader:function(grid,renderableRows,rowIndex,processingState,stateIndex){var col=(processingState[stateIndex].fieldName,processingState[stateIndex].col),newValue=grid.getCellValue(renderableRows[rowIndex],col),newDisplayValue=newValue;"undefined"!=typeof newValue&&null!==newValue||(newDisplayValue=grid.options.groupingNullLabel);for(var getKeyAsValueForCacheMap=function(key){return angular.isObject(key)?JSON.stringify(key):key},cacheItem=grid.grouping.oldGroupingHeaderCache,i=0;i<stateIndex;i++)cacheItem&&cacheItem[getKeyAsValueForCacheMap(processingState[i].currentValue)]&&(cacheItem=cacheItem[getKeyAsValueForCacheMap(processingState[i].currentValue)].children);var headerRow;for(cacheItem&&cacheItem[getKeyAsValueForCacheMap(newValue)]?(headerRow=cacheItem[getKeyAsValueForCacheMap(newValue)].row,headerRow.entity={}):(headerRow=new GridRow({},null,grid),gridClassFactory.rowTemplateAssigner.call(grid,headerRow)),headerRow.entity["$$"+processingState[stateIndex].col.uid]={groupVal:newDisplayValue},headerRow.treeLevel=stateIndex,headerRow.groupHeader=!0,headerRow.internalRow=!0,headerRow.enableCellEdit=!1,headerRow.enableSelection=grid.options.enableGroupHeaderSelection,processingState[stateIndex].initialised=!0,processingState[stateIndex].currentValue=newValue,processingState[stateIndex].currentRow=headerRow,service.finaliseProcessingState(processingState,stateIndex+1),renderableRows.splice(rowIndex,0,headerRow),cacheItem=grid.grouping.groupingHeaderCache,i=0;i<stateIndex;i++)cacheItem=cacheItem[getKeyAsValueForCacheMap(processingState[i].currentValue)].children;cacheItem[getKeyAsValueForCacheMap(newValue)]={row:headerRow,children:{}}},finaliseProcessingState:function(processingState,stateIndex){for(var i=stateIndex;i<processingState.length;i++)processingState[i].initialised=!1,processingState[i].currentRow=null,processingState[i].currentValue=null},getRowExpandedStates:function(treeChildren){if("undefined"==typeof treeChildren)return{};var newChildren={};return angular.forEach(treeChildren,function(value,key){newChildren[key]={state:value.row.treeNode.state},value.children?newChildren[key].children=service.getRowExpandedStates(value.children):newChildren[key].children={}}),newChildren},applyRowExpandedStates:function(currentNode,expandedStates){"undefined"!=typeof expandedStates&&angular.forEach(expandedStates,function(value,key){currentNode[key]&&(currentNode[key].row.treeNode.state=value.state,value.children&&currentNode[key].children&&service.applyRowExpandedStates(currentNode[key].children,value.children))})}};return service}]),module.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(uiGridGroupingConstants,uiGridGroupingService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.options.enableGrouping!==!1&&uiGridGroupingService.initializeGrid(uiGridCtrl.grid,$scope)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.importer",["ui.grid"]);module.constant("uiGridImporterConstants",{featureName:"importer"}),module.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function($q,uiGridConstants,uiGridImporterConstants,gridUtil,$compile,$interval,i18nService,$window){var service={initializeGrid:function($scope,grid){grid.importer={$scope:$scope},this.defaultGridOptions(grid.options);var publicApi={events:{importer:{}},methods:{importer:{importFile:function(fileObject){service.importThisFile(grid,fileObject)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.options.enableImporter&&grid.options.importerShowMenu&&(grid.api.core.addToGridMenu?service.addToMenu(grid):$interval(function(){grid.api.core.addToGridMenu&&service.addToMenu(grid)},100,1))},defaultGridOptions:function(gridOptions){gridOptions.enableImporter||void 0===gridOptions.enableImporter?$window.hasOwnProperty("File")&&$window.hasOwnProperty("FileReader")&&$window.hasOwnProperty("FileList")&&$window.hasOwnProperty("Blob")?gridOptions.enableImporter=!0:(gridUtil.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),gridOptions.enableImporter=!1):gridOptions.enableImporter=!1,gridOptions.importerProcessHeaders=gridOptions.importerProcessHeaders||service.processHeaders,gridOptions.importerHeaderFilter=gridOptions.importerHeaderFilter||function(displayName){return displayName},gridOptions.importerErrorCallback&&"function"==typeof gridOptions.importerErrorCallback||delete gridOptions.importerErrorCallback,gridOptions.enableImporter!==!0||gridOptions.importerDataAddCallback||(gridUtil.logError("You have not set an importerDataAddCallback, importer is disabled"),gridOptions.enableImporter=!1),gridOptions.importerShowMenu=gridOptions.importerShowMenu!==!1,gridOptions.importerObjectCallback=gridOptions.importerObjectCallback||function(grid,newObject){return newObject}},addToMenu:function(grid){grid.api.core.addToGridMenu(grid,[{title:i18nService.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function($event){this.grid.api.importer.importAFile(grid)},order:151}])},importThisFile:function(grid,fileObject){if(!fileObject)return void gridUtil.logError("No file object provided to importThisFile, should be impossible, aborting");var reader=new FileReader;switch(fileObject.type){case"application/json":reader.onload=service.importJsonClosure(grid);break;default:reader.onload=service.importCsvClosure(grid)}reader.readAsText(fileObject)},importJsonClosure:function(grid){return function(importFile){var newObject,newObjects=[],importArray=service.parseJson(grid,importFile);null!==importArray&&(importArray.forEach(function(value,index){newObject=service.newObject(grid),angular.extend(newObject,value),newObject=grid.options.importerObjectCallback(grid,newObject),newObjects.push(newObject)}),service.addObjects(grid,newObjects))}},parseJson:function(grid,importFile){var loadedObjects;try{loadedObjects=JSON.parse(importFile.target.result)}catch(e){return void service.alertError(grid,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",importFile.target.result)}return Array.isArray(loadedObjects)?loadedObjects:(service.alertError(grid,"importer.jsonNotarray","Import failed, file is not an array, file was: ",importFile.target.result),[])},importCsvClosure:function(grid){
return function(importFile){var importArray=service.parseCsv(importFile);if(!importArray||importArray.length<1)return void service.alertError(grid,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",importFile.target.result);var newObjects=service.createCsvObjects(grid,importArray);return newObjects&&0!==newObjects.length?void service.addObjects(grid,newObjects):void service.alertError(grid,"importer.noObjects","Objects were not able to be derived, content was: ",importFile.target.result)}},parseCsv:function(importFile){var csv=importFile.target.result;return CSV.parse(csv)},createCsvObjects:function(grid,importArray){var headerMapping=grid.options.importerProcessHeaders(grid,importArray.shift());if(!headerMapping||0===headerMapping.length)return service.alertError(grid,"importer.noHeaders","Column names could not be derived, content was: ",importArray),[];var newObject,newObjects=[];return importArray.forEach(function(row,index){newObject=service.newObject(grid),null!==row&&row.forEach(function(field,index){null!==headerMapping[index]&&(newObject[headerMapping[index]]=field)}),newObject=grid.options.importerObjectCallback(grid,newObject),newObjects.push(newObject)}),newObjects},processHeaders:function(grid,headerRow){var headers=[];if(grid.options.columnDefs&&0!==grid.options.columnDefs.length){var lookupHash=service.flattenColumnDefs(grid,grid.options.columnDefs);return headerRow.forEach(function(value,index){lookupHash[value]?headers.push(lookupHash[value]):lookupHash[value.toLowerCase()]?headers.push(lookupHash[value.toLowerCase()]):headers.push(null)}),headers}return headerRow.forEach(function(value,index){headers.push(value.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),headers},flattenColumnDefs:function(grid,columnDefs){var flattenedHash={};return columnDefs.forEach(function(columnDef,index){columnDef.name&&(flattenedHash[columnDef.name]=columnDef.field||columnDef.name,flattenedHash[columnDef.name.toLowerCase()]=columnDef.field||columnDef.name),columnDef.field&&(flattenedHash[columnDef.field]=columnDef.field||columnDef.name,flattenedHash[columnDef.field.toLowerCase()]=columnDef.field||columnDef.name),columnDef.displayName&&(flattenedHash[columnDef.displayName]=columnDef.field||columnDef.name,flattenedHash[columnDef.displayName.toLowerCase()]=columnDef.field||columnDef.name),columnDef.displayName&&grid.options.importerHeaderFilter&&(flattenedHash[grid.options.importerHeaderFilter(columnDef.displayName)]=columnDef.field||columnDef.name,flattenedHash[grid.options.importerHeaderFilter(columnDef.displayName).toLowerCase()]=columnDef.field||columnDef.name)}),flattenedHash},addObjects:function(grid,newObjects,$scope){if(grid.api.rowEdit){var dataChangeDereg=grid.registerDataChangeCallback(function(){grid.api.rowEdit.setRowsDirty(newObjects),dataChangeDereg()},[uiGridConstants.dataChange.ROW]);grid.importer.$scope.$on("$destroy",dataChangeDereg)}grid.importer.$scope.$apply(grid.options.importerDataAddCallback(grid,newObjects))},newObject:function(grid){return"undefined"!=typeof grid.options&&"undefined"!=typeof grid.options.importerNewObject?new grid.options.importerNewObject:{}},alertError:function(grid,alertI18nToken,consoleMessage,context){grid.options.importerErrorCallback?grid.options.importerErrorCallback(grid,alertI18nToken,consoleMessage,context):($window.alert(i18nService.getSafeText(alertI18nToken)),gridUtil.logError(consoleMessage+context))}};return service}]),module.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(uiGridImporterConstants,uiGridImporterService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridImporterService.initializeGrid($scope,uiGridCtrl.grid)}}}]),module.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(uiGridImporterConstants,uiGridImporterService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function($scope,$elm,$attrs,uiGridCtrl){var handleFileSelect=function(event){var target=event.srcElement||event.target;if(target&&target.files&&1===target.files.length){var fileObject=target.files[0];uiGridImporterService.importThisFile(grid,fileObject),target.form.reset()}},fileChooser=$elm[0].querySelectorAll(".ui-grid-importer-file-chooser"),grid=uiGridCtrl.grid;1!==fileChooser.length?gridUtil.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):fileChooser[0].addEventListener("change",handleFileSelect,!1)}}}])}(),function(){"use strict";var module=angular.module("ui.grid.infiniteScroll",["ui.grid"]);module.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(gridUtil,$compile,$timeout,uiGridConstants,ScrollEvent,$q){var service={initializeGrid:function(grid,$scope){if(service.defaultGridOptions(grid.options),grid.options.enableInfiniteScroll){grid.infiniteScroll={dataLoading:!1},service.setScrollDirections(grid,grid.options.infiniteScrollUp,grid.options.infiniteScrollDown),grid.api.core.on.scrollEnd($scope,service.handleScroll);var publicApi={events:{infiniteScroll:{needLoadMoreData:function($scope,fn){},needLoadMoreDataTop:function($scope,fn){}}},methods:{infiniteScroll:{dataLoaded:function(scrollUp,scrollDown){service.setScrollDirections(grid,scrollUp,scrollDown);var promise=service.adjustScroll(grid).then(function(){grid.infiniteScroll.dataLoading=!1});return promise},resetScroll:function(scrollUp,scrollDown){return service.setScrollDirections(grid,scrollUp,scrollDown),service.adjustInfiniteScrollPosition(grid,0)},saveScrollPercentage:function(){grid.infiniteScroll.prevScrollTop=grid.renderContainers.body.prevScrollTop,grid.infiniteScroll.previousVisibleRows=grid.getVisibleRowCount()},dataRemovedTop:function(scrollUp,scrollDown){service.dataRemovedTop(grid,scrollUp,scrollDown)},dataRemovedBottom:function(scrollUp,scrollDown){service.dataRemovedBottom(grid,scrollUp,scrollDown)},setScrollDirections:function(scrollUp,scrollDown){service.setScrollDirections(grid,scrollUp,scrollDown)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)}},defaultGridOptions:function(gridOptions){gridOptions.enableInfiniteScroll=gridOptions.enableInfiniteScroll!==!1,gridOptions.infiniteScrollRowsFromEnd=gridOptions.infiniteScrollRowsFromEnd||20,gridOptions.infiniteScrollUp=gridOptions.infiniteScrollUp===!0,gridOptions.infiniteScrollDown=gridOptions.infiniteScrollDown!==!1},setScrollDirections:function(grid,scrollUp,scrollDown){grid.infiniteScroll.scrollUp=scrollUp===!0,grid.suppressParentScrollUp=scrollUp===!0,grid.infiniteScroll.scrollDown=scrollDown!==!1,grid.suppressParentScrollDown=scrollDown!==!1},handleScroll:function(args){if(!(args.grid.infiniteScroll&&args.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===args.source)&&args.y)if(0===args.y.percentage)args.grid.scrollDirection=uiGridConstants.scrollDirection.UP,service.loadData(args.grid);else if(1===args.y.percentage)args.grid.scrollDirection=uiGridConstants.scrollDirection.DOWN,service.loadData(args.grid);else{var percentage,targetPercentage=args.grid.options.infiniteScrollRowsFromEnd/args.grid.renderContainers.body.visibleRowCache.length;args.grid.scrollDirection===uiGridConstants.scrollDirection.UP?(percentage=args.y.percentage,percentage<=targetPercentage&&service.loadData(args.grid)):args.grid.scrollDirection===uiGridConstants.scrollDirection.DOWN&&(percentage=1-args.y.percentage,percentage<=targetPercentage&&service.loadData(args.grid))}},loadData:function(grid){grid.infiniteScroll.previousVisibleRows=grid.renderContainers.body.visibleRowCache.length,grid.infiniteScroll.direction=grid.scrollDirection,delete grid.infiniteScroll.prevScrollTop,grid.scrollDirection===uiGridConstants.scrollDirection.UP&&grid.infiniteScroll.scrollUp?(grid.infiniteScroll.dataLoading=!0,grid.api.infiniteScroll.raise.needLoadMoreDataTop()):grid.scrollDirection===uiGridConstants.scrollDirection.DOWN&&grid.infiniteScroll.scrollDown&&(grid.infiniteScroll.dataLoading=!0,grid.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(grid){var promise=$q.defer();return $timeout(function(){var viewportHeight,rowHeight,newVisibleRows,oldTop,newTop;viewportHeight=grid.getViewportHeight()+grid.headerHeight-grid.renderContainers.body.headerHeight-grid.scrollbarHeight,rowHeight=grid.options.rowHeight,void 0===grid.infiniteScroll.direction&&service.adjustInfiniteScrollPosition(grid,0),newVisibleRows=grid.getVisibleRowCount();var canvasHeight=rowHeight*newVisibleRows;grid.infiniteScroll.scrollDown&&viewportHeight>canvasHeight&&grid.api.infiniteScroll.raise.needLoadMoreData(),grid.infiniteScroll.direction===uiGridConstants.scrollDirection.UP&&(oldTop=grid.infiniteScroll.prevScrollTop||0,newTop=oldTop+(newVisibleRows-grid.infiniteScroll.previousVisibleRows)*rowHeight,service.adjustInfiniteScrollPosition(grid,newTop),$timeout(function(){promise.resolve()})),grid.infiniteScroll.direction===uiGridConstants.scrollDirection.DOWN&&(newTop=grid.infiniteScroll.prevScrollTop||grid.infiniteScroll.previousVisibleRows*rowHeight-viewportHeight,service.adjustInfiniteScrollPosition(grid,newTop),$timeout(function(){promise.resolve()}))},0),promise.promise},adjustInfiniteScrollPosition:function(grid,scrollTop){var scrollEvent=new ScrollEvent(grid,null,null,"ui.grid.adjustInfiniteScrollPosition"),visibleRows=grid.getVisibleRowCount(),viewportHeight=grid.getViewportHeight()+grid.headerHeight-grid.renderContainers.body.headerHeight-grid.scrollbarHeight,rowHeight=grid.options.rowHeight,scrollHeight=visibleRows*rowHeight-viewportHeight;0===scrollTop&&grid.infiniteScroll.scrollUp?scrollEvent.y={percentage:1/scrollHeight}:scrollEvent.y={percentage:scrollTop/scrollHeight},grid.scrollContainers("",scrollEvent)},dataRemovedTop:function(grid,scrollUp,scrollDown){var newVisibleRows,oldTop,newTop,rowHeight;return service.setScrollDirections(grid,scrollUp,scrollDown),newVisibleRows=grid.renderContainers.body.visibleRowCache.length,oldTop=grid.infiniteScroll.prevScrollTop,rowHeight=grid.options.rowHeight,newTop=oldTop-(grid.infiniteScroll.previousVisibleRows-newVisibleRows)*rowHeight,service.adjustInfiniteScrollPosition(grid,newTop)},dataRemovedBottom:function(grid,scrollUp,scrollDown){var newTop;return service.setScrollDirections(grid,scrollUp,scrollDown),newTop=grid.infiniteScroll.prevScrollTop,service.adjustInfiniteScrollPosition(grid,newTop)}};return service}]),module.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(uiGridInfiniteScrollService){return{priority:-200,scope:!1,require:"^uiGrid",compile:function($scope,$elm,$attr){return{pre:function($scope,$elm,$attr,uiGridCtrl){uiGridInfiniteScrollService.initializeGrid(uiGridCtrl.grid,$scope)},post:function($scope,$elm,$attr){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.moveColumns",["ui.grid"]);module.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function($q,$timeout,$log,ScrollEvent,uiGridConstants,gridUtil){var service={initializeGrid:function(grid){var self=this;this.registerPublicApi(grid),this.defaultGridOptions(grid.options),grid.moveColumns={orderCache:[]},grid.registerColumnBuilder(self.movableColumnBuilder),grid.registerDataChangeCallback(self.verifyColumnOrder,[uiGridConstants.dataChange.COLUMN])},registerPublicApi:function(grid){var self=this,publicApi={events:{colMovable:{columnPositionChanged:function(colDef,originalPosition,newPosition){}}},methods:{colMovable:{moveColumn:function(originalPosition,finalPosition){var columns=grid.columns;if(!angular.isNumber(originalPosition)||!angular.isNumber(finalPosition))return void gridUtil.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var nonMovableColumns=0,i=0;i<columns.length;i++)(angular.isDefined(columns[i].colDef.visible)&&columns[i].colDef.visible===!1||columns[i].isRowHeader===!0)&&nonMovableColumns++;if(originalPosition>=columns.length-nonMovableColumns||finalPosition>=columns.length-nonMovableColumns)return void gridUtil.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var findPositionForRenderIndex=function(index){for(var position=index,i=0;i<=position;i++)angular.isDefined(columns[i])&&(angular.isDefined(columns[i].colDef.visible)&&columns[i].colDef.visible===!1||columns[i].isRowHeader===!0)&&position++;return position};self.redrawColumnAtPosition(grid,findPositionForRenderIndex(originalPosition),findPositionForRenderIndex(finalPosition))}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableColumnMoving=gridOptions.enableColumnMoving!==!1},movableColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableColumnMoving=void 0===colDef.enableColumnMoving?gridOptions.enableColumnMoving:colDef.enableColumnMoving,$q.all(promises)},updateColumnCache:function(grid){grid.moveColumns.orderCache=grid.getOnlyDataColumns()},verifyColumnOrder:function(grid){var newIndex,headerRowOffset=grid.rowHeaderColumns.length;angular.forEach(grid.moveColumns.orderCache,function(cacheCol,cacheIndex){if(newIndex=grid.columns.indexOf(cacheCol),newIndex!==-1&&newIndex-headerRowOffset!==cacheIndex){var column=grid.columns.splice(newIndex,1)[0];grid.columns.splice(cacheIndex+headerRowOffset,0,column)}})},redrawColumnAtPosition:function(grid,originalPosition,newPosition){var columns=grid.columns;if(originalPosition!==newPosition){var pos=originalPosition<newPosition?originalPosition+1:originalPosition-1,i0=Math.min(pos,newPosition);for(i0;i0<=Math.max(pos,newPosition)&&!columns[i0].visible;i0++);if(!(i0>Math.max(pos,newPosition))){var originalColumn=columns[originalPosition];if(originalColumn.colDef.enableColumnMoving){if(originalPosition>newPosition)for(var i1=originalPosition;i1>newPosition;i1--)columns[i1]=columns[i1-1];else if(newPosition>originalPosition)for(var i2=originalPosition;i2<newPosition;i2++)columns[i2]=columns[i2+1];columns[newPosition]=originalColumn,service.updateColumnCache(grid),grid.queueGridRefresh(),$timeout(function(){grid.api.core.notifyDataChange(uiGridConstants.dataChange.COLUMN),grid.api.colMovable.raise.columnPositionChanged(originalColumn.colDef,originalPosition,newPosition)})}}}}};return service}]),module.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(uiGridMoveColumnService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridMoveColumnService.initializeGrid(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function($q,gridUtil,uiGridMoveColumnService,$document,$log,uiGridConstants,ScrollEvent){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){if($scope.col.colDef.enableColumnMoving){var gridLeft,previousMouseX,totalMouseMovement,rightMoveLimit,movingElm,reducedWidth,$contentsElm=angular.element($elm[0].querySelectorAll(".ui-grid-cell-contents")),elmCloned=!1,moveOccurred=!1,downFn=function(event){gridLeft=$scope.grid.element[0].getBoundingClientRect().left,$scope.grid.hasLeftContainer()&&(gridLeft+=$scope.grid.renderContainers.left.header[0].getBoundingClientRect().width),previousMouseX=event.pageX||(event.originalEvent?event.originalEvent.pageX:0),totalMouseMovement=0,rightMoveLimit=gridLeft+$scope.grid.getViewportWidth(),"mousedown"===event.type?($document.on("mousemove",moveFn),$document.on("mouseup",upFn)):"touchstart"===event.type&&($document.on("touchmove",moveFn),$document.on("touchend",upFn))},moveFn=function(event){var pageX=event.pageX||(event.originalEvent?event.originalEvent.pageX:0),changeValue=pageX-previousMouseX;0!==changeValue&&(document.onselectstart=function(){return!1},moveOccurred=!0,elmCloned?elmCloned&&(moveElement(changeValue),previousMouseX=pageX):cloneElement())},upFn=function(event){if(document.onselectstart=null,movingElm&&(movingElm.remove(),elmCloned=!1),offAllEvents(),onDownEvents(),moveOccurred){for(var columns=$scope.grid.columns,columnIndex=0,i=0;i<columns.length&&columns[i].colDef.name!==$scope.col.colDef.name;i++)columnIndex++;var targetIndex;if(totalMouseMovement<0){var il,totalColumnsLeftWidth=0;if($scope.grid.isRTL()){for(il=columnIndex+1;il<columns.length;il++)if((angular.isUndefined(columns[il].colDef.visible)||columns[il].colDef.visible===!0)&&(totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width,totalColumnsLeftWidth>Math.abs(totalMouseMovement))){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,il-1);break}}else for(il=columnIndex-1;il>=0;il--)if((angular.isUndefined(columns[il].colDef.visible)||columns[il].colDef.visible===!0)&&(totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width,totalColumnsLeftWidth>Math.abs(totalMouseMovement))){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,il+1);break}totalColumnsLeftWidth<Math.abs(totalMouseMovement)&&(targetIndex=0,$scope.grid.isRTL()&&(targetIndex=columns.length-1),uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,targetIndex))}else if(totalMouseMovement>0){var ir,totalColumnsRightWidth=0;if($scope.grid.isRTL()){for(ir=columnIndex-1;ir>0;ir--)if((angular.isUndefined(columns[ir].colDef.visible)||columns[ir].colDef.visible===!0)&&(totalColumnsRightWidth+=columns[ir].drawnWidth||columns[ir].width||columns[ir].colDef.width,totalColumnsRightWidth>totalMouseMovement)){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,ir);break}}else for(ir=columnIndex+1;ir<columns.length;ir++)if((angular.isUndefined(columns[ir].colDef.visible)||columns[ir].colDef.visible===!0)&&(totalColumnsRightWidth+=columns[ir].drawnWidth||columns[ir].width||columns[ir].colDef.width,totalColumnsRightWidth>totalMouseMovement)){uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,ir-1);break}totalColumnsRightWidth<totalMouseMovement&&(targetIndex=columns.length-1,$scope.grid.isRTL()&&(targetIndex=0),uiGridMoveColumnService.redrawColumnAtPosition($scope.grid,columnIndex,targetIndex))}}},onDownEvents=function(){$contentsElm.on("touchstart",downFn),$contentsElm.on("mousedown",downFn)},offAllEvents=function(){$contentsElm.off("touchstart",downFn),$contentsElm.off("mousedown",downFn),$document.off("mousemove",moveFn),$document.off("touchmove",moveFn),$document.off("mouseup",upFn),$document.off("touchend",upFn)};onDownEvents();var cloneElement=function(){elmCloned=!0,movingElm=$elm.clone(),$elm.parent().append(movingElm),movingElm.addClass("movingColumn");var movingElementStyles={};movingElementStyles.left=$elm[0].offsetLeft+"px";var gridRight=$scope.grid.element[0].getBoundingClientRect().right,elmRight=$elm[0].getBoundingClientRect().right;elmRight>gridRight&&(reducedWidth=$scope.col.drawnWidth+(gridRight-elmRight),movingElementStyles.width=reducedWidth+"px"),movingElm.css(movingElementStyles)},moveElement=function(changeValue){for(var columns=$scope.grid.columns,totalColumnWidth=0,i=0;i<columns.length;i++)(angular.isUndefined(columns[i].colDef.visible)||columns[i].colDef.visible===!0)&&(totalColumnWidth+=columns[i].drawnWidth||columns[i].width||columns[i].colDef.width);var newElementLeft,currentElmLeft=movingElm[0].getBoundingClientRect().left-1,currentElmRight=movingElm[0].getBoundingClientRect().right;if(newElementLeft=currentElmLeft-gridLeft+changeValue,newElementLeft=newElementLeft<rightMoveLimit?newElementLeft:rightMoveLimit,(currentElmLeft>=gridLeft||changeValue>0)&&(currentElmRight<=rightMoveLimit||changeValue<0))movingElm.css({visibility:"visible",left:movingElm[0].offsetLeft+(newElementLeft<rightMoveLimit?changeValue:rightMoveLimit-currentElmLeft)+"px"});else if(totalColumnWidth>Math.ceil(uiGridCtrl.grid.gridWidth)){changeValue*=8;var scrollEvent=new ScrollEvent($scope.col.grid,null,null,"uiGridHeaderCell.moveElement");scrollEvent.x={pixels:changeValue},scrollEvent.grid.scrollContainers("",scrollEvent)}for(var totalColumnsLeftWidth=0,il=0;il<columns.length;il++)if(angular.isUndefined(columns[il].colDef.visible)||columns[il].colDef.visible===!0){if(columns[il].colDef.name===$scope.col.colDef.name)break;totalColumnsLeftWidth+=columns[il].drawnWidth||columns[il].width||columns[il].colDef.width}void 0===$scope.newScrollLeft?totalMouseMovement+=changeValue:totalMouseMovement=$scope.newScrollLeft+newElementLeft-totalColumnsLeftWidth,reducedWidth<$scope.col.drawnWidth&&(reducedWidth+=Math.abs(changeValue),movingElm.css({width:reducedWidth+"px"}))}}}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.pagination",["ng","ui.grid"]);module.service("uiGridPaginationService",["gridUtil",function(gridUtil){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options);var publicApi={events:{pagination:{paginationChanged:function(currentPage,pageSize){}}},methods:{pagination:{getPage:function(){return grid.options.enablePagination?grid.options.paginationCurrentPage:null},getTotalPages:function(){return grid.options.enablePagination?0===grid.options.totalItems?1:Math.ceil(grid.options.totalItems/grid.options.paginationPageSize):null},nextPage:function(){grid.options.enablePagination&&(grid.options.totalItems>0?grid.options.paginationCurrentPage=Math.min(grid.options.paginationCurrentPage+1,publicApi.methods.pagination.getTotalPages()):grid.options.paginationCurrentPage++)},previousPage:function(){grid.options.enablePagination&&(grid.options.paginationCurrentPage=Math.max(grid.options.paginationCurrentPage-1,1))},seek:function(page){if(grid.options.enablePagination){if(!angular.isNumber(page)||page<1)throw"Invalid page number: "+page;grid.options.paginationCurrentPage=Math.min(page,publicApi.methods.pagination.getTotalPages())}}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods);var processPagination=function(renderableRows){if(grid.options.useExternalPagination||!grid.options.enablePagination)return renderableRows;var pageSize=parseInt(grid.options.paginationPageSize,10),currentPage=parseInt(grid.options.paginationCurrentPage,10),visibleRows=renderableRows.filter(function(row){return row.visible});grid.options.totalItems=visibleRows.length;var firstRow=(currentPage-1)*pageSize;return firstRow>visibleRows.length&&(currentPage=grid.options.paginationCurrentPage=1,firstRow=(currentPage-1)*pageSize),visibleRows.slice(firstRow,firstRow+pageSize)};grid.registerRowsProcessor(processPagination,900)},defaultGridOptions:function(gridOptions){gridOptions.enablePagination=gridOptions.enablePagination!==!1,gridOptions.enablePaginationControls=gridOptions.enablePaginationControls!==!1,gridOptions.useExternalPagination=gridOptions.useExternalPagination===!0,gridUtil.isNullOrUndefined(gridOptions.totalItems)&&(gridOptions.totalItems=0),gridUtil.isNullOrUndefined(gridOptions.paginationPageSizes)&&(gridOptions.paginationPageSizes=[250,500,1e3]),gridUtil.isNullOrUndefined(gridOptions.paginationPageSize)&&(gridOptions.paginationPageSizes.length>0?gridOptions.paginationPageSize=gridOptions.paginationPageSizes[0]:gridOptions.paginationPageSize=0),gridUtil.isNullOrUndefined(gridOptions.paginationCurrentPage)&&(gridOptions.paginationCurrentPage=1),gridUtil.isNullOrUndefined(gridOptions.paginationTemplate)&&(gridOptions.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(grid,currentPage,pageSize){grid.api.pagination.raise.paginationChanged(currentPage,pageSize),grid.options.useExternalPagination||grid.queueGridRefresh()}};return service}]),module.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(gridUtil,uiGridPaginationService){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function($scope,$elm,$attr,uiGridCtrl){uiGridPaginationService.initializeGrid(uiGridCtrl.grid),gridUtil.getTemplate(uiGridCtrl.grid.options.paginationTemplate).then(function(contents){var template=angular.element(contents);$elm.append(template),uiGridCtrl.innerCompile(template)})}}}}]),module.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(uiGridPaginationService,uiGridConstants,gridUtil,i18nService){return{priority:-200,scope:!0,require:"^uiGrid",link:function($scope,$elm,$attr,uiGridCtrl){var defaultFocusElementSelector=".ui-grid-pager-control-input";$scope.aria=i18nService.getSafeText("pagination.aria"),$scope.paginationApi=uiGridCtrl.grid.api.pagination,$scope.sizesLabel=i18nService.getSafeText("pagination.sizes"),$scope.totalItemsLabel=i18nService.getSafeText("pagination.totalItems"),$scope.paginationOf=i18nService.getSafeText("pagination.of"),$scope.paginationThrough=i18nService.getSafeText("pagination.through");var options=uiGridCtrl.grid.options;uiGridCtrl.grid.renderContainers.body.registerViewportAdjuster(function(adjustment){return adjustment.height=adjustment.height-gridUtil.elementHeight($elm,"padding"),adjustment});var dataChangeDereg=uiGridCtrl.grid.registerDataChangeCallback(function(grid){grid.options.useExternalPagination||(grid.options.totalItems=grid.rows.length)},[uiGridConstants.dataChange.ROW]);$scope.$on("$destroy",dataChangeDereg);var setShowing=function(){$scope.showingLow=(options.paginationCurrentPage-1)*options.paginationPageSize+1,$scope.showingHigh=Math.min(options.paginationCurrentPage*options.paginationPageSize,options.totalItems)},deregT=$scope.$watch("grid.options.totalItems + grid.options.paginationPageSize",setShowing),deregP=$scope.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(newValues,oldValues){if(newValues!==oldValues&&void 0!==oldValues){if(!angular.isNumber(options.paginationCurrentPage)||options.paginationCurrentPage<1)return void(options.paginationCurrentPage=1);if(options.totalItems>0&&options.paginationCurrentPage>$scope.paginationApi.getTotalPages())return void(options.paginationCurrentPage=$scope.paginationApi.getTotalPages());setShowing(),uiGridPaginationService.onPaginationChanged($scope.grid,options.paginationCurrentPage,options.paginationPageSize)}});$scope.$on("$destroy",function(){deregT(),deregP()}),$scope.cantPageForward=function(){return options.totalItems>0?options.paginationCurrentPage>=$scope.paginationApi.getTotalPages():options.data.length<1},$scope.cantPageToLast=function(){return!(options.totalItems>0)||$scope.cantPageForward()},$scope.cantPageBackward=function(){return options.paginationCurrentPage<=1};var focusToInputIf=function(condition){condition&&gridUtil.focus.bySelector($elm,defaultFocusElementSelector)};$scope.pageFirstPageClick=function(){$scope.paginationApi.seek(1),focusToInputIf($scope.cantPageBackward())},$scope.pagePreviousPageClick=function(){$scope.paginationApi.previousPage(),focusToInputIf($scope.cantPageBackward())},$scope.pageNextPageClick=function(){$scope.paginationApi.nextPage(),focusToInputIf($scope.cantPageForward())},$scope.pageLastPageClick=function(){$scope.paginationApi.seek($scope.paginationApi.getTotalPages()),focusToInputIf($scope.cantPageToLast())}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.pinning",["ui.grid"]);module.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),module.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(gridUtil,GridRenderContainer,i18nService,uiGridPinningConstants){var service={initializeGrid:function(grid){service.defaultGridOptions(grid.options),grid.registerColumnBuilder(service.pinningColumnBuilder);var publicApi={events:{pinning:{columnPinned:function(colDef,container){}}},methods:{pinning:{pinColumn:function(col,container){service.pinColumn(grid,col,container)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enablePinning=gridOptions.enablePinning!==!1},pinningColumnBuilder:function(colDef,col,gridOptions){if(colDef.enablePinning=void 0===colDef.enablePinning?gridOptions.enablePinning:colDef.enablePinning,colDef.pinnedLeft?(col.renderContainer="left",col.grid.createLeftContainer()):colDef.pinnedRight&&(col.renderContainer="right",col.grid.createRightContainer()),colDef.enablePinning){var pinColumnLeftAction={name:"ui.grid.pinning.pinLeft",title:i18nService.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){service.pinColumn(this.context.col.grid,this.context.col,uiGridPinningConstants.container.LEFT)}},pinColumnRightAction={name:"ui.grid.pinning.pinRight",title:i18nService.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){service.pinColumn(this.context.col.grid,this.context.col,uiGridPinningConstants.container.RIGHT)}},removePinAction={name:"ui.grid.pinning.unpin",title:i18nService.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return"undefined"!=typeof this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){service.pinColumn(this.context.col.grid,this.context.col,uiGridPinningConstants.container.NONE)}};gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.pinLeft")||col.menuItems.push(pinColumnLeftAction),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.pinRight")||col.menuItems.push(pinColumnRightAction),gridUtil.arrayContainsObjectWithProperty(col.menuItems,"name","ui.grid.pinning.unpin")||col.menuItems.push(removePinAction)}},pinColumn:function(grid,col,container){container===uiGridPinningConstants.container.NONE?(col.renderContainer=null,col.colDef.pinnedLeft=col.colDef.pinnedRight=!1):(col.renderContainer=container,container===uiGridPinningConstants.container.LEFT?grid.createLeftContainer():container===uiGridPinningConstants.container.RIGHT&&grid.createRightContainer()),grid.refresh().then(function(){grid.api.pinning.raise.columnPinned(col.colDef,container)})}};return service}]),module.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(gridUtil,uiGridPinningService){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridPinningService.initializeGrid(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.resizeColumns",["ui.grid"]);module.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(gridUtil,$q,$timeout){var service={defaultGridOptions:function(gridOptions){gridOptions.enableColumnResizing=gridOptions.enableColumnResizing!==!1,gridOptions.enableColumnResize===!1&&(gridOptions.enableColumnResizing=!1)},colResizerColumnBuilder:function(colDef,col,gridOptions){var promises=[];return colDef.enableColumnResizing=void 0===colDef.enableColumnResizing?gridOptions.enableColumnResizing:colDef.enableColumnResizing,colDef.enableColumnResize===!1&&(colDef.enableColumnResizing=!1),$q.all(promises)},registerPublicApi:function(grid){var publicApi={events:{colResizable:{columnSizeChanged:function(colDef,deltaChange){}}}};grid.api.registerEventsFromObject(publicApi.events)},fireColumnSizeChanged:function(grid,colDef,deltaChange){$timeout(function(){
grid.api.colResizable?grid.api.colResizable.raise.columnSizeChanged(colDef,deltaChange):gridUtil.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(col,position,rtlMultiplier){var renderContainer=col.getRenderContainer();if("left"===position){var colIndex=renderContainer.visibleColumnCache.indexOf(col);return renderContainer.visibleColumnCache[colIndex-1*rtlMultiplier]}return col}};return service}]),module.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(gridUtil,uiGridResizeColumnsService){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridResizeColumnsService.defaultGridOptions(uiGridCtrl.grid.options),uiGridCtrl.grid.registerColumnBuilder(uiGridResizeColumnsService.colResizerColumnBuilder),uiGridResizeColumnsService.registerPublicApi(uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(gridUtil,$templateCache,$compile,$q,uiGridResizeColumnsService,uiGridConstants,$timeout){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function($scope,$elm,$attrs,uiGridCtrl){var grid=uiGridCtrl.grid;if(grid.options.enableColumnResizing){var columnResizerElm=$templateCache.get("ui-grid/columnResizer"),rtlMultiplier=1;grid.isRTL()&&($scope.position="left",rtlMultiplier=-1);var displayResizers=function(){for(var resizers=$elm[0].getElementsByClassName("ui-grid-column-resizer"),i=0;i<resizers.length;i++)angular.element(resizers[i]).remove();var otherCol=uiGridResizeColumnsService.findTargetCol($scope.col,"left",rtlMultiplier),renderContainer=$scope.col.getRenderContainer();if(otherCol&&0!==renderContainer.visibleColumnCache.indexOf($scope.col)&&otherCol.colDef.enableColumnResizing!==!1){var resizerLeft=angular.element(columnResizerElm).clone();resizerLeft.attr("position","left"),$elm.prepend(resizerLeft),$compile(resizerLeft)($scope)}if($scope.col.colDef.enableColumnResizing!==!1){var resizerRight=angular.element(columnResizerElm).clone();resizerRight.attr("position","right"),$elm.append(resizerRight),$compile(resizerRight)($scope)}};displayResizers();var waitDisplay=function(){$timeout(displayResizers)},dataChangeDereg=grid.registerDataChangeCallback(waitDisplay,[uiGridConstants.dataChange.COLUMN]);$scope.$on("$destroy",dataChangeDereg)}}}}}}]),module.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function($document,gridUtil,uiGridConstants,uiGridResizeColumnsService){var resizeOverlay=angular.element('<div class="ui-grid-resize-overlay"></div>'),resizer={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function refreshCanvas(xDiff){uiGridCtrl.grid.refreshCanvas(!0).then(function(){uiGridCtrl.grid.queueGridRefresh()})}function constrainWidth(col,width){var newWidth=width;return col.minWidth&&newWidth<col.minWidth?newWidth=col.minWidth:col.maxWidth&&newWidth>col.maxWidth&&(newWidth=col.maxWidth),newWidth}function moveFunction(event,args){event.originalEvent&&(event=event.originalEvent),event.preventDefault(),x=(event.targetTouches?event.targetTouches[0]:event).clientX-gridLeft,x<0?x=0:x>uiGridCtrl.grid.gridWidth&&(x=uiGridCtrl.grid.gridWidth);var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(col.colDef.enableColumnResizing!==!1){uiGridCtrl.grid.element.hasClass("column-resizing")||uiGridCtrl.grid.element.addClass("column-resizing");var xDiff=x-startX,newWidth=parseInt(col.drawnWidth+xDiff*rtlMultiplier,10);x+=(constrainWidth(col,newWidth)-newWidth)*rtlMultiplier,resizeOverlay.css({left:x+"px"}),uiGridCtrl.fireEvent(uiGridConstants.events.ITEM_DRAGGING)}}function upFunction(event,args){event.originalEvent&&(event=event.originalEvent),event.preventDefault(),uiGridCtrl.grid.element.removeClass("column-resizing"),resizeOverlay.remove(),x=(event.changedTouches?event.changedTouches[0]:event).clientX-gridLeft;var xDiff=x-startX;if(0===xDiff)return offAllEvents(),void onDownEvents();var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(col.colDef.enableColumnResizing!==!1){var newWidth=parseInt(col.drawnWidth+xDiff*rtlMultiplier,10);col.width=constrainWidth(col,newWidth),col.hasCustomWidth=!0,refreshCanvas(xDiff),uiGridResizeColumnsService.fireColumnSizeChanged(uiGridCtrl.grid,col.colDef,xDiff),offAllEvents(),onDownEvents()}}var startX=0,x=0,gridLeft=0,rtlMultiplier=1;uiGridCtrl.grid.isRTL()&&($scope.position="left",rtlMultiplier=-1),"left"===$scope.position?$elm.addClass("left"):"right"===$scope.position&&$elm.addClass("right");var downFunction=function(event,args){event.originalEvent&&(event=event.originalEvent),event.stopPropagation(),gridLeft=uiGridCtrl.grid.element[0].getBoundingClientRect().left,startX=(event.targetTouches?event.targetTouches[0]:event).clientX-gridLeft,uiGridCtrl.grid.element.append(resizeOverlay),resizeOverlay.css({left:startX}),"touchstart"===event.type?($document.on("touchend",upFunction),$document.on("touchmove",moveFunction),$elm.off("mousedown",downFunction)):($document.on("mouseup",upFunction),$document.on("mousemove",moveFunction),$elm.off("touchstart",downFunction))},onDownEvents=function(){$elm.on("mousedown",downFunction),$elm.on("touchstart",downFunction)},offAllEvents=function(){$document.off("mouseup",upFunction),$document.off("touchend",upFunction),$document.off("mousemove",moveFunction),$document.off("touchmove",moveFunction),$elm.off("mousedown",downFunction),$elm.off("touchstart",downFunction)};onDownEvents();var dblClickFn=function(event,args){event.stopPropagation();var col=uiGridResizeColumnsService.findTargetCol($scope.col,$scope.position,rtlMultiplier);if(col.colDef.enableColumnResizing!==!1){var maxWidth=0,xDiff=0,renderContainerElm=gridUtil.closestElm($elm,".ui-grid-render-container"),cells=renderContainerElm.querySelectorAll("."+uiGridConstants.COL_CLASS_PREFIX+col.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(cells,function(cell){var menuButton;angular.element(cell).parent().hasClass("ui-grid-header-cell")&&(menuButton=angular.element(cell).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),gridUtil.fakeElement(cell,{},function(newElm){var e=angular.element(newElm);e.attr("style","float: left");var width=gridUtil.elementWidth(e);if(menuButton){var menuButtonWidth=gridUtil.elementWidth(menuButton);width+=menuButtonWidth}width>maxWidth&&(maxWidth=width,xDiff=maxWidth-width)})}),col.width=constrainWidth(col,maxWidth),col.hasCustomWidth=!0,refreshCanvas(xDiff),uiGridResizeColumnsService.fireColumnSizeChanged(uiGridCtrl.grid,col.colDef,xDiff)}};$elm.on("dblclick",dblClickFn),$elm.on("$destroy",function(){$elm.off("dblclick",dblClickFn),offAllEvents()})}};return resizer}])}(),function(){"use strict";var module=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);module.constant("uiGridRowEditConstants",{}),module.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function($interval,$q,uiGridConstants,uiGridRowEditConstants,gridUtil){var service={initializeGrid:function(scope,grid){grid.rowEdit={};var publicApi={events:{rowEdit:{saveRow:function(rowEntity){}}},methods:{rowEdit:{setSavePromise:function(rowEntity,savePromise){service.setSavePromise(grid,rowEntity,savePromise)},getDirtyRows:function(){return grid.rowEdit.dirtyRows?grid.rowEdit.dirtyRows:[]},getErrorRows:function(){return grid.rowEdit.errorRows?grid.rowEdit.errorRows:[]},flushDirtyRows:function(){return service.flushDirtyRows(grid)},setRowsDirty:function(dataRows){service.setRowsDirty(grid,dataRows)},setRowsClean:function(dataRows){service.setRowsClean(grid,dataRows)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.api.core.on.renderingComplete(scope,function(gridApi){grid.api.edit.on.afterCellEdit(scope,service.endEditCell),grid.api.edit.on.beginCellEdit(scope,service.beginEditCell),grid.api.edit.on.cancelCellEdit(scope,service.cancelEditCell),grid.api.cellNav&&grid.api.cellNav.on.navigate(scope,service.navigate)})},defaultGridOptions:function(gridOptions){},saveRow:function(grid,gridRow){var self=this;return function(){if(gridRow.isSaving=!0,gridRow.rowEditSavePromise)return gridRow.rowEditSavePromise;var promise=grid.api.rowEdit.raise.saveRow(gridRow.entity);return gridRow.rowEditSavePromise?gridRow.rowEditSavePromise.then(self.processSuccessPromise(grid,gridRow),self.processErrorPromise(grid,gridRow)):gridUtil.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),promise}},setSavePromise:function(grid,rowEntity,savePromise){var gridRow=grid.getRow(rowEntity);gridRow.rowEditSavePromise=savePromise},processSuccessPromise:function(grid,gridRow){var self=this;return function(){delete gridRow.isSaving,delete gridRow.isDirty,delete gridRow.isError,delete gridRow.rowEditSaveTimer,delete gridRow.rowEditSavePromise,self.removeRow(grid.rowEdit.errorRows,gridRow),self.removeRow(grid.rowEdit.dirtyRows,gridRow)}},processErrorPromise:function(grid,gridRow){return function(){delete gridRow.isSaving,delete gridRow.rowEditSaveTimer,delete gridRow.rowEditSavePromise,gridRow.isError=!0,grid.rowEdit.errorRows||(grid.rowEdit.errorRows=[]),service.isRowPresent(grid.rowEdit.errorRows,gridRow)||grid.rowEdit.errorRows.push(gridRow)}},removeRow:function(rowArray,removeGridRow){"undefined"!=typeof rowArray&&null!==rowArray&&rowArray.forEach(function(gridRow,index){gridRow.uid===removeGridRow.uid&&rowArray.splice(index,1)})},isRowPresent:function(rowArray,removeGridRow){var present=!1;return rowArray.forEach(function(gridRow,index){gridRow.uid===removeGridRow.uid&&(present=!0)}),present},flushDirtyRows:function(grid){var promises=[];return grid.api.rowEdit.getDirtyRows().forEach(function(gridRow){service.saveRow(grid,gridRow)(),promises.push(gridRow.rowEditSavePromise)}),$q.all(promises)},endEditCell:function(rowEntity,colDef,newValue,previousValue){var grid=this.grid,gridRow=grid.getRow(rowEntity);return gridRow?void((newValue!==previousValue||gridRow.isDirty)&&(grid.rowEdit.dirtyRows||(grid.rowEdit.dirtyRows=[]),gridRow.isDirty||(gridRow.isDirty=!0,grid.rowEdit.dirtyRows.push(gridRow)),delete gridRow.isError,service.considerSetTimer(grid,gridRow))):void gridUtil.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(rowEntity,colDef){var grid=this.grid,gridRow=grid.getRow(rowEntity);return gridRow?void service.cancelTimer(grid,gridRow):void gridUtil.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(rowEntity,colDef){var grid=this.grid,gridRow=grid.getRow(rowEntity);return gridRow?void service.considerSetTimer(grid,gridRow):void gridUtil.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(newRowCol,oldRowCol){var grid=this.grid;newRowCol.row.rowEditSaveTimer&&service.cancelTimer(grid,newRowCol.row),oldRowCol&&oldRowCol.row&&oldRowCol.row!==newRowCol.row&&service.considerSetTimer(grid,oldRowCol.row)},considerSetTimer:function(grid,gridRow){if(service.cancelTimer(grid,gridRow),gridRow.isDirty&&!gridRow.isSaving&&grid.options.rowEditWaitInterval!==-1){var waitTime=grid.options.rowEditWaitInterval?grid.options.rowEditWaitInterval:2e3;gridRow.rowEditSaveTimer=$interval(service.saveRow(grid,gridRow),waitTime,1)}},cancelTimer:function(grid,gridRow){gridRow.rowEditSaveTimer&&!gridRow.isSaving&&($interval.cancel(gridRow.rowEditSaveTimer),delete gridRow.rowEditSaveTimer)},setRowsDirty:function(grid,myDataRows){var gridRow;myDataRows.forEach(function(value,index){gridRow=grid.getRow(value),gridRow?(grid.rowEdit.dirtyRows||(grid.rowEdit.dirtyRows=[]),gridRow.isDirty||(gridRow.isDirty=!0,grid.rowEdit.dirtyRows.push(gridRow)),delete gridRow.isError,service.considerSetTimer(grid,gridRow)):gridUtil.logError("requested row not found in rowEdit.setRowsDirty, row was: "+value)})},setRowsClean:function(grid,myDataRows){var gridRow;myDataRows.forEach(function(value,index){gridRow=grid.getRow(value),gridRow?(delete gridRow.isDirty,service.removeRow(grid.rowEdit.dirtyRows,gridRow),service.cancelTimer(grid,gridRow),delete gridRow.isError,service.removeRow(grid.rowEdit.errorRows,gridRow)):gridUtil.logError("requested row not found in rowEdit.setRowsClean, row was: "+value)})}};return service}]),module.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(gridUtil,uiGridRowEditService,uiGridEditConstants){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridRowEditService.initializeGrid($scope,uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function($compile,uiGridConstants,gridUtil,$parse){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);module.constant("uiGridSaveStateConstants",{featureName:"saveState"}),module.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function($q,uiGridSaveStateConstants,gridUtil,$compile,$interval,uiGridConstants){var service={initializeGrid:function(grid){grid.saveState={},this.defaultGridOptions(grid.options);var publicApi={events:{saveState:{}},methods:{saveState:{save:function(){return service.save(grid)},restore:function($scope,state){service.restore(grid,$scope,state)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.saveWidths=gridOptions.saveWidths!==!1,gridOptions.saveOrder=gridOptions.saveOrder!==!1,gridOptions.saveScroll=gridOptions.saveScroll===!0,gridOptions.saveFocus=gridOptions.saveScroll!==!0&&gridOptions.saveFocus!==!1,gridOptions.saveVisible=gridOptions.saveVisible!==!1,gridOptions.saveSort=gridOptions.saveSort!==!1,gridOptions.saveFilter=gridOptions.saveFilter!==!1,gridOptions.saveSelection=gridOptions.saveSelection!==!1,gridOptions.saveGrouping=gridOptions.saveGrouping!==!1,gridOptions.saveGroupingExpandedStates=gridOptions.saveGroupingExpandedStates===!0,gridOptions.savePinning=gridOptions.savePinning!==!1,gridOptions.saveTreeView=gridOptions.saveTreeView!==!1},save:function(grid){var savedState={};return savedState.columns=service.saveColumns(grid),savedState.scrollFocus=service.saveScrollFocus(grid),savedState.selection=service.saveSelection(grid),savedState.grouping=service.saveGrouping(grid),savedState.treeView=service.saveTreeView(grid),savedState.pagination=service.savePagination(grid),savedState},restore:function(grid,$scope,state){state.columns&&service.restoreColumns(grid,state.columns),state.scrollFocus&&service.restoreScrollFocus(grid,$scope,state.scrollFocus),state.selection&&service.restoreSelection(grid,state.selection),state.grouping&&service.restoreGrouping(grid,state.grouping),state.treeView&&service.restoreTreeView(grid,state.treeView),state.pagination&&service.restorePagination(grid,state.pagination),grid.refresh()},saveColumns:function(grid){var columns=[];return grid.getOnlyDataColumns().forEach(function(column){var savedColumn={};savedColumn.name=column.name,grid.options.saveVisible&&(savedColumn.visible=column.visible),grid.options.saveWidths&&(savedColumn.width=column.width),grid.options.saveSort&&(savedColumn.sort=angular.copy(column.sort)),grid.options.saveFilter&&(savedColumn.filters=[],column.filters.forEach(function(filter){var copiedFilter={};angular.forEach(filter,function(value,key){"condition"!==key&&"$$hashKey"!==key&&"placeholder"!==key&&(copiedFilter[key]=value)}),savedColumn.filters.push(copiedFilter)})),grid.api.pinning&&grid.options.savePinning&&(savedColumn.pinned=column.renderContainer?column.renderContainer:""),columns.push(savedColumn)}),columns},saveScrollFocus:function(grid){if(!grid.api.cellNav)return{};var scrollFocus={};if(grid.options.saveFocus){scrollFocus.focus=!0;var rowCol=grid.api.cellNav.getFocusedCell();null!==rowCol&&(null!==rowCol.col&&(scrollFocus.colName=rowCol.col.colDef.name),null!==rowCol.row&&(scrollFocus.rowVal=service.getRowVal(grid,rowCol.row)))}return(grid.options.saveScroll||grid.options.saveFocus&&!scrollFocus.colName&&!scrollFocus.rowVal)&&(scrollFocus.focus=!1,grid.renderContainers.body.prevRowScrollIndex&&(scrollFocus.rowVal=service.getRowVal(grid,grid.renderContainers.body.visibleRowCache[grid.renderContainers.body.prevRowScrollIndex])),grid.renderContainers.body.prevColScrollIndex&&(scrollFocus.colName=grid.renderContainers.body.visibleColumnCache[grid.renderContainers.body.prevColScrollIndex].name)),scrollFocus},saveSelection:function(grid){if(!grid.api.selection||!grid.options.saveSelection)return[];var selection=grid.api.selection.getSelectedGridRows().map(function(gridRow){return service.getRowVal(grid,gridRow)});return selection},saveGrouping:function(grid){return grid.api.grouping&&grid.options.saveGrouping?grid.api.grouping.getGrouping(grid.options.saveGroupingExpandedStates):{}},savePagination:function(grid){return grid.api.pagination&&grid.options.paginationPageSize?{paginationCurrentPage:grid.options.paginationCurrentPage,paginationPageSize:grid.options.paginationPageSize}:{}},saveTreeView:function(grid){return grid.api.treeView&&grid.options.saveTreeView?grid.api.treeView.getTreeView():{}},getRowVal:function(grid,gridRow){if(!gridRow)return null;var rowVal={};return grid.options.saveRowIdentity?(rowVal.identity=!0,rowVal.row=grid.options.saveRowIdentity(gridRow.entity)):(rowVal.identity=!1,rowVal.row=grid.renderContainers.body.visibleRowCache.indexOf(gridRow)),rowVal},restoreColumns:function(grid,columnsState){var isSortChanged=!1;columnsState.forEach(function(columnState,index){var currentCol=grid.getColumn(columnState.name);if(currentCol&&!grid.isRowHeaderColumn(currentCol)){!grid.options.saveVisible||currentCol.visible===columnState.visible&&currentCol.colDef.visible===columnState.visible||(currentCol.visible=columnState.visible,currentCol.colDef.visible=columnState.visible,grid.api.core.raise.columnVisibilityChanged(currentCol)),grid.options.saveWidths&&currentCol.width!==columnState.width&&(currentCol.width=columnState.width,currentCol.hasCustomWidth=!0),!grid.options.saveSort||angular.equals(currentCol.sort,columnState.sort)||void 0===currentCol.sort&&angular.isEmpty(columnState.sort)||(currentCol.sort=angular.copy(columnState.sort),isSortChanged=!0),grid.options.saveFilter&&!angular.equals(currentCol.filters,columnState.filters)&&(columnState.filters.forEach(function(filter,index){angular.extend(currentCol.filters[index],filter),"undefined"!=typeof filter.term&&null!==filter.term||delete currentCol.filters[index].term}),grid.api.core.raise.filterChanged()),grid.api.pinning&&grid.options.savePinning&&currentCol.renderContainer!==columnState.pinned&&grid.api.pinning.pinColumn(currentCol,columnState.pinned);var currentIndex=grid.getOnlyDataColumns().indexOf(currentCol);if(currentIndex!==-1&&grid.options.saveOrder&&currentIndex!==index){var column=grid.columns.splice(currentIndex+grid.rowHeaderColumns.length,1)[0];grid.columns.splice(index+grid.rowHeaderColumns.length,0,column)}}}),isSortChanged&&grid.api.core.raise.sortChanged(grid,grid.getColumnSorting())},restoreScrollFocus:function(grid,$scope,scrollFocusState){if(grid.api.cellNav){var colDef,row;if(scrollFocusState.colName){var colDefs=grid.options.columnDefs.filter(function(colDef){return colDef.name===scrollFocusState.colName});colDefs.length>0&&(colDef=colDefs[0])}scrollFocusState.rowVal&&scrollFocusState.rowVal.row&&(row=scrollFocusState.rowVal.identity?service.findRowByIdentity(grid,scrollFocusState.rowVal):grid.renderContainers.body.visibleRowCache[scrollFocusState.rowVal.row]);var entity=row&&row.entity?row.entity:null;(colDef||entity)&&(scrollFocusState.focus?grid.api.cellNav.scrollToFocus(entity,colDef):grid.scrollTo(entity,colDef))}},restoreSelection:function(grid,selectionState){grid.api.selection&&(grid.api.selection.clearSelectedRows(),selectionState.forEach(function(rowVal){if(rowVal.identity){var foundRow=service.findRowByIdentity(grid,rowVal);foundRow&&grid.api.selection.selectRow(foundRow.entity)}else grid.api.selection.selectRowByVisibleIndex(rowVal.row)}))},restoreGrouping:function(grid,groupingState){grid.api.grouping&&"undefined"!=typeof groupingState&&null!==groupingState&&!angular.equals(groupingState,{})&&grid.api.grouping.setGrouping(groupingState)},restoreTreeView:function(grid,treeViewState){grid.api.treeView&&"undefined"!=typeof treeViewState&&null!==treeViewState&&!angular.equals(treeViewState,{})&&grid.api.treeView.setTreeView(treeViewState)},restorePagination:function(grid,pagination){grid.api.pagination&&grid.options.paginationPageSize&&(grid.options.paginationCurrentPage=pagination.paginationCurrentPage,grid.options.paginationPageSize=pagination.paginationPageSize)},findRowByIdentity:function(grid,rowVal){if(!grid.options.saveRowIdentity)return null;var filteredRows=grid.rows.filter(function(gridRow){return grid.options.saveRowIdentity(gridRow.entity)===rowVal.row});return filteredRows.length>0?filteredRows[0]:null}};return service}]),module.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(uiGridSaveStateConstants,uiGridSaveStateService,gridUtil,$compile){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){uiGridSaveStateService.initializeGrid(uiGridCtrl.grid)}}}])}(),function(){"use strict";var module=angular.module("ui.grid.selection",["ui.grid"]);module.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function($provide){$provide.decorator("GridRow",["$delegate",function($delegate){return $delegate.prototype.setSelected=function(selected){selected!==this.isSelected&&(this.isSelected=selected,this.grid.selection.selectedCount+=selected?1:-1)},$delegate}])}]),module.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function($q,$templateCache,uiGridSelectionConstants,gridUtil){var service={initializeGrid:function(grid){grid.selection={},grid.selection.lastSelectedRow=null,grid.selection.selectAll=!1,grid.selection.selectedCount=0,service.defaultGridOptions(grid.options);var publicApi={events:{selection:{rowSelectionChanged:function(scope,row,evt){},rowSelectionChangedBatch:function(scope,rows,evt){}}},methods:{selection:{toggleRowSelection:function(rowEntity,evt){var row=grid.getRow(rowEntity);null!==row&&service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectRow:function(rowEntity,evt){var row=grid.getRow(rowEntity);null===row||row.isSelected||service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectRowByVisibleIndex:function(rowNum,evt){var row=grid.renderContainers.body.visibleRowCache[rowNum];null===row||"undefined"==typeof row||row.isSelected||service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},unSelectRow:function(rowEntity,evt){var row=grid.getRow(rowEntity);null!==row&&row.isSelected&&service.toggleRowSelection(grid,row,evt,grid.options.multiSelect,grid.options.noUnselect)},selectAllRows:function(evt){if(grid.options.multiSelect!==!1){var changedRows=[];grid.rows.forEach(function(row){row.isSelected||row.enableSelection===!1||(row.setSelected(!0),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!0}},selectAllVisibleRows:function(evt){if(grid.options.multiSelect!==!1){var changedRows=[];grid.rows.forEach(function(row){row.visible?row.isSelected||row.enableSelection===!1||(row.setSelected(!0),service.decideRaiseSelectionEvent(grid,row,changedRows,evt)):row.isSelected&&(row.setSelected(!1),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!0}},clearSelectedRows:function(evt){service.clearSelectedRows(grid,evt)},getSelectedRows:function(){return service.getSelectedRows(grid).map(function(gridRow){return gridRow.entity})},getSelectedGridRows:function(){return service.getSelectedRows(grid)},getSelectedCount:function(){return grid.selection.selectedCount},setMultiSelect:function(multiSelect){grid.options.multiSelect=multiSelect},setModifierKeysToMultiSelect:function(modifierKeysToMultiSelect){grid.options.modifierKeysToMultiSelect=modifierKeysToMultiSelect},getSelectAllState:function(){return grid.selection.selectAll}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableRowSelection=gridOptions.enableRowSelection!==!1,gridOptions.multiSelect=gridOptions.multiSelect!==!1,gridOptions.noUnselect=gridOptions.noUnselect===!0,gridOptions.modifierKeysToMultiSelect=gridOptions.modifierKeysToMultiSelect===!0,gridOptions.enableRowHeaderSelection=gridOptions.enableRowHeaderSelection!==!1,"undefined"==typeof gridOptions.enableFullRowSelection&&(gridOptions.enableFullRowSelection=!gridOptions.enableRowHeaderSelection),gridOptions.enableSelectAll=gridOptions.enableSelectAll!==!1,gridOptions.enableSelectionBatchEvent=gridOptions.enableSelectionBatchEvent!==!1,gridOptions.selectionRowHeaderWidth=angular.isDefined(gridOptions.selectionRowHeaderWidth)?gridOptions.selectionRowHeaderWidth:30,gridOptions.enableFooterTotalSelected=gridOptions.enableFooterTotalSelected!==!1,gridOptions.isRowSelectable=angular.isDefined(gridOptions.isRowSelectable)?gridOptions.isRowSelectable:angular.noop},toggleRowSelection:function(grid,row,evt,multiSelect,noUnselect){var selected=row.isSelected;if(row.enableSelection!==!1||selected){var selectedRows;multiSelect||selected?!multiSelect&&selected&&(selectedRows=service.getSelectedRows(grid),selectedRows.length>1&&(selected=!1,service.clearSelectedRows(grid,evt))):service.clearSelectedRows(grid,evt),selected&&noUnselect||(row.setSelected(!selected),row.isSelected===!0&&(grid.selection.lastSelectedRow=row),selectedRows=service.getSelectedRows(grid),grid.selection.selectAll=grid.rows.length===selectedRows.length,grid.api.selection.raise.rowSelectionChanged(row,evt))}},shiftSelect:function(grid,row,evt,multiSelect){if(multiSelect){var selectedRows=service.getSelectedRows(grid),fromRow=selectedRows.length>0?grid.renderContainers.body.visibleRowCache.indexOf(grid.selection.lastSelectedRow):0,toRow=grid.renderContainers.body.visibleRowCache.indexOf(row);if(fromRow>toRow){var tmp=fromRow;fromRow=toRow,toRow=tmp}for(var changedRows=[],i=fromRow;i<=toRow;i++){var rowToSelect=grid.renderContainers.body.visibleRowCache[i];rowToSelect&&(rowToSelect.isSelected||rowToSelect.enableSelection===!1||(rowToSelect.setSelected(!0),grid.selection.lastSelectedRow=rowToSelect,service.decideRaiseSelectionEvent(grid,rowToSelect,changedRows,evt)))}service.decideRaiseSelectionBatchEvent(grid,changedRows,evt)}},getSelectedRows:function(grid){return grid.rows.filter(function(row){return row.isSelected})},clearSelectedRows:function(grid,evt){var changedRows=[];service.getSelectedRows(grid).forEach(function(row){row.isSelected&&(row.setSelected(!1),service.decideRaiseSelectionEvent(grid,row,changedRows,evt))}),service.decideRaiseSelectionBatchEvent(grid,changedRows,evt),grid.selection.selectAll=!1,grid.selection.selectedCount=0},decideRaiseSelectionEvent:function(grid,row,changedRows,evt){grid.options.enableSelectionBatchEvent?changedRows.push(row):grid.api.selection.raise.rowSelectionChanged(row,evt)},decideRaiseSelectionBatchEvent:function(grid,changedRows,evt){changedRows.length>0&&grid.api.selection.raise.rowSelectionChangedBatch(changedRows,evt)}};return service}]),module.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(uiGridSelectionConstants,uiGridSelectionService,$templateCache,uiGridConstants){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){if(uiGridSelectionService.initializeGrid(uiGridCtrl.grid),uiGridCtrl.grid.options.enableRowHeaderSelection){var selectionRowHeaderDef={name:uiGridSelectionConstants.selectionRowHeaderColName,displayName:"",width:uiGridCtrl.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};uiGridCtrl.grid.addRowHeaderColumn(selectionRowHeaderDef,0)}var processorSet=!1,processSelectableRows=function(rows){return rows.forEach(function(row){row.enableSelection=uiGridCtrl.grid.options.isRowSelectable(row)}),rows},updateOptions=function(){uiGridCtrl.grid.options.isRowSelectable!==angular.noop&&processorSet!==!0&&(uiGridCtrl.grid.registerRowsProcessor(processSelectableRows,500),processorSet=!0)};updateOptions();var dataChangeDereg=uiGridCtrl.grid.registerDataChangeCallback(updateOptions,[uiGridConstants.dataChange.OPTIONS]);$scope.$on("$destroy",dataChangeDereg)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}]),module.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function($templateCache,uiGridSelectionService,gridUtil){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){function selectButtonClick(row,evt){evt.stopPropagation(),evt.shiftKey?uiGridSelectionService.shiftSelect(self,row,evt,self.options.multiSelect):evt.ctrlKey||evt.metaKey?uiGridSelectionService.toggleRowSelection(self,row,evt,self.options.multiSelect,self.options.noUnselect):uiGridSelectionService.toggleRowSelection(self,row,evt,self.options.multiSelect&&!self.options.modifierKeysToMultiSelect,self.options.noUnselect)}function selectButtonMouseDown(evt){(evt.ctrlKey||evt.shiftKey)&&(evt.target.onselectstart=function(){return!1},window.setTimeout(function(){evt.target.onselectstart=null},0))}var self=uiGridCtrl.grid;$scope.selectButtonClick=selectButtonClick,"ie"===gridUtil.detectBrowser()&&$elm.on("mousedown",selectButtonMouseDown)}}}]),module.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function($templateCache,uiGridSelectionService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){var self=$scope.col.grid;$scope.headerButtonClick=function(row,evt){
self.selection.selectAll?(uiGridSelectionService.clearSelectedRows(self,evt),self.options.noUnselect&&self.api.selection.selectRowByVisibleIndex(0,evt),self.selection.selectAll=!1):self.options.multiSelect&&(self.api.selection.selectAllVisibleRows(evt),self.selection.selectAll=!0)}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function($compile,uiGridConstants,uiGridSelectionConstants,gridUtil,$parse,uiGridSelectionService){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}]),module.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function($compile,uiGridConstants,uiGridSelectionConstants,gridUtil,$parse,uiGridSelectionService,$timeout){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){function registerRowSelectionEvents(){$scope.grid.options.enableRowSelection&&$scope.grid.options.enableFullRowSelection&&($elm.addClass("ui-grid-disable-selection"),$elm.on("touchstart",touchStart),$elm.on("touchend",touchEnd),$elm.on("click",selectCells),$scope.registered=!0)}function deregisterRowSelectionEvents(){$scope.registered&&($elm.removeClass("ui-grid-disable-selection"),$elm.off("touchstart",touchStart),$elm.off("touchend",touchEnd),$elm.off("click",selectCells),$scope.registered=!1)}var touchStartTime=0,touchTimeout=300;uiGridCtrl.grid.api.cellNav&&uiGridCtrl.grid.api.cellNav.on.viewPortKeyDown($scope,function(evt,rowCol){null!==rowCol&&rowCol.row===$scope.row&&rowCol.col===$scope.col&&32===evt.keyCode&&"selectionRowHeaderCol"===$scope.col.colDef.name&&(uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect&&!$scope.grid.options.modifierKeysToMultiSelect,$scope.grid.options.noUnselect),$scope.$apply())});var selectCells=function(evt){$elm.off("touchend",touchEnd),evt.shiftKey?uiGridSelectionService.shiftSelect($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect):evt.ctrlKey||evt.metaKey?uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect,$scope.grid.options.noUnselect):uiGridSelectionService.toggleRowSelection($scope.grid,$scope.row,evt,$scope.grid.options.multiSelect&&!$scope.grid.options.modifierKeysToMultiSelect,$scope.grid.options.noUnselect),$scope.$apply(),$timeout(function(){$elm.on("touchend",touchEnd)},touchTimeout)},touchStart=function(evt){touchStartTime=(new Date).getTime(),$elm.off("click",selectCells)},touchEnd=function(evt){var touchEndTime=(new Date).getTime(),touchTime=touchEndTime-touchStartTime;touchTime<touchTimeout&&selectCells(evt),$timeout(function(){$elm.on("click",selectCells)},touchTimeout)};registerRowSelectionEvents();var dataChangeDereg=$scope.grid.registerDataChangeCallback(function(){$scope.grid.options.enableRowSelection&&$scope.grid.options.enableFullRowSelection&&!$scope.registered?registerRowSelectionEvents():$scope.grid.options.enableRowSelection&&$scope.grid.options.enableFullRowSelection||!$scope.registered||deregisterRowSelectionEvents()},[uiGridConstants.dataChange.OPTIONS]);$elm.on("$destroy",dataChangeDereg)}}}]),module.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function($compile,uiGridConstants,gridUtil){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function($elm,$attrs){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.options.showGridFooter&&gridUtil.getTemplate("ui-grid/gridFooterSelectedItems").then(function(contents){var template=angular.element(contents),newElm=$compile(template)($scope);angular.element($elm[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(newElm)})},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.treeBase",["ui.grid"]);module.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),module.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function($q,uiGridTreeBaseConstants,gridUtil,GridRow,gridClassFactory,i18nService,uiGridConstants,rowSorter){var service={initializeGrid:function(grid,$scope){grid.treeBase={},grid.treeBase.numberLevels=0,grid.treeBase.expandAll=!1,grid.treeBase.tree=[],service.defaultGridOptions(grid.options),grid.registerRowsProcessor(service.treeRows,410),grid.registerColumnBuilder(service.treeBaseColumnBuilder),service.createRowHeader(grid);var publicApi={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){service.expandAllRows(grid)},collapseAllRows:function(){service.collapseAllRows(grid)},toggleRowTreeState:function(row){service.toggleRowTreeState(grid,row)},expandRow:function(row){service.expandRow(grid,row)},expandRowChildren:function(row){service.expandRowChildren(grid,row)},collapseRow:function(row){service.collapseRow(grid,row)},collapseRowChildren:function(row){service.collapseRowChildren(grid,row)},getTreeExpandedState:function(){return{expandedState:service.getTreeState(grid)}},setTreeState:function(config){service.setTreeState(grid,config)},getRowChildren:function(row){return row.treeNode.children.map(function(childNode){return childNode.row})}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.treeRowHeaderBaseWidth=gridOptions.treeRowHeaderBaseWidth||30,gridOptions.treeIndent=gridOptions.treeIndent||10,gridOptions.showTreeRowHeader=gridOptions.showTreeRowHeader!==!1,gridOptions.showTreeExpandNoChildren=gridOptions.showTreeExpandNoChildren!==!1,gridOptions.treeRowHeaderAlwaysVisible=gridOptions.treeRowHeaderAlwaysVisible!==!1,gridOptions.treeCustomAggregations=gridOptions.treeCustomAggregations||{},gridOptions.enableExpandAll=gridOptions.enableExpandAll!==!1},treeBaseColumnBuilder:function(colDef,col,gridOptions){"undefined"!=typeof colDef.customTreeAggregationFn&&(col.treeAggregationFn=colDef.customTreeAggregationFn),"undefined"!=typeof colDef.treeAggregationType&&(col.treeAggregation={type:colDef.treeAggregationType},"undefined"!=typeof gridOptions.treeCustomAggregations[colDef.treeAggregationType]?(col.treeAggregationFn=gridOptions.treeCustomAggregations[colDef.treeAggregationType].aggregationFn,col.treeAggregationFinalizerFn=gridOptions.treeCustomAggregations[colDef.treeAggregationType].finalizerFn,col.treeAggregation.label=gridOptions.treeCustomAggregations[colDef.treeAggregationType].label):"undefined"!=typeof service.nativeAggregations()[colDef.treeAggregationType]&&(col.treeAggregationFn=service.nativeAggregations()[colDef.treeAggregationType].aggregationFn,col.treeAggregation.label=service.nativeAggregations()[colDef.treeAggregationType].label)),"undefined"!=typeof colDef.treeAggregationLabel&&("undefined"==typeof col.treeAggregation&&(col.treeAggregation={}),col.treeAggregation.label=colDef.treeAggregationLabel),col.treeAggregationUpdateEntity=colDef.treeAggregationUpdateEntity!==!1,"undefined"==typeof col.customTreeAggregationFinalizerFn&&(col.customTreeAggregationFinalizerFn=colDef.customTreeAggregationFinalizerFn)},createRowHeader:function(grid){var rowHeaderColumnDef={name:uiGridTreeBaseConstants.rowHeaderColName,displayName:"",width:grid.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};rowHeaderColumnDef.visible=grid.options.treeRowHeaderAlwaysVisible,grid.addRowHeaderColumn(rowHeaderColumnDef,-100)},expandAllRows:function(grid){grid.treeBase.tree.forEach(function(node){service.setAllNodes(grid,node,uiGridTreeBaseConstants.EXPANDED)}),grid.treeBase.expandAll=!0,grid.queueGridRefresh()},collapseAllRows:function(grid){grid.treeBase.tree.forEach(function(node){service.setAllNodes(grid,node,uiGridTreeBaseConstants.COLLAPSED)}),grid.treeBase.expandAll=!1,grid.queueGridRefresh()},setAllNodes:function(grid,treeNode,targetState){"undefined"!=typeof treeNode.state&&treeNode.state!==targetState&&(treeNode.state=targetState,targetState===uiGridTreeBaseConstants.EXPANDED?grid.api.treeBase.raise.rowExpanded(treeNode.row):grid.api.treeBase.raise.rowCollapsed(treeNode.row)),treeNode.children&&treeNode.children.forEach(function(childNode){service.setAllNodes(grid,childNode,targetState)})},toggleRowTreeState:function(grid,row){"undefined"==typeof row.treeLevel||null===row.treeLevel||row.treeLevel<0||(row.treeNode.state===uiGridTreeBaseConstants.EXPANDED?service.collapseRow(grid,row):service.expandRow(grid,row),grid.queueGridRefresh())},expandRow:function(grid,row){"undefined"==typeof row.treeLevel||null===row.treeLevel||row.treeLevel<0||row.treeNode.state!==uiGridTreeBaseConstants.EXPANDED&&(row.treeNode.state=uiGridTreeBaseConstants.EXPANDED,grid.api.treeBase.raise.rowExpanded(row),grid.treeBase.expandAll=service.allExpanded(grid.treeBase.tree),grid.queueGridRefresh())},expandRowChildren:function(grid,row){"undefined"==typeof row.treeLevel||null===row.treeLevel||row.treeLevel<0||(service.setAllNodes(grid,row.treeNode,uiGridTreeBaseConstants.EXPANDED),grid.treeBase.expandAll=service.allExpanded(grid.treeBase.tree),grid.queueGridRefresh())},collapseRow:function(grid,row){"undefined"==typeof row.treeLevel||null===row.treeLevel||row.treeLevel<0||row.treeNode.state!==uiGridTreeBaseConstants.COLLAPSED&&(row.treeNode.state=uiGridTreeBaseConstants.COLLAPSED,grid.treeBase.expandAll=!1,grid.api.treeBase.raise.rowCollapsed(row),grid.queueGridRefresh())},collapseRowChildren:function(grid,row){"undefined"==typeof row.treeLevel||null===row.treeLevel||row.treeLevel<0||(service.setAllNodes(grid,row.treeNode,uiGridTreeBaseConstants.COLLAPSED),grid.treeBase.expandAll=!1,grid.queueGridRefresh())},allExpanded:function(tree){var allExpanded=!0;return tree.forEach(function(node){service.allExpandedInternal(node)||(allExpanded=!1)}),allExpanded},allExpandedInternal:function(treeNode){if(treeNode.children&&treeNode.children.length>0){if(treeNode.state===uiGridTreeBaseConstants.COLLAPSED)return!1;var allExpanded=!0;return treeNode.children.forEach(function(node){service.allExpandedInternal(node)||(allExpanded=!1)}),allExpanded}return!0},treeRows:function(renderableRows){if(0===renderableRows.length)return renderableRows;var grid=this;uiGridTreeBaseConstants.EXPANDED;return grid.treeBase.tree=service.createTree(grid,renderableRows),service.updateRowHeaderWidth(grid),service.sortTree(grid),service.fixFilter(grid),service.renderTree(grid.treeBase.tree)},updateRowHeaderWidth:function(grid){var rowHeader=grid.getColumn(uiGridTreeBaseConstants.rowHeaderColName),newWidth=grid.options.treeRowHeaderBaseWidth+grid.options.treeIndent*Math.max(grid.treeBase.numberLevels-1,0);rowHeader&&newWidth!==rowHeader.width&&(rowHeader.width=newWidth,grid.queueRefresh());var newVisibility=!0;grid.options.showTreeRowHeader===!1&&(newVisibility=!1),grid.options.treeRowHeaderAlwaysVisible===!1&&grid.treeBase.numberLevels<=0&&(newVisibility=!1),rowHeader.visible!==newVisibility&&(rowHeader.visible=newVisibility,rowHeader.colDef.visible=newVisibility,grid.queueGridRefresh())},renderTree:function(nodeList){var renderableRows=[];return nodeList.forEach(function(node){node.row.visible&&renderableRows.push(node.row),node.state===uiGridTreeBaseConstants.EXPANDED&&node.children&&node.children.length>0&&(renderableRows=renderableRows.concat(service.renderTree(node.children)))}),renderableRows},createTree:function(grid,renderableRows){var currentState,currentLevel=-1,parents=[];grid.treeBase.tree=[],grid.treeBase.numberLevels=0;var aggregations=service.getAggregations(grid),createNode=function(row){if("undefined"!=typeof row.entity.$$treeLevel&&row.treeLevel!==row.entity.$$treeLevel&&(row.treeLevel=row.entity.$$treeLevel),row.treeLevel<=currentLevel){for(;row.treeLevel<=currentLevel;){var lastParent=parents.pop();service.finaliseAggregations(lastParent),currentLevel--}currentState=parents.length>0?service.setCurrentState(parents):uiGridTreeBaseConstants.EXPANDED}("undefined"==typeof row.treeLevel||null===row.treeLevel||row.treeLevel<0)&&row.visible&&service.aggregate(grid,row,parents),service.addOrUseNode(grid,row,parents,aggregations),"undefined"!=typeof row.treeLevel&&null!==row.treeLevel&&row.treeLevel>=0&&(parents.push(row),currentLevel++,currentState=service.setCurrentState(parents)),grid.treeBase.numberLevels<row.treeLevel+1&&(grid.treeBase.numberLevels=row.treeLevel+1)};for(renderableRows.forEach(createNode);parents.length>0;){var lastParent=parents.pop();service.finaliseAggregations(lastParent)}return grid.treeBase.tree},addOrUseNode:function(grid,row,parents,aggregationBase){var newAggregations=[];aggregationBase.forEach(function(aggregation){newAggregations.push(service.buildAggregationObject(aggregation.col))});var newNode={state:uiGridTreeBaseConstants.COLLAPSED,row:row,parentRow:null,aggregations:newAggregations,children:[]};row.treeNode&&(newNode.state=row.treeNode.state),parents.length>0&&(newNode.parentRow=parents[parents.length-1]),row.treeNode=newNode,0===parents.length?grid.treeBase.tree.push(newNode):parents[parents.length-1].treeNode.children.push(newNode)},setCurrentState:function(parents){var currentState=uiGridTreeBaseConstants.EXPANDED;return parents.forEach(function(parent){parent.treeNode.state===uiGridTreeBaseConstants.COLLAPSED&&(currentState=uiGridTreeBaseConstants.COLLAPSED)}),currentState},sortTree:function(grid){grid.columns.forEach(function(column){column.sort&&column.sort.ignoreSort&&delete column.sort.ignoreSort}),grid.treeBase.tree=service.sortInternal(grid,grid.treeBase.tree)},sortInternal:function(grid,treeList){var rows=treeList.map(function(node){return node.row});rows=rowSorter.sort(grid,rows,grid.columns);var treeNodes=rows.map(function(row){return row.treeNode});return treeNodes.forEach(function(node){node.state===uiGridTreeBaseConstants.EXPANDED&&node.children&&node.children.length>0&&(node.children=service.sortInternal(grid,node.children))}),treeNodes},fixFilter:function(grid){var parentsVisible;grid.treeBase.tree.forEach(function(node){node.children&&node.children.length>0&&(parentsVisible=node.row.visible,service.fixFilterInternal(node.children,parentsVisible))})},fixFilterInternal:function(nodes,parentsVisible){return nodes.forEach(function(node){node.row.visible&&!parentsVisible&&(service.setParentsVisible(node),parentsVisible=!0),node.children&&node.children.length>0&&service.fixFilterInternal(node.children,parentsVisible&&node.row.visible)&&(parentsVisible=!0)}),parentsVisible},setParentsVisible:function(node){for(;node.parentRow;)node.parentRow.visible=!0,node=node.parentRow.treeNode},buildAggregationObject:function(column){var newAggregation={col:column};return column.treeAggregation&&column.treeAggregation.type&&(newAggregation.type=column.treeAggregation.type),column.treeAggregation&&column.treeAggregation.label&&(newAggregation.label=column.treeAggregation.label),newAggregation},getAggregations:function(grid){var aggregateArray=[];return grid.columns.forEach(function(column){"undefined"!=typeof column.treeAggregationFn&&(aggregateArray.push(service.buildAggregationObject(column)),grid.options.showColumnFooter&&"undefined"==typeof column.colDef.aggregationType&&column.treeAggregation&&(column.treeFooterAggregation=service.buildAggregationObject(column),column.aggregationType=service.treeFooterAggregationType))}),aggregateArray},aggregate:function(grid,row,parents){0===parents.length&&row.treeNode&&row.treeNode.aggregations&&row.treeNode.aggregations.forEach(function(aggregation){if("undefined"!=typeof aggregation.col.treeFooterAggregation){var fieldValue=grid.getCellValue(row,aggregation.col),numValue=Number(fieldValue);aggregation.col.treeAggregationFn(aggregation.col.treeFooterAggregation,fieldValue,numValue,row)}}),parents.forEach(function(parent,index){parent.treeNode.aggregations&&parent.treeNode.aggregations.forEach(function(aggregation){var fieldValue=grid.getCellValue(row,aggregation.col),numValue=Number(fieldValue);aggregation.col.treeAggregationFn(aggregation,fieldValue,numValue,row),0===index&&"undefined"!=typeof aggregation.col.treeFooterAggregation&&aggregation.col.treeAggregationFn(aggregation.col.treeFooterAggregation,fieldValue,numValue,row)})})},nativeAggregations:function(){var nativeAggregations={count:{label:i18nService.get().aggregation.count,menuTitle:i18nService.get().grouping.aggregate_count,aggregationFn:function(aggregation,fieldValue,numValue){"undefined"==typeof aggregation.value?aggregation.value=1:aggregation.value++}},sum:{label:i18nService.get().aggregation.sum,menuTitle:i18nService.get().grouping.aggregate_sum,aggregationFn:function(aggregation,fieldValue,numValue){isNaN(numValue)||("undefined"==typeof aggregation.value?aggregation.value=numValue:aggregation.value+=numValue)}},min:{label:i18nService.get().aggregation.min,menuTitle:i18nService.get().grouping.aggregate_min,aggregationFn:function(aggregation,fieldValue,numValue){"undefined"==typeof aggregation.value?aggregation.value=fieldValue:"undefined"!=typeof fieldValue&&null!==fieldValue&&(fieldValue<aggregation.value||null===aggregation.value)&&(aggregation.value=fieldValue)}},max:{label:i18nService.get().aggregation.max,menuTitle:i18nService.get().grouping.aggregate_max,aggregationFn:function(aggregation,fieldValue,numValue){"undefined"==typeof aggregation.value?aggregation.value=fieldValue:"undefined"!=typeof fieldValue&&null!==fieldValue&&(fieldValue>aggregation.value||null===aggregation.value)&&(aggregation.value=fieldValue)}},avg:{label:i18nService.get().aggregation.avg,menuTitle:i18nService.get().grouping.aggregate_avg,aggregationFn:function(aggregation,fieldValue,numValue){"undefined"==typeof aggregation.count?aggregation.count=1:aggregation.count++,isNaN(numValue)||("undefined"==typeof aggregation.value||"undefined"==typeof aggregation.sum?(aggregation.value=numValue,aggregation.sum=numValue):(aggregation.sum+=numValue,aggregation.value=aggregation.sum/aggregation.count))}}};return nativeAggregations},finaliseAggregation:function(row,aggregation){aggregation.col.treeAggregationUpdateEntity&&"undefined"!=typeof row&&"undefined"!=typeof row.entity["$$"+aggregation.col.uid]&&angular.extend(aggregation,row.entity["$$"+aggregation.col.uid]),"function"==typeof aggregation.col.treeAggregationFinalizerFn&&aggregation.col.treeAggregationFinalizerFn(aggregation),"function"==typeof aggregation.col.customTreeAggregationFinalizerFn&&aggregation.col.customTreeAggregationFinalizerFn(aggregation),"undefined"==typeof aggregation.rendered&&(aggregation.rendered=aggregation.label?aggregation.label+aggregation.value:aggregation.value)},finaliseAggregations:function(row){null!=row&&"undefined"!=typeof row.treeNode.aggregations&&row.treeNode.aggregations.forEach(function(aggregation){if(service.finaliseAggregation(row,aggregation),aggregation.col.treeAggregationUpdateEntity){var aggregationCopy={};angular.forEach(aggregation,function(value,key){aggregation.hasOwnProperty(key)&&"col"!==key&&(aggregationCopy[key]=value)}),row.entity["$$"+aggregation.col.uid]=aggregationCopy}})},treeFooterAggregationType:function(rows,column){return service.finaliseAggregation(void 0,column.treeFooterAggregation),"undefined"==typeof column.treeFooterAggregation.value||null===column.treeFooterAggregation.rendered?"":column.treeFooterAggregation.rendered}};return service}]),module.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function($templateCache,uiGridTreeBaseService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function($scope,$elm,$attrs,uiGridCtrl){var self=uiGridCtrl.grid;$scope.treeButtonClick=function(row,evt){uiGridTreeBaseService.toggleRowTreeState(self,row,evt)}}}}]),module.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function($templateCache,uiGridTreeBaseService){return{replace:!0,restrict:"E",template:$templateCache.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function($scope,$elm,$attrs,uiGridCtrl){var self=$scope.col.grid;$scope.headerButtonClick=function(row,evt){self.treeBase.expandAll?uiGridTreeBaseService.collapseAllRows(self,evt):uiGridTreeBaseService.expandAllRows(self,evt)}}}}]),module.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function($compile,uiGridConstants,gridUtil,$parse){return{priority:-200,scope:!1,compile:function($elm,$attrs){var rowRepeatDiv=angular.element($elm.children().children()[0]),existingNgClass=rowRepeatDiv.attr("ng-class"),newNgClass="";return newNgClass=existingNgClass?existingNgClass.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",rowRepeatDiv.attr("ng-class",newNgClass),{pre:function($scope,$elm,$attrs,controllers){},post:function($scope,$elm,$attrs,controllers){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);module.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),module.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function($q,uiGridTreeViewConstants,uiGridTreeBaseConstants,uiGridTreeBaseService,gridUtil,GridRow,gridClassFactory,i18nService,uiGridConstants){var service={initializeGrid:function(grid,$scope){uiGridTreeBaseService.initializeGrid(grid,$scope),grid.treeView={},grid.registerRowsProcessor(service.adjustSorting,60);var publicApi={events:{treeView:{}},methods:{treeView:{}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods)},defaultGridOptions:function(gridOptions){gridOptions.enableTreeView=gridOptions.enableTreeView!==!1},adjustSorting:function(renderableRows){var grid=this;return grid.columns.forEach(function(column){column.sort&&(column.sort.ignoreSort=!0)}),renderableRows}};return service}]),module.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(uiGridTreeViewConstants,uiGridTreeViewService,$templateCache){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridCtrl.grid.options.enableTreeView!==!1&&uiGridTreeViewService.initializeGrid(uiGridCtrl.grid,$scope)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),function(){"use strict";var module=angular.module("ui.grid.validate",["ui.grid"]);module.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function($sce,$q,$http,i18nService,uiGridConstants){var service={validatorFactories:{},setExternalFactoryFunction:function(externalFactoryFunction){service.externalFactoryFunction=externalFactoryFunction},clearExternalFactory:function(){delete service.externalFactoryFunction},getValidatorFromExternalFactory:function(name,argument){return service.externalFactoryFunction(name,argument).validatorFactory(argument)},getMessageFromExternalFactory:function(name,argument){return service.externalFactoryFunction(name,argument).messageFunction(argument)},setValidator:function(name,validatorFactory,messageFunction){service.validatorFactories[name]={validatorFactory:validatorFactory,messageFunction:messageFunction}},getValidator:function(name,argument){if(service.externalFactoryFunction){var validator=service.getValidatorFromExternalFactory(name,argument);if(validator)return validator}if(!service.validatorFactories[name])throw"Invalid validator name: "+name;return service.validatorFactories[name].validatorFactory(argument)},getMessage:function(name,argument){if(service.externalFactoryFunction){var message=service.getMessageFromExternalFactory(name,argument);if(message)return message}return service.validatorFactories[name].messageFunction(argument)},isInvalid:function(rowEntity,colDef){return rowEntity["$$invalid"+colDef.name]},setInvalid:function(rowEntity,colDef){rowEntity["$$invalid"+colDef.name]=!0},setValid:function(rowEntity,colDef){delete rowEntity["$$invalid"+colDef.name]},setError:function(rowEntity,colDef,validatorName){rowEntity["$$errors"+colDef.name]||(rowEntity["$$errors"+colDef.name]={}),rowEntity["$$errors"+colDef.name][validatorName]=!0},clearError:function(rowEntity,colDef,validatorName){rowEntity["$$errors"+colDef.name]&&validatorName in rowEntity["$$errors"+colDef.name]&&delete rowEntity["$$errors"+colDef.name][validatorName]},getErrorMessages:function(rowEntity,colDef){var errors=[];return rowEntity["$$errors"+colDef.name]&&0!==Object.keys(rowEntity["$$errors"+colDef.name]).length?(Object.keys(rowEntity["$$errors"+colDef.name]).sort().forEach(function(validatorName){errors.push(service.getMessage(validatorName,colDef.validators[validatorName]))}),errors):errors},getFormattedErrors:function(rowEntity,colDef){var msgString="",errors=service.getErrorMessages(rowEntity,colDef);if(errors.length)return errors.forEach(function(errorMsg){msgString+=errorMsg+"<br/>"}),$sce.trustAsHtml("<p><b>"+i18nService.getSafeText("validate.error")+"</b></p>"+msgString)},getTitleFormattedErrors:function(rowEntity,colDef){var newLine="\n",msgString="",errors=service.getErrorMessages(rowEntity,colDef);if(errors.length)return errors.forEach(function(errorMsg){msgString+=errorMsg+newLine}),$sce.trustAsHtml(i18nService.getSafeText("validate.error")+newLine+msgString)},runValidators:function(rowEntity,colDef,newValue,oldValue,grid){if(newValue!==oldValue){if("undefined"==typeof colDef.name||!colDef.name)throw new Error("colDef.name is required to perform validation");service.setValid(rowEntity,colDef);var validateClosureFactory=function(rowEntity,colDef,validatorName){return function(value){value||(service.setInvalid(rowEntity,colDef),service.setError(rowEntity,colDef,validatorName),grid&&grid.api.validate.raise.validationFailed(rowEntity,colDef,newValue,oldValue))}},promises=[];for(var validatorName in colDef.validators){service.clearError(rowEntity,colDef,validatorName);var validatorFunction=service.getValidator(validatorName,colDef.validators[validatorName]),promise=$q.when(validatorFunction(oldValue,newValue,rowEntity,colDef)).then(validateClosureFactory(rowEntity,colDef,validatorName));promises.push(promise)}return $q.all(promises)}},createDefaultValidators:function(){service.setValidator("minLength",function(argument){return function(oldValue,newValue,rowEntity,colDef){return void 0===newValue||null===newValue||""===newValue||newValue.length>=argument}},function(argument){return i18nService.getSafeText("validate.minLength").replace("THRESHOLD",argument)}),service.setValidator("maxLength",function(argument){return function(oldValue,newValue,rowEntity,colDef){return void 0===newValue||null===newValue||""===newValue||newValue.length<=argument}},function(threshold){return i18nService.getSafeText("validate.maxLength").replace("THRESHOLD",threshold)}),service.setValidator("required",function(argument){return function(oldValue,newValue,rowEntity,colDef){return!argument||!(void 0===newValue||null===newValue||""===newValue)}},function(argument){return i18nService.getSafeText("validate.required")})},initializeGrid:function(scope,grid){grid.validate={isInvalid:service.isInvalid,getFormattedErrors:service.getFormattedErrors,getTitleFormattedErrors:service.getTitleFormattedErrors,runValidators:service.runValidators};var publicApi={events:{validate:{validationFailed:function(rowEntity,colDef,newValue,oldValue){}}},methods:{validate:{isInvalid:function(rowEntity,colDef){return grid.validate.isInvalid(rowEntity,colDef)},getErrorMessages:function(rowEntity,colDef){return grid.validate.getErrorMessages(rowEntity,colDef)},getFormattedErrors:function(rowEntity,colDef){return grid.validate.getFormattedErrors(rowEntity,colDef)},getTitleFormattedErrors:function(rowEntity,colDef){return grid.validate.getTitleFormattedErrors(rowEntity,colDef)}}}};grid.api.registerEventsFromObject(publicApi.events),grid.api.registerMethodsFromObject(publicApi.methods),grid.edit&&grid.api.edit.on.afterCellEdit(scope,function(rowEntity,colDef,newValue,oldValue){grid.validate.runValidators(rowEntity,colDef,newValue,oldValue,grid)}),service.createDefaultValidators()}};return service}]),module.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(gridUtil,uiGridValidateService){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function($scope,$elm,$attrs,uiGridCtrl){uiGridValidateService.initializeGrid($scope,uiGridCtrl.grid)},post:function($scope,$elm,$attrs,uiGridCtrl){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),$templateCache.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row"><!-- tfooter --><div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),$templateCache.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),
$templateCache.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),$templateCache.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header"><!-- theader --><div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),$templateCache.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),$templateCache.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),$templateCache.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),$templateCache.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),$templateCache.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),$templateCache.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems"><!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --></div></div>'),$templateCache.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),$templateCache.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),$templateCache.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),$templateCache.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ name }}</button>'),$templateCache.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\"><!-- All of these dom elements are replaced in place --><div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),$templateCache.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()"><!-- tbody --><div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),$templateCache.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),$templateCache.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),$templateCache.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),$templateCache.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),$templateCache.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-if="!row.groupHeader==true" ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),$templateCache.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),$templateCache.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),$templateCache.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),$templateCache.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),$templateCache.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),$templateCache.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{showingHigh}} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),$templateCache.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),$templateCache.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),$templateCache.put("ui-grid/selectionHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),$templateCache.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),$templateCache.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),$templateCache.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),$templateCache.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),$templateCache.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),$templateCache.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),$templateCache.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),$templateCache.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),$templateCache.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}])}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("AssetsServiceModule",["ngResource"]).factory("AssetsService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.assets,{timestamp:utilService.getTimestamp()},{get:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("CustomService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource("api/custom",{timestamp:utilService.getTimestamp()},{get:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("CiService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.ci,{timestamp:utilService.getTimestamp()},{get:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _resourcesController=__webpack_require__(65),_resourcesController2=_interopRequireDefault(_resourcesController),_resourcesService=__webpack_require__(68),_resourcesService2=_interopRequireDefault(_resourcesService);exports.default=angular.module("ResourcesModule",[_resourcesController2.default,_resourcesService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15),_angularLegacySortable=__webpack_require__(66);_interopRequireDefault(_angularLegacySortable);exports.default=angular.module("ResourcesControllerModule",["ng-sortable"]).controller("resourcesController",["$scope","$state","$stateParams","AssertsInstanceService","AssertsQuery",function($scope,$state,$stateParams,assertsInstanceService,assertsQuery){$scope.sidebarToggler=!1,$scope.Toggler=function(){$scope.sidebarToggler=!$scope.sidebarToggler};var assertsInstance=$stateParams.item;null!=assertsInstance&&null==$stateParams.assertsId?assertsQuery.queryById({id:assertsInstance.Asserts.Id},function(response){$scope.datas=response.AssertsInstance,$state.go("root.manageresources."+assertsInstance.Name,{})}):(null==$stateParams.assertsId&&($stateParams.assertsId=1),assertsQuery.queryById({id:$stateParams.assertsId},function(response){$scope.datas=response.AssertsInstance,angular.isArray($scope.datas)&&$state.go("root.manageresources."+$scope.datas[0].Name,{})}))}]).controller("ResourcesQuickController",["$scope","$rootScope","$state","AssetsService","PanelService",function($scope,$rootScope,$state,assetsService,panelService){assetsService.query({},function(response){$scope.datas=response}),$scope.asserts={},$scope.sortableConfig={group:"resource-quick",animation:150},$scope.NoneSelectdatas=[],$scope.sortableConfig.onSort=function(el){$scope.datas=el.models},$scope.Settings=!1,$scope.showSettings=function(){$scope.Settings=!0},$scope.settingsClose=function(){$scope.Settings=!1},$scope.addNewModel=function(){assertsService.add($scope.asserts,function(response){console.log(response)}),$scope.newModel="",$scope.newModelItem="",$scope.Settings=!1},$("#assertsIcon").uploadify({swf:"assets/scripts/uploadify/uploadify.swf",uploader:_api_config.cmdb.uri.uploadAgreement,fileObjName:"uploadAgreement",method:"post",buttonText:"上传资产图标",width:"100",height:"30",progressData:"all",onUploadSuccess:function(file,data,response){console.log(data),$scope.asserts.Icon=JSON.parse(data).path},onUploadError:function(file,errorCode,errorMsg,errorString){bootbox.alert({size:"small",title:"消息提示",message:"上传文件失败,"+errorString})}}),$scope.toModules=function(resources,item){$state.go("root.manageresources",{redirectTo:item})}}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){"use strict";__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(67)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function(angular,Sortable){"use strict";var expando="Sortable:ng-sortable";angular.module("ng-sortable",[]).constant("ngSortableVersion","0.4.0").constant("ngSortableConfig",{}).directive("ngSortable",["$parse","ngSortableConfig",function($parse,ngSortableConfig){function getNgRepeatExpression(node){return node.getAttribute("ng-repeat")||node.getAttribute("data-ng-repeat")||node.getAttribute("x-ng-repeat")}var removed,nextSibling;return{restrict:"AC",scope:{ngSortable:"=?"},priority:1001,compile:function($element,$attr){var ngRepeat=[].filter.call($element[0].childNodes,function(node){return node.nodeType===Node.ELEMENT_NODE&&getNgRepeatExpression(node)})[0];if(ngRepeat){var match=getNgRepeatExpression(ngRepeat).match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(match){var rhs=match[2];return function(scope,$el){function _emitEvent(evt,item){var name="on"+evt.type.charAt(0).toUpperCase()+evt.type.substr(1),source=getSource();options[name]&&options[name]({model:item||source[evt.newIndex],models:source,oldIndex:evt.oldIndex,newIndex:evt.newIndex,originalEvent:evt})}function _sync(evt){var items=getSource();if(items){var oldIndex=evt.oldIndex,newIndex=evt.newIndex;if(el!==evt.from){var prevItems=evt.from[expando]();removed=prevItems[oldIndex],evt.clone?(removed=angular.copy(removed),prevItems.splice(Sortable.utils.index(evt.clone,sortable.options.draggable),0,prevItems.splice(oldIndex,1)[0]),evt.from.removeChild(evt.clone)):prevItems.splice(oldIndex,1),items.splice(newIndex,0,removed),evt.from.insertBefore(evt.item,nextSibling)}else items.splice(newIndex,0,items.splice(oldIndex,1)[0]),nextSibling.nodeType===Node.COMMENT_NODE&&evt.from.insertBefore(nextSibling,evt.item.nextSibling);scope.$apply()}}function _destroy(){offDestroy(),angular.forEach(watchers,function(unwatch){unwatch()}),sortable.destroy(),el[expando]=null,el=null,watchers=null,sortable=null,nextSibling=null}var offDestroy,sortable,itemsExpr=$parse(rhs),getSource=function(){return itemsExpr(scope.$parent)||[]},el=$el[0],options=angular.extend(scope.ngSortable||{},ngSortableConfig),watchers=[];el[expando]=getSource,sortable=Sortable.create(el,Object.keys(options).reduce(function(opts,name){return opts[name]=opts[name]||options[name],opts},{onStart:function(evt){nextSibling=evt.from===evt.item.parentNode?evt.item.nextSibling:evt.clone.nextSibling,_emitEvent(evt),scope.$apply()},onEnd:function(evt){_emitEvent(evt,removed),scope.$apply()},onAdd:function(evt){_sync(evt),_emitEvent(evt,removed),scope.$apply()},onUpdate:function(evt){_sync(evt),_emitEvent(evt)},onRemove:function(evt){_emitEvent(evt,removed)},onSort:function(evt){_emitEvent(evt)}})),angular.forEach(["sort","disabled","draggable","handle","animation","group","ghostClass","filter","onStart","onEnd","onAdd","onUpdate","onRemove","onSort","onMove","onClone","setData"],function(name){watchers.push(scope.$watch("ngSortable."+name,function(value){void 0!==value&&(options[name]=value,/^on[A-Z]/.test(name)||sortable.option(name,value))}))}),offDestroy=scope.$on("$destroy",_destroy)}}}}}}])})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/**!
	 * Sortable
	 * @author	RubaXa   <trash@rubaxa.org>
	 * @license MIT
	 */
!function(factory){"use strict";__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function(){"use strict";function Sortable(el,options){if(!el||!el.nodeType||1!==el.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(el);this.el=el,this.options=options=_extend({},options),el[expando]=this;var defaults={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(el.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(dataTransfer,dragEl){dataTransfer.setData("Text",dragEl.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var name in defaults)!(name in options)&&(options[name]=defaults[name]);_prepareGroup(options);for(var fn in this)"_"===fn.charAt(0)&&(this[fn]=this[fn].bind(this));this.nativeDraggable=!options.forceFallback&&supportDraggable,_on(el,"mousedown",this._onTapStart),_on(el,"touchstart",this._onTapStart),this.nativeDraggable&&(_on(el,"dragover",this),_on(el,"dragenter",this)),touchDragOverListeners.push(this._onDragOver),options.store&&this.sort(options.store.get(this))}function _cloneHide(state){cloneEl&&cloneEl.state!==state&&(_css(cloneEl,"display",state?"none":""),!state&&cloneEl.state&&rootEl.insertBefore(cloneEl,dragEl),cloneEl.state=state)}function _closest(el,selector,ctx){if(el){ctx=ctx||document,selector=selector.split(".");var tag=selector.shift().toUpperCase(),re=new RegExp("\\s("+selector.join("|")+")(?=\\s)","g");do if(">*"===tag&&el.parentNode===ctx||(""===tag||el.nodeName.toUpperCase()==tag)&&(!selector.length||((" "+el.className+" ").match(re)||[]).length==selector.length))return el;while(el!==ctx&&(el=el.parentNode))}return null}function _globalDragOver(evt){evt.dataTransfer&&(evt.dataTransfer.dropEffect="move"),evt.preventDefault()}function _on(el,event,fn){el.addEventListener(event,fn,!1)}function _off(el,event,fn){el.removeEventListener(event,fn,!1)}function _toggleClass(el,name,state){if(el)if(el.classList)el.classList[state?"add":"remove"](name);else{var className=(" "+el.className+" ").replace(RSPACE," ").replace(" "+name+" "," ");el.className=(className+(state?" "+name:"")).replace(RSPACE," ")}}function _css(el,prop,val){var style=el&&el.style;if(style){if(void 0===val)return document.defaultView&&document.defaultView.getComputedStyle?val=document.defaultView.getComputedStyle(el,""):el.currentStyle&&(val=el.currentStyle),void 0===prop?val:val[prop];prop in style||(prop="-webkit-"+prop),style[prop]=val+("string"==typeof val?"":"px")}}function _find(ctx,tagName,iterator){if(ctx){var list=ctx.getElementsByTagName(tagName),i=0,n=list.length;if(iterator)for(;i<n;i++)iterator(list[i],i);return list}return[]}function _dispatchEvent(sortable,rootEl,name,targetEl,fromEl,startIndex,newIndex){var evt=document.createEvent("Event"),options=(sortable||rootEl[expando]).options,onName="on"+name.charAt(0).toUpperCase()+name.substr(1);evt.initEvent(name,!0,!0),evt.to=rootEl,evt.from=fromEl||rootEl,evt.item=targetEl||rootEl,evt.clone=cloneEl,evt.oldIndex=startIndex,evt.newIndex=newIndex,rootEl.dispatchEvent(evt),options[onName]&&options[onName].call(sortable,evt)}function _onMove(fromEl,toEl,dragEl,dragRect,targetEl,targetRect){var evt,retVal,sortable=fromEl[expando],onMoveFn=sortable.options.onMove;return evt=document.createEvent("Event"),evt.initEvent("move",!0,!0),evt.to=toEl,evt.from=fromEl,evt.dragged=dragEl,evt.draggedRect=dragRect,evt.related=targetEl||toEl,evt.relatedRect=targetRect||toEl.getBoundingClientRect(),fromEl.dispatchEvent(evt),onMoveFn&&(retVal=onMoveFn.call(sortable,evt)),retVal}function _disableDraggable(el){el.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsLast(el,evt){var lastEl=el.lastElementChild,rect=lastEl.getBoundingClientRect();return(evt.clientY-(rect.top+rect.height)>5||evt.clientX-(rect.right+rect.width)>5)&&lastEl}function _generateId(el){for(var str=el.tagName+el.className+el.src+el.href+el.textContent,i=str.length,sum=0;i--;)sum+=str.charCodeAt(i);return sum.toString(36)}function _index(el){var index=0;if(!el||!el.parentNode)return-1;for(;el&&(el=el.previousElementSibling);)"TEMPLATE"!==el.nodeName.toUpperCase()&&index++;return index}function _throttle(callback,ms){var args,_this;return function(){void 0===args&&(args=arguments,_this=this,setTimeout(function(){1===args.length?callback.call(_this,args[0]):callback.apply(_this,args),args=void 0},ms))}}function _extend(dst,src){if(dst&&src)for(var key in src)src.hasOwnProperty(key)&&(dst[key]=src[key]);return dst}var dragEl,parentEl,ghostEl,cloneEl,rootEl,nextEl,scrollEl,scrollParentEl,lastEl,lastCSS,lastParentCSS,oldIndex,newIndex,activeGroup,tapEvt,touchEvt,moved,autoScroll={},RSPACE=/\s+/g,expando="Sortable"+(new Date).getTime(),win=window,document=win.document,parseInt=win.parseInt,supportDraggable=!!("draggable"in document.createElement("div")),supportCssPointerEvents=function(el){return el=document.createElement("x"),el.style.cssText="pointer-events:auto","auto"===el.style.pointerEvents}(),_silent=!1,abs=Math.abs,touchDragOverListeners=([].slice,[]),_autoScroll=_throttle(function(evt,options,rootEl){if(rootEl&&options.scroll){var el,rect,vx,vy,sens=options.scrollSensitivity,speed=options.scrollSpeed,x=evt.clientX,y=evt.clientY,winWidth=window.innerWidth,winHeight=window.innerHeight;if(scrollParentEl!==rootEl&&(scrollEl=options.scroll,scrollParentEl=rootEl,scrollEl===!0)){scrollEl=rootEl;do if(scrollEl.offsetWidth<scrollEl.scrollWidth||scrollEl.offsetHeight<scrollEl.scrollHeight)break;while(scrollEl=scrollEl.parentNode)}scrollEl&&(el=scrollEl,rect=scrollEl.getBoundingClientRect(),vx=(abs(rect.right-x)<=sens)-(abs(rect.left-x)<=sens),vy=(abs(rect.bottom-y)<=sens)-(abs(rect.top-y)<=sens)),vx||vy||(vx=(winWidth-x<=sens)-(x<=sens),vy=(winHeight-y<=sens)-(y<=sens),(vx||vy)&&(el=win)),autoScroll.vx===vx&&autoScroll.vy===vy&&autoScroll.el===el||(autoScroll.el=el,autoScroll.vx=vx,autoScroll.vy=vy,clearInterval(autoScroll.pid),el&&(autoScroll.pid=setInterval(function(){el===win?win.scrollTo(win.pageXOffset+vx*speed,win.pageYOffset+vy*speed):(vy&&(el.scrollTop+=vy*speed),vx&&(el.scrollLeft+=vx*speed))},24)))}},30),_prepareGroup=function(options){var group=options.group;group&&"object"==typeof group||(group=options.group={name:group}),["pull","put"].forEach(function(key){key in group||(group[key]=!0)}),options.groups=" "+group.name+(group.put.join?" "+group.put.join(" "):"")+" "};return Sortable.prototype={constructor:Sortable,_onTapStart:function(evt){var _this=this,el=this.el,options=this.options,type=evt.type,touch=evt.touches&&evt.touches[0],target=(touch||evt).target,originalTarget=target,filter=options.filter;if(!("mousedown"===type&&0!==evt.button||options.disabled)&&(target=_closest(target,options.draggable,el))){if(oldIndex=_index(target),"function"==typeof filter){if(filter.call(this,evt,target,this))return _dispatchEvent(_this,originalTarget,"filter",target,el,oldIndex),void evt.preventDefault()}else if(filter&&(filter=filter.split(",").some(function(criteria){if(criteria=_closest(originalTarget,criteria.trim(),el))return _dispatchEvent(_this,criteria,"filter",target,el,oldIndex),!0})))return void evt.preventDefault();options.handle&&!_closest(originalTarget,options.handle,el)||this._prepareDragStart(evt,touch,target)}},_prepareDragStart:function(evt,touch,target){var dragStartFn,_this=this,el=_this.el,options=_this.options,ownerDocument=el.ownerDocument;target&&!dragEl&&target.parentNode===el&&(tapEvt=evt,rootEl=el,dragEl=target,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,activeGroup=options.group,dragStartFn=function(){_this._disableDelayedDrag(),dragEl.draggable=!0,_toggleClass(dragEl,_this.options.chosenClass,!0),_this._triggerDragStart(touch)},options.ignore.split(",").forEach(function(criteria){_find(dragEl,criteria.trim(),_disableDraggable)}),_on(ownerDocument,"mouseup",_this._onDrop),_on(ownerDocument,"touchend",_this._onDrop),_on(ownerDocument,"touchcancel",_this._onDrop),options.delay?(_on(ownerDocument,"mouseup",_this._disableDelayedDrag),_on(ownerDocument,"touchend",_this._disableDelayedDrag),_on(ownerDocument,"touchcancel",_this._disableDelayedDrag),_on(ownerDocument,"mousemove",_this._disableDelayedDrag),_on(ownerDocument,"touchmove",_this._disableDelayedDrag),_this._dragStartTimer=setTimeout(dragStartFn,options.delay)):dragStartFn())},_disableDelayedDrag:function(){var ownerDocument=this.el.ownerDocument;clearTimeout(this._dragStartTimer),_off(ownerDocument,"mouseup",this._disableDelayedDrag),_off(ownerDocument,"touchend",this._disableDelayedDrag),_off(ownerDocument,"touchcancel",this._disableDelayedDrag),_off(ownerDocument,"mousemove",this._disableDelayedDrag),_off(ownerDocument,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(touch){touch?(tapEvt={target:dragEl,clientX:touch.clientX,clientY:touch.clientY},this._onDragStart(tapEvt,"touch")):this.nativeDraggable?(_on(dragEl,"dragend",this),_on(rootEl,"dragstart",this._onDragStart)):this._onDragStart(tapEvt,!0);try{document.selection?document.selection.empty():window.getSelection().removeAllRanges()}catch(err){}},_dragStarted:function(){rootEl&&dragEl&&(_toggleClass(dragEl,this.options.ghostClass,!0),Sortable.active=this,_dispatchEvent(this,rootEl,"start",dragEl,rootEl,oldIndex))},_emulateDragOver:function(){if(touchEvt){if(this._lastX===touchEvt.clientX&&this._lastY===touchEvt.clientY)return;this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,supportCssPointerEvents||_css(ghostEl,"display","none");var target=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),parent=target,groupName=" "+this.options.group.name,i=touchDragOverListeners.length;if(parent)do{if(parent[expando]&&parent[expando].options.groups.indexOf(groupName)>-1){for(;i--;)touchDragOverListeners[i]({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:target,rootEl:parent});break}target=parent}while(parent=parent.parentNode);supportCssPointerEvents||_css(ghostEl,"display","")}},_onTouchMove:function(evt){if(tapEvt){Sortable.active||this._dragStarted(),this._appendGhost();var touch=evt.touches?evt.touches[0]:evt,dx=touch.clientX-tapEvt.clientX,dy=touch.clientY-tapEvt.clientY,translate3d=evt.touches?"translate3d("+dx+"px,"+dy+"px,0)":"translate("+dx+"px,"+dy+"px)";moved=!0,touchEvt=touch,_css(ghostEl,"webkitTransform",translate3d),_css(ghostEl,"mozTransform",translate3d),_css(ghostEl,"msTransform",translate3d),_css(ghostEl,"transform",translate3d),evt.preventDefault()}},_appendGhost:function(){if(!ghostEl){var ghostRect,rect=dragEl.getBoundingClientRect(),css=_css(dragEl),options=this.options;ghostEl=dragEl.cloneNode(!0),_toggleClass(ghostEl,options.ghostClass,!1),_toggleClass(ghostEl,options.fallbackClass,!0),_css(ghostEl,"top",rect.top-parseInt(css.marginTop,10)),_css(ghostEl,"left",rect.left-parseInt(css.marginLeft,10)),_css(ghostEl,"width",rect.width),_css(ghostEl,"height",rect.height),_css(ghostEl,"opacity","0.8"),_css(ghostEl,"position","fixed"),_css(ghostEl,"zIndex","100000"),_css(ghostEl,"pointerEvents","none"),options.fallbackOnBody&&document.body.appendChild(ghostEl)||rootEl.appendChild(ghostEl),ghostRect=ghostEl.getBoundingClientRect(),_css(ghostEl,"width",2*rect.width-ghostRect.width),_css(ghostEl,"height",2*rect.height-ghostRect.height)}},_onDragStart:function(evt,useFallback){var dataTransfer=evt.dataTransfer,options=this.options;this._offUpEvents(),"clone"==activeGroup.pull&&(cloneEl=dragEl.cloneNode(!0),_css(cloneEl,"display","none"),rootEl.insertBefore(cloneEl,dragEl)),useFallback?("touch"===useFallback?(_on(document,"touchmove",this._onTouchMove),_on(document,"touchend",this._onDrop),_on(document,"touchcancel",this._onDrop)):(_on(document,"mousemove",this._onTouchMove),_on(document,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(dataTransfer&&(dataTransfer.effectAllowed="move",options.setData&&options.setData.call(this,dataTransfer,dragEl)),_on(document,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(evt){var target,dragRect,revert,el=this.el,options=this.options,group=options.group,groupPut=group.put,isOwner=activeGroup===group,canSort=options.sort;if(void 0!==evt.preventDefault&&(evt.preventDefault(),!options.dragoverBubble&&evt.stopPropagation()),moved=!0,activeGroup&&!options.disabled&&(isOwner?canSort||(revert=!rootEl.contains(dragEl)):activeGroup.pull&&groupPut&&(activeGroup.name===group.name||groupPut.indexOf&&~groupPut.indexOf(activeGroup.name)))&&(void 0===evt.rootEl||evt.rootEl===this.el)){if(_autoScroll(evt,options,this.el),_silent)return;if(target=_closest(evt.target,options.draggable,el),dragRect=dragEl.getBoundingClientRect(),revert)return _cloneHide(!0),void(cloneEl||nextEl?rootEl.insertBefore(dragEl,cloneEl||nextEl):canSort||rootEl.appendChild(dragEl));if(0===el.children.length||el.children[0]===ghostEl||el===evt.target&&(target=_ghostIsLast(el,evt))){if(target){if(target.animated)return;targetRect=target.getBoundingClientRect()}_cloneHide(isOwner),_onMove(rootEl,el,dragEl,dragRect,target,targetRect)!==!1&&(dragEl.contains(el)||(el.appendChild(dragEl),parentEl=el),this._animate(dragRect,dragEl),target&&this._animate(targetRect,target))}else if(target&&!target.animated&&target!==dragEl&&void 0!==target.parentNode[expando]){lastEl!==target&&(lastEl=target,lastCSS=_css(target),lastParentCSS=_css(target.parentNode));var after,targetRect=target.getBoundingClientRect(),width=targetRect.right-targetRect.left,height=targetRect.bottom-targetRect.top,floating=/left|right|inline/.test(lastCSS.cssFloat+lastCSS.display)||"flex"==lastParentCSS.display&&0===lastParentCSS["flex-direction"].indexOf("row"),isWide=target.offsetWidth>dragEl.offsetWidth,isLong=target.offsetHeight>dragEl.offsetHeight,halfway=(floating?(evt.clientX-targetRect.left)/width:(evt.clientY-targetRect.top)/height)>.5,nextSibling=target.nextElementSibling,moveVector=_onMove(rootEl,el,dragEl,dragRect,target,targetRect);if(moveVector!==!1){if(_silent=!0,setTimeout(_unsilent,30),_cloneHide(isOwner),1===moveVector||moveVector===-1)after=1===moveVector;else if(floating){var elTop=dragEl.offsetTop,tgTop=target.offsetTop;after=elTop===tgTop?target.previousElementSibling===dragEl&&!isWide||halfway&&isWide:tgTop>elTop}else after=nextSibling!==dragEl&&!isLong||halfway&&isLong;dragEl.contains(el)||(after&&!nextSibling?el.appendChild(dragEl):target.parentNode.insertBefore(dragEl,after?nextSibling:target)),parentEl=dragEl.parentNode,this._animate(dragRect,dragEl),this._animate(targetRect,target)}}}},_animate:function(prevRect,target){var ms=this.options.animation;if(ms){var currentRect=target.getBoundingClientRect();_css(target,"transition","none"),_css(target,"transform","translate3d("+(prevRect.left-currentRect.left)+"px,"+(prevRect.top-currentRect.top)+"px,0)"),target.offsetWidth,_css(target,"transition","all "+ms+"ms"),_css(target,"transform","translate3d(0,0,0)"),clearTimeout(target.animated),target.animated=setTimeout(function(){_css(target,"transition",""),_css(target,"transform",""),target.animated=!1},ms)}},_offUpEvents:function(){var ownerDocument=this.el.ownerDocument;_off(document,"touchmove",this._onTouchMove),_off(ownerDocument,"mouseup",this._onDrop),_off(ownerDocument,"touchend",this._onDrop),_off(ownerDocument,"touchcancel",this._onDrop)},_onDrop:function(evt){var el=this.el,options=this.options;clearInterval(this._loopId),clearInterval(autoScroll.pid),clearTimeout(this._dragStartTimer),_off(document,"mousemove",this._onTouchMove),this.nativeDraggable&&(_off(document,"drop",this),_off(el,"dragstart",this._onDragStart)),this._offUpEvents(),evt&&(moved&&(evt.preventDefault(),!options.dropBubble&&evt.stopPropagation()),ghostEl&&ghostEl.parentNode.removeChild(ghostEl),dragEl&&(this.nativeDraggable&&_off(dragEl,"dragend",this),_disableDraggable(dragEl),_toggleClass(dragEl,this.options.ghostClass,!1),_toggleClass(dragEl,this.options.chosenClass,!1),rootEl!==parentEl?(newIndex=_index(dragEl),newIndex>=0&&(_dispatchEvent(null,parentEl,"sort",dragEl,rootEl,oldIndex,newIndex),_dispatchEvent(this,rootEl,"sort",dragEl,rootEl,oldIndex,newIndex),_dispatchEvent(null,parentEl,"add",dragEl,rootEl,oldIndex,newIndex),_dispatchEvent(this,rootEl,"remove",dragEl,rootEl,oldIndex,newIndex))):(cloneEl&&cloneEl.parentNode.removeChild(cloneEl),dragEl.nextSibling!==nextEl&&(newIndex=_index(dragEl),newIndex>=0&&(_dispatchEvent(this,rootEl,"update",dragEl,rootEl,oldIndex,newIndex),_dispatchEvent(this,rootEl,"sort",dragEl,rootEl,oldIndex,newIndex)))),Sortable.active&&(null!==newIndex&&newIndex!==-1||(newIndex=oldIndex),_dispatchEvent(this,rootEl,"end",dragEl,rootEl,oldIndex,newIndex),this.save())),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=scrollEl=scrollParentEl=tapEvt=touchEvt=moved=newIndex=lastEl=lastCSS=activeGroup=Sortable.active=null)},handleEvent:function(evt){var type=evt.type;"dragover"===type||"dragenter"===type?dragEl&&(this._onDragOver(evt),_globalDragOver(evt)):"drop"!==type&&"dragend"!==type||this._onDrop(evt)},toArray:function(){for(var el,order=[],children=this.el.children,i=0,n=children.length,options=this.options;i<n;i++)el=children[i],_closest(el,options.draggable,this.el)&&order.push(el.getAttribute(options.dataIdAttr)||_generateId(el));return order},sort:function(order){var items={},rootEl=this.el;this.toArray().forEach(function(id,i){var el=rootEl.children[i];_closest(el,this.options.draggable,rootEl)&&(items[id]=el)},this),order.forEach(function(id){items[id]&&(rootEl.removeChild(items[id]),rootEl.appendChild(items[id]))})},save:function(){var store=this.options.store;store&&store.set(this)},closest:function(el,selector){return _closest(el,selector||this.options.draggable,this.el)},option:function(name,value){var options=this.options;return void 0===value?options[name]:(options[name]=value,void("group"===name&&_prepareGroup(options)))},destroy:function(){var el=this.el;el[expando]=null,_off(el,"mousedown",this._onTapStart),_off(el,"touchstart",this._onTapStart),this.nativeDraggable&&(_off(el,"dragover",this),_off(el,"dragenter",this)),Array.prototype.forEach.call(el.querySelectorAll("[draggable]"),function(el){el.removeAttribute("draggable")}),touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver),1),this._onDrop(),this.el=el=null}},Sortable.utils={on:_on,off:_off,css:_css,find:_find,is:function(el,selector){return!!_closest(el,selector,el)},extend:_extend,throttle:_throttle,closest:_closest,toggleClass:_toggleClass,index:_index},Sortable.create=function(el,options){return new Sortable(el,options)},Sortable.version="1.4.2",Sortable})},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("ResourcesServiceModule",["ngResource"]).factory("AssetsService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.assets,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization},queryById:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("AssertsQuery",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.assertsQuery,{timestamp:utilService.getTimestamp()},{queryById:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("AssertsInstanceService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.assertsInstance,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("PanelService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.systemPanel,{timestamp:utilService.getTimestamp()},{update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _systemController=__webpack_require__(70),_systemController2=_interopRequireDefault(_systemController),_systemService=__webpack_require__(17),_systemService2=_interopRequireDefault(_systemService);exports.default=angular.module("SystemModule",[_systemController2.default,_systemService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15),_list_menu=__webpack_require__(71),_list_log=(_interopRequireDefault(_list_menu),__webpack_require__(72)),_list_cloud=(_interopRequireDefault(_list_log),__webpack_require__(73)),_list_modeling=(_interopRequireDefault(_list_cloud),__webpack_require__(74)),_angularClipboard=(_interopRequireDefault(_list_modeling),__webpack_require__(75)),_angularClipboard2=_interopRequireDefault(_angularClipboard),_angularAnimate=__webpack_require__(4),_angularAnimate2=_interopRequireDefault(_angularAnimate),_angularSanitize=__webpack_require__(6),_angularSanitize2=_interopRequireDefault(_angularSanitize),_angularUiBootstrap=__webpack_require__(8),_angularUiBootstrap2=_interopRequireDefault(_angularUiBootstrap);exports.default=angular.module("SystemControllerModule",[_angularClipboard2.default.name,_angularAnimate2.default,_angularSanitize2.default,_angularUiBootstrap2.default]).controller("MenuController",["$scope","$rootScope","MenumanageService","UtilService","$uibModal",function($scope,$rootScope,menumanageService,utilService,$uibModal){function initTreeview(){$.ajax({url:_api_config.cmdb.uri.menuObject+"?access_token="+$rootScope.token+"&timestamp="+utilService.getTimestamp(),dataType:"json",success:function(result){var json=JSON.stringify(result);json=json.replace(/\"children\":/g,'"nodes":');var nodes=GetNodes([JSON.parse(json)]);$("#menu_manage_div").treeview({data:nodes,backColor:"#fff",showCheckbox:!1,highlightSelected:!1})}})}function GetNodes(nodes){var rootNode=nodes[0];if(angular.isArray(rootNode.nodes)&&rootNode.nodes.length>0){for(var firstLevelNodeArray=[],firstIndex=0;firstIndex<rootNode.nodes.length;firstIndex++){var firstLevelNode=rootNode.nodes[firstIndex];if(1==firstLevelNode.level){firstLevelNode.text=GetText(firstLevelNode);var secondLevelNodeArray=[];if(angular.isArray(firstLevelNode.nodes)&&firstLevelNode.nodes.length>0)for(var secondIndex=0;secondIndex<firstLevelNode.nodes.length;secondIndex++){var secondeLevelNode=firstLevelNode.nodes[secondIndex];if(2==secondeLevelNode.level){secondeLevelNode.text=GetText(secondeLevelNode);var thirdLevelNodeArray=[];if(angular.isArray(secondeLevelNode.nodes)&&secondeLevelNode.nodes.length>0)for(var thirdIndex=0;thirdIndex<secondeLevelNode.nodes.length;thirdIndex++){var thirdLevelNode=secondeLevelNode.nodes[thirdIndex];3==thirdLevelNode.level&&(thirdLevelNode.text=GetText(thirdLevelNode)),thirdLevelNodeArray.push(thirdLevelNode)}secondeLevelNode.nodes=thirdLevelNodeArray}secondLevelNodeArray.push(secondeLevelNode)}firstLevelNode.nodes=secondLevelNodeArray}firstLevelNodeArray.push(firstLevelNode)}rootNode.nodes=firstLevelNodeArray}return[rootNode]}function GetText(raw){return"<a href='javascript:void(0)' class='a-edit'  data-id='"+raw.id+"'>"+raw.text+"</a> <a href='javascript:void(0)'><i class='glyphicon glyphicon-plus a-add' data-id='"+raw.id+"' data-level='"+raw.level+"'></i></a> <i class='glyphicon glyphicon-remove a-del'  data-id='"+raw.id+"' data-level='"+raw.level+"'></i>"}$scope.system={},$("#menu_manage_div").height($(window).height()-200),initTreeview(),$(document).on("click",".a-edit",function(){$("#menuId").val($(this).attr("data-id")),$("#renameMenuDisplayName").val($(this).text()),$("#rename_menu_dialog").modal("show")}),$(document).on("click",".a-add",function(){var iLevel=parseInt($(this).attr("data-level"));if(iLevel>=2)return void utilService.notify.error("当前系统只提供两级菜单");$("#parentId").val($(this).attr("data-id")),$("#menuLevel").val(1*$(this).attr("data-level")+1);var modalInstance=$uibModal.open({templateUrl:"add_menu_dialog.html",controller:"menuAddController"});modalInstance.result.then(function(result){var params={displayName:result.DisplayName,name:result.Name,url:result.Url,logo:result.Logo};menumanageService.add(params,{},function(response){utilService.alert(response.msg),initTreeview()})})});var timeid=0;$(document).on("click",".a-del",function(){clearTimeout(timeid);var iLevel=parseInt($(this).attr("data-level")),id=$(this).attr("data-id");setTimeout(function(){return iLevel<=1?void utilService.notify.error("菜单管理不能删除"):void $scope.system.deleteMenu(id)},200)}),$scope.system.updateMenu=function(){var menuId=$("#menuId").val(),displayName=$("#renameMenuDisplayName").val(),params={menuId:menuId,displayName:displayName};menumanageService.update(params,{},function(response){utilService.alert(response.msg),initTreeview(),$("#rename_menu_dialog").modal("hide")})},$scope.system.deleteMenu=function(menuId){var params={menuId:menuId};utilService.swalConfirm("确认删除此菜单?",function(){menumanageService.delete(params,{},function(response){utilService.alert(response.msg),initTreeview()})})}}]).controller("LogController",["$scope","$rootScope","SystemlogService","UtilService","$compile",function($scope,$rootScope,systemlogService,utilService,$compile){$scope.action={operateLogFormatter:function(value,row,index){return['<a id="log_remove" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style="margin-right:10px;"><li><i class="glyphicon glyphicon-remove"></i></li><li>删除</li></ul>',"</a>"].join("")}},$scope.logTable={options:{idField:"Id",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"ModuleDisplayName",title:"模块",sortable:!0},{field:"Operation",title:"内容",sortable:!0,formatter:function(value,row,index){return value+row.ModuleDisplayName}},{field:"UpdateBy",title:"操作人",sortable:!0,formatter:function(value,row,index){return row.UserName}},{field:"UpdateTime",title:"操作时间",sortable:!0,formatter:function(value,row,index){if(null!==row.UpdateTime){var datetimes=row.UpdateTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""}}]},state:{searchText:"",refresh:function(){systemlogService.list({enable:1},function(response){$scope.logTable.options.data=response.data})},selections:[],removeSelector:"#batch_remove",id:"logId",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={logId:ids.toString()};utilService.swalConfirm("确认删除日志?",function(result){result&&systemlogService.delete(params,{},function(response){utilService.alert(response.msg),$scope.logTable.state.refresh()})})}}},$scope.logTable.state.refresh()}]).controller("CloudController",["$scope","$rootScope","SystemcloudService","SynVcenterService","SynAliyunService","SynAwsService","SynZabbixService","UtilService","$compile","$uibModal","$timeout",function($scope,$rootScope,systemcloudService,synVcenterService,synAliyunService,synAwsService,synZabbixService,utilService,$compile,$uibModal,$timeout){$scope.cloudplats=[{cloudplat:"Zabbix",address:"资源平台地址",ip:"IP",id:"用户名",secret:"密码"},{cloudplat:"VCenter",address:"资源平台地址",ip:"IP",id:"用户名",secret:"密码"},{cloudplat:"亚马逊",show:"hide",id:"AccessKeyID",secret:"AccessKeySecret"},{cloudplat:"阿里云",show:"hide",id:"AccessKeyID",secret:"AccessKeySecret"}],$scope.action={showAddCloud:function(){var modalInstance=$uibModal.open({templateUrl:"add_cloud.html",controller:"CloudAddController"});modalInstance.result.then(function(result){var params={cloudName:result.cloudName,cloudPlat:result.selectedCloudPlat.cloudplat,cloudState:result.cloudState,cloudHostNum:result.cloudHostNum,syncState:result.syncState,accountIp:result.accountIp,accountId:result.accountId,accountSecret:result.accountSecret,comment:result.comment};systemcloudService.add(params,{},function(response){utilService.alert(response.msg),$scope.cloudTable.state.refresh()})})},operateCloudNameFormatter:function(value,row,index){return $scope.hardDelete?row.CloudName:['<a id="cloud_editor2" style="text-decoration:none;cursor:pointer">'+row.CloudName+"</a>"]},operateSyncDataFormatter:function(value,row,index){return['<a id="synchronous_data" style="cursor: pointer">同步数据</a>']},hideeditCloud:function(){$scope.cloudedits=!1,$scope.isActive=!1},cloudremove:function(value,row,index){var params={cloudId:$scope.cloud.editCloudId};utilService.swalConfirm("确认删除云帐号?",function(result){result&&systemcloudService.delete(params,{},function(response){utilService.alert(response.msg),$scope.cloudTable.state.refresh(),$scope.cloudedits=!1,$scope.isActive=!1})})},updateCloud:function(){var params={cloudId:$scope.cloud.editCloudId,cloudName:$scope.cloud.editCloudName,cloudPlat:$scope.cloud.editSelectedCloudPlat.cloudplat,accountIp:$scope.cloud.editAccountIp,accountId:$scope.cloud.editAccountId,accountSecret:$scope.cloud.editAccountSecret,cloudState:$scope.cloud.editCloudState,syncState:$scope.cloud.editSyncState,comment:$scope.cloud.editCloudComment};systemcloudService.update(params,{},function(response){utilService.alert(response.msg),$scope.cloudedits=!1,$scope.cloudTable.state.refresh()})}},$scope.cloud={screen:!1,edits:!1,editCloudId:"",editCloudName:"",editSelectedCloudPlat:"",editAccountIp:"",editAccountId:"",editAccountSecret:"",editCloudState:"",editCloudHostNum:"",editSyncState:"",editCloudComment:""},$scope.synProgressbar={showProgressbar:!1,progressValue:0,max:100,progressbarTime:null,synProgressbarStart:function(){$scope.synProgressbar.showProgressbar=!0},synProgressbarTrigger:function(value){$scope.synProgressbar.progressValue=value,$scope.synProgressbar.showProgressbar=!0,100==value&&$timeout(function(value){$scope.synProgressbar.showProgressbar=!1},2e3)}},$scope.cloudTable={options:{idField:"Id",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!1,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"CloudName",title:"名称",sortable:!0,formatter:$scope.action.operateCloudNameFormatter,events:{"click #cloud_editor2":function(e,value,row,index){$scope.$apply(function(){$scope.cloudedits=!0,$scope.isActive=!0}),angular.forEach($scope.cloudplats,function(idx,val){idx.cloudplat==row.CloudPlatform&&($scope.cloud.editSelectedCloudPlat=idx);
}),row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.cloud.editCloudId=row.Id,$scope.cloud.editCloudName=row.CloudName,$scope.cloud.editAccountIp=row.AccountIp,$scope.cloud.editAccountId=row.AccountId,$scope.cloud.editAccountSecret=row.AccountSecret,$scope.cloud.editCloudState=row.CloudState,$scope.cloud.editCloudHostNum=row.CloudHostNum,$scope.cloud.editSyncState=row.SyncState,$scope.cloud.editCloudComment=row.Comment})}}},{field:"CloudPlatform",title:"资源平台",sortable:!0},{field:"AccountIp",title:"资源地址",sortable:!0},{field:"AccountId",title:"帐号ID",sortable:!0},{field:"CloudState",title:"帐号状态",sortable:!0},{field:"CloudHostNum",title:"云主机数量",sortable:!0},{field:"SyncState",title:"同步状态",sortable:!0},{field:"CreaterTime",title:"创建时间",sortable:!0,formatter:function(value,row,index){if(null!==row.UpdateTime){var datetimes=row.UpdateTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""}},{field:"UpdateTime",title:"更新时间",sortable:!0,formatter:function(value,row,index){if(null!==row.UpdateTime){var datetimes=row.UpdateTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""}},{field:"Comment",title:"备注",sortable:!0},{field:"operate",title:"操作",align:"center",formatter:$scope.action.operateSyncDataFormatter,events:{"click #synchronous_data":function(e,value,row,index){if(""==row.AccountId||""==row.AccountSecret)utilService.alert("帐号ID、帐号Secret或资源地址不能为空");else switch(row.CloudPlatform){case"Zabbix":var params={id:row.Id};$scope.synProgressbar.synProgressbarStart(),$scope.synProgressbar.synProgressbarTrigger(20),synZabbixService.add(params,{},function(response){if($scope.synProgressbar.synProgressbarTrigger(response.id),utilService.alert(response.msg),response.result){var params={cloudId:row.Id,cloudState:"正常",syncState:"同步完成"};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}else{var params={cloudId:row.Id,cloudState:"异常",syncState:"异常"};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}});break;case"VCenter":var params={id:row.Id};$scope.synProgressbar.synProgressbarStart(),$scope.synProgressbar.synProgressbarTrigger(20),synVcenterService.add(params,{},function(response){if($scope.synProgressbar.synProgressbarTrigger(response.id),utilService.alert(response.msg),response.result){var params={cloudId:row.Id,cloudState:"正常",syncState:"同步完成",cloudHostNum:0};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}else{var params={cloudId:row.Id,cloudState:"异常",syncState:"异常"};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}});break;case"阿里云":var params={id:row.Id};$scope.synProgressbar.synProgressbarStart(),$scope.synProgressbar.synProgressbarTrigger(20),synAliyunService.add(params,{},function(response){if($scope.synProgressbar.synProgressbarTrigger(response.id),utilService.alert(response.msg),response.result){var params={cloudId:row.Id,cloudState:"正常",syncState:"同步完成",cloudHostNum:0};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}else{var params={cloudId:row.Id,cloudState:"异常",syncState:"异常"};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}});break;case"亚马逊":var params={id:row.Id};$scope.synProgressbar.synProgressbarStart(),$scope.synProgressbar.synProgressbarTrigger(20),synAwsService.add(params,{},function(response){if($scope.synProgressbar.synProgressbarTrigger(response.id),utilService.alert(response.msg),response.result){var params={cloudId:row.Id,cloudState:"正常",syncState:"同步完成",cloudHostNum:0};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}else{var params={cloudId:row.Id,cloudState:"异常",syncState:"异常"};systemcloudService.update(params,{},function(response){$scope.cloudTable.state.refresh()})}})}}}}]},query:function(){systemcloudService.list({},function(response){$scope.cloudTable.options.data=response.data})},state:{searchText:"",refresh:function(){systemcloudService.list({enable:1},function(response){$scope.cloudTable.options.data=response.data})},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={cloudId:ids.toString()};utilService.swalConfirm("确认删除云帐号?",function(result){result&&systemcloudService.delete(params,{},function(response){utilService.alert(response.msg),$scope.cloudTable.state.refresh()})})}}},$scope.cloudTable.state.refresh()}]).controller("EmailController",["$scope","EmailService","UtilService",function($scope,emailService,utilService){$("#email_add_form").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove"},fields:{emailServer:{validators:{notEmpty:{message:"邮件服务器不能为空"}}},port:{validators:{notEmpty:{message:"端口不能为空"}}},account:{validators:{notEmpty:{message:"账号不能为空"}}},password:{validators:{notEmpty:{message:"密码不能为空"}}}}}),$scope.system={addEmail:function(){var server=$("#emailServer").val(),account=$("#account").val(),port=$("#port").val(),password=$("#password").val(),params={server:server,account:account,port:port,password:password};emailService.add(params,{},function(response){utilService.alert(response.msg)})},emailValid:function(){emailService.list({},{},function(response){console.log(response)})}}}]).controller("ModelingController",["$scope","AssetsService","UtilService",function($scope,assetsService,utilService){assetsService.query({enable:1},function(response){$scope.datas=response})}]).controller("menuAddController",["$rootScope","$scope","$http","MenuService","$uibModalInstance","UtilService","FileUploader",function($rootScope,$scope,$http,menuService,$uibModalInstance,utilService,FileUploader){$scope.menu={DisplayName:"",Name:"",Url:"",Logo:""};var menus=menuService.listMenu();$scope.menuValid=function(){angular.forEach(menus,function(data,index,array){if(array||data.text===$scope.menu.DisplayName){if(data.text!=$scope.menu.DisplayName)return"";utilService.swalConfirm("菜单名称已存在！",function(response){return""})}else angular.forEach(array,function(data,idx,arr){data.text==$scope.menu.DisplayName&&utilService.swalConfirm("菜单名称已存在！",function(response){return""})})})};var uploader=$scope.uploader=new FileUploader({url:_api_config.cmdb.uri.menu+"?access_token="+$rootScope.token+"&timestamp="+utilService.getTimestamp()});uploader.filters.push({name:"customFilter",fn:function(item,options){return this.queue.length<10}}),uploader.onWhenAddingFileFailed=function(item,filter,options){utilService.swalConfirm("文件无法选择,请重新操作！",function(){return""})},uploader.onAfterAddingFile=function(fileItem){console.log(fileItem)},uploader.onSuccessItem=function(fileItem,response,status,headers){console.log(response.path)},uploader.onCompleteItem=function(fileItem,response,status,headers){console.log(response)},uploader.onCompleteAll=function(){utilService.swalConfirm("上传文件成功！",function(){return""})},$scope.addMenu=function(){$uibModalInstance.close($scope.menu)},$scope.addMenuCancel=function(){$uibModalInstance.dismiss()}}]).controller("CloudAddController",["$scope","SystemcloudService","UtilService","$uibModalInstance",function($scope,systemcloudService,utilService,$uibModalInstance){$scope.cloudplats=[{cloudplat:"Zabbix",address:"资源平台地址",ip:"IP",id:"用户名",secret:"密码"},{cloudplat:"VCenter",address:"资源平台地址",ip:"IP",id:"用户名",secret:"密码"},{cloudplat:"亚马逊",show:"hide",id:"Access Key ID",secret:"Access Key Secret"},{cloudplat:"阿里云",show:"hide",id:"Access Key ID",secret:"Access Key Secret"}],$scope.cloud={cloudName:"",selectedCloudPlat:"",cloudState:"",cloudHostNum:"",syncState:"",accountIp:"",accountId:"",accountSecret:"",comment:""},$scope.action={addCloudCancel:function(){$uibModalInstance.dismiss()},addCloud:function(){$uibModalInstance.close($scope.cloud)}}}]).controller("AccesskeyAddController",["$scope","$rootScope","UserService","UtilService","$uibModalInstance","RoleService","clipboard",function($scope,$rootScope,userService,utilService,$uibModalInstance,roleService,clipboard){$scope.addAccessKeyCancel=function(){$uibModalInstance.dismiss()},$scope.addAccessKey=function(){$uibModalInstance.close($scope.accesskey)}}]).controller("AccesskeyCopyController",["$scope","$uibModalInstance","UtilService","clipboard","accesskey",function($scope,$uibModalInstance,utilService,clipboard,accesskey){clipboard.supported||console.log("Sorry, copy to clipboard is not supported"),$scope.clickHandler=function(){clipboard.copyText("Copy this text")},$scope.success=function(){utilService.alert("复制成功！")},$scope.fail=function(err){utilService.alert("复制失败！")},$scope.copyAccessKeyCancel=function(){$uibModalInstance.dismiss()},$scope.addAccessKey=function(){$uibModalInstance.close($scope.accesskey)},$scope.accesskey=accesskey}]).controller("AccesskeyListController",["$rootScope","$scope","AccesskeyService","UtilService","$compile","$uibModal",function($rootScope,$scope,accesskeyService,utilService,$compile,$uibModal){$scope.accesskey={edits:!1,screen:!1,name:"",desc:"",typeSelected:""},$scope.action={operateAccessKeyNameFormatter:function(value,row,index){return['<a id="key_editor" style="text-underline: none; cursor: pointer">'+row.AccessKeyName+"</a>"]},operateServerFormatter:function(value,row,index){return 0===row.IsDisable?['<a id="key_enable" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)"><i class="glyphicon glyphicon-ok-sign"></i>&nbsp;启用</a>',"&nbsp"].join(""):['<a id="key_enable" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)"><i class="glyphicon glyphicon-ban-circle"></i>&nbsp;禁用</a>',"&nbsp"].join("")},showAddAccessKey:function(){var modalInstance=$uibModal.open({templateUrl:"add_accesskey.html",controller:"AccesskeyAddController"});modalInstance.result.then(function(result){var params={access_name:result.name,access_desc:result.desc,accesskey_type:result.typeSelected};accesskeyService.add(params,{},function(response){$scope.accesskeyTable.state.refresh();$uibModal.open({templateUrl:"copy_accesskey.html",controller:"AccesskeyCopyController",resolve:{accesskey:function(){return response.msg}}})})})},accesskeyBatchRemove:function(){var ids=$scope.accesskeyTable.state.selections,params={id:ids.toString()};utilService.swalConfirm("确认删除Accesskey?",function(result){result&&accesskeyService.delete(params,{},function(response){utilService.alert(response.msg),$scope.accesskeyTable.state.refresh()})})}},$scope.accesskeyTable={options:{idField:"Id",toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!1,showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"AccessKeyName",title:"名称",sortable:!0},{field:"AccessKeyId",title:"AccessKey ID",sortable:!0},{field:"User",title:"用户名",formatter:function(value,row,index){return null!==value?value.Name:""}},{field:"IsDisable",title:"状态",alige:"center",formatter:$scope.action.operateServerFormatter,events:{"click #key_enable":function(e,value,row,index){var params={id:row.Id.toString()};accesskeyService.update(params,{},function(response){utilService.alert(response.msg),$scope.accesskeyTable.state.refresh()})}}},{field:"CreateTime",title:"创建时间",sortable:!0,formatter:function(value,row,index){if(null!==row.CreateTime){var datetimes=row.CreateTime,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""}},{field:"AccessKeyDesc",title:"描述",sortable:!0}]},state:{searchText:"",refresh:function(){accesskeyService.list({enable:1},{},function(response){null===response.rows&&(response.rows=[]),$scope.accesskeyTable.options.data=response.rows})},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",accesskeyService.list({search:$scope.accesskeyTable.state.searchText,enable:0},function(response){$scope.accesskeyTable.options.data=response.rows})):($scope.deleteName="删除",accesskeyService.list({search:$scope.accesskeyTable.state.searchText,enable:1},function(response){$scope.accesskeyTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={id:ids.toString()};utilService.swalConfirm("确认删除Accesskey?",function(result){result&&accesskeyService.delete(params,{},function(response){utilService.alert(response.msg),$scope.accesskeyTable.state.refresh()})})}}},$scope.accesskeyTable.state.refresh()}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports){module.exports='<style>\n    .list-group-item .glyphicon-remove{\n        display: none;\n        color:#a52a2a;\n    }\n\n    .list-group-item a{\n        text-decoration: none;\n    }\n\n    .list-group-item:hover .glyphicon-remove{\n        display: inline-block;\n    }\n</style>\n<div class="tab-pane active" ng-controller="MenuController">\n    <div class="portlet-body form">\n        <div class="form-horizontal" role="form">\n            <div id="user_manage_role_form">\n                <div class="form-group has-success">\n                    <div id="menu_manage_div" style="margin:20px;width:50%;"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- 菜单重命名弹出框START-->\n    <div id="rename_menu_dialog" class="modal fade" tabindex="-1" aria-hidden="true">\n        <div class="modal-dialog">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n                    <h4 class="modal-title">菜单重命名</h4>\n                </div>\n                <div class="modal-body">\n                    <div class="scroller" data-always-visible="1" data-rail-visible1="1">\n                        <div class="portlet-body form">\n                            <div class="form-horizontal" role="form">\n                                <div class="form-body">\n                                    <input type="hidden" id="menuId">\n                                    <div class="form-group has-success">\n                                        <label class="col-md-3 control-label">菜单显示名称</label>\n                                        <div class="col-md-9">\n                                            <input class="form-control" id="renameMenuDisplayName">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" data-dismiss="modal" class="btn default">取消</button>\n                    <button type="submit" class="btn green" ng-click="system.updateMenu();">保存</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--菜单重命名弹出框END-->\n</div>\n\n<!-- 菜单添加弹出框START-->\n<script id="add_menu_dialog.html" type="text/ng-template">\n    <form name="menuForm" ng-submit="addMenu()" >\n        <div class="modal-header">\n            <h4 class="modal-title">添加菜单\n                <span class="add-close" ng-click="addMenuCancel()">&times;</span>\n            </h4>\n        </div>\n        <div class="modal-body">\n            <div class="scroller">\n                <div class="portlet-body form">\n                    <div class="form-horizontal" role="form">\n                        <div class="form-body" uploader="uploader" filters="queueLimit, customFilter">\n                            <div class="form-group has-success">\n                                <label class="control-label col-md-3 ">主菜单名称:</label>\n                                <div class="col-md-9">\n                                    <input class="form-control" type="text" ng-blur="menuValid()"\n                                           name="menuDisplayName" ng-model="menu.DisplayName" required/>\n                                    <div class="form-error"\n                                         ng-show="menuForm.menuDisplayName.$dirty &&\n                                             menuForm.menuDisplayName.$invalid">\n                                        <small class="error"\n                                               ng-show="menuForm.menuDisplayName.$error.required">\n                                            菜单显示名称不能为空！\n                                        </small>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group has-success">\n                                <label class="control-label col-md-3">子菜单名称:</label>\n                                <div class="col-md-9">\n                                    <input class="form-control" name="menuName"\n                                           type="text" ng-model="menu.Name" required ng-blur="menuValid()"/>\n                                    <div class="form-error"\n                                         ng-show="menuForm.menuName.$dirty &&\n                                             menuForm.menuName.$invalid">\n                                        <small class="error"\n                                               ng-show="menuForm.menuName.$error.required" >\n                                            子菜单名称不能为空！\n                                        </small>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group has-success">\n                                <label class="control-label col-md-3">子菜单路径:</label>\n                                <div class="col-md-9">\n                                    <input class="form-control" name="menuUrl" type="text"\n                                    ng-model="menu.Url" required  ng-blur="subMenuValid()"/>\n                                    <div class="form-error">\n                                        <small class="error">格式必须为：root.xxx,例如：root.resource_manage</small>\n                                    </div>\n                                    <div class="form-error"\n                                         ng-show="menuForm.menuUrl.$dirty &&\n                                             menuForm.menuUrl.$invalid">\n                                        <small class="error"\n                                               ng-show="menuForm.menuUrl.$error.required">\n                                            子菜单URL不能为空！\n                                        </small>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="form-group has-success">\n                                    <label class="control-label col-md-3">子菜单图标:</label>\n                                <div class="col-md-9">\n                                    <div class="row">\n                                        <div class="col-md-3">\n                                            <a style="position: relative; padding:5px 10px;  background-color:#ececec;\n                                                text-decoration: none; cursor:pointer;" href="javascript:;">\n                                                <input type="file" ng-model="menu.Logo" uploader="uploader" nv-file-select=""\n                                                       style="position: absolute; left: 0; top:0; opacity: 0;width:50px;  padding:10px ;"/>\n                                                上传图片\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n           <button type="button" class="btn default" ng-click="addMenuCancel()">取消</button>\n           <button type="submit" class="btn green" ng-disabled="menuForm.$invalid">保存</button>\n        </div>\n    </form>\n</script>\n<!--菜单添加弹出框END-->\n'},function(module,exports){module.exports='<div ng-controller="LogController">\n    <table bs-table-control="logTable"></table>\n</div>'},function(module,exports){module.exports='<div ncy-breadcrumb></div>\n<div ng-controller="CloudController">\n    <div class="searchBar">\n        <div class="pull-right">\n            <!--<button ng-click="action.showEdit()" class="btn btn-default select">\n                筛选<i class="glyphicon glyphicon-glass"></i>\n            </button>-->\n            <button ng-click="action.showAddCloud()" class="btn btn-blues">\n                <i class="glyphicon glyphicon-plus"></i>&nbsp;添加云帐号\n            </button>\n        </div>\n    </div>\n    <table bs-table-control="cloudTable"></table>\n\n    <!--编辑云资源弹出框 START-->\n    <div ng-show="cloudedits" ng-class="{true:\'editMenu\',false:\'editMenuhide\'}[isActive]">\n        <div class="editMenu-header">\n            <label class="header">\n                <i class="glyphicon glyphicon-edit"></i> 编辑云资源\n                <input type="hidden" ng-model="cloud.editCloudId" class="hidden">\n            </label>\n            <div class="edit-exits" ng-click="action.hideeditCloud()">&times;</div>\n        </div>\n        <div class="editMenu-body">\n            <div class="item">\n                <span class="col-md-5">云帐号名称</span>\n                <input type="text" name="editCloudName" ng-model="cloud.editCloudName" class="col-md-7"  placeholder="请输入名称">\n            </div>\n            <div class="item">\n                <label class="col-md-5">资源平台</label>\n                <div class="col-md-7">\n                    <select name="editSelectedCloudPlat" ng-model="cloud.editSelectedCloudPlat" ng-options="data.cloudplat for data in cloudplats">\n                        <option value="">--请选择--</option>\n                    </select>\n                </div>\n            </div>\n            <div class="item {{cloud.editSelectedCloudPlat.show}}">\n                <label class="col-md-5">{{cloud.editSelectedCloudPlat.address}}</label>\n                <div class="col-md-7">\n                    <input type="text" name="" ng-model="cloud.editAccountIp"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-5">{{cloud.editSelectedCloudPlat.id}}</label>\n                <div class="col-md-7">\n                    <input type="text" name="" ng-model="cloud.editAccountId"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-5">{{cloud.editSelectedCloudPlat.secret}}</label>\n                <div class="col-md-7">\n                    <input type="password" name="" ng-model="cloud.editAccountSecret"/>\n                </div>\n            </div>\n            <div class="item">\n                <span class="col-md-5">帐号状态</span>\n                <input type="text" class="col-md-7" ng-model="cloud.editCloudState" name="editCloudState" placeholder="帐号状态"/>\n            </div>\n            <div class="item">\n                <span class="col-md-5">同步状态</span>\n                <input type="text" class="col-md-7" ng-model="cloud.editSyncState" name="editSyncState" placeholder="同步状态"/>\n            </div>\n            <div class="item">\n                <span class="col-md-5">备注</span>\n                <input type="text" class="col-md-7" ng-model="cloud.editCloudComment" name="editComment" placeholder="备注">\n            </div>\n            <div class="editMenu-footer">\n                <div class="searchBar text-center">\n                    <a class="btn btn-remover a-del" type="button" ng-click="action.cloudremove()">删除此云资源</a>\n                    <button type="button" class="btn btn-close" ng-click="action.hideeditCloud()">取消</button>\n                    <button type="submit" class="btn btn-blues" ng-click="action.updateCloud()">保存</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--编辑云资源弹出框 END-->\n    <div ng-show="synProgressbar.showProgressbar" class="progress-striped active">\n        <uib-progressbar max="synProgressbar.max" value="synProgressbar.progressValue" type="success"><b>{{synProgressbar.progressValue}}%</b></uib-progressbar>\n    </div>\n</div>\n\n<!--添加云帐号弹出框 START-->\n<script id="add_cloud.html" type="text/ng-template">\n    <form class="inside-content" name="addCloudForm">\n        <div class="modal-header">\n            <h5 class="modal-title">添加云帐号\n                <span class="add-close" ng-click="action.addCloudCancel()">&times;</span>\n            </h5>\n        </div>\n        <div class="modal-body modal-user">\n            <div class="item">\n                <label class="col-md-5">云帐号名称<span class="required">*</span></label>\n                <div class="col-md-7">\n                    <input type="text" name="" ng-model="cloud.cloudName" placeholder="请输入云帐号名称" required="required">\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-5">资源平台<span class="required">*</span></label>\n                <div class="col-md-7">\n                    <select name="" ng-model="cloud.selectedCloudPlat" ng-options="data.cloudplat for data in cloudplats">\n                        <option value="">--请选择--</option>\n                    </select>\n                </div>\n            </div>\n            <div class="item {{cloud.selectedCloudPlat.show}}">\n                <label class="col-md-5">{{cloud.selectedCloudPlat.address}}<span class="required">*</span></label>\n                <div class="col-md-7">\n                    <input type="text" name="" ng-model="cloud.accountIp" placeholder="请输入{{cloud.selectedCloudPlat.ip}}"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-5">{{cloud.selectedCloudPlat.id}}<span class="required">*</span></label>\n                <div class="col-md-7">\n                    <input type="text" name="" ng-model="cloud.accountId" placeholder="请输入{{cloud.selectedCloudPlat.id}}" required="required"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-5">{{cloud.selectedCloudPlat.secret}}<span class="required">*</span></label>\n                <div class="col-md-7">\n                    <input type="password" name="" ng-model="cloud.accountSecret" placeholder="请输入{{cloud.selectedCloudPlat.secret}}" required="required"/>\n                </div>\n            </div>\n            <div class="item">\n                <label class="col-md-5">备注</label>\n                <div class="col-md-7">\n                    <input type="text" ng-model="cloud.comment" name="comment" placeholder="备注">\n                </div>\n            </div>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-close" ng-click="action.addCloudCancel()">取消</button>\n            <button class="btn btn-blues" ng-click="action.addCloud()" ng-disabled="addCloudForm.$invalid">保存</button>\n        </div>\n    </form>\n</script>\n<!--添加云帐号用户弹出框 END-->'},function(module,exports){module.exports='<div ng-controller="ModelingController">\n    <div class="mode-content">\n        <ui class="mode-content-ul">\n            <li ng-repeat="obj in datas">{{obj.Description}}</li>\n        </ui>\n    </div>\n</div>'},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(angular){return angular.module("angular-clipboard",[]).factory("clipboard",["$document","$window",function($document,$window){function createNode(text,context){var node=$document[0].createElement("textarea");return node.style.position="absolute",node.textContent=text,node.style.left="-10000px",node.style.top=($window.pageYOffset||$document[0].documentElement.scrollTop)+"px",node}function copyNode(node){try{$document[0].body.style.webkitUserSelect="initial";var selection=$document[0].getSelection();if(selection.removeAllRanges(),node.select(),!$document[0].execCommand("copy"))throw"failure copy";selection.removeAllRanges()}finally{$document[0].body.style.webkitUserSelect=""}}function copyText(text,context){var node=createNode(text,context);$document[0].body.appendChild(node),copyNode(node),$document[0].body.removeChild(node)}return{copyText:copyText,supported:"queryCommandSupported"in $document[0]&&$document[0].queryCommandSupported("copy")}}]).directive("clipboard",["clipboard",function(clipboard){return{restrict:"A",scope:{onCopied:"&",onError:"&",text:"=",supported:"=?"},link:function(scope,element){scope.supported=clipboard.supported,element.on("click",function(event){try{clipboard.copyText(scope.text,element[0]),angular.isFunction(scope.onCopied)&&scope.$evalAsync(scope.onCopied())}catch(err){angular.isFunction(scope.onError)&&scope.$evalAsync(scope.onError({err:err}))}})}}}])})},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _vmController=__webpack_require__(77),_vmController2=_interopRequireDefault(_vmController),_vmService=__webpack_require__(78),_vmService2=_interopRequireDefault(_vmService);exports.default=angular.module("VmModule",[_vmController2.default,_vmService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("VmControllerModule",[]).controller("AliyunListController",["$scope","AliyunService","UtilService","$uibModal",function($scope,aliyunService,utilService,$uibModal){$scope.hardDelete=!1,$scope.deleteName="删除",$scope.aliyun={screen:!1,edits:!1,editAliyunId:"",editinstancename:"",editcpu:"",editmemory:"",editip:"",edithostname:"",editdescription:""},$scope.action={showAddAliyun:function(){var modalInstance=$uibModal.open({templateUrl:"add_aliyun_dialog.html",controller:"AliyunAddController"});modalInstance.result.then(function(result){var params={instancename:result.instanceName,cpu:result.cpu,memory:result.memory,ip:result.ip,hostname:result.hostName,description:result.description};aliyunService.add(params,{},function(response){utilService.alert(response.msg),$scope.aliyunTable.state.refresh()})})},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",aliyunService.listObject({enable:0},function(response){$scope.aliyunTable.options.data=response.rows})},showbtnback:function(){$scope.aliyunTable_recycle=!$scope.aliyunTable_recycle},showEdit:function(){$scope.aliyun.screen=!0,$scope.isActive=!0},operateInstanceNameFormatter:function(value,row,index){return $scope.hardDelete?row.InstanceName:['<a id="Aliyun_editor2" style="text-decoration:none;cursor:pointer">'+row.InstanceName+"</a>"];
},aliyunremove:function(value,row,index){var params={aliyunid:$scope.aliyun.editAliyunId};utilService.swalConfirm("确认删除Aliyun?",function(result){result&&aliyunService.delete(params,{},function(response){utilService.alert(response.msg),$scope.aliyunTable.state.refresh(),$scope.aliyun.edits=!1,$scope.isActive=!1})})},updateAliyun:function(){var params={editAliyunId:$scope.aliyun.editAliyunId,editinstancename:$scope.aliyun.editinstancename,editcpu:$scope.aliyun.editcpu,editmemory:$scope.aliyun.editmemory,editip:$scope.aliyun.editip,edithostname:$scope.aliyun.edithostname,editdescription:$scope.aliyun.editdescription};aliyunService.update(params,{},function(response){utilService.alert(response.msg),$scope.aliyun.edits=!1,$scope.isActive=!1,$scope.aliyunTable.state.refresh()})},hideEdit:function(){$scope.aliyun.screen=!1,$scope.isActive=!1},editAliyunCancel:function(){$scope.aliyun.edits=!1,$scope.isActive=!1},clearAll:function(){$scope.search={searchText:"",startTime:"",endTime:""}},searchAll:function(){var params={name:$scope.search.searchText,start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};aliyunService.list(params).$promise.then(function(response){$scope.aliyunTable.options.data=response.data})}},$scope.search={searchText:"",startTime:"",endTime:""},$scope.aliyunTable={options:{idField:"Id",toolbar:"#aliyun_toolbar",data:[],striped:!0,pagination:!0,locale:"zh_CN",showTrash:!0,showRefresh:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"InstanceName",title:"实例名称",sortable:!0,formatter:$scope.action.operateInstanceNameFormatter,events:{"click #Aliyun_editor2":function(e,value,row,index){row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.aliyun.edits=!0,$scope.isActive=!0,$scope.aliyun.editAliyunId=row.Id,$scope.aliyun.editinstancename=row.InstanceName,$scope.aliyun.editcpu=row.CPU,$scope.aliyun.editmemory=row.Memory,$scope.aliyun.editip=row.IpAddress,$scope.aliyun.edithostname=row.HostName})}}},{field:"HostName",title:"主机名",sortable:!0},{field:"CPU",title:"CPU个数",sortable:!0},{field:"Memory",title:"内存大小",sortable:!0,formatter:function(value,row,index){return null!==value&&value<1024?value+"M":null!==value&&value>=1024?(value/1024).toFixed(2)+"G":null==value?"":void 0}},{field:"IpAddress",title:"IP",sortable:!0},{field:"Description",title:"备注",sortable:!0}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",aliyunService.listObject({enable:0},function(response){$scope.aliyunTable.options.data=response.rows})):($scope.deleteName="删除",aliyunService.listObject({enable:1},function(response){$scope.aliyunTable.options.data=response.rows}))},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",aliyunService.listObject({search:$scope.aliyunTable.state.searchText,enable:0},function(response){$scope.aliyunTable.options.data=response.rows})):($scope.deleteName="删除",aliyunService.listObject({search:$scope.aliyunTable.state.searchText,enable:1},function(response){$scope.aliyunTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={aliyunid:ids.toString()};utilService.swalConfirm("确认删除阿里云?",function(result){result&&aliyunService.delete(params,{},function(response){utilService.alert(response.msg),$scope.aliyunTable.state.refresh()})})},settings:function(){alert("waiting for update.......")}}},$scope.aliyunTable.state.refresh()}]).controller("AliyunAddController",["$scope","$uibModalInstance","AliyunService","UtilService",function($scope,$uibModalInstance,aliyunService,utilService){$scope.aliyunCancel=function(){$uibModalInstance.dismiss()},$scope.addAliyun=function(){$uibModalInstance.close($scope.Aliyun)},$scope.validAliyun=function(item){item&&aliyunService.listObject({search:item,enable:1},function(response){0!==response.rows.length&&(utilService.alert("实例已存在！"),$scope.Aliyun.instanceName="")})}}]).controller("AwsListController",["$scope","AwsService","UtilService","$uibModal",function($scope,awsService,utilService,$uibModal){$scope.hardDelete=!1,$scope.deleteName="删除",$scope.aws={screen:!1,edits:!1,editAwsId:"",editarchitecture:"",editimageid:"",editinstanceid:"",editinstancelifecycle:"",editinstancetype:"",editlaunchtime:"",editplatform:"",editprivatedns:"",editpublicdns:"",editpublicip:"",editvirtualizationtype:""},$scope.action={showAddAws:function(){var modalInstance=$uibModal.open({templateUrl:"add_aws_dialog.html",controller:"AwsAddController"});modalInstance.result.then(function(result){var params={architecture:result.architecture,imageid:result.imageid,instanceid:result.instanceId,instancelifecycle:result.instanceLifeCycle,instancetype:result.instanceType,launchtime:result.launchTime,platform:result.platform,privatedns:result.privateDns,publicdns:result.publicDns,publicip:result.publicIp,virtualizationtype:result.virtualizationType};awsService.add(params,{},function(response){utilService.alert(response.msg),$scope.awsTable.state.refresh()})})},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",awsService.listObject({enable:0},function(response){$scope.awsTable.options.data=response.rows})},showbtnback:function(){$scope.awsTable_recycle=!$scope.awsTable_recycle},hideeditAws:function(){$scope.aws.edits=!1,$scope.isActive=!1},hideSearch:function(){$scope.aws.screen=!1,$scope.isActive=!1},showSearch:function(){$scope.aws.screen=!0,$scope.isActive=!0},operateAwsFormatter:function(value,row,index){return row.Enable?['<a id="aws_editor" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style="margin-right:10px;"><li><i class="glyphicon glyphicon-edit"></i></li><li>编辑</li></ul>',"</a>",'<a id="aws_remove" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style="margin-right: 10px"><li><i class="glyphicon glyphicon-remove"></i></li><li>删除</li></ul>',"</a>"].join(""):['<a id="aws_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-repeat"></i>&nbsp;恢复',"</a>","&nbsp",'<a id="aws_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>&nbsp;硬删除',"</a>"].join("")},operateArchitectureFormatter:function(value,row,index){return $scope.hardDelete?row.Architecture:['<a id="aws_editor2" style="text-decoration:none;cursor:pointer">'+row.Architecture+"</a>"]},operateLaunchTimeStyle:function(value,row,index){if(null!==row.Launch){var datetimes=row.Launch,timegs=datetimes.replace(/T/g," "),timess=timegs.replace("+08:00"," ");return timess}return""},awsremove:function(value,row,index){var params={awsid:$scope.aws.editAwsId};utilService.swalConfirm("确认删除Aws?",function(result){result&&awsService.delete(params,{},function(response){utilService.alert(response.msg),$scope.awsTable.state.refresh(),$scope.aws.edits=!1,$scope.isActive=!1})})},updateAws:function(){var params={editawsid:$scope.aws.editAwsId,editarchitecture:$scope.aws.editarchitecture,editimageid:$scope.aws.editimageid,editinstanceid:$scope.aws.editinstanceid,editinstancelifecycle:$scope.aws.editinstancelifecycle,editinstancetype:$scope.aws.editinstancetype,editlaunchtime:$scope.aws.editlaunchtime,editplatform:$scope.aws.editplatform,editprivatedns:$scope.aws.editprivatedns,editpublicdns:$scope.aws.editpublicdns,editpublicip:$scope.aws.editpublicip,editvirtualizationtype:$scope.aws.editvirtualizationtype,enable:!0};awsService.update(params,{},function(response){$scope.aws.edits=!1,$scope.isActive=!1,utilService.alert(response.msg),$scope.awsTable.state.refresh()})},clearAll:function(){$scope.search={searchText:"",launchTime:"",startTime:"",endTime:""}},searchAll:function(){var params={name:$scope.search.searchText,launch_time:$scope.search.launchTime,start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};awsService.list(params).$promise.then(function(response){$scope.awsTable.options.data=response.data})}},$scope.search={searchText:"",launchTime:"",startTime:"",endTime:""},$scope.awsTable={options:{idField:"Id",toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",data:[],striped:!0,pagination:!0,locale:"zh_CN",showRefresh:!0,showTrash:!0,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"Architecture",title:"架构",sortable:!0,formatter:$scope.action.operateArchitectureFormatter,events:{"click #aws_editor2":function(e,value,row,index){row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.aws.edits=!0,$scope.isActive=!0,$scope.aws.editAwsId=row.Id,$scope.aws.editarchitecture=row.Architecture,$scope.aws.editimageid=row.ImageId,$scope.aws.editinstanceid=row.InstanceId,$scope.aws.editinstancelifecycle=row.InstanceLifecycle,$scope.aws.editinstancetype=row.InstanceType,$scope.aws.editlaunchtime=row.Launch,$scope.aws.editplatform=row.Platform,$scope.aws.editprivatedns=row.PrivateDnsName,$scope.aws.editpublicdns=row.PublicDnsName,$scope.aws.editpublicip=row.PublicIpAddress,$scope.aws.editvirtualizationtype=row.VirtualizationType})}}},{field:"ImageId",title:"镜像ID",sortable:!0},{field:"InstanceId",title:"实例ID",sortable:!0},{field:"InstanceLifecycle",title:"生命周期状态",sortable:!0},{field:"InstanceType",title:"实例类型",sortable:!0},{field:"Launch",title:"启动时间",sortable:!0,formatter:$scope.action.operateLaunchTimeStyle},{field:"Platform",title:"平台",sortable:!0},{field:"PrivateDnsName",title:"私有DNS",sortable:!0},{field:"PublicDnsName",title:"公共DNS",sortable:!0},{field:"PublicIpAddress",title:"公共IP",sortable:!0},{field:"VirtualizationType",title:"虚拟化类型",sortable:!0}]},state:{searchText:"",searchFilter:!0,refresh:function(){awsService.listObject().$promise.then(function(response){$scope.awsTable.options.data=response.rows},function(error){console.log(error)})},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",awsService.listObject({search:$scope.awsTable.state.searchText,enable:0},function(response){$scope.awsTable.options.data=response.rows})):($scope.deleteName="删除",awsService.listObject({search:$scope.awsTable.state.searchText,enable:1},function(response){$scope.awsTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"Id",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.Id});var params={awsid:ids.toString()};utilService.swalConfirm("确认删除AWS?",function(result){result&&awsService.delete(params,{},function(response){utilService.alert(response.msg),$scope.awsTable.state.refresh()})})},settings:function(){alert("waiting for update.......")}}}}]).controller("AwsAddController",["$scope","$uibModalInstance","UtilService","AwsService",function($scope,$uibModalInstance,utilService,awsService){$scope.addAws=function(){$uibModalInstance.close($scope.aws)},$scope.addAwsCancel=function(){$uibModalInstance.dismiss()},$scope.awsValid=function(item){item&&awsService.listObject({search:item,enable:1},function(response){0!==response.rows.length&&(utilService.alert("架构已存在！"),$scope.aws.architecture="")})}}]).controller("VcenterListController",["$scope","VcenterService","UtilService","$uibModal",function($scope,vcenterService,utilService,$uibModal){$scope.hardDelete=!1,$scope.deleteName="删除",$scope.vcenter={editVcenterId:"",editinstancename:"",editisTemplate:"",editvmpath:"",editmemory:"",editcpu:"",editethernetcards:"",editvirtualdisks:"",editguestfullname:"",screen:!1,vcenterEdits:!1},$scope.operationList=[],$scope.operationLists=[],$scope.search={searchText:"",operationList:{},operationTags:[],startTime:"",endTime:""},$scope.action={showAddVcenter:function(){var modalInstance=$uibModal.open({templateUrl:"add_vcenter_dialog.html",controller:"VcenterAddController"});modalInstance.result.then(function(result){var params={instancename:result.instanceNameUnique,istemplate:result.isTemplate,vmpath:result.vmPath,memory:result.memory,cpu:result.cpu,ethernetcards:result.ethernetCards,virtualdisks:result.virtualDisks,guestfullname:result.guestFullName};vcenterService.add(params,{},function(response){utilService.alert(response.msg),$scope.vcenterTable.state.refresh()})})},operateVcenterFormatter:function(value,row,index){return row.Enable?['<a id="vcenter_editor" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style="margin-right:10px;"><li><i class="glyphicon glyphicon-pencil"></i></li><li>编辑</li></ul>',"</a>",'<a id="vcenter_remove" href="javascript:void(0)">','<ul class="list-unstyled inline-block" style="margin-right:10px;"><li><i class="glyphicon glyphicon-remove"></i></li><li>删除</li></ul>',"</a>"].join(""):['<a id="vcenter_recovery" style="padding:3px 6px 3px 6px" class="label label-info" href="javascript:void(0)" title="恢复">','<i class="glyphicon glyphicon-repeat"></i>&nbsp;恢复',"</a>","&nbsp",'<a id="vcenter_hard_delete" style="padding:3px 6px 3px 6px" class="label label-danger" href="javascript:void(0)" title="硬删除">','<i class="glyphicon glyphicon-trash"></i>&nbsp;硬删除',"</a>"].join("")},operateNameFormatter:function(value,row,index){return $scope.hardDelete?row.Name:['<a style="text-decoration:none;cursor:pointer" id="vcenter_editor2">'+row.Name+"</a>"]},hideSearch:function(){$scope.vcenter.screen=!1,$scope.isActive=!1},showSearch:function(){$scope.vcenter.screen=!0,$scope.isActive=!0,vcenterService.listObject({enable:1},function(response){var data=response.rows;for(var key in data)data[key].GuestFullname&&($scope.operationList[key]={id:key,data:data[key].GuestFullname});angular.forEach($scope.operationList,function(val,idx){for(var j=0;j<idx;j++)val.data==$scope.operationList[j].data&&($scope.operationList[idx].data=-1)});for(var key in $scope.operationList)$scope.operationList[key].data!=-1&&($scope.operationLists[key]={id:$scope.operationList[key].id,data:$scope.operationList[key].data})})},hideeditVcenter:function(){$scope.vcenter.vcenterEdits=!1,$scope.isActive=!1},vcenterremove:function(value,row,index){var params={vcenterid:$scope.vcenter.editVcenterId};utilService.swalConfirm("确认删除Vcenter?",function(result){result&&vcenterService.delete(params,{},function(response){utilService.alert(response.msg),$scope.vcenterTable.state.refresh(),$scope.vcenter.vcenterEdits=!1,$scope.isActive=!1})})},updateVcenter:function(){"是"==$scope.vcenter.editistemplate?$scope.vcenter.editistemplate=1:$scope.vcenter.editistemplate=0;var params={editVcenterId:$scope.vcenter.editVcenterId,editinstancename:$scope.vcenter.editinstancename,editistemplate:$scope.vcenter.editistemplate,editvmpath:$scope.vcenter.editvmpath,editmemory:$scope.vcenter.editmemory,editcpu:$scope.vcenter.editcpu,editethernetcards:$scope.vcenter.editethernetcards,editvirtualdisks:$scope.vcenter.editvirtualdisks,editguestfullname:$scope.vcenter.editguestfullname};vcenterService.update(params,{},function(response){utilService.alert(response.msg),$scope.vcenter.vcenterEdits=!1,$scope.isActive=!1,$scope.vcenterTable.state.refresh()})},showHistory:function(){$scope.hardDelete=!0,$scope.deleteName="硬删除",vcenterService.listObject({enable:0},function(response){$scope.vcenterTable.options.data=response.rows})},showbtnback:function(){$scope.vcenterTable_recycle=!$scope.vcenterTable_recycle},clearAll:function(){$scope.search={searchText:"",operationList:{},startTime:"",endTime:""}},searchAll:function(){$scope.search.operationTags=[];for(var key in $scope.search.operationList)$scope.search.operationList[key]&&$scope.search.operationTags.push(key);var params={name:$scope.search.searchText,guest_fullname:$scope.search.operationTags,start_time:$scope.search.startTime,end_time:$scope.search.endTime,enable:!0};vcenterService.list(params).$promise.then(function(response){$scope.vcenterTable.options.data=response.data})}},$scope.vcenterTable={options:{data:[],striped:!0,pagination:!0,idField:"VcenterId",toolbar:"#vcenter_toolbar",toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",locale:"zh_CN",showRefresh:!0,showTrash:!0,showSettings:!1,showToggle:!1,showColumns:!0,searchOnEnterKey:!1,search:!0,showFooter:!1,detailView:!1,showExport:!0,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{checkbox:!0},{field:"Name",title:"实例名称",sortable:!0,formatter:$scope.action.operateNameFormatter,events:{"click #vcenter_editor2":function(e,value,row,index){row instanceof Object&&null!==row&&$scope.$apply(function(){$scope.vcenter.vcenterEdits=!0,$scope.isActive=!0,$scope.vcenter.editVcenterId=row.VcenterId,$scope.vcenter.editinstancename=row.Name,1==row.Template?$scope.vcenter.editistemplate="是":$scope.vcenter.editistemplate="否",$scope.vcenter.editvmpath=row.VmPathName,$scope.vcenter.editmemory=row.MemorySize,$scope.vcenter.editcpu=row.NumCpu,$scope.vcenter.editethernetcards=row.NumEthernetCards,$scope.vcenter.editvirtualdisks=row.NumVirtualDisks,$scope.vcenter.editinstanceuuid=row.InstanceUuid,$scope.vcenter.editguestid=row.GuestId,$scope.vcenter.editguestfullname=row.GuestFullname})}}},{field:"Template",title:"是否为模板",sortable:!0,formatter:function(value,row,index){return value?"是":"否"}},{field:"VmPathName",title:"虚拟机路径",sortable:!0},{field:"MemorySize",title:"内存大小",sortable:!0,formatter:function(value,row,index){return null!==value&&value<1024?value+"M":null!==value&&value>=1024?(value/1024).toFixed(2)+"G":null==value?"":void 0}},{field:"NumCpu",title:"CPU个数",sortable:!0},{field:"NumEthernetCards",title:"网卡个数",sortable:!0},{field:"NumVirtualDisks",title:"虚拟机磁盘个数",sortable:!0},{field:"GuestFullname",title:"操作系统全称",sortable:!0}]},state:{searchText:"",searchFilter:!0,refresh:function(){$scope.hardDelete?($scope.deleteName="硬删除",vcenterService.listObject({enable:0},function(response){$scope.vcenterTable.options.data=response.rows})):($scope.deleteName="删除",vcenterService.listObject({enable:1},function(response){$scope.vcenterTable.options.data=response.rows}))},query:function(){$scope.hardDelete?($scope.deleteName="硬删除",vcenterService.listObject({search:$scope.vcenterTable.state.searchText,enable:0},function(response){$scope.vcenterTable.options.data=response.rows})):($scope.deleteName="删除",vcenterService.listObject({search:$scope.vcenterTable.state.searchText,enable:1},function(response){$scope.vcenterTable.options.data=response.rows}))},selections:[],removeSelector:"#batch_remove",id:"VcenterId",deleteAll:function(){var ids=[];angular.forEach(this.selections,function(val,idx){ids[idx]=val.VcenterId});var params={vcenterid:ids.toString()};utilService.swalConfirm("确认删除Vcenter?",function(result){result&&vcenterService.delete(params,{},function(response){utilService.alert(response.msg),$scope.vcenterTable.state.refresh()})})}}},$scope.vcenterTable.state.refresh()}]).controller("VcenterAddController",["$scope","$uibModalInstance","VcenterService","UtilService",function($scope,$uibModalInstance,vcenterService,utilService){$scope.vCenter={instanceNameUnique:"",isTemplate:"1",vmPath:"",memory:"",cpu:"",ethernetCards:"",virtualDisks:"",guestFullName:""},$scope.testifyVcenter=function(){$scope.vCenter.instanceNameUnique&&vcenterService.listObject({search:$scope.vCenter.instanceNameUnique,enable:1},function(response){0!==response.rows.length&&(utilService.alert("实例已存在!"),$scope.vCenter.instanceNameUnique="")})},$scope.addVcenter=function(){$uibModalInstance.close($scope.vCenter)},$scope.addVcenterCancel=function(){$uibModalInstance.dismiss()}}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("VmServiceModule",["ngResource"]).factory("AliyunService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.aliyun,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("VcenterService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.vcenter,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"vcenter_id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("AwsService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.aws,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization},listObject:{method:"GET",isArray:!1,params:{format:"json",sort:"id",order:"asc",enable:1},headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,params:{},headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,params:{},headers:$rootScope.authorization},add:{method:"POST",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _resourceTreeController=__webpack_require__(80),_resourceTreeController2=_interopRequireDefault(_resourceTreeController);exports.default=angular.module("ResourceTreeModule",[_resourceTreeController2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=angular.module("ResourceTreeControllerModule",[]).controller("ResourceTreeContentController",["$rootScope","$scope",function($rootScope,$scope){var latlong={};latlong.AD={latitude:42.5,longitude:1.5},latlong.AE={latitude:24,longitude:54},latlong.AF={latitude:33,longitude:65},latlong.AG={latitude:17.05,longitude:-61.8},latlong.AI={latitude:18.25,longitude:-63.1667},latlong.AL={latitude:41,longitude:20},latlong.AM={latitude:40,longitude:45},latlong.AN={latitude:12.25,longitude:-68.75},latlong.AO={latitude:-12.5,longitude:18.5},latlong.AP={latitude:35,longitude:105},latlong.AQ={latitude:-90,longitude:0},latlong.AR={latitude:-34,longitude:-64},latlong.AS={latitude:-14.3333,longitude:-170},latlong.AT={latitude:47.3333,longitude:13.3333},latlong.AU={latitude:-27,longitude:133},latlong.AW={latitude:12.5,longitude:-69.9667},latlong.AZ={latitude:40.5,longitude:47.5},latlong.BA={latitude:44,longitude:18},latlong.BB={latitude:13.1667,longitude:-59.5333},latlong.BD={latitude:24,longitude:90},latlong.BE={latitude:50.8333,longitude:4},latlong.BF={latitude:13,longitude:-2},latlong.BG={latitude:43,longitude:25},latlong.BH={latitude:26,longitude:50.55},latlong.BI={latitude:-3.5,longitude:30},latlong.BJ={latitude:9.5,longitude:2.25},latlong.BM={latitude:32.3333,longitude:-64.75},latlong.BN={latitude:4.5,longitude:114.6667},latlong.BO={latitude:-17,longitude:-65},latlong.BR={latitude:-10,longitude:-55},latlong.BS={latitude:24.25,longitude:-76},latlong.BT={latitude:27.5,longitude:90.5},latlong.BV={latitude:-54.4333,longitude:3.4},latlong.BW={latitude:-22,longitude:24},latlong.BY={latitude:53,longitude:28},latlong.BZ={latitude:17.25,longitude:-88.75},latlong.CA={latitude:54,longitude:-100},latlong.CC={latitude:-12.5,longitude:96.8333},latlong.CD={latitude:0,longitude:25},latlong.CF={latitude:7,longitude:21},latlong.CG={latitude:-1,longitude:15},latlong.CH={latitude:47,longitude:8},latlong.CI={latitude:8,longitude:-5},latlong.CK={latitude:-21.2333,longitude:-159.7667},latlong.CL={latitude:-30,longitude:-71},latlong.CM={latitude:6,longitude:12},latlong.CN={latitude:35,longitude:105},latlong.CO={latitude:4,longitude:-72},latlong.CR={latitude:10,longitude:-84},latlong.CU={latitude:21.5,longitude:-80},latlong.CV={latitude:16,longitude:-24},latlong.CX={latitude:-10.5,longitude:105.6667},latlong.CY={latitude:35,longitude:33},latlong.CZ={latitude:49.75,longitude:15.5},latlong.DE={latitude:51,longitude:9},latlong.DJ={latitude:11.5,longitude:43},latlong.DK={latitude:56,longitude:10},latlong.DM={latitude:15.4167,longitude:-61.3333},latlong.DO={latitude:19,longitude:-70.6667},latlong.DZ={latitude:28,longitude:3},latlong.EC={latitude:-2,longitude:-77.5},latlong.EE={latitude:59,longitude:26},latlong.EG={latitude:27,longitude:30},latlong.EH={latitude:24.5,longitude:-13},latlong.ER={latitude:15,longitude:39},latlong.ES={latitude:40,longitude:-4},latlong.ET={latitude:8,longitude:38},latlong.EU={latitude:47,longitude:8},latlong.FI={latitude:62,longitude:26},latlong.FJ={latitude:-18,longitude:175},latlong.FK={latitude:-51.75,longitude:-59},latlong.FM={latitude:6.9167,longitude:158.25},latlong.FO={latitude:62,longitude:-7},latlong.FR={latitude:46,longitude:2},latlong.GA={latitude:-1,longitude:11.75},latlong.GB={latitude:54,longitude:-2},latlong.GD={latitude:12.1167,longitude:-61.6667},latlong.GE={latitude:42,longitude:43.5},latlong.GF={latitude:4,longitude:-53},latlong.GH={latitude:8,longitude:-2},latlong.GI={latitude:36.1833,longitude:-5.3667},latlong.GL={latitude:72,longitude:-40},latlong.GM={latitude:13.4667,longitude:-16.5667},latlong.GN={latitude:11,longitude:-10},latlong.GP={latitude:16.25,longitude:-61.5833},latlong.GQ={latitude:2,longitude:10},latlong.GR={latitude:39,longitude:22},latlong.GS={latitude:-54.5,longitude:-37},latlong.GT={latitude:15.5,longitude:-90.25},latlong.GU={latitude:13.4667,longitude:144.7833},latlong.GW={latitude:12,longitude:-15},latlong.GY={latitude:5,longitude:-59},latlong.HK={latitude:22.25,longitude:114.1667},latlong.HM={latitude:-53.1,longitude:72.5167},latlong.HN={latitude:15,longitude:-86.5},latlong.HR={latitude:45.1667,longitude:15.5},latlong.HT={latitude:19,longitude:-72.4167},latlong.HU={latitude:47,longitude:20},latlong.ID={latitude:-5,longitude:120},latlong.IE={latitude:53,longitude:-8},latlong.IL={latitude:31.5,longitude:34.75},latlong.IN={latitude:20,longitude:77},latlong.IO={latitude:-6,longitude:71.5},latlong.IQ={latitude:33,longitude:44},latlong.IR={latitude:32,longitude:53},latlong.IS={latitude:65,longitude:-18},latlong.IT={latitude:42.8333,longitude:12.8333},latlong.JM={latitude:18.25,longitude:-77.5},latlong.JO={latitude:31,longitude:36},latlong.JP={latitude:36,longitude:138},latlong.KE={latitude:1,longitude:38},latlong.KG={latitude:41,longitude:75},latlong.KH={latitude:13,longitude:105},latlong.KI={latitude:1.4167,longitude:173},latlong.KM={latitude:-12.1667,longitude:44.25},latlong.KN={latitude:17.3333,longitude:-62.75},latlong.KP={latitude:40,longitude:127},latlong.KR={latitude:37,longitude:127.5},latlong.KW={latitude:29.3375,longitude:47.6581},latlong.KY={latitude:19.5,longitude:-80.5},latlong.KZ={latitude:48,longitude:68},latlong.LA={latitude:18,longitude:105},latlong.LB={latitude:33.8333,longitude:35.8333},latlong.LC={latitude:13.8833,longitude:-61.1333},latlong.LI={latitude:47.1667,longitude:9.5333},latlong.LK={latitude:7,longitude:81},latlong.LR={latitude:6.5,longitude:-9.5},latlong.LS={latitude:-29.5,longitude:28.5},latlong.LT={latitude:55,longitude:24},latlong.LU={latitude:49.75,longitude:6},latlong.LV={latitude:57,longitude:25},latlong.LY={latitude:25,longitude:17},latlong.MA={latitude:32,longitude:-5},latlong.MC={latitude:43.7333,longitude:7.4},latlong.MD={latitude:47,longitude:29},latlong.ME={latitude:42.5,longitude:19.4},latlong.MG={latitude:-20,longitude:47},latlong.MH={latitude:9,longitude:168},latlong.MK={latitude:41.8333,longitude:22},latlong.ML={latitude:17,longitude:-4},latlong.MM={latitude:22,longitude:98},latlong.MN={latitude:46,longitude:105},latlong.MO={latitude:22.1667,longitude:113.55},latlong.MP={latitude:15.2,longitude:145.75},latlong.MQ={latitude:14.6667,longitude:-61},latlong.MR={latitude:20,longitude:-12},latlong.MS={latitude:16.75,longitude:-62.2},latlong.MT={latitude:35.8333,longitude:14.5833},latlong.MU={latitude:-20.2833,longitude:57.55},latlong.MV={latitude:3.25,longitude:73},latlong.MW={latitude:-13.5,longitude:34},latlong.MX={latitude:23,longitude:-102},latlong.MY={latitude:2.5,longitude:112.5},latlong.MZ={latitude:-18.25,longitude:35},latlong.NA={latitude:-22,longitude:17},latlong.NC={latitude:-21.5,longitude:165.5},latlong.NE={latitude:16,longitude:8},latlong.NF={latitude:-29.0333,longitude:167.95},latlong.NG={latitude:10,longitude:8},latlong.NI={latitude:13,longitude:-85},latlong.NL={latitude:52.5,longitude:5.75},latlong.NO={latitude:62,longitude:10},latlong.NP={latitude:28,longitude:84},latlong.NR={latitude:-.5333,longitude:166.9167},latlong.NU={latitude:-19.0333,longitude:-169.8667},latlong.NZ={latitude:-41,longitude:174},latlong.OM={latitude:21,longitude:57},latlong.PA={latitude:9,longitude:-80},latlong.PE={latitude:-10,longitude:-76},latlong.PF={latitude:-15,longitude:-140},latlong.PG={latitude:-6,longitude:147},latlong.PH={latitude:13,longitude:122},latlong.PK={latitude:30,longitude:70},latlong.PL={latitude:52,longitude:20},latlong.PM={latitude:46.8333,longitude:-56.3333},latlong.PR={latitude:18.25,longitude:-66.5},latlong.PS={latitude:32,longitude:35.25},latlong.PT={latitude:39.5,longitude:-8},latlong.PW={latitude:7.5,longitude:134.5},latlong.PY={latitude:-23,longitude:-58},latlong.QA={latitude:25.5,longitude:51.25},latlong.RE={latitude:-21.1,longitude:55.6},latlong.RO={latitude:46,longitude:25},latlong.RS={latitude:44,longitude:21},latlong.RU={latitude:60,longitude:100},latlong.RW={latitude:-2,longitude:30},latlong.SA={latitude:25,longitude:45},latlong.SB={latitude:-8,longitude:159},latlong.SC={latitude:-4.5833,longitude:55.6667},latlong.SD={latitude:15,longitude:30},latlong.SE={latitude:62,longitude:15},latlong.SG={latitude:1.3667,longitude:103.8},latlong.SH={latitude:-15.9333,longitude:-5.7},latlong.SI={latitude:46,longitude:15},latlong.SJ={latitude:78,longitude:20},latlong.SK={latitude:48.6667,longitude:19.5},latlong.SL={latitude:8.5,longitude:-11.5},latlong.SM={latitude:43.7667,longitude:12.4167},latlong.SN={latitude:14,longitude:-14},latlong.SO={latitude:10,longitude:49};latlong.SR={latitude:4,longitude:-56};latlong.ST={latitude:1,longitude:7},latlong.SV={latitude:13.8333,longitude:-88.9167},latlong.SY={latitude:35,longitude:38},latlong.SZ={latitude:-26.5,longitude:31.5},latlong.TC={latitude:21.75,longitude:-71.5833},latlong.TD={latitude:15,longitude:19},latlong.TF={latitude:-43,longitude:67},latlong.TG={latitude:8,longitude:1.1667},latlong.TH={latitude:15,longitude:100},latlong.TJ={latitude:39,longitude:71},latlong.TK={latitude:-9,longitude:-172},latlong.TM={latitude:40,longitude:60},latlong.TN={latitude:34,longitude:9},latlong.TO={latitude:-20,longitude:-175},latlong.TR={latitude:39,longitude:35},latlong.TT={latitude:11,longitude:-61},latlong.TV={latitude:-8,longitude:178},latlong.TW={latitude:23.5,longitude:121},latlong.TZ={latitude:-6,longitude:35},latlong.UA={latitude:49,longitude:32},latlong.UG={latitude:1,longitude:32},latlong.UM={latitude:19.2833,longitude:166.6},latlong.US={latitude:38,longitude:-97},latlong.UY={
latitude:-33,longitude:-56},latlong.UZ={latitude:41,longitude:64},latlong.VA={latitude:41.9,longitude:12.45},latlong.VC={latitude:13.25,longitude:-61.2},latlong.VE={latitude:8,longitude:-66},latlong.VG={latitude:18.5,longitude:-64.5},latlong.VI={latitude:18.3333,longitude:-64.8333},latlong.VN={latitude:16,longitude:106},latlong.VU={latitude:-16,longitude:167},latlong.WF={latitude:-13.3,longitude:-176.2},latlong.WS={latitude:-13.5833,longitude:-172.3333},latlong.YE={latitude:15,longitude:48},latlong.YT={latitude:-12.8333,longitude:45.1667},latlong.ZA={latitude:-29,longitude:24},latlong.ZM={latitude:-15,longitude:30},latlong.ZW={latitude:-20,longitude:30};var mapData=[{code:"CN",name:"数据中心1",color:"#eea638"},{code:"ZA",name:"数据中心2",color:"#eea638"},{code:"UY",name:"数据中心3",color:"#eea638"},{code:"TG",name:"数据中心4",color:"#eea638"},{code:"SO",name:"数据中心5",color:"#eea638"},{code:"SD",name:"数据中心6",color:"#eea638"}],max=-(1/0),min=1/0;mapData.forEach(function(itemOpt){itemOpt.value>max&&(max=itemOpt.value),itemOpt.value<min&&(min=itemOpt.value)});var option={backgroundColor:"#fff",title:{text:"",subtext:"",left:"center",top:"top",textStyle:{color:"#fff"}},tooltip:{trigger:"item",enterable:"true",backgroundColor:"#fff",borderWidth:"1",borderColor:"#20a0ff",padding:[5,10,5,10],textStyle:{color:"#333",textAglin:"center"},formatter:function(params,ticket,callback){var value=params.value;return params.name+"<br/>"+value+'<br/><div class="Seedetails"><button>查看详情</button></div>'}},visualMap:{show:!1,min:0,max:max,inRange:{symbolSize:[6,60]}},geo:{name:"World Population (2010)",type:"map",map:"world",roam:!0,label:{emphasis:{show:!1}},itemStyle:{normal:{areaColor:"#E3F0FE",borderColor:"#a8e4ff"},emphasis:{areaColor:"#A5D4FD"}}},series:[{type:"scatter",coordinateSystem:"geo",data:mapData.map(function(itemOpt){return{name:itemOpt.name,value:[latlong[itemOpt.code].longitude,latlong[itemOpt.code].latitude,itemOpt.value],label:{emphasis:{position:"right",show:!0}},color:"red",itemStyle:{normal:{color:itemOpt.color}}}})}]},rtree=echarts.init(document.getElementById("rtree"));rtree.setOption(option),window.addEventListener("resize",function(){rtree.resize()})}]).controller("ResourceTreeMenuController",["$rootScope","$scope","DatacenterService","RoomService","$state",function($rootScope,$scope,datacenterService,roomService,$state){$rootScope.$emit("resouceTreeEmit","test"),$scope.resourcesList=[];var templateRoomList=[],templateObject={};datacenterService.listObject({enable:1},function(response){angular.forEach(response.rows,function(val,idx){var params={datacenter:val.Dcid};roomService.list(params).$promise.then(function(response){templateRoomList=response.data,templateObject={id:val.Dcid,dcname:val.Dcname,rooms:templateRoomList,roomNum:templateRoomList.length},$scope.resourcesList.push(templateObject)})})}),$scope.showDcDetails=function(dc){$state.go("root.visualization.rtree.details",{object:dc})},$scope.showRoomDetails=function(room){$state.go("root.visualization.rtree.details",{object:room})}}]).controller("ResourceTreeDetailsController",["$scope","$stateParams","RackService",function($scope,$stateParams,rackService){$scope.rackDetails=!1,$scope.roomDetails=!1;var flag=$stateParams.object.hasOwnProperty("dcname");if(flag)$scope.Dcname=$stateParams.object.dcname,$scope.rooms=$stateParams.object.rooms;else{var DC=$stateParams.object.Datacenter;if($scope.roomDetails=!0,!DC)return"";$scope.Dcname=DC.Dcname,$scope.roomName=$stateParams.object.RoomName;var params={room:$stateParams.object.RoomId};rackService.list(params).$promise.then(function(response){$scope.rackLists=response.data})}$scope.rackLists=[],$scope.showRoomDetails=function(room){$scope.roomDetails=!0,$scope.roomName=room.RoomName;var params={room:room.RoomId};rackService.list(params).$promise.then(function(response){$scope.rackLists=response.data})},$scope.showRackDetails=function(rack){console.log($scope.rackLists),$scope.rackDetails=!0,$scope.rackName=rack.RackName,$scope.rack=rack,$scope.racks=$scope.rackLists,$scope.rackSelected=rack.RackId}}]).controller("ResourcesTopoController",["$rootScope","$scope","DatacenterService","RoomService","RackService","$uibModal",function($rootScope,$scope,datacenterService,roomService,rackService,$uibModal){$scope.resourcesList=[];var templateRoomList=[],templateObject={};datacenterService.listObject({enable:1},function(response){angular.forEach(response.rows,function(val,idx){var params={datacenter:val.Dcid};roomService.list(params).$promise.then(function(response){templateRoomList=response.data,templateObject={id:val.Dcid,dcname:val.Dcname,rooms:templateRoomList},$scope.resourcesList.push(templateObject)})})});var container=document.getElementById("network"),data={nodes:"",edges:""},defaultOptions={autoResize:!0,height:"100%",width:"100%",locale:"zn",edges:{physics:!1,selectionWidth:2,smooth:{enabled:!1,type:"continuous",roundness:0,forceDirection:"horizontal"},width:1,font:{size:8}},nodes:{borderWidth:1,borderWidthSelected:2},layout:{improvedLayout:!0,randomSeed:10},interaction:{navigationButtons:!0,selectable:!0,zoomView:!0},configure:{enabled:!1},physics:{enabled:!0,stabilization:!1},manipulation:{enabled:!0,initiallyActive:!1}};new vis.Network(container,data,defaultOptions);$scope.resourceTopos=[];var nextTopo=1;$scope.addResourceTopo=function(){$scope.resourceTopos.push({id:nextTopo++,name:"拓扑图"})}}]).controller("AppTopoController",["$rootScope","$scope",function($rootScope,$scope){$rootScope.$on("resouceTreeEmit",function(event,data){$scope.activeLeft=!0}),$scope.appTopos=[];var nextTopo=1;$scope.addAppTopo=function(){$scope.appTopos.push({id:nextTopo++,name:"业务拓扑"})};var container=document.getElementById("network"),data={nodes:"",edges:""},defaultOptions={autoResize:!0,height:"100%",width:"100%",locale:"zn",edges:{physics:!1,selectionWidth:2,smooth:{enabled:!1,type:"continuous",roundness:0,forceDirection:"horizontal"},width:1,font:{size:8}},nodes:{borderWidth:1,borderWidthSelected:2},layout:{improvedLayout:!0,randomSeed:10},interaction:{navigationButtons:!0,selectable:!0,zoomView:!0},configure:{enabled:!1},physics:{enabled:!0,stabilization:!1},manipulation:{enabled:!0,initiallyActive:!1}};new vis.Network(container,data,defaultOptions)}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _topoController=__webpack_require__(82),_topoController2=_interopRequireDefault(_topoController),_topoService=__webpack_require__(84),_topoService2=_interopRequireDefault(_topoService);exports.default=angular.module("TopoModule",[_topoController2.default,_topoService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _vis=__webpack_require__(83),_vis2=_interopRequireDefault(_vis);exports.default=angular.module("TopoControllerModule",[]).controller("topoController",["$scope","$rootScope","$uibModal","TopoService","TopoNodeService","TopoViewService","TopoLineService",function($scope,$rootScope,$uibModal,topoService,topoNodeService,topoViewService,topoLineService){$scope.sidebarToggler=!1,$scope.Toggler=function(){$scope.sidebarToggler=!$scope.sidebarToggler},$scope.currentTopoviewId=-1,$scope.addTopoview=function(){var modalInstance=$uibModal.open({templateUrl:"addTopoview.html",controller:"ModalAddTopoviewCtrl"});modalInstance.result.then(function(view){var addView={name:view.name};topoViewService.add(addView,{},function(response){$scope.topo.refreshTopoTree()})})},$scope.TopoViewSelected=!1,$scope.showTopoView=function(viewId){$scope.TopoViewSelected=!0,$scope.currentTopoviewId=viewId,topoViewService.query({id:viewId}).$promise.then(function(view){$scope.topo.data.nodes=view[0].nodes,$scope.topo.data.edges=view[0].edges,$scope.network.setData($scope.topo.data)})},$scope.topoviews=[],$scope.topo={container:document.getElementById("network"),data:{nodes:[],edges:[]},options:{autoResize:!0,height:"100%",width:"100%",locale:"zn",edges:{physics:!1,selectionWidth:2,smooth:{enabled:!1,type:"continuous",roundness:0,forceDirection:"horizontal"},width:1,font:{size:8}},nodes:{physics:!1,borderWidth:1,borderWidthSelected:2},layout:{improvedLayout:!0,randomSeed:90},manipulation:{enabled:!0,initiallyActive:!0,addNode:function(nodeData,callback){if($scope.currentTopoviewId===-1)return void alert("请选择TOPO图");var modalInstance=$uibModal.open({templateUrl:"addNodes.html",controller:"ModalNodeCtrl"});modalInstance.result.then(function(node){var newTopoNode={viewid:$scope.currentTopoviewId,label:node.nodelabel,title:node.nodetitle,shape:"image",image:node.nodeimage,x:nodeData.x,y:nodeData.y};callback(newTopoNode),topoNodeService.add(newTopoNode,{},function(response){})})},addEdge:function(edgeData,callback){if($scope.currentTopoviewId===-1)return void alert("请选择TOPO图");var modalInstance=$uibModal.open({templateUrl:"addEdges.html",controller:"ModalEdgeCtrl"});modalInstance.result.then(function(edge){if(edgeData.font={},edgeData.dashes=!0,edgeData.label=edge.edgelabel,edgeData.font.color="#f00",edgeData.from!==edgeData.to){var newTopoLine={viewid:$scope.currentTopoviewId,from:edgeData.from,to:edgeData.to,label:edge.edgelabel};callback(newTopoLine),topoLineService.add(newTopoLine,{},function(response){})}else alert("不能向本身添加连线")})},editNode:function(editNodeData,callback){if($scope.currentTopoviewId===-1)return void alert("请选择TOPO图");$scope.NodeDatas=editNodeData;var modalInstance=$uibModal.open({templateUrl:"editNode.html",controller:"ModalEditNodeCtrl",resolve:{NodeDatas:function(){return $scope.NodeDatas}}});modalInstance.result.then(function(result){editNodeData.id=result.nodeId,editNodeData.label=result.nodelabel,editNodeData.title=result.nodetitle,editNodeData.shape=result.nodetype;var updateTopoNode={id:editNodeData.id,label:editNodeData.label,title:editNodeData.title,x:editNodeData.x,y:editNodeData.y};callback(updateTopoNode),topoNodeService.update(updateTopoNode,{},function(response){$scope.topo.refresh()})})},editEdge:function(_editEdgeData,callback){if($scope.currentTopoviewId===-1)return void alert("请选择TOPO图");var modalInstance=$uibModal.open({templateUrl:"editEdge.html",controller:"ModalEditEdgeCtrl",resolve:{editEdgeData:function(){return _editEdgeData}}});modalInstance.result.then(function(result){_editEdgeData.from=result.from,_editEdgeData.to=result.to,_editEdgeData.label=result.edgeLabel;var updateTopoLine={id:_editEdgeData.id,from:_editEdgeData.from,to:_editEdgeData.to,label:_editEdgeData.label};callback(updateTopoLine),topoLineService.update(updateTopoLine,{},function(response){})})},deleteNode:function(_deleteNode,callback){if($scope.currentTopoviewId===-1)return void alert("请选择TOPO图");var tips=confirm("确定要删除该节点？");if(tips){callback(_deleteNode);var deletenode={nodes:_deleteNode.nodes,edges:_deleteNode.edges};topoNodeService.delete(deletenode,{},function(response){})}},deleteEdge:function(_deleteEdge,callback){var tips=confirm("确定要删除该线路？");if(tips){callback(_deleteEdge);var deleteedge={nodes:_deleteEdge.nodes,edges:_deleteEdge.edges};topoNodeService.delete(deleteedge,{},function(response){})}}},interaction:{navigationButtons:!0,selectable:!0,zoomView:!0},configure:{enabled:!1},physics:{enabled:!0,stabilization:!1}},create:function(){$scope.network=new _vis2.default.Network($scope.topo.container,$scope.topo.data,$scope.topo.options),$scope.network.on("dragEnd",function(msg){if(angular.isArray(msg.nodes)&&angular.isObject(msg.pointer)&&1===msg.nodes.length){var nodeId=msg.nodes[0],position=$scope.network.getPositions(nodeId)[nodeId],updateTopoNode={id:nodeId,x:position.x,y:position.y};topoNodeService.update(updateTopoNode,{},function(response){$scope.topo.refresh()})}})},refresh:function(){topoViewService.query({id:$scope.currentTopoviewId}).$promise.then(function(view){$scope.topo.data.nodes=view[0].nodes,$scope.topo.data.edges=view[0].edges,$scope.network.setData($scope.topo.data)})},refreshTopoTree:function(){topoViewService.query().$promise.then(function(view){$scope.topoviews=view})}},$scope.topo.create(),$scope.topo.refreshTopoTree(),$scope.removeTopoView=function(item){var deleteView={name:item.name};topoViewService.delete(deleteView,{},function(response){$scope.topo.refreshTopoTree()})}}]).controller("ModalNodeCtrl",["$scope","$uibModalInstance","DatacenterServiceV2","RoomService","RackService","ServerService","AliyunService","AwsService","VcenterService",function($scope,$uibModalInstance,datacenterServiceV2,roomService,rackService,serverService,aliyunService,awsService,vcenterService){$scope.nodeTypes=[{type:"datacenter",name:"数据中心"},{type:"room",name:"机房"},{type:"rack",name:"机柜"},{type:"server",name:"服务器"},{type:"aliyun",name:"阿里云虚拟机"},{type:"aws",name:"AWS虚拟机"},{type:"vmware",name:"Vmware虚拟机"}],$scope.nodeResources=[],$scope.currentTopoNodeType=$scope.nodeTypes[0],$scope.currentTopoNode={};var IMAGE_PATH="assets/img/cmdb/";$scope.image="assets/img/Hardware-My-Computer-3-icon.png",$scope.$watch("currentTopoNodeType",function(newValue,oldValue){$scope.nodeResources=[],"datacenter"===newValue.type?($scope.image=IMAGE_PATH+"datacenter.png",datacenterServiceV2.query({enable:1},function(response){angular.isArray(response)&&(angular.forEach(response,function(val,index){$scope.nodeResources.push({id:val.Dcid,name:val.Dcname})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})})):"room"===newValue.type?($scope.image=IMAGE_PATH+"room.png",roomService.list({enable:1},function(response){angular.isArray(response.data)&&(angular.forEach(response.data,function(val,index){$scope.nodeResources.push({id:val.RoomId,name:val.RoomName})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})})):"rack"===newValue.type?($scope.image=IMAGE_PATH+"rack.png",rackService.list({enable:1},function(response){angular.isArray(response.data)&&(angular.forEach(response.data,function(val,index){$scope.nodeResources.push({id:val.RackId,name:val.RackName})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})})):"server"===newValue.type?($scope.image=IMAGE_PATH+"server.png",serverService.list({enable:1},function(response){angular.isArray(response.data)&&(angular.forEach(response.data,function(val,index){$scope.nodeResources.push({id:val.ServerId,name:val.Sn})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})})):"aliyun"===newValue.type?($scope.image=IMAGE_PATH+"aliyun.png",aliyunService.list({enable:1},function(response){angular.isArray(response.data)&&(angular.forEach(response.data,function(val,index){$scope.nodeResources.push({id:val.Id,name:val.InstanceName})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})})):"aws"===newValue.type?($scope.image=IMAGE_PATH+"aws.png",awsService.list({enable:1},function(response){angular.isArray(response.data)&&(angular.forEach(response.data,function(val,index){$scope.nodeResources.push({id:val.Id,name:val.InstanceId})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})})):"vmware"===newValue.type&&($scope.image=IMAGE_PATH+"vmware.png",vcenterService.list({enable:1},function(response){angular.isArray(response.data)&&(angular.forEach(response.data,function(val,index){$scope.nodeResources.push({id:val.Id,name:val.Name})}),$scope.nodeResources.length>0?$scope.currentTopoNode=$scope.nodeResources[0]:$scope.currentTopoNode={})}))}),$scope.nodeTitle="",$scope.node={},$scope.nodeOk=function(){$scope.node={nodelabel:$scope.currentTopoNode.name,nodetitle:$scope.nodeTitle,nodeimage:$scope.image,nodetype:{type:"image",name:"图片"}},$uibModalInstance.close($scope.node)},$scope.nodeCancel=function(){$uibModalInstance.dismiss("取消")}}]).controller("ModalEdgeCtrl",["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.edgeLabel="",$scope.edge={},$scope.edgeOk=function(){$scope.edge={edgelabel:$scope.edgeLabel},$uibModalInstance.close($scope.edge)},$scope.edgeCancel=function(){$uibModalInstance.dismiss("取消")}}]).controller("ModalEditNodeCtrl",["$scope","$uibModalInstance","TopoService","NodeDatas",function($scope,$uibModalInstance,topoService,NodeDatas){$scope.node={},$scope.editnodeTitle=NodeDatas.title,$scope.editnodeLabel=NodeDatas.label,$scope.editnodeType=NodeDatas.shape,$scope.editnodeOk=function(){$scope.node={nodeId:NodeDatas.id,nodelabel:$scope.editnodeLabel,nodetitle:$scope.editnodeTitle,nodetype:$scope.editnodeType},$uibModalInstance.close($scope.node)},$scope.editnodeCancel=function(){$uibModalInstance.dismiss()}}]).controller("ModalEditEdgeCtrl",["$scope","$uibModalInstance","TopoService","editEdgeData",function($scope,$uibModalInstance,topoService,editEdgeData){$scope.edge={},$scope.editedgeOk=function(){$scope.edge={edgeId:editEdgeData.id,edgeLabel:$scope.editEdgeLabel,from:editEdgeData.from,to:editEdgeData.to},$uibModalInstance.close($scope.edge)},$scope.editedgeCancel=function(){$uibModalInstance.dismiss()}}]).controller("ModalAddTopoviewCtrl",["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.topoview={name:""},$scope.addTopoviewCancel=function(){$uibModalInstance.dismiss("取消")},$scope.addTopoviewOk=function(){$uibModalInstance.close($scope.topoview)}}]).controller("resourceTreeController",["$scope","RegionService","DatacenterServiceV2",function($scope,regionService,datacenterServiceV2){regionService.query({},function(response){angular.isArray(response.data)&&($scope.areas=response.data)}),$scope.datacenters=[],datacenterServiceV2.query({},{},function(response){angular.isArray(response)&&angular.forEach(response,function(dc,index){angular.isObject(dc)&&angular.isArray(dc.Room)?(angular.forEach(dc.Room,function(room,idx){var room_id="room_"+room.RoomId;$scope[room_id]=!0}),dc.roomNum=dc.Room.length,angular.isDefined(dc.Room.Rack)&&angular.isArray(dc.Room.Rack)?dc.rackNum=dc.Room.Rack.length:dc.rackNum=0):(dc.roomNum=0,dc.rackNum=0);var datacenter_id="datacenter_"+dc.Dcid;$scope[datacenter_id]=!0,$scope.datacenters.push(dc)})}),$scope.datacenterShow=function(datacenter_id){$scope[datacenter_id]=!$scope[datacenter_id]},$scope.roomShow=function(room_id){$scope[room_id]=!$scope[room_id]},$scope.dataCenter=!1,$scope.datacenter=function(){$scope.dataCenter=!$scope.dataCenter},$scope.form_topo=!0,$scope.currentDatacenter={},$scope.showDatacenterDetails=function(datacenter_id){var datacenterId=datacenter_id;datacenterServiceV2.query([datacenterId],{},function(response){angular.forEach(response,function(idx,val){idx.Dcid==datacenterId&&($scope.currentDatacenter=idx)}),console.log($scope.currentDatacenter)}),$scope.form_topo=!1},$scope.resource_detail=!1,$scope.regionShow=function(region){$scope.resource_detail=!0}}]).directive("itemActive",function(){return{restrict:"EAMC",link:function(scope,element,attr){element.bind("click",function(){$(this).parent().parent().find("li").removeClass("active"),$(this).addClass("active")})}}}).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){/**
	 * vis.js
	 * https://github.com/almende/vis
	 *
	 * A dynamic, browser-based visualization library.
	 *
	 * @version 4.16.1
	 * @date    2016-04-18
	 *
	 * @license
	 * Copyright (C) 2011-2016 Almende B.V, http://almende.com
	 *
	 * Vis.js is dual licensed under both
	 *
	 * * The Apache 2.0 License
	 *   http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * and
	 *
	 * * The MIT License
	 *   http://opensource.org/licenses/MIT
	 *
	 * Vis.js may be distributed under either license.
	 */
"use strict";!function(root,factory){module.exports=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){var util=__webpack_require__(1);util.extend(exports,__webpack_require__(7)),util.extend(exports,__webpack_require__(24)),util.extend(exports,__webpack_require__(60))},function(module,exports,__webpack_require__){var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},moment=__webpack_require__(2),uuid=__webpack_require__(6);exports.isNumber=function(object){return object instanceof Number||"number"==typeof object},exports.recursiveDOMDelete=function(DOMobject){if(DOMobject)for(;DOMobject.hasChildNodes()===!0;)exports.recursiveDOMDelete(DOMobject.firstChild),DOMobject.removeChild(DOMobject.firstChild)},exports.giveRange=function(min,max,total,value){if(max==min)return.5;var scale=1/(max-min);return Math.max(0,(value-min)*scale)},exports.isString=function(object){return object instanceof String||"string"==typeof object},exports.isDate=function(object){if(object instanceof Date)return!0;if(exports.isString(object)){var match=ASPDateRegex.exec(object);if(match)return!0;if(!isNaN(Date.parse(object)))return!0}return!1},exports.randomUUID=function(){return uuid.v4()},exports.assignAllKeys=function(obj,value){for(var prop in obj)obj.hasOwnProperty(prop)&&"object"!==_typeof(obj[prop])&&(obj[prop]=value)},exports.fillIfDefined=function(a,b){var allowDeletion=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];for(var prop in a)void 0!==b[prop]&&("object"!==_typeof(b[prop])?void 0!==b[prop]&&null!==b[prop]||void 0===a[prop]||allowDeletion!==!0?a[prop]=b[prop]:delete a[prop]:"object"===_typeof(a[prop])&&exports.fillIfDefined(a[prop],b[prop],allowDeletion))},exports.protoExtend=function(a,b){for(var i=1;i<arguments.length;i++){var other=arguments[i];for(var prop in other)a[prop]=other[prop]}return a},exports.extend=function(a,b){for(var i=1;i<arguments.length;i++){var other=arguments[i];for(var prop in other)other.hasOwnProperty(prop)&&(a[prop]=other[prop])}return a},exports.selectiveExtend=function(props,a,b){if(!Array.isArray(props))throw new Error("Array with property names expected as first argument");for(var i=2;i<arguments.length;i++)for(var other=arguments[i],p=0;p<props.length;p++){var prop=props[p];other.hasOwnProperty(prop)&&(a[prop]=other[prop])}return a},exports.selectiveDeepExtend=function(props,a,b){var allowDeletion=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var i=2;i<arguments.length;i++)for(var other=arguments[i],p=0;p<props.length;p++){var prop=props[p];if(other.hasOwnProperty(prop))if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?exports.deepExtend(a[prop],b[prop],!1,allowDeletion):null===b[prop]&&void 0!==a[prop]&&allowDeletion===!0?delete a[prop]:a[prop]=b[prop];else{if(Array.isArray(b[prop]))throw new TypeError("Arrays are not supported by deepExtend");null===b[prop]&&void 0!==a[prop]&&allowDeletion===!0?delete a[prop]:a[prop]=b[prop]}}return a},exports.selectiveNotDeepExtend=function(props,a,b){var allowDeletion=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(Array.isArray(b))throw new TypeError("Arrays are not supported by deepExtend");for(var prop in b)if(b.hasOwnProperty(prop)&&props.indexOf(prop)==-1)if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?exports.deepExtend(a[prop],b[prop]):null===b[prop]&&void 0!==a[prop]&&allowDeletion===!0?delete a[prop]:a[prop]=b[prop];else if(Array.isArray(b[prop])){a[prop]=[];for(var i=0;i<b[prop].length;i++)a[prop].push(b[prop][i])}else null===b[prop]&&void 0!==a[prop]&&allowDeletion===!0?delete a[prop]:a[prop]=b[prop];return a},exports.deepExtend=function(a,b,protoExtend,allowDeletion){for(var prop in b)if(b.hasOwnProperty(prop)||protoExtend===!0)if(b[prop]&&b[prop].constructor===Object)void 0===a[prop]&&(a[prop]={}),a[prop].constructor===Object?exports.deepExtend(a[prop],b[prop],protoExtend):null===b[prop]&&void 0!==a[prop]&&allowDeletion===!0?delete a[prop]:a[prop]=b[prop];else if(Array.isArray(b[prop])){a[prop]=[];for(var i=0;i<b[prop].length;i++)a[prop].push(b[prop][i])}else null===b[prop]&&void 0!==a[prop]&&allowDeletion===!0?delete a[prop]:a[prop]=b[prop];return a},exports.equalArray=function(a,b){if(a.length!=b.length)return!1;for(var i=0,len=a.length;i<len;i++)if(a[i]!=b[i])return!1;return!0},exports.convert=function(object,type){var match;if(void 0!==object){if(null===object)return null;if(!type)return object;if("string"!=typeof type&&!(type instanceof String))throw new Error("Type must be a string");switch(type){case"boolean":case"Boolean":return Boolean(object);case"number":case"Number":return Number(object.valueOf());case"string":case"String":return String(object);case"Date":if(exports.isNumber(object))return new Date(object);if(object instanceof Date)return new Date(object.valueOf());if(moment.isMoment(object))return new Date(object.valueOf());if(exports.isString(object))return match=ASPDateRegex.exec(object),match?new Date(Number(match[1])):moment(object).toDate();throw new Error("Cannot convert object of type "+exports.getType(object)+" to type Date");case"Moment":if(exports.isNumber(object))return moment(object);if(object instanceof Date)return moment(object.valueOf());if(moment.isMoment(object))return moment(object);if(exports.isString(object))return match=ASPDateRegex.exec(object),moment(match?Number(match[1]):object);throw new Error("Cannot convert object of type "+exports.getType(object)+" to type Date");case"ISODate":if(exports.isNumber(object))return new Date(object);if(object instanceof Date)return object.toISOString();if(moment.isMoment(object))return object.toDate().toISOString();if(exports.isString(object))return match=ASPDateRegex.exec(object),match?new Date(Number(match[1])).toISOString():new Date(object).toISOString();throw new Error("Cannot convert object of type "+exports.getType(object)+" to type ISODate");case"ASPDate":if(exports.isNumber(object))return"/Date("+object+")/";if(object instanceof Date)return"/Date("+object.valueOf()+")/";if(exports.isString(object)){match=ASPDateRegex.exec(object);var value;return value=match?new Date(Number(match[1])).valueOf():new Date(object).valueOf(),"/Date("+value+")/"}throw new Error("Cannot convert object of type "+exports.getType(object)+" to type ASPDate");default:throw new Error('Unknown type "'+type+'"')}}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;exports.getType=function(object){var type="undefined"==typeof object?"undefined":_typeof(object);return"object"==type?null===object?"null":object instanceof Boolean?"Boolean":object instanceof Number?"Number":object instanceof String?"String":Array.isArray(object)?"Array":object instanceof Date?"Date":"Object":"number"==type?"Number":"boolean"==type?"Boolean":"string"==type?"String":void 0===type?"undefined":type},exports.copyAndExtendArray=function(arr,newValue){for(var newArr=[],i=0;i<arr.length;i++)newArr.push(arr[i]);return newArr.push(newValue),newArr},exports.copyArray=function(arr){for(var newArr=[],i=0;i<arr.length;i++)newArr.push(arr[i]);return newArr},exports.getAbsoluteLeft=function(elem){return elem.getBoundingClientRect().left},exports.getAbsoluteRight=function(elem){return elem.getBoundingClientRect().right},exports.getAbsoluteTop=function(elem){return elem.getBoundingClientRect().top},exports.addClassName=function(elem,className){var classes=elem.className.split(" ");classes.indexOf(className)==-1&&(classes.push(className),elem.className=classes.join(" "))},exports.removeClassName=function(elem,className){var classes=elem.className.split(" "),index=classes.indexOf(className);index!=-1&&(classes.splice(index,1),elem.className=classes.join(" "))},exports.forEach=function(object,callback){var i,len;if(Array.isArray(object))for(i=0,len=object.length;i<len;i++)callback(object[i],i,object);else for(i in object)object.hasOwnProperty(i)&&callback(object[i],i,object)},exports.toArray=function(object){var array=[];for(var prop in object)object.hasOwnProperty(prop)&&array.push(object[prop]);return array},exports.updateProperty=function(object,key,value){return object[key]!==value&&(object[key]=value,!0)},exports.throttle=function(fn,wait){var timeout=null,needExecution=!1;return function throttled(){timeout?needExecution=!0:(needExecution=!1,fn(),timeout=setTimeout(function(){timeout=null,needExecution&&throttled()},wait))}},exports.addEventListener=function(element,action,listener,useCapture){element.addEventListener?(void 0===useCapture&&(useCapture=!1),"mousewheel"===action&&navigator.userAgent.indexOf("Firefox")>=0&&(action="DOMMouseScroll"),element.addEventListener(action,listener,useCapture)):element.attachEvent("on"+action,listener)},exports.removeEventListener=function(element,action,listener,useCapture){element.removeEventListener?(void 0===useCapture&&(useCapture=!1),"mousewheel"===action&&navigator.userAgent.indexOf("Firefox")>=0&&(action="DOMMouseScroll"),element.removeEventListener(action,listener,useCapture)):element.detachEvent("on"+action,listener)},exports.preventDefault=function(event){event||(event=window.event),event.preventDefault?event.preventDefault():event.returnValue=!1},exports.getTarget=function(event){event||(event=window.event);var target;return event.target?target=event.target:event.srcElement&&(target=event.srcElement),void 0!=target.nodeType&&3==target.nodeType&&(target=target.parentNode),target},exports.hasParent=function(element,parent){for(var e=element;e;){if(e===parent)return!0;e=e.parentNode}return!1},exports.option={},exports.option.asBoolean=function(value,defaultValue){return"function"==typeof value&&(value=value()),null!=value?0!=value:defaultValue||null},exports.option.asNumber=function(value,defaultValue){return"function"==typeof value&&(value=value()),null!=value?Number(value)||defaultValue||null:defaultValue||null},exports.option.asString=function(value,defaultValue){return"function"==typeof value&&(value=value()),null!=value?String(value):defaultValue||null},exports.option.asSize=function(value,defaultValue){return"function"==typeof value&&(value=value()),exports.isString(value)?value:exports.isNumber(value)?value+"px":defaultValue||null},exports.option.asElement=function(value,defaultValue){return"function"==typeof value&&(value=value()),value||defaultValue||null},exports.hexToRGB=function(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null},exports.overrideOpacity=function(color,opacity){if(color.indexOf("rgba")!=-1)return color;if(color.indexOf("rgb")!=-1){var rgb=color.substr(color.indexOf("(")+1).replace(")","").split(",");return"rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+opacity+")"}var rgb=exports.hexToRGB(color);return null==rgb?color:"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+opacity+")"},exports.RGBToHex=function(red,green,blue){return"#"+((1<<24)+(red<<16)+(green<<8)+blue).toString(16).slice(1)},exports.parseColor=function(color){var c;if(exports.isString(color)===!0){if(exports.isValidRGB(color)===!0){var rgb=color.substr(4).substr(0,color.length-5).split(",").map(function(value){return parseInt(value)});color=exports.RGBToHex(rgb[0],rgb[1],rgb[2])}if(exports.isValidHex(color)===!0){var hsv=exports.hexToHSV(color),lighterColorHSV={h:hsv.h,s:.8*hsv.s,v:Math.min(1,1.02*hsv.v)},darkerColorHSV={h:hsv.h,s:Math.min(1,1.25*hsv.s),v:.8*hsv.v},darkerColorHex=exports.HSVToHex(darkerColorHSV.h,darkerColorHSV.s,darkerColorHSV.v),lighterColorHex=exports.HSVToHex(lighterColorHSV.h,lighterColorHSV.s,lighterColorHSV.v);c={background:color,border:darkerColorHex,highlight:{background:lighterColorHex,border:darkerColorHex},hover:{background:lighterColorHex,border:darkerColorHex}}}else c={background:color,border:color,highlight:{background:color,border:color},hover:{background:color,border:color}}}else c={},c.background=color.background||void 0,c.border=color.border||void 0,exports.isString(color.highlight)?c.highlight={border:color.highlight,background:color.highlight}:(c.highlight={},c.highlight.background=color.highlight&&color.highlight.background||void 0,c.highlight.border=color.highlight&&color.highlight.border||void 0),exports.isString(color.hover)?c.hover={border:color.hover,background:color.hover}:(c.hover={},c.hover.background=color.hover&&color.hover.background||void 0,c.hover.border=color.hover&&color.hover.border||void 0);return c},exports.RGBToHSV=function(red,green,blue){red/=255,green/=255,blue/=255;var minRGB=Math.min(red,Math.min(green,blue)),maxRGB=Math.max(red,Math.max(green,blue));if(minRGB==maxRGB)return{h:0,s:0,v:minRGB};var d=red==minRGB?green-blue:blue==minRGB?red-green:blue-red,h=red==minRGB?3:blue==minRGB?1:5,hue=60*(h-d/(maxRGB-minRGB))/360,saturation=(maxRGB-minRGB)/maxRGB,value=maxRGB;return{h:hue,s:saturation,v:value}};var cssUtil={split:function(cssText){var styles={};return cssText.split(";").forEach(function(style){if(""!=style.trim()){var parts=style.split(":"),key=parts[0].trim(),value=parts[1].trim();styles[key]=value}}),styles},join:function(styles){return Object.keys(styles).map(function(key){return key+": "+styles[key]}).join("; ")}};exports.addCssText=function(element,cssText){var currentStyles=cssUtil.split(element.style.cssText),newStyles=cssUtil.split(cssText),styles=exports.extend(currentStyles,newStyles);element.style.cssText=cssUtil.join(styles)},exports.removeCssText=function(element,cssText){var styles=cssUtil.split(element.style.cssText),removeStyles=cssUtil.split(cssText);for(var key in removeStyles)removeStyles.hasOwnProperty(key)&&delete styles[key];element.style.cssText=cssUtil.join(styles)},exports.HSVToRGB=function(h,s,v){var r,g,b,i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return{r:Math.floor(255*r),g:Math.floor(255*g),b:Math.floor(255*b)}},exports.HSVToHex=function(h,s,v){var rgb=exports.HSVToRGB(h,s,v);return exports.RGBToHex(rgb.r,rgb.g,rgb.b)},exports.hexToHSV=function(hex){var rgb=exports.hexToRGB(hex);return exports.RGBToHSV(rgb.r,rgb.g,rgb.b)},exports.isValidHex=function(hex){var isOk=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);return isOk},exports.isValidRGB=function(rgb){rgb=rgb.replace(" ","");var isOk=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(rgb);return isOk},exports.isValidRGBA=function(rgba){rgba=rgba.replace(" ","");var isOk=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(rgba);return isOk},exports.selectiveBridgeObject=function(fields,referenceObject){if("object"==("undefined"==typeof referenceObject?"undefined":_typeof(referenceObject))){for(var objectTo=Object.create(referenceObject),i=0;i<fields.length;i++)referenceObject.hasOwnProperty(fields[i])&&"object"==_typeof(referenceObject[fields[i]])&&(objectTo[fields[i]]=exports.bridgeObject(referenceObject[fields[i]]));return objectTo}return null},exports.bridgeObject=function(referenceObject){if("object"==("undefined"==typeof referenceObject?"undefined":_typeof(referenceObject))){var objectTo=Object.create(referenceObject);for(var i in referenceObject)referenceObject.hasOwnProperty(i)&&"object"==_typeof(referenceObject[i])&&(objectTo[i]=exports.bridgeObject(referenceObject[i]));return objectTo}return null},exports.insertSort=function(a,compare){for(var i=0;i<a.length;i++){for(var k=a[i],j=i;j>0&&compare(k,a[j-1])<0;j--)a[j]=a[j-1];a[j]=k}return a},exports.mergeOptions=function(mergeTarget,options,option){var globalOptions=(!(arguments.length<=3||void 0===arguments[3])&&arguments[3],arguments.length<=4||void 0===arguments[4]?{}:arguments[4]);if(null===options[option])mergeTarget[option]=Object.create(globalOptions[option]);else if(void 0!==options[option])if("boolean"==typeof options[option])mergeTarget[option].enabled=options[option];else{void 0===options[option].enabled&&(mergeTarget[option].enabled=!0);for(var prop in options[option])options[option].hasOwnProperty(prop)&&(mergeTarget[option][prop]=options[option][prop])}},exports.binarySearchCustom=function(orderedItems,comparator,field,field2){for(var maxIterations=1e4,iteration=0,low=0,high=orderedItems.length-1;low<=high&&iteration<maxIterations;){var middle=Math.floor((low+high)/2),item=orderedItems[middle],value=void 0===field2?item[field]:item[field][field2],searchResult=comparator(value);if(0==searchResult)return middle;searchResult==-1?low=middle+1:high=middle-1,iteration++}return-1},exports.binarySearchValue=function(orderedItems,target,field,sidePreference,comparator){for(var prevValue,value,nextValue,middle,maxIterations=1e4,iteration=0,low=0,high=orderedItems.length-1,comparator=void 0!=comparator?comparator:function(a,b){return a==b?0:a<b?-1:1};low<=high&&iteration<maxIterations;){if(middle=Math.floor(.5*(high+low)),prevValue=orderedItems[Math.max(0,middle-1)][field],value=orderedItems[middle][field],nextValue=orderedItems[Math.min(orderedItems.length-1,middle+1)][field],0==comparator(value,target))return middle;if(comparator(prevValue,target)<0&&comparator(value,target)>0)return"before"==sidePreference?Math.max(0,middle-1):middle;if(comparator(value,target)<0&&comparator(nextValue,target)>0)return"before"==sidePreference?middle:Math.min(orderedItems.length-1,middle+1);comparator(value,target)<0?low=middle+1:high=middle-1,iteration++}return-1},exports.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},function(module,exports,__webpack_require__){module.exports="undefined"!=typeof window&&window.moment||__webpack_require__(3)},function(module,exports,__webpack_require__){(function(module){!function(global,factory){module.exports=factory()}(this,function(){function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function map(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function defaultParsingFlags(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function getParsingFlags(m){return null==m._pf&&(m._pf=defaultParsingFlags()),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m),parsedParts=some.call(flags.parsedDateParts,function(i){return null!=i});m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts),m._strict&&(m._isValid=m._isValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour)}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}function isUndefined(input){return void 0===input}function copyConfig(to,from){var i,prop,val;if(isUndefined(from._isAMomentObject)||(to._isAMomentObject=from._isAMomentObject),isUndefined(from._i)||(to._i=from._i),isUndefined(from._f)||(to._f=from._f),isUndefined(from._l)||(to._l=from._l),isUndefined(from._strict)||(to._strict=from._strict),isUndefined(from._tzm)||(to._tzm=from._tzm),isUndefined(from._isUTC)||(to._isUTC=from._isUTC),isUndefined(from._offset)||(to._offset=from._offset),isUndefined(from._pf)||(to._pf=getParsingFlags(from)),isUndefined(from._locale)||(to._locale=from._locale),momentProperties.length>0)for(i in momentProperties)prop=momentProperties[i],val=from[prop],isUndefined(val)||(to[prop]=val);return to}function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),updateInProgress===!1&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number):Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function warn(msg){utils_hooks__hooks.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return null!=utils_hooks__hooks.deprecationHandler&&utils_hooks__hooks.deprecationHandler(null,msg),firstTime&&(warn(msg+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),firstTime=!1),fn.apply(this,arguments)},fn)}function deprecateSimple(name,msg){null!=utils_hooks__hooks.deprecationHandler&&utils_hooks__hooks.deprecationHandler(name,msg),deprecations[name]||(warn(msg),deprecations[name]=!0)}function isFunction(input){return input instanceof Function||"[object Function]"===Object.prototype.toString.call(input)}function isObject(input){return"[object Object]"===Object.prototype.toString.call(input)}function locale_set__set(config){var prop,i;for(i in config)prop=config[i],isFunction(prop)?this[i]=prop:this["_"+i]=prop;this._config=config,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var prop,res=extend({},parentConfig);for(prop in childConfig)hasOwnProp(childConfig,prop)&&(isObject(parentConfig[prop])&&isObject(childConfig[prop])?(res[prop]={},extend(res[prop],parentConfig[prop]),extend(res[prop],childConfig[prop])):null!=childConfig[prop]?res[prop]=childConfig[prop]:delete res[prop]);return res}function Locale(config){null!=config&&this.set(config)}function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){for(var j,next,locale,split,i=0;i<names.length;){for(split=normalizeLocale(names[i]).split("-"),j=split.length,next=normalizeLocale(names[i+1]),next=next?next.split("-"):null;j>0;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=isUndefined(values)?locale_locales__getLocale(key):defineLocale(key,values),data&&(globalLocale=data)),globalLocale._abbr}function defineLocale(name,config){return null!==config?(config.abbr=name,null!=locales[name]?(deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),config=mergeConfigs(locales[name]._config,config)):null!=config.parentLocale&&(null!=locales[config.parentLocale]?config=mergeConfigs(locales[config.parentLocale]._config,config):deprecateSimple("parentLocaleUndefined","specified parentLocale is not defined yet")),locales[name]=new Locale(config),locale_locales__getSetGlobalLocale(name),locales[name]):(delete locales[name],null)}function updateLocale(name,config){if(null!=config){var locale;null!=locales[name]&&(config=mergeConfigs(locales[name]._config,config)),locale=new Locale(config),locale.parentLocale=locales[name],locales[name]=locale,locale_locales__getSetGlobalLocale(name)}else null!=locales[name]&&(null!=locales[name].parentLocale?locales[name]=locales[name].parentLocale:null!=locales[name]&&delete locales[name]);return locales[name]}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return chooseLocale(key)}function locale_locales__listLocales(){return keys(locales)}function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop),normalizedProp&&(normalizedInput[normalizedProp]=inputObject[prop]));return normalizedInput}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function get_set__set(mom,unit,value){mom.isValid()&&mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else if(units=normalizeUnits(units),isFunction(this[units]))return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function removeFormattingTokens(input){return input.match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"")}function makeFormatFunction(format){var i,length,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=removeFormattingTokens(array[i]);return function(mom){var i,output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(unescapeFormat(token))}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}function localeMonths(m,format){return isArray(this._months)?this._months[m.month()]:this._months[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function localeMonthsShort(m,format){return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function units_month__handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)mom=create_utc__createUTC([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase();return strict?"MMM"===format?(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:null):(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:null):"MMM"===format?(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:null)):(ii=indexOf.call(this._longMonthsParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortMonthsParse,llc),ii!==-1?ii:null))}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact)return units_month__handleStrictParse.call(this,monthName,format,strict);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),
this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid())return mom;if("string"==typeof value)if(/^\d+$/.test(value))value=toInt(value);else if(value=mom.localeData().monthsParse(value),"number"!=typeof value)return mom;return dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex}function monthsRegex(isStrict){return this._monthsParseExact?(hasOwnProp(this,"_monthsRegex")||computeMonthsParse.call(this),isStrict?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;i<12;i++)mom=create_utc__createUTC([2e3,i]),shortPieces.push(this.monthsShort(mom,"")),longPieces.push(this.months(mom,"")),mixedPieces.push(this.months(mom,"")),mixedPieces.push(this.monthsShort(mom,""));for(shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<12;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]),mixedPieces[i]=regexEscape(mixedPieces[i]);this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}function checkOverflow(m){var overflow,a=m._a;return a&&getParsingFlags(m).overflow===-2&&(overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)&&(overflow=DATE),getParsingFlags(m)._overflowWeeks&&overflow===-1&&(overflow=WEEK),getParsingFlags(m)._overflowWeekday&&overflow===-1&&(overflow=WEEKDAY),getParsingFlags(m).overflow=overflow),m}function configFromISO(config){var i,l,allowTime,dateFormat,timeFormat,tzFormat,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0],allowTime=isoDates[i][2]!==!1;break}if(null==dateFormat)return void(config._isValid=!1);if(match[3]){for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}if(null==timeFormat)return void(config._isValid=!1)}if(!allowTime&&null!=timeFormat)return void(config._isValid=!1);if(match[4]){if(!tzRegex.exec(match[4]))return void(config._isValid=!1);tzFormat="Z"}config._f=dateFormat+(timeFormat||"")+(tzFormat||""),configFromStringAndFormat(config)}else config._isValid=!1}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);return null!==matched?void(config._d=new Date(+matched[1])):(configFromISO(config),void(config._isValid===!1&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))))}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<100&&y>=0&&isFinite(date.getFullYear())&&date.setFullYear(y),date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<100&&y>=0&&isFinite(date.getUTCFullYear())&&date.setUTCFullYear(y),date}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function getIsLeapYear(){return isLeapYear(this.year())}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var resYear,resDayOfYear,localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset;return dayOfYear<=0?(resYear=year-1,resDayOfYear=daysInYear(resYear)+dayOfYear):dayOfYear>daysInYear(year)?(resYear=year+1,resDayOfYear=dayOfYear-daysInYear(year)):(resYear=year,resDayOfYear=dayOfYear),{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var resWeek,resYear,weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1;return week<1?(resYear=mom.year()-1,resWeek=week+weeksInYear(resYear,dow,doy)):week>weeksInYear(mom.year(),dow,doy)?(resWeek=week-weeksInYear(mom.year(),dow,doy),resYear=mom.year()+1):(resYear=mom.year(),resWeek=week),{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}function defaults(a,b,c){return null!=a?a:null!=b?b:c}function currentDateArray(config){var nowValue=new Date(utils_hooks__hooks.now());return config._useUTC?[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]:[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=currentDateArray(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&dayOfYearFromWeekInfo(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:createDate).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w,null!=w.GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1),(weekday<1||weekday>7)&&(weekdayOverflow=!0)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d,(weekday<0||weekday>6)&&(weekdayOverflow=!0)):null!=w.e?(weekday=w.e+dow,(w.e<0||w.e>6)&&(weekdayOverflow=!0)):weekday=dow),week<1||week>weeksInYear(weekYear,dow,doy)?getParsingFlags(config)._overflowWeeks=!0:null!=weekdayOverflow?getParsingFlags(config)._overflowWeekday=!0:(temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear)}function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601)return void configFromISO(config);config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0],parsedInput&&(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,string.length>0&&getParsingFlags(config).unusedInput.push(string),getParsingFlags(config).bigHour===!0&&config._a[HOUR]<=12&&config._a[HOUR]>0&&(getParsingFlags(config).bigHour=void 0),getParsingFlags(config).parsedDateParts=config._a.slice(0),getParsingFlags(config).meridiem=config._meridiem,config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;return null==meridiem?hour:null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):null!=locale.isPM?(isPm=locale.isPM(meridiem),isPm&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0),hour):hour}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,void(config._d=new Date(NaN));for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}function configFromObject(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)}),configFromArray(config)}}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));return res._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?configFromStringAndArray(config):format?configFromStringAndFormat(config):isDate(input)?config._d=input:configFromInput(config),valid__isValid(config)||(config._d=null),config))}function configFromInput(config){var input=config._i;void 0===input?config._d=new Date(utils_hooks__hooks.now()):isDate(input)?config._d=new Date(input.valueOf()):"string"==typeof input?configFromString(config):isArray(input)?(config._a=map(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?configFromObject(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+1e3*hours*60*60,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}function offsetFromString(matcher,string){var matches=(string||"").match(matcher)||[],chunk=matches[matches.length-1]||[],parts=(chunk+"").match(chunkOffset)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?input.valueOf():local__createLocal(input).valueOf())-res.valueOf(),res._d.setTime(res._d.valueOf()+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function getSetOffset(input,keepLocalTime){var localAdjust,offset=this._offset||0;return this.isValid()?null!=input?("string"==typeof input?input=offsetFromString(matchShortOffset,input):Math.abs(input)<16&&(input*=60),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this):null!=input?this:NaN}function getSetZone(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this}function setOffsetToParsedOffset(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(offsetFromString(matchOffset,this._i)),this}function hasAlignedHourOffset(input){return!!this.isValid()&&(input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60===0)}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted))return this._isDSTShifted;var c={};if(copyConfig(c,this),c=prepareConfig(c),c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function isLocal(){return!!this.isValid()&&!this._isUTC}function isUtcOffset(){return!!this.isValid()&&this._isUTC}function isUtc(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to)),duration={},duration.ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function momentsDifference(base,other){var res;return base.isValid()&&other.isValid()?(other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):(res=positiveMomentsDifference(other,base),res.milliseconds=-res.milliseconds,res.months=-res.months),res):{milliseconds:0,months:0}}function absRound(number){return number<0?Math.round(-1*number)*-1:Math.round(number)}function createAdder(direction,name){return function(val,period){var dur,tmp;return null===period||isNaN(+period)||(deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),val="string"==typeof val?+val:val,dur=create__createDuration(val,period),add_subtract__addSubtract(this,dur,direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);mom.isValid()&&(updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months))}function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse",output=formats&&(isFunction(formats[format])?formats[format]():formats[format]);return this.format(output||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:local__createLocal(input);return!(!this.isValid()||!localInput.isValid())&&(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()>localInput.valueOf():localInput.valueOf()<this.clone().startOf(units).valueOf())}function isBefore(input,units){var localInput=isMoment(input)?input:local__createLocal(input);return!(!this.isValid()||!localInput.isValid())&&(units=normalizeUnits(isUndefined(units)?"millisecond":units),"millisecond"===units?this.valueOf()<localInput.valueOf():this.clone().endOf(units).valueOf()<localInput.valueOf())}function isBetween(from,to,units,inclusivity){return inclusivity=inclusivity||"()",("("===inclusivity[0]?this.isAfter(from,units):!this.isBefore(from,units))&&(")"===inclusivity[1]?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var inputMs,localInput=isMoment(input)?input:local__createLocal(input);return!(!this.isValid()||!localInput.isValid())&&(units=normalizeUnits(units||"millisecond"),"millisecond"===units?this.valueOf()===localInput.valueOf():(inputMs=localInput.valueOf(),this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf()))}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;return this.isValid()?(that=cloneWithOffset(input,this),that.isValid()?(zoneDelta=6e4*(that.utcOffset()-this.utcOffset()),units=normalizeUnits(units),"year"===units||"month"===units||"quarter"===units?(output=monthDiff(this,that),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output)):NaN):NaN}function monthDiff(a,b){var anchor2,adjust,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months");return b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),adjust=(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),adjust=(b-anchor)/(anchor2-anchor)),-(wholeMonthDiff+adjust)||0}function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?isFunction(Date.prototype.toISOString)?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function format(inputString){inputString||(inputString=this.isUtc()?utils_hooks__hooks.defaultFormatUtc:utils_hooks__hooks.defaultFormat);var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){return this.isValid()&&(isMoment(time)&&time.isValid()||local__createLocal(time).isValid())?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(newLocaleData=locale_locales__getLocale(key),null!=newLocaleData&&(this._locale=newLocaleData),this)}function localeData(){return this._locale}function startOf(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this}function endOf(units){return units=normalizeUnits(units),void 0===units||"millisecond"===units?this:("date"===units&&(units="day"),this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms"))}function to_type__valueOf(){return this._d.valueOf()-6e4*(this._offset||0)}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return this._offset?new Date(this.valueOf()):this._d}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;return null==input?weekOfYear(this,dow,doy).year:(weeksTarget=weeksInYear(input,dow,doy),week>weeksTarget&&(week=weeksTarget),setWeekAll.call(this,input,week,weekday,dow,doy))}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);return this.year(date.getUTCFullYear()),this.month(date.getUTCMonth()),this.date(date.getUTCDate()),this}function getSetQuarter(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")}function parseWeekday(input,locale){return"string"!=typeof input?input:isNaN(input)?(input=locale.weekdaysParse(input),"number"==typeof input?input:null):parseInt(input,10)}function localeWeekdays(m,format){return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]}function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function day_of_week__handleStrictParse(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)mom=create_utc__createUTC([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase();return strict?"dddd"===format?(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:null):"ddd"===format?(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:null):(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null):"dddd"===format?(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null))):"ddd"===format?(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:null))):(ii=indexOf.call(this._minWeekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._weekdaysParse,llc),ii!==-1?ii:(ii=indexOf.call(this._shortWeekdaysParse,llc),ii!==-1?ii:null)))}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact)return day_of_week__handleStrictParse.call(this,weekdayName,format,strict);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(mom=create_utc__createUTC([2e3,1]).day(i),strict&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"dddd"===format&&this._fullWeekdaysParse[i].test(weekdayName))return i;if(strict&&"ddd"===format&&this._shortWeekdaysParse[i].test(weekdayName))return i;if(strict&&"dd"===format&&this._minWeekdaysParse[i].test(weekdayName))return i;if(!strict&&this._weekdaysParse[i].test(weekdayName))return i}}function getSetDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=parseWeekday(input,this.localeData()),this.add(input-day,"d")):day}function getSetLocaleDayOfWeek(input){if(!this.isValid())return null!=input?this:NaN;var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){return this.isValid()?null==input?this.day()||7:this.day(this.day()%7?input:input-7):null!=input?this:NaN}function weekdaysRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex}function weekdaysShortRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function weekdaysMinRegex(isStrict){return this._weekdaysParseExact?(hasOwnProp(this,"_weekdaysRegex")||computeWeekdaysParse.call(this),isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var i,mom,minp,shortp,longp,minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[];for(i=0;i<7;i++)mom=create_utc__createUTC([2e3,1]).day(i),minp=this.weekdaysMin(mom,""),shortp=this.weekdaysShort(mom,""),longp=this.weekdays(mom,""),minPieces.push(minp),shortPieces.push(shortp),longPieces.push(longp),mixedPieces.push(minp),mixedPieces.push(shortp),mixedPieces.push(longp);for(minPieces.sort(cmpLenRev),shortPieces.sort(cmpLenRev),longPieces.sort(cmpLenRev),mixedPieces.sort(cmpLenRev),i=0;i<7;i++)shortPieces[i]=regexEscape(shortPieces[i]),longPieces[i]=regexEscape(longPieces[i]),mixedPieces[i]=regexEscape(mixedPieces[i]);this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d");
}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}function localeIsPM(input){return"p"===(input+"").toLowerCase().charAt(0)}function localeMeridiem(hours,minutes,isLower){return hours>11?isLower?"pm":"PM":isLower?"am":"AM"}function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}function moment__createUnix(input){return local__createLocal(1e3*input)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return isFunction(output)?output.call(mom,now):output}function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])}function invalidDate(){return this._invalidDate}function ordinal(number){return this._ordinal.replace("%d",number)}function preParsePostFormat(string){return string}function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,"month");var i,out=[];for(i=0;i<12;i++)out[i]=lists__get(format,i,field,"month");return out}function listWeekdaysImpl(localeSorted,format,index,field){"boolean"==typeof localeSorted?("number"==typeof format&&(index=format,format=void 0),format=format||""):(format=localeSorted,index=format,localeSorted=!1,"number"==typeof format&&(index=format,format=void 0),format=format||"");var locale=locale_locales__getLocale(),shift=localeSorted?locale._week.dow:0;if(null!=index)return lists__get(format,(index+shift)%7,field,"day");var i,out=[];for(i=0;i<7;i++)out[i]=lists__get(format,(i+shift)%7,field,"day");return out}function lists__listMonths(format,index){return listMonthsImpl(format,index,"months")}function lists__listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function lists__listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function lists__listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function lists__listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}function duration_abs__abs(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function bubble(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),days=0,months=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,days+=absFloor(hours/24),monthsFromDays=absFloor(daysToMonths(days)),months+=monthsFromDays,days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function as(units){var days,months,milliseconds=this._milliseconds;if(units=normalizeUnits(units),"month"===units||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}}function duration_as__valueOf(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)}function makeAs(alias){return function(){return this.as(alias)}}function duration_get__get(units){return units=normalizeUnits(units),this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}function weeks(){return absFloor(this.days()/7)}function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=+posNegDuration>0,a[4]=locale,substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){return void 0!==thresholds[threshold]&&(void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0))}function humanize(withSuffix){var locale=this.localeData(),output=duration_humanize__relativeTime(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)}function iso_string__toISOString(){var minutes,hours,years,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);minutes=absFloor(seconds/60),hours=absFloor(minutes/60),seconds%=60,minutes%=60,years=absFloor(months/12),months%=12;var Y=years,M=months,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var hookCallback,some;some=Array.prototype.some?Array.prototype.some:function(fun){for(var t=Object(this),len=t.length>>>0,i=0;i<len;i++)if(i in t&&fun.call(this,t[i],i,t))return!0;return!1};var momentProperties=utils_hooks__hooks.momentProperties=[],updateInProgress=!1,deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1,utils_hooks__hooks.deprecationHandler=null;var keys;keys=Object.keys?Object.keys:function(obj){var i,res=[];for(i in obj)hasOwnProp(obj,i)&&res.push(i);return res};var globalLocale,indexOf,locales={},aliases={},formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={},match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match3to4=/\d\d\d\d?/,match5to6=/\d\d\d\d\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi,matchTimestamp=/[+-]?\d+(\.\d{1,3})?/,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={},tokens={},YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,WEEK=7,WEEKDAY=8;indexOf=Array.prototype.indexOf?Array.prototype.indexOf:function(o){var i;for(i=0;i<this.length;++i)if(this[i]===o)return i;return-1},addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)}),addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)}),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),defaultMonthsShortRegex=matchWord,defaultMonthsRegex=matchWord,extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?""+y:"+"+y}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)}),addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)}),utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",!0);utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other<this?this:other:valid__createInvalid()}),prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return this.isValid()&&other.isValid()?other>this?this:other:valid__createInvalid()}),now=function(){return Date.now?Date.now():+new Date};offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchShortOffset),addRegexToken("ZZ",matchShortOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",utils_hooks__hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,"Qo","quarter"),addUnitAlias("quarter","Q"),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});var defaultLocaleWeek={dow:0,doy:6};addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)}),addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)}),addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)}),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),defaultWeekdaysRegex=matchWord,defaultWeekdaysShortRegex=matchWord,defaultWeekdaysMinRegex=matchWord;addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,hFormat),addFormatToken("k",["kk",2],0,kFormat),addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}),addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)}),addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addRegexToken("hmm",match3to4),addRegexToken("hmmss",match5to6),addRegexToken("Hmm",match3to4),addRegexToken("Hmmss",match5to6),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0}),addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos)),getParsingFlags(config).bigHour=!0}),addParseToken("hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2)),getParsingFlags(config).bigHour=!0}),addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos)),array[MINUTE]=toInt(input.substr(pos))}),addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4,pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1)),array[MINUTE]=toInt(input.substr(pos1,2)),array[SECOND]=toInt(input.substr(pos2))});var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i,getSetHour=makeGetSet("Hours",!0);addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",!1);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=moment_calendar__calendar,momentPrototype__proto.clone=clone,momentPrototype__proto.diff=diff,momentPrototype__proto.endOf=endOf,momentPrototype__proto.format=format,momentPrototype__proto.from=from,momentPrototype__proto.fromNow=fromNow,momentPrototype__proto.to=to,momentPrototype__proto.toNow=toNow,momentPrototype__proto.get=getSet,momentPrototype__proto.invalidAt=invalidAt,momentPrototype__proto.isAfter=isAfter,momentPrototype__proto.isBefore=isBefore,momentPrototype__proto.isBetween=isBetween,momentPrototype__proto.isSame=isSame,momentPrototype__proto.isSameOrAfter=isSameOrAfter,momentPrototype__proto.isSameOrBefore=isSameOrBefore,momentPrototype__proto.isValid=moment_valid__isValid,momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=parsingFlags,momentPrototype__proto.set=getSet,momentPrototype__proto.startOf=startOf,momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=toArray,momentPrototype__proto.toObject=toObject,momentPrototype__proto.toDate=toDate,momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=toJSON,momentPrototype__proto.toString=toString,momentPrototype__proto.unix=unix,momentPrototype__proto.valueOf=to_type__valueOf,momentPrototype__proto.creationData=creationData,momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=getIsLeapYear,momentPrototype__proto.weekYear=getSetWeekYear,momentPrototype__proto.isoWeekYear=getSetISOWeekYear,momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter,momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=getDaysInMonth,momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek,momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek,momentPrototype__proto.weeksInYear=getWeeksInYear,momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear,momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek,momentPrototype__proto.weekday=getSetLocaleDayOfWeek,momentPrototype__proto.isoWeekday=getSetISODayOfWeek,momentPrototype__proto.dayOfYear=getSetDayOfYear,momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=getSetOffset,momentPrototype__proto.utc=setOffsetToUTC,momentPrototype__proto.local=setOffsetToLocal,momentPrototype__proto.parseZone=setOffsetToParsedOffset,momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset,momentPrototype__proto.isDST=isDaylightSavingTime,momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted,momentPrototype__proto.isLocal=isLocal,momentPrototype__proto.isUtcOffset=isUtcOffset,momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=getZoneAbbr,momentPrototype__proto.zoneName=getZoneName,momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto,defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},defaultInvalidDate="Invalid date",defaultOrdinal="%d",defaultOrdinalParse=/\d{1,2}/,defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar,prototype__proto.calendar=locale_calendar__calendar,prototype__proto._longDateFormat=defaultLongDateFormat,prototype__proto.longDateFormat=longDateFormat,prototype__proto._invalidDate=defaultInvalidDate,prototype__proto.invalidDate=invalidDate,prototype__proto._ordinal=defaultOrdinal,prototype__proto.ordinal=ordinal,prototype__proto._ordinalParse=defaultOrdinalParse,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto._relativeTime=defaultRelativeTime,prototype__proto.relativeTime=relative__relativeTime,prototype__proto.pastFuture=pastFuture,prototype__proto.set=locale_set__set,prototype__proto.months=localeMonths,prototype__proto._months=defaultLocaleMonths,prototype__proto.monthsShort=localeMonthsShort,prototype__proto._monthsShort=defaultLocaleMonthsShort,prototype__proto.monthsParse=localeMonthsParse,prototype__proto._monthsRegex=defaultMonthsRegex,prototype__proto.monthsRegex=monthsRegex,prototype__proto._monthsShortRegex=defaultMonthsShortRegex,prototype__proto.monthsShortRegex=monthsShortRegex,prototype__proto.week=localeWeek,prototype__proto._week=defaultLocaleWeek,prototype__proto.firstDayOfYear=localeFirstDayOfYear,prototype__proto.firstDayOfWeek=localeFirstDayOfWeek,prototype__proto.weekdays=localeWeekdays,prototype__proto._weekdays=defaultLocaleWeekdays,prototype__proto.weekdaysMin=localeWeekdaysMin,prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin,prototype__proto.weekdaysShort=localeWeekdaysShort,prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort,prototype__proto.weekdaysParse=localeWeekdaysParse,prototype__proto._weekdaysRegex=defaultWeekdaysRegex,prototype__proto.weekdaysRegex=weekdaysRegex,prototype__proto._weekdaysShortRegex=defaultWeekdaysShortRegex,prototype__proto.weekdaysShortRegex=weekdaysShortRegex,prototype__proto._weekdaysMinRegex=defaultWeekdaysMinRegex,prototype__proto.weekdaysMinRegex=weekdaysMinRegex,prototype__proto.isPM=localeIsPM,prototype__proto._meridiemParse=defaultLocaleMeridiemParse,prototype__proto.meridiem=localeMeridiem,locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs,asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y"),milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years"),round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11},iso_string__abs=Math.abs,duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs,duration_prototype__proto.add=duration_add_subtract__add,duration_prototype__proto.subtract=duration_add_subtract__subtract,duration_prototype__proto.as=as,duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=duration_as__valueOf,duration_prototype__proto._bubble=bubble,duration_prototype__proto.get=duration_get__get,duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=weeks,duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=humanize,duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",matchTimestamp),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.13.0",setHookCallback(local__createLocal),utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=min,utils_hooks__hooks.max=max,utils_hooks__hooks.now=now,utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=moment__createUnix,utils_hooks__hooks.months=lists__listMonths,utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=lists__listWeekdays,utils_hooks__hooks.parseZone=moment__createInZone,utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=lists__listMonthsShort,utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin,utils_hooks__hooks.defineLocale=defineLocale,
utils_hooks__hooks.updateLocale=updateLocale,utils_hooks__hooks.locales=locale_locales__listLocales,utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort,utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold,utils_hooks__hooks.prototype=momentPrototype;var _moment=utils_hooks__hooks;return _moment})}).call(exports,__webpack_require__(4)(module))},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children=[],module.webpackPolyfill=1),module}},function(module,exports){function webpackContext(req){throw new Error("Cannot find module '"+req+"'.")}webpackContext.keys=function(){return[]},webpackContext.resolve=webpackContext,module.exports=webpackContext,webpackContext.id=5},function(module,exports){(function(global){function parse(s,buf,offset){var i=buf&&offset||0,ii=0;for(buf=buf||[],s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){ii<16&&(buf[i+ii++]=_hexToByte[oct])});ii<16;)buf[i+ii++]=0;return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[];options=options||{};var clockseq=void 0!==options.clockseq?options.clockseq:_clockseq,msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;var tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var node=options.node||_nodeId,n=0;n<6;n++)b[i+n]=node[n];return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"==options?new Array(16):null,options=null),options=options||{};var rnds=options.random||(options.rng||_rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;ii<16;ii++)buf[i+ii]=rnds[ii];return buf||unparse(rnds)}var _rng,globalVar="undefined"!=typeof window?window:"undefined"!=typeof global?global:null;if(globalVar&&globalVar.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);_rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!_rng){var _rnds=new Array(16);_rng=function(){for(var r,i=0;i<16;i++)0===(3&i)&&(r=4294967296*Math.random()),_rnds[i]=r>>>((3&i)<<3)&255;return _rnds}}for(var _byteToHex=[],_hexToByte={},i=0;i<256;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,module.exports=uuid}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){exports.util=__webpack_require__(1),exports.DOMutil=__webpack_require__(8),exports.DataSet=__webpack_require__(9),exports.DataView=__webpack_require__(11),exports.Queue=__webpack_require__(10),exports.Graph3d=__webpack_require__(12),exports.graph3d={Camera:__webpack_require__(16),Filter:__webpack_require__(17),Point2d:__webpack_require__(15),Point3d:__webpack_require__(14),Slider:__webpack_require__(18),StepNumber:__webpack_require__(19)},exports.moment=__webpack_require__(2),exports.Hammer=__webpack_require__(20),exports.keycharm=__webpack_require__(23)},function(module,exports){exports.prepareElements=function(JSONcontainer){for(var elementType in JSONcontainer)JSONcontainer.hasOwnProperty(elementType)&&(JSONcontainer[elementType].redundant=JSONcontainer[elementType].used,JSONcontainer[elementType].used=[])},exports.cleanupElements=function(JSONcontainer){for(var elementType in JSONcontainer)if(JSONcontainer.hasOwnProperty(elementType)&&JSONcontainer[elementType].redundant){for(var i=0;i<JSONcontainer[elementType].redundant.length;i++)JSONcontainer[elementType].redundant[i].parentNode.removeChild(JSONcontainer[elementType].redundant[i]);JSONcontainer[elementType].redundant=[]}},exports.resetElements=function(JSONcontainer){exports.prepareElements(JSONcontainer),exports.cleanupElements(JSONcontainer),exports.prepareElements(JSONcontainer)},exports.getSVGElement=function(elementType,JSONcontainer,svgContainer){var element;return JSONcontainer.hasOwnProperty(elementType)?JSONcontainer[elementType].redundant.length>0?(element=JSONcontainer[elementType].redundant[0],JSONcontainer[elementType].redundant.shift()):(element=document.createElementNS("http://www.w3.org/2000/svg",elementType),svgContainer.appendChild(element)):(element=document.createElementNS("http://www.w3.org/2000/svg",elementType),JSONcontainer[elementType]={used:[],redundant:[]},svgContainer.appendChild(element)),JSONcontainer[elementType].used.push(element),element},exports.getDOMElement=function(elementType,JSONcontainer,DOMContainer,insertBefore){var element;return JSONcontainer.hasOwnProperty(elementType)?JSONcontainer[elementType].redundant.length>0?(element=JSONcontainer[elementType].redundant[0],JSONcontainer[elementType].redundant.shift()):(element=document.createElement(elementType),void 0!==insertBefore?DOMContainer.insertBefore(element,insertBefore):DOMContainer.appendChild(element)):(element=document.createElement(elementType),JSONcontainer[elementType]={used:[],redundant:[]},void 0!==insertBefore?DOMContainer.insertBefore(element,insertBefore):DOMContainer.appendChild(element)),JSONcontainer[elementType].used.push(element),element},exports.drawPoint=function(x,y,groupTemplate,JSONcontainer,svgContainer,labelObj){var point;if("circle"==groupTemplate.style?(point=exports.getSVGElement("circle",JSONcontainer,svgContainer),point.setAttributeNS(null,"cx",x),point.setAttributeNS(null,"cy",y),point.setAttributeNS(null,"r",.5*groupTemplate.size)):(point=exports.getSVGElement("rect",JSONcontainer,svgContainer),point.setAttributeNS(null,"x",x-.5*groupTemplate.size),point.setAttributeNS(null,"y",y-.5*groupTemplate.size),point.setAttributeNS(null,"width",groupTemplate.size),point.setAttributeNS(null,"height",groupTemplate.size)),void 0!==groupTemplate.styles&&point.setAttributeNS(null,"style",groupTemplate.styles),point.setAttributeNS(null,"class",groupTemplate.className+" vis-point"),labelObj){var label=exports.getSVGElement("text",JSONcontainer,svgContainer);labelObj.xOffset&&(x+=labelObj.xOffset),labelObj.yOffset&&(y+=labelObj.yOffset),labelObj.content&&(label.textContent=labelObj.content),labelObj.className&&label.setAttributeNS(null,"class",labelObj.className+" vis-label"),label.setAttributeNS(null,"x",x),label.setAttributeNS(null,"y",y)}return point},exports.drawBar=function(x,y,width,height,className,JSONcontainer,svgContainer,style){if(0!=height){height<0&&(height*=-1,y-=height);var rect=exports.getSVGElement("rect",JSONcontainer,svgContainer);rect.setAttributeNS(null,"x",x-.5*width),rect.setAttributeNS(null,"y",y),rect.setAttributeNS(null,"width",width),rect.setAttributeNS(null,"height",height),rect.setAttributeNS(null,"class",className),style&&rect.setAttributeNS(null,"style",style)}}},function(module,exports,__webpack_require__){function DataSet(data,options){if(data&&!Array.isArray(data)&&(options=data,data=null),this._options=options||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var fields=Object.keys(this._options.type),i=0,len=fields.length;i<len;i++){var field=fields[i],value=this._options.type[field];"Date"==value||"ISODate"==value||"ASPDate"==value?this._type[field]="Date":this._type[field]=value}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},data&&this.add(data),this.setOptions(options)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},util=__webpack_require__(1),Queue=__webpack_require__(10);DataSet.prototype.setOptions=function(options){options&&void 0!==options.queue&&(options.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=Queue.extend(this,{replace:["add","update","remove"]})),"object"===_typeof(options.queue)&&this._queue.setOptions(options.queue)))},DataSet.prototype.on=function(event,callback){var subscribers=this._subscribers[event];subscribers||(subscribers=[],this._subscribers[event]=subscribers),subscribers.push({callback:callback})},DataSet.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")},DataSet.prototype.off=function(event,callback){var subscribers=this._subscribers[event];subscribers&&(this._subscribers[event]=subscribers.filter(function(listener){return listener.callback!=callback}))},DataSet.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")},DataSet.prototype._trigger=function(event,params,senderId){if("*"==event)throw new Error("Cannot trigger event *");var subscribers=[];event in this._subscribers&&(subscribers=subscribers.concat(this._subscribers[event])),"*"in this._subscribers&&(subscribers=subscribers.concat(this._subscribers["*"]));for(var i=0,len=subscribers.length;i<len;i++){var subscriber=subscribers[i];subscriber.callback&&subscriber.callback(event,params,senderId||null)}},DataSet.prototype.add=function(data,senderId){var id,addedIds=[],me=this;if(Array.isArray(data))for(var i=0,len=data.length;i<len;i++)id=me._addItem(data[i]),addedIds.push(id);else{if(!(data instanceof Object))throw new Error("Unknown dataType");id=me._addItem(data),addedIds.push(id)}return addedIds.length&&this._trigger("add",{items:addedIds},senderId),addedIds},DataSet.prototype.update=function(data,senderId){var addedIds=[],updatedIds=[],oldData=[],updatedData=[],me=this,fieldId=me._fieldId,addOrUpdate=function(item){var id=item[fieldId];if(me._data[id]){var oldItem=util.extend({},me._data[id]);id=me._updateItem(item),updatedIds.push(id),updatedData.push(item),oldData.push(oldItem)}else id=me._addItem(item),addedIds.push(id)};if(Array.isArray(data))for(var i=0,len=data.length;i<len;i++)data[i]instanceof Object?addOrUpdate(data[i]):console.warn("Ignoring input item, which is not an object at index "+i);else{if(!(data instanceof Object))throw new Error("Unknown dataType");addOrUpdate(data)}if(addedIds.length&&this._trigger("add",{items:addedIds},senderId),updatedIds.length){var props={items:updatedIds,oldData:oldData,data:updatedData};this._trigger("update",props,senderId)}return addedIds.concat(updatedIds)},DataSet.prototype.get=function(args){var id,ids,options,me=this,firstType=util.getType(arguments[0]);"String"==firstType||"Number"==firstType?(id=arguments[0],options=arguments[1]):"Array"==firstType?(ids=arguments[0],options=arguments[1]):options=arguments[0];var returnType;if(options&&options.returnType){var allowedValues=["Array","Object"];returnType=allowedValues.indexOf(options.returnType)==-1?"Array":options.returnType}else returnType="Array";var item,itemIds,itemId,i,len,type=options&&options.type||this._options.type,filter=options&&options.filter,items=[];if(void 0!=id)item=me._getItem(id,type),item&&filter&&!filter(item)&&(item=null);else if(void 0!=ids)for(i=0,len=ids.length;i<len;i++)item=me._getItem(ids[i],type),filter&&!filter(item)||items.push(item);else for(itemIds=Object.keys(this._data),i=0,len=itemIds.length;i<len;i++)itemId=itemIds[i],item=me._getItem(itemId,type),filter&&!filter(item)||items.push(item);if(options&&options.order&&void 0==id&&this._sort(items,options.order),options&&options.fields){var fields=options.fields;if(void 0!=id)item=this._filterFields(item,fields);else for(i=0,len=items.length;i<len;i++)items[i]=this._filterFields(items[i],fields)}if("Object"==returnType){var resultant,result={};for(i=0,len=items.length;i<len;i++)resultant=items[i],result[resultant.id]=resultant;return result}return void 0!=id?item:items},DataSet.prototype.getIds=function(options){var i,len,id,item,items,data=this._data,filter=options&&options.filter,order=options&&options.order,type=options&&options.type||this._options.type,itemIds=Object.keys(data),ids=[];if(filter)if(order){for(items=[],i=0,len=itemIds.length;i<len;i++)id=itemIds[i],item=this._getItem(id,type),filter(item)&&items.push(item);for(this._sort(items,order),i=0,len=items.length;i<len;i++)ids.push(items[i][this._fieldId])}else for(i=0,len=itemIds.length;i<len;i++)id=itemIds[i],item=this._getItem(id,type),filter(item)&&ids.push(item[this._fieldId]);else if(order){for(items=[],i=0,len=itemIds.length;i<len;i++)id=itemIds[i],items.push(data[id]);for(this._sort(items,order),i=0,len=items.length;i<len;i++)ids.push(items[i][this._fieldId])}else for(i=0,len=itemIds.length;i<len;i++)id=itemIds[i],item=data[id],ids.push(item[this._fieldId]);return ids},DataSet.prototype.getDataSet=function(){return this},DataSet.prototype.forEach=function(callback,options){var i,len,item,id,filter=options&&options.filter,type=options&&options.type||this._options.type,data=this._data,itemIds=Object.keys(data);if(options&&options.order){var items=this.get(options);for(i=0,len=items.length;i<len;i++)item=items[i],id=item[this._fieldId],callback(item,id)}else for(i=0,len=itemIds.length;i<len;i++)id=itemIds[i],item=this._getItem(id,type),filter&&!filter(item)||callback(item,id)},DataSet.prototype.map=function(callback,options){var i,len,id,item,filter=options&&options.filter,type=options&&options.type||this._options.type,mappedItems=[],data=this._data,itemIds=Object.keys(data);for(i=0,len=itemIds.length;i<len;i++)id=itemIds[i],item=this._getItem(id,type),filter&&!filter(item)||mappedItems.push(callback(item,id));return options&&options.order&&this._sort(mappedItems,options.order),mappedItems},DataSet.prototype._filterFields=function(item,fields){if(!item)return item;var i,field,filteredItem={},itemFields=Object.keys(item),len=itemFields.length;if(Array.isArray(fields))for(i=0;i<len;i++)field=itemFields[i],fields.indexOf(field)!=-1&&(filteredItem[field]=item[field]);else for(i=0;i<len;i++)field=itemFields[i],fields.hasOwnProperty(field)&&(filteredItem[fields[field]]=item[field]);return filteredItem},DataSet.prototype._sort=function(items,order){if(util.isString(order)){var name=order;items.sort(function(a,b){var av=a[name],bv=b[name];return av>bv?1:av<bv?-1:0})}else{if("function"!=typeof order)throw new TypeError("Order must be a function or a string");items.sort(order)}},DataSet.prototype.remove=function(id,senderId){var i,len,removedId,removedIds=[];if(Array.isArray(id))for(i=0,len=id.length;i<len;i++)removedId=this._remove(id[i]),null!=removedId&&removedIds.push(removedId);else removedId=this._remove(id),null!=removedId&&removedIds.push(removedId);return removedIds.length&&this._trigger("remove",{items:removedIds},senderId),removedIds},DataSet.prototype._remove=function(id){if(util.isNumber(id)||util.isString(id)){if(this._data[id])return delete this._data[id],this.length--,id}else if(id instanceof Object){var itemId=id[this._fieldId];if(void 0!==itemId&&this._data[itemId])return delete this._data[itemId],this.length--,itemId}return null},DataSet.prototype.clear=function(senderId){var ids=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:ids},senderId),ids},DataSet.prototype.max=function(field){var i,len,data=this._data,itemIds=Object.keys(data),max=null,maxField=null;for(i=0,len=itemIds.length;i<len;i++){var id=itemIds[i],item=data[id],itemField=item[field];null!=itemField&&(!max||itemField>maxField)&&(max=item,maxField=itemField)}return max},DataSet.prototype.min=function(field){var i,len,data=this._data,itemIds=Object.keys(data),min=null,minField=null;for(i=0,len=itemIds.length;i<len;i++){var id=itemIds[i],item=data[id],itemField=item[field];null!=itemField&&(!min||itemField<minField)&&(min=item,minField=itemField)}return min},DataSet.prototype.distinct=function(field){var i,j,len,data=this._data,itemIds=Object.keys(data),values=[],fieldType=this._options.type&&this._options.type[field]||null,count=0;for(i=0,len=itemIds.length;i<len;i++){var id=itemIds[i],item=data[id],value=item[field],exists=!1;for(j=0;j<count;j++)if(values[j]==value){exists=!0;break}exists||void 0===value||(values[count]=value,count++)}if(fieldType)for(i=0,len=values.length;i<len;i++)values[i]=util.convert(values[i],fieldType);return values},DataSet.prototype._addItem=function(item){var id=item[this._fieldId];if(void 0!=id){if(this._data[id])throw new Error("Cannot add item: item with id "+id+" already exists")}else id=util.randomUUID(),item[this._fieldId]=id;var i,len,d={},fields=Object.keys(item);for(i=0,len=fields.length;i<len;i++){var field=fields[i],fieldType=this._type[field];d[field]=util.convert(item[field],fieldType)}return this._data[id]=d,this.length++,id},DataSet.prototype._getItem=function(id,types){var field,value,i,len,raw=this._data[id];if(!raw)return null;var converted={},fields=Object.keys(raw);if(types)for(i=0,len=fields.length;i<len;i++)field=fields[i],value=raw[field],converted[field]=util.convert(value,types[field]);else for(i=0,len=fields.length;i<len;i++)field=fields[i],value=raw[field],converted[field]=value;return converted},DataSet.prototype._updateItem=function(item){var id=item[this._fieldId];if(void 0==id)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(item)+")");var d=this._data[id];if(!d)throw new Error("Cannot update item: no item with id "+id+" found");for(var fields=Object.keys(item),i=0,len=fields.length;i<len;i++){var field=fields[i],fieldType=this._type[field];d[field]=util.convert(item[field],fieldType)}return id},module.exports=DataSet},function(module,exports){function Queue(options){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(options)}Queue.prototype.setOptions=function(options){options&&"undefined"!=typeof options.delay&&(this.delay=options.delay),options&&"undefined"!=typeof options.max&&(this.max=options.max),this._flushIfNeeded()},Queue.extend=function(object,options){var queue=new Queue(options);if(void 0!==object.flush)throw new Error("Target object already has a property flush");object.flush=function(){queue.flush()};var methods=[{name:"flush",original:void 0}];if(options&&options.replace)for(var i=0;i<options.replace.length;i++){var name=options.replace[i];methods.push({name:name,original:object[name]}),queue.replace(object,name)}return queue._extended={object:object,methods:methods},queue},Queue.prototype.destroy=function(){if(this.flush(),this._extended){for(var object=this._extended.object,methods=this._extended.methods,i=0;i<methods.length;i++){var method=methods[i];method.original?object[method.name]=method.original:delete object[method.name]}this._extended=null}},Queue.prototype.replace=function(object,method){var me=this,original=object[method];if(!original)throw new Error("Method "+method+" undefined");object[method]=function(){for(var args=[],i=0;i<arguments.length;i++)args[i]=arguments[i];me.queue({args:args,fn:original,context:this})}},Queue.prototype.queue=function(entry){"function"==typeof entry?this._queue.push({fn:entry}):this._queue.push(entry),this._flushIfNeeded()},Queue.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var me=this;this._timeout=setTimeout(function(){me.flush()},this.delay)}},Queue.prototype.flush=function(){for(;this._queue.length>0;){var entry=this._queue.shift();entry.fn.apply(entry.context||entry.fn,entry.args||[])}},module.exports=Queue},function(module,exports,__webpack_require__){function DataView(data,options){this._data=null,this._ids={},this.length=0,this._options=options||{},this._fieldId="id",this._subscribers={};var me=this;this.listener=function(){me._onEvent.apply(me,arguments)},this.setData(data)}var util=__webpack_require__(1),DataSet=__webpack_require__(9);DataView.prototype.setData=function(data){var ids,id,i,len;if(this._data&&(this._data.off&&this._data.off("*",this.listener),ids=Object.keys(this._ids),this._ids={},this.length=0,this._trigger("remove",{items:ids})),this._data=data,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",ids=this._data.getIds({filter:this._options&&this._options.filter}),i=0,len=ids.length;i<len;i++)id=ids[i],this._ids[id]=!0;this.length=ids.length,this._trigger("add",{items:ids}),this._data.on&&this._data.on("*",this.listener)}},DataView.prototype.refresh=function(){var id,i,len,ids=this._data.getIds({filter:this._options&&this._options.filter}),oldIds=Object.keys(this._ids),newIds={},added=[],removed=[];for(i=0,len=ids.length;i<len;i++)id=ids[i],newIds[id]=!0,this._ids[id]||(added.push(id),this._ids[id]=!0);for(i=0,len=oldIds.length;i<len;i++)id=oldIds[i],newIds[id]||(removed.push(id),delete this._ids[id]);this.length+=added.length-removed.length,added.length&&this._trigger("add",{items:added}),removed.length&&this._trigger("remove",{items:removed})},DataView.prototype.get=function(args){var ids,options,data,me=this,firstType=util.getType(arguments[0]);"String"==firstType||"Number"==firstType||"Array"==firstType?(ids=arguments[0],options=arguments[1],data=arguments[2]):(options=arguments[0],data=arguments[1]);var viewOptions=util.extend({},this._options,options);this._options.filter&&options&&options.filter&&(viewOptions.filter=function(item){return me._options.filter(item)&&options.filter(item)});var getArguments=[];return void 0!=ids&&getArguments.push(ids),getArguments.push(viewOptions),getArguments.push(data),this._data&&this._data.get.apply(this._data,getArguments)},DataView.prototype.getIds=function(options){var ids;if(this._data){var filter,defaultFilter=this._options.filter;filter=options&&options.filter?defaultFilter?function(item){return defaultFilter(item)&&options.filter(item)}:options.filter:defaultFilter,ids=this._data.getIds({filter:filter,order:options&&options.order})}else ids=[];return ids},DataView.prototype.map=function(callback,options){var mappedItems=[];if(this._data){var filter,defaultFilter=this._options.filter;filter=options&&options.filter?defaultFilter?function(item){return defaultFilter(item)&&options.filter(item)}:options.filter:defaultFilter,mappedItems=this._data.map(callback,{filter:filter,order:options&&options.order})}else mappedItems=[];return mappedItems},DataView.prototype.getDataSet=function(){for(var dataSet=this;dataSet instanceof DataView;)dataSet=dataSet._data;return dataSet||null},DataView.prototype._onEvent=function(event,params,senderId){var i,len,id,item,ids=params&&params.items,data=this._data,updatedData=[],added=[],updated=[],removed=[];if(ids&&data){switch(event){case"add":for(i=0,len=ids.length;i<len;i++)id=ids[i],item=this.get(id),item&&(this._ids[id]=!0,added.push(id));break;case"update":for(i=0,len=ids.length;i<len;i++)id=ids[i],item=this.get(id),item?this._ids[id]?(updated.push(id),updatedData.push(params.data[i])):(this._ids[id]=!0,added.push(id)):this._ids[id]&&(delete this._ids[id],removed.push(id));break;case"remove":for(i=0,len=ids.length;i<len;i++)id=ids[i],this._ids[id]&&(delete this._ids[id],removed.push(id))}this.length+=added.length-removed.length,added.length&&this._trigger("add",{items:added},senderId),updated.length&&this._trigger("update",{items:updated,data:updatedData},senderId),removed.length&&this._trigger("remove",{items:removed},senderId)}},DataView.prototype.on=DataSet.prototype.on,DataView.prototype.off=DataSet.prototype.off,DataView.prototype._trigger=DataSet.prototype._trigger,DataView.prototype.subscribe=DataView.prototype.on,DataView.prototype.unsubscribe=DataView.prototype.off,module.exports=DataView},function(module,exports,__webpack_require__){function Graph3d(container,data,options){if(!(this instanceof Graph3d))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=container,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z";var passValueFn=function(v){return v};this.xValueLabel=passValueFn,this.yValueLabel=passValueFn,this.zValueLabel=passValueFn,this.filterLabel="time",this.legendLabel="value",this.style=Graph3d.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new Camera,this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7),this.eye=new Point3d(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.axisColor="#4D4D4D",this.gridColor="#D3D3D3",this.dataColor={fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},this.dotSizeRatio=.02,this.create(),this.setOptions(options),data&&this.setData(data)}function getMouseX(event){return"clientX"in event?event.clientX:event.targetTouches[0]&&event.targetTouches[0].clientX||0}function getMouseY(event){return"clientY"in event?event.clientY:event.targetTouches[0]&&event.targetTouches[0].clientY||0}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},Emitter=__webpack_require__(13),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),util=__webpack_require__(1),Point3d=__webpack_require__(14),Point2d=__webpack_require__(15),Camera=__webpack_require__(16),Filter=__webpack_require__(17),Slider=__webpack_require__(18),StepNumber=__webpack_require__(19);Emitter(Graph3d.prototype),Graph3d.prototype._setScale=function(){this.scale=new Point3d(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var xCenter=(this.xMax+this.xMin)/2*this.scale.x,yCenter=(this.yMax+this.yMin)/2*this.scale.y,zCenter=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(xCenter,yCenter,zCenter)},Graph3d.prototype._convert3Dto2D=function(point3d){var translation=this._convertPointToTranslation(point3d);return this._convertTranslationToScreen(translation)},Graph3d.prototype._convertPointToTranslation=function(point3d){var ax=point3d.x*this.scale.x,ay=point3d.y*this.scale.y,az=point3d.z*this.scale.z,cx=this.camera.getCameraLocation().x,cy=this.camera.getCameraLocation().y,cz=this.camera.getCameraLocation().z,sinTx=Math.sin(this.camera.getCameraRotation().x),cosTx=Math.cos(this.camera.getCameraRotation().x),sinTy=Math.sin(this.camera.getCameraRotation().y),cosTy=Math.cos(this.camera.getCameraRotation().y),sinTz=Math.sin(this.camera.getCameraRotation().z),cosTz=Math.cos(this.camera.getCameraRotation().z),dx=cosTy*(sinTz*(ay-cy)+cosTz*(ax-cx))-sinTy*(az-cz),dy=sinTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))+cosTx*(cosTz*(ay-cy)-sinTz*(ax-cx)),dz=cosTx*(cosTy*(az-cz)+sinTy*(sinTz*(ay-cy)+cosTz*(ax-cx)))-sinTx*(cosTz*(ay-cy)-sinTz*(ax-cx));return new Point3d(dx,dy,dz)},Graph3d.prototype._convertTranslationToScreen=function(translation){var bx,by,ex=this.eye.x,ey=this.eye.y,ez=this.eye.z,dx=translation.x,dy=translation.y,dz=translation.z;return this.showPerspective?(bx=(dx-ex)*(ez/dz),by=(dy-ey)*(ez/dz)):(bx=dx*-(ez/this.camera.getArmLength()),by=dy*-(ez/this.camera.getArmLength())),new Point2d(this.xcenter+bx*this.frame.canvas.clientWidth,this.ycenter-by*this.frame.canvas.clientWidth)},Graph3d.prototype._setBackgroundColor=function(backgroundColor){var fill="white",stroke="gray",strokeWidth=1;if("string"==typeof backgroundColor)fill=backgroundColor,stroke="none",strokeWidth=0;else if("object"===("undefined"==typeof backgroundColor?"undefined":_typeof(backgroundColor)))void 0!==backgroundColor.fill&&(fill=backgroundColor.fill),void 0!==backgroundColor.stroke&&(stroke=backgroundColor.stroke),void 0!==backgroundColor.strokeWidth&&(strokeWidth=backgroundColor.strokeWidth);else if(void 0!==backgroundColor)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=fill,this.frame.style.borderColor=stroke,this.frame.style.borderWidth=strokeWidth+"px",this.frame.style.borderStyle="solid"},Graph3d.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},Graph3d.prototype._getStyleNumber=function(styleName){switch(styleName){case"dot":return Graph3d.STYLE.DOT;case"dot-line":return Graph3d.STYLE.DOTLINE;case"dot-color":return Graph3d.STYLE.DOTCOLOR;case"dot-size":return Graph3d.STYLE.DOTSIZE;case"line":return Graph3d.STYLE.LINE;case"grid":return Graph3d.STYLE.GRID;case"surface":return Graph3d.STYLE.SURFACE;case"bar":return Graph3d.STYLE.BAR;case"bar-color":return Graph3d.STYLE.BARCOLOR;case"bar-size":return Graph3d.STYLE.BARSIZE}return-1},Graph3d.prototype._determineColumnIndexes=function(data,style){if(this.style===Graph3d.STYLE.DOT||this.style===Graph3d.STYLE.DOTLINE||this.style===Graph3d.STYLE.LINE||this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE||this.style===Graph3d.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,data.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==Graph3d.STYLE.DOTCOLOR&&this.style!==Graph3d.STYLE.DOTSIZE&&this.style!==Graph3d.STYLE.BARCOLOR&&this.style!==Graph3d.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,data.getNumberOfColumns()>4&&(this.colFilter=4)}},Graph3d.prototype.getNumberOfRows=function(data){return data.length},Graph3d.prototype.getNumberOfColumns=function(data){var counter=0;for(var column in data[0])data[0].hasOwnProperty(column)&&counter++;return counter},Graph3d.prototype.getDistinctValues=function(data,column){for(var distinctValues=[],i=0;i<data.length;i++)distinctValues.indexOf(data[i][column])==-1&&distinctValues.push(data[i][column]);return distinctValues},Graph3d.prototype.getColumnRange=function(data,column){for(var minMax={min:data[0][column],max:data[0][column]},i=0;i<data.length;i++)minMax.min>data[i][column]&&(minMax.min=data[i][column]),minMax.max<data[i][column]&&(minMax.max=data[i][column]);return minMax},Graph3d.prototype._dataInitialize=function(rawData,style){var me=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==rawData){Array.isArray(rawData)&&(rawData=new DataSet(rawData));var data;if(!(rawData instanceof DataSet||rawData instanceof DataView))throw new Error("Array, DataSet, or DataView expected");if(data=rawData.get(),0!=data.length){this.dataSet=rawData,this.dataTable=data,this._onChange=function(){me.setData(me.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",data[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new Filter(rawData,this.colFilter,this),
this.dataFilter.setOnLoadCallback(function(){me.redraw()}));var withBars=this.style==Graph3d.STYLE.BAR||this.style==Graph3d.STYLE.BARCOLOR||this.style==Graph3d.STYLE.BARSIZE;if(withBars){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var dataX=this.getDistinctValues(data,this.colX);this.xBarWidth=dataX[1]-dataX[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var dataY=this.getDistinctValues(data,this.colY);this.yBarWidth=dataY[1]-dataY[0]||1}}var xRange=this.getColumnRange(data,this.colX);withBars&&(xRange.min-=this.xBarWidth/2,xRange.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:xRange.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:xRange.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var yRange=this.getColumnRange(data,this.colY);withBars&&(yRange.min-=this.yBarWidth/2,yRange.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:yRange.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:yRange.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var zRange=this.getColumnRange(data,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:zRange.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:zRange.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var valueRange=this.getColumnRange(data,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:valueRange.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:valueRange.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},Graph3d.prototype._getDataPoints=function(data){var x,y,i,z,obj,point,dataPoints=[];if(this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE){var dataX=[],dataY=[];for(i=0;i<this.getNumberOfRows(data);i++)x=data[i][this.colX]||0,y=data[i][this.colY]||0,dataX.indexOf(x)===-1&&dataX.push(x),dataY.indexOf(y)===-1&&dataY.push(y);var sortNumber=function(a,b){return a-b};dataX.sort(sortNumber),dataY.sort(sortNumber);var dataMatrix=[];for(i=0;i<data.length;i++){x=data[i][this.colX]||0,y=data[i][this.colY]||0,z=data[i][this.colZ]||0;var xIndex=dataX.indexOf(x),yIndex=dataY.indexOf(y);void 0===dataMatrix[xIndex]&&(dataMatrix[xIndex]=[]);var point3d=new Point3d;point3d.x=x,point3d.y=y,point3d.z=z,obj={},obj.point=point3d,obj.trans=void 0,obj.screen=void 0,obj.bottom=new Point3d(x,y,this.zMin),dataMatrix[xIndex][yIndex]=obj,dataPoints.push(obj)}for(x=0;x<dataMatrix.length;x++)for(y=0;y<dataMatrix[x].length;y++)dataMatrix[x][y]&&(dataMatrix[x][y].pointRight=x<dataMatrix.length-1?dataMatrix[x+1][y]:void 0,dataMatrix[x][y].pointTop=y<dataMatrix[x].length-1?dataMatrix[x][y+1]:void 0,dataMatrix[x][y].pointCross=x<dataMatrix.length-1&&y<dataMatrix[x].length-1?dataMatrix[x+1][y+1]:void 0)}else for(i=0;i<data.length;i++)point=new Point3d,point.x=data[i][this.colX]||0,point.y=data[i][this.colY]||0,point.z=data[i][this.colZ]||0,void 0!==this.colValue&&(point.value=data[i][this.colValue]||0),obj={},obj.point=point,obj.bottom=new Point3d(point.x,point.y,this.zMin),obj.trans=void 0,obj.screen=void 0,dataPoints.push(obj);return dataPoints},Graph3d.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var noCanvas=document.createElement("DIV");noCanvas.style.color="red",noCanvas.style.fontWeight="bold",noCanvas.style.padding="10px",noCanvas.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(noCanvas),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var me=this,onmousedown=function(event){me._onMouseDown(event)},ontouchstart=function(event){me._onTouchStart(event)},onmousewheel=function(event){me._onWheel(event)},ontooltip=function(event){me._onTooltip(event)};util.addEventListener(this.frame.canvas,"keydown",onkeydown),util.addEventListener(this.frame.canvas,"mousedown",onmousedown),util.addEventListener(this.frame.canvas,"touchstart",ontouchstart),util.addEventListener(this.frame.canvas,"mousewheel",onmousewheel),util.addEventListener(this.frame.canvas,"mousemove",ontooltip),this.containerElement.appendChild(this.frame)},Graph3d.prototype.setSize=function(width,height){this.frame.style.width=width,this.frame.style.height=height,this._resizeCanvas()},Graph3d.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},Graph3d.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},Graph3d.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},Graph3d.prototype._resizeCenter=function(){"%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?this.xcenter=parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:this.xcenter=parseFloat(this.defaultXCenter),"%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?this.ycenter=parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.ycenter=parseFloat(this.defaultYCenter)},Graph3d.prototype.setCameraPosition=function(pos){void 0!==pos&&(void 0!==pos.horizontal&&void 0!==pos.vertical&&this.camera.setArmRotation(pos.horizontal,pos.vertical),void 0!==pos.distance&&this.camera.setArmLength(pos.distance),this.redraw())},Graph3d.prototype.getCameraPosition=function(){var pos=this.camera.getArmRotation();return pos.distance=this.camera.getArmLength(),pos},Graph3d.prototype._readData=function(data){this._dataInitialize(data,this.style),this.dataFilter?this.dataPoints=this.dataFilter._getDataPoints():this.dataPoints=this._getDataPoints(this.dataTable),this._redrawFilter()},Graph3d.prototype.setData=function(data){this._readData(data),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},Graph3d.prototype.setOptions=function(options){var cameraPosition=void 0;if(this.animationStop(),void 0!==options){if(void 0!==options.width&&(this.width=options.width),void 0!==options.height&&(this.height=options.height),void 0!==options.xCenter&&(this.defaultXCenter=options.xCenter),void 0!==options.yCenter&&(this.defaultYCenter=options.yCenter),void 0!==options.filterLabel&&(this.filterLabel=options.filterLabel),void 0!==options.legendLabel&&(this.legendLabel=options.legendLabel),void 0!==options.xLabel&&(this.xLabel=options.xLabel),void 0!==options.yLabel&&(this.yLabel=options.yLabel),void 0!==options.zLabel&&(this.zLabel=options.zLabel),void 0!==options.xValueLabel&&(this.xValueLabel=options.xValueLabel),void 0!==options.yValueLabel&&(this.yValueLabel=options.yValueLabel),void 0!==options.zValueLabel&&(this.zValueLabel=options.zValueLabel),void 0!==options.dotSizeRatio&&(this.dotSizeRatio=options.dotSizeRatio),void 0!==options.style){var styleNumber=this._getStyleNumber(options.style);styleNumber!==-1&&(this.style=styleNumber)}void 0!==options.showGrid&&(this.showGrid=options.showGrid),void 0!==options.showPerspective&&(this.showPerspective=options.showPerspective),void 0!==options.showShadow&&(this.showShadow=options.showShadow),void 0!==options.tooltip&&(this.showTooltip=options.tooltip),void 0!==options.showAnimationControls&&(this.showAnimationControls=options.showAnimationControls),void 0!==options.keepAspectRatio&&(this.keepAspectRatio=options.keepAspectRatio),void 0!==options.verticalRatio&&(this.verticalRatio=options.verticalRatio),void 0!==options.animationInterval&&(this.animationInterval=options.animationInterval),void 0!==options.animationPreload&&(this.animationPreload=options.animationPreload),void 0!==options.animationAutoStart&&(this.animationAutoStart=options.animationAutoStart),void 0!==options.xBarWidth&&(this.defaultXBarWidth=options.xBarWidth),void 0!==options.yBarWidth&&(this.defaultYBarWidth=options.yBarWidth),void 0!==options.xMin&&(this.defaultXMin=options.xMin),void 0!==options.xStep&&(this.defaultXStep=options.xStep),void 0!==options.xMax&&(this.defaultXMax=options.xMax),void 0!==options.yMin&&(this.defaultYMin=options.yMin),void 0!==options.yStep&&(this.defaultYStep=options.yStep),void 0!==options.yMax&&(this.defaultYMax=options.yMax),void 0!==options.zMin&&(this.defaultZMin=options.zMin),void 0!==options.zStep&&(this.defaultZStep=options.zStep),void 0!==options.zMax&&(this.defaultZMax=options.zMax),void 0!==options.valueMin&&(this.defaultValueMin=options.valueMin),void 0!==options.valueMax&&(this.defaultValueMax=options.valueMax),void 0!==options.backgroundColor&&this._setBackgroundColor(options.backgroundColor),void 0!==options.cameraPosition&&(cameraPosition=options.cameraPosition),void 0!==cameraPosition&&(this.camera.setArmRotation(cameraPosition.horizontal,cameraPosition.vertical),this.camera.setArmLength(cameraPosition.distance)),void 0!==options.axisColor&&(this.axisColor=options.axisColor),void 0!==options.gridColor&&(this.gridColor=options.gridColor),options.dataColor&&("string"==typeof options.dataColor?(this.dataColor.fill=options.dataColor,this.dataColor.stroke=options.dataColor):(options.dataColor.fill&&(this.dataColor.fill=options.dataColor.fill),options.dataColor.stroke&&(this.dataColor.stroke=options.dataColor.stroke),void 0!==options.dataColor.strokeWidth&&(this.dataColor.strokeWidth=options.dataColor.strokeWidth)))}this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},Graph3d.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===Graph3d.STYLE.GRID||this.style===Graph3d.STYLE.SURFACE?this._redrawDataGrid():this.style===Graph3d.STYLE.LINE?this._redrawDataLine():this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},Graph3d.prototype._redrawClear=function(){var canvas=this.frame.canvas,ctx=canvas.getContext("2d");ctx.clearRect(0,0,canvas.width,canvas.height)},Graph3d.prototype._redrawLegend=function(){var y;if(this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var widthMin,widthMax,dotSize=this.frame.clientWidth*this.dotSizeRatio;this.style===Graph3d.STYLE.DOTSIZE?(widthMin=dotSize/2,widthMax=dotSize/2+2*dotSize):(widthMin=20,widthMax=20);var height=Math.max(.25*this.frame.clientHeight,100),top=this.margin,right=this.frame.clientWidth-this.margin,left=right-widthMax,bottom=top+height}var canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(ctx.lineWidth=1,ctx.font="14px arial",this.style===Graph3d.STYLE.DOTCOLOR){var ymin=0,ymax=height;for(y=ymin;y<ymax;y++){var f=(y-ymin)/(ymax-ymin),hue=240*f,color=this._hsv2rgb(hue,1,1);ctx.strokeStyle=color,ctx.beginPath(),ctx.moveTo(left,top+y),ctx.lineTo(right,top+y),ctx.stroke()}ctx.strokeStyle=this.axisColor,ctx.strokeRect(left,top,widthMax,height)}if(this.style===Graph3d.STYLE.DOTSIZE&&(ctx.strokeStyle=this.axisColor,ctx.fillStyle=this.dataColor.fill,ctx.beginPath(),ctx.moveTo(left,top),ctx.lineTo(right,top),ctx.lineTo(right-widthMax+widthMin,bottom),ctx.lineTo(left,bottom),ctx.closePath(),ctx.fill(),ctx.stroke()),this.style===Graph3d.STYLE.DOTCOLOR||this.style===Graph3d.STYLE.DOTSIZE){var gridLineLen=5,step=new StepNumber(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(step.start(),step.getCurrent()<this.valueMin&&step.next();!step.end();)y=bottom-(step.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*height,ctx.beginPath(),ctx.moveTo(left-gridLineLen,y),ctx.lineTo(left,y),ctx.stroke(),ctx.textAlign="right",ctx.textBaseline="middle",ctx.fillStyle=this.axisColor,ctx.fillText(step.getCurrent(),left-2*gridLineLen,y),step.next();ctx.textAlign="right",ctx.textBaseline="top";var label=this.legendLabel;ctx.fillText(label,right,bottom+this.margin)}},Graph3d.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var options={visible:this.showAnimationControls},slider=new Slider(this.frame.filter,options);this.frame.filter.slider=slider,this.frame.filter.style.padding="10px",slider.setValues(this.dataFilter.values),slider.setPlayInterval(this.animationInterval);var me=this,onchange=function(){var index=slider.getIndex();me.dataFilter.selectValue(index),me.dataPoints=me.dataFilter._getDataPoints(),me.redraw()};slider.setOnChangeCallback(onchange)}else this.frame.filter.slider=void 0},Graph3d.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},Graph3d.prototype._redrawInfo=function(){if(this.dataFilter){var canvas=this.frame.canvas,ctx=canvas.getContext("2d");ctx.font="14px arial",ctx.lineStyle="gray",ctx.fillStyle="gray",ctx.textAlign="left",ctx.textBaseline="top";var x=this.margin,y=this.margin;ctx.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),x,y)}},Graph3d.prototype._redrawAxis=function(){var from,to,step,prettyStep,text,xText,yText,zText,offset,xOffset,yOffset,xMin2d,xMax2d,canvas=this.frame.canvas,ctx=canvas.getContext("2d");ctx.font=24/this.camera.getArmLength()+"px arial";var gridLenX=.025/this.scale.x,gridLenY=.025/this.scale.y,textMargin=5/this.camera.getArmLength(),armAngle=this.camera.getArmRotation().horizontal;for(ctx.lineWidth=1,prettyStep=void 0===this.defaultXStep,step=new StepNumber(this.xMin,this.xMax,this.xStep,prettyStep),step.start(),step.getCurrent()<this.xMin&&step.next();!step.end();){var x=step.getCurrent();this.showGrid?(from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin)),ctx.strokeStyle=this.gridColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()):(from=this._convert3Dto2D(new Point3d(x,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(x,this.yMin+gridLenX,this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),from=this._convert3Dto2D(new Point3d(x,this.yMax,this.zMin)),to=this._convert3Dto2D(new Point3d(x,this.yMax-gridLenX,this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()),yText=Math.cos(armAngle)>0?this.yMin:this.yMax,text=this._convert3Dto2D(new Point3d(x,yText,this.zMin)),Math.cos(2*armAngle)>0?(ctx.textAlign="center",ctx.textBaseline="top",text.y+=textMargin):Math.sin(2*armAngle)<0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.axisColor,ctx.fillText("  "+this.xValueLabel(step.getCurrent())+"  ",text.x,text.y),step.next()}for(ctx.lineWidth=1,prettyStep=void 0===this.defaultYStep,step=new StepNumber(this.yMin,this.yMax,this.yStep,prettyStep),step.start(),step.getCurrent()<this.yMin&&step.next();!step.end();)this.showGrid?(from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin)),ctx.strokeStyle=this.gridColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()):(from=this._convert3Dto2D(new Point3d(this.xMin,step.getCurrent(),this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMin+gridLenY,step.getCurrent(),this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),from=this._convert3Dto2D(new Point3d(this.xMax,step.getCurrent(),this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMax-gridLenY,step.getCurrent(),this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke()),xText=Math.sin(armAngle)>0?this.xMin:this.xMax,text=this._convert3Dto2D(new Point3d(xText,step.getCurrent(),this.zMin)),Math.cos(2*armAngle)<0?(ctx.textAlign="center",ctx.textBaseline="top",text.y+=textMargin):Math.sin(2*armAngle)>0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.axisColor,ctx.fillText("  "+this.yValueLabel(step.getCurrent())+"  ",text.x,text.y),step.next();for(ctx.lineWidth=1,prettyStep=void 0===this.defaultZStep,step=new StepNumber(this.zMin,this.zMax,this.zStep,prettyStep),step.start(),step.getCurrent()<this.zMin&&step.next(),xText=Math.cos(armAngle)>0?this.xMin:this.xMax,yText=Math.sin(armAngle)<0?this.yMin:this.yMax;!step.end();)from=this._convert3Dto2D(new Point3d(xText,yText,step.getCurrent())),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(from.x-textMargin,from.y),ctx.stroke(),ctx.textAlign="right",ctx.textBaseline="middle",ctx.fillStyle=this.axisColor,ctx.fillText(this.zValueLabel(step.getCurrent())+" ",from.x-5,from.y),step.next();ctx.lineWidth=1,from=this._convert3Dto2D(new Point3d(xText,yText,this.zMin)),to=this._convert3Dto2D(new Point3d(xText,yText,this.zMax)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),ctx.lineWidth=1,xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin)),xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(xMin2d.x,xMin2d.y),ctx.lineTo(xMax2d.x,xMax2d.y),ctx.stroke(),xMin2d=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin)),xMax2d=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(xMin2d.x,xMin2d.y),ctx.lineTo(xMax2d.x,xMax2d.y),ctx.stroke(),ctx.lineWidth=1,from=this._convert3Dto2D(new Point3d(this.xMin,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMin,this.yMax,this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke(),from=this._convert3Dto2D(new Point3d(this.xMax,this.yMin,this.zMin)),to=this._convert3Dto2D(new Point3d(this.xMax,this.yMax,this.zMin)),ctx.strokeStyle=this.axisColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(to.x,to.y),ctx.stroke();var xLabel=this.xLabel;xLabel.length>0&&(yOffset=.1/this.scale.y,xText=(this.xMin+this.xMax)/2,yText=Math.cos(armAngle)>0?this.yMin-yOffset:this.yMax+yOffset,text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin)),Math.cos(2*armAngle)>0?(ctx.textAlign="center",ctx.textBaseline="top"):Math.sin(2*armAngle)<0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.axisColor,ctx.fillText(xLabel,text.x,text.y));var yLabel=this.yLabel;yLabel.length>0&&(xOffset=.1/this.scale.x,xText=Math.sin(armAngle)>0?this.xMin-xOffset:this.xMax+xOffset,yText=(this.yMin+this.yMax)/2,text=this._convert3Dto2D(new Point3d(xText,yText,this.zMin)),Math.cos(2*armAngle)<0?(ctx.textAlign="center",ctx.textBaseline="top"):Math.sin(2*armAngle)>0?(ctx.textAlign="right",ctx.textBaseline="middle"):(ctx.textAlign="left",ctx.textBaseline="middle"),ctx.fillStyle=this.axisColor,ctx.fillText(yLabel,text.x,text.y));var zLabel=this.zLabel;zLabel.length>0&&(offset=30,xText=Math.cos(armAngle)>0?this.xMin:this.xMax,yText=Math.sin(armAngle)<0?this.yMin:this.yMax,zText=(this.zMin+this.zMax)/2,text=this._convert3Dto2D(new Point3d(xText,yText,zText)),ctx.textAlign="right",ctx.textBaseline="middle",ctx.fillStyle=this.axisColor,ctx.fillText(zLabel,text.x-offset,text.y))},Graph3d.prototype._hsv2rgb=function(H,S,V){var R,G,B,C,Hi,X;switch(C=V*S,Hi=Math.floor(H/60),X=C*(1-Math.abs(H/60%2-1)),Hi){case 0:R=C,G=X,B=0;break;case 1:R=X,G=C,B=0;break;case 2:R=0,G=C,B=X;break;case 3:R=0,G=X,B=C;break;case 4:R=X,G=0,B=C;break;case 5:R=C,G=0,B=X;break;default:R=0,G=0,B=0}return"RGB("+parseInt(255*R)+","+parseInt(255*G)+","+parseInt(255*B)+")"},Graph3d.prototype._redrawDataGrid=function(){var point,right,top,cross,i,topSideVisible,fillStyle,strokeStyle,h,s,v,zAvg,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(ctx.lineJoin="round",ctx.lineCap="round",!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};if(this.dataPoints.sort(sortDepth),this.style===Graph3d.STYLE.SURFACE){for(i=0;i<this.dataPoints.length;i++)if(point=this.dataPoints[i],right=this.dataPoints[i].pointRight,top=this.dataPoints[i].pointTop,cross=this.dataPoints[i].pointCross,void 0!==point&&void 0!==right&&void 0!==top&&void 0!==cross){if(this.showGrayBottom||this.showShadow){var aDiff=Point3d.subtract(cross.trans,point.trans),bDiff=Point3d.subtract(top.trans,right.trans),crossproduct=Point3d.crossProduct(aDiff,bDiff),len=crossproduct.length();topSideVisible=crossproduct.z>0}else topSideVisible=!0;topSideVisible?(zAvg=(point.point.z+right.point.z+top.point.z+cross.point.z)/4,h=240*(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio),s=1,this.showShadow?(v=Math.min(1+crossproduct.x/len/2,1),fillStyle=this._hsv2rgb(h,s,v),strokeStyle=fillStyle):(v=1,fillStyle=this._hsv2rgb(h,s,v),strokeStyle=this.axisColor)):(fillStyle="gray",strokeStyle=this.axisColor),ctx.lineWidth=this._getStrokeWidth(point),ctx.fillStyle=fillStyle,ctx.strokeStyle=strokeStyle,ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),ctx.lineTo(right.screen.x,right.screen.y),ctx.lineTo(cross.screen.x,cross.screen.y),ctx.lineTo(top.screen.x,top.screen.y),ctx.closePath(),ctx.fill(),ctx.stroke()}}else for(i=0;i<this.dataPoints.length;i++)point=this.dataPoints[i],right=this.dataPoints[i].pointRight,top=this.dataPoints[i].pointTop,void 0!==point&&void 0!==right&&(zAvg=(point.point.z+right.point.z)/2,h=240*(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio),ctx.lineWidth=2*this._getStrokeWidth(point),ctx.strokeStyle=this._hsv2rgb(h,1,1),ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),ctx.lineTo(right.screen.x,right.screen.y),ctx.stroke()),void 0!==point&&void 0!==top&&(zAvg=(point.point.z+top.point.z)/2,h=240*(1-(zAvg-this.zMin)*this.scale.z/this.verticalRatio),ctx.lineWidth=2*this._getStrokeWidth(point),ctx.strokeStyle=this._hsv2rgb(h,1,1),ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),ctx.lineTo(top.screen.x,top.screen.y),ctx.stroke())}},Graph3d.prototype._getStrokeWidth=function(point){return void 0!==point?this.showPerspective?1/-point.trans.z*this.dataColor.strokeWidth:-(this.eye.z/this.camera.getArmLength())*this.dataColor.strokeWidth:this.dataColor.strokeWidth},Graph3d.prototype._redrawDataDot=function(){var i,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth);var dotSize=this.frame.clientWidth*this.dotSizeRatio;for(i=0;i<this.dataPoints.length;i++){var point=this.dataPoints[i];if(this.style===Graph3d.STYLE.DOTLINE){var from=this._convert3Dto2D(point.bottom);ctx.lineWidth=1,ctx.strokeStyle=this.gridColor,ctx.beginPath(),ctx.moveTo(from.x,from.y),ctx.lineTo(point.screen.x,point.screen.y),ctx.stroke()}var size;size=this.style===Graph3d.STYLE.DOTSIZE?dotSize/2+2*dotSize*(point.point.value-this.valueMin)/(this.valueMax-this.valueMin):dotSize;var radius;radius=this.showPerspective?size/-point.trans.z:size*-(this.eye.z/this.camera.getArmLength()),radius<0&&(radius=0);var hue,color,borderColor;this.style===Graph3d.STYLE.DOTCOLOR?(hue=240*(1-(point.point.value-this.valueMin)*this.scale.value),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)):this.style===Graph3d.STYLE.DOTSIZE?(color=this.dataColor.fill,borderColor=this.dataColor.stroke):(hue=240*(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)),ctx.lineWidth=this._getStrokeWidth(point),ctx.strokeStyle=borderColor,ctx.fillStyle=color,ctx.beginPath(),ctx.arc(point.screen.x,point.screen.y,radius,0,2*Math.PI,!0),ctx.fill(),ctx.stroke()}}},Graph3d.prototype._redrawDataBar=function(){var i,j,surface,corners,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen;var transBottom=this._convertPointToTranslation(this.dataPoints[i].bottom);this.dataPoints[i].dist=this.showPerspective?transBottom.length():-transBottom.z}var sortDepth=function(a,b){return b.dist-a.dist};this.dataPoints.sort(sortDepth),ctx.lineJoin="round",ctx.lineCap="round";var xWidth=this.xBarWidth/2,yWidth=this.yBarWidth/2;for(i=0;i<this.dataPoints.length;i++){var hue,color,borderColor,point=this.dataPoints[i];this.style===Graph3d.STYLE.BARCOLOR?(hue=240*(1-(point.point.value-this.valueMin)*this.scale.value),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)):this.style===Graph3d.STYLE.BARSIZE?(color=this.dataColor.fill,borderColor=this.dataColor.stroke):(hue=240*(1-(point.point.z-this.zMin)*this.scale.z/this.verticalRatio),color=this._hsv2rgb(hue,1,1),borderColor=this._hsv2rgb(hue,1,.8)),this.style===Graph3d.STYLE.BARSIZE&&(xWidth=this.xBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),yWidth=this.yBarWidth/2*((point.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var me=this,point3d=point.point,top=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,point3d.z)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,point3d.z)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,point3d.z)}],bottom=[{point:new Point3d(point3d.x-xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y-yWidth,this.zMin)},{point:new Point3d(point3d.x+xWidth,point3d.y+yWidth,this.zMin)},{point:new Point3d(point3d.x-xWidth,point3d.y+yWidth,this.zMin)}];top.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point)}),bottom.forEach(function(obj){obj.screen=me._convert3Dto2D(obj.point)});var surfaces=[{corners:top,center:Point3d.avg(bottom[0].point,bottom[2].point)},{corners:[top[0],top[1],bottom[1],bottom[0]],center:Point3d.avg(bottom[1].point,bottom[0].point)},{corners:[top[1],top[2],bottom[2],bottom[1]],center:Point3d.avg(bottom[2].point,bottom[1].point)},{corners:[top[2],top[3],bottom[3],bottom[2]],center:Point3d.avg(bottom[3].point,bottom[2].point)},{corners:[top[3],top[0],bottom[0],bottom[3]],center:Point3d.avg(bottom[0].point,bottom[3].point)}];for(point.surfaces=surfaces,j=0;j<surfaces.length;j++){surface=surfaces[j];var transCenter=this._convertPointToTranslation(surface.center);surface.dist=this.showPerspective?transCenter.length():-transCenter.z}for(surfaces.sort(function(a,b){var diff=b.dist-a.dist;return diff?diff:a.corners===top?1:b.corners===top?-1:0}),ctx.lineWidth=this._getStrokeWidth(point),ctx.strokeStyle=borderColor,ctx.fillStyle=color,j=2;j<surfaces.length;j++)surface=surfaces[j],corners=surface.corners,ctx.beginPath(),ctx.moveTo(corners[3].screen.x,corners[3].screen.y),ctx.lineTo(corners[0].screen.x,corners[0].screen.y),ctx.lineTo(corners[1].screen.x,corners[1].screen.y),ctx.lineTo(corners[2].screen.x,corners[2].screen.y),ctx.lineTo(corners[3].screen.x,corners[3].screen.y),ctx.fill(),ctx.stroke()}}},Graph3d.prototype._redrawDataLine=function(){var point,i,canvas=this.frame.canvas,ctx=canvas.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++){var trans=this._convertPointToTranslation(this.dataPoints[i].point),screen=this._convertTranslationToScreen(trans);this.dataPoints[i].trans=trans,this.dataPoints[i].screen=screen}if(this.dataPoints.length>0){for(point=this.dataPoints[0],ctx.lineWidth=this._getStrokeWidth(point),ctx.lineJoin="round",ctx.lineCap="round",ctx.strokeStyle=this.dataColor.stroke,ctx.beginPath(),ctx.moveTo(point.screen.x,point.screen.y),i=1;i<this.dataPoints.length;i++)point=this.dataPoints[i],ctx.lineTo(point.screen.x,point.screen.y);ctx.stroke()}}},Graph3d.prototype._onMouseDown=function(event){if(event=event||window.event,this.leftButtonDown&&this._onMouseUp(event),this.leftButtonDown=event.which?1===event.which:1===event.button,this.leftButtonDown||this.touchDown){this.startMouseX=getMouseX(event),this.startMouseY=getMouseY(event),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var me=this;this.onmousemove=function(event){me._onMouseMove(event)},this.onmouseup=function(event){me._onMouseUp(event)},util.addEventListener(document,"mousemove",me.onmousemove),util.addEventListener(document,"mouseup",me.onmouseup),util.preventDefault(event)}},Graph3d.prototype._onMouseMove=function(event){event=event||window.event;var diffX=parseFloat(getMouseX(event))-this.startMouseX,diffY=parseFloat(getMouseY(event))-this.startMouseY,horizontalNew=this.startArmRotation.horizontal+diffX/200,verticalNew=this.startArmRotation.vertical+diffY/200,snapAngle=4,snapValue=Math.sin(snapAngle/360*2*Math.PI);Math.abs(Math.sin(horizontalNew))<snapValue&&(horizontalNew=Math.round(horizontalNew/Math.PI)*Math.PI-.001),Math.abs(Math.cos(horizontalNew))<snapValue&&(horizontalNew=(Math.round(horizontalNew/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(verticalNew))<snapValue&&(verticalNew=Math.round(verticalNew/Math.PI)*Math.PI),Math.abs(Math.cos(verticalNew))<snapValue&&(verticalNew=(Math.round(verticalNew/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(horizontalNew,verticalNew),this.redraw();var parameters=this.getCameraPosition();this.emit("cameraPositionChange",parameters),util.preventDefault(event)},Graph3d.prototype._onMouseUp=function(event){this.frame.style.cursor="auto",this.leftButtonDown=!1,util.removeEventListener(document,"mousemove",this.onmousemove),util.removeEventListener(document,"mouseup",this.onmouseup),util.preventDefault(event)},Graph3d.prototype._onTooltip=function(event){var delay=300,boundingRect=this.frame.getBoundingClientRect(),mouseX=getMouseX(event)-boundingRect.left,mouseY=getMouseY(event)-boundingRect.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var dataPoint=this._dataPointFromXY(mouseX,mouseY);dataPoint!==this.tooltip.dataPoint&&(dataPoint?this._showTooltip(dataPoint):this._hideTooltip());
}else{var me=this;this.tooltipTimeout=setTimeout(function(){me.tooltipTimeout=null;var dataPoint=me._dataPointFromXY(mouseX,mouseY);dataPoint&&me._showTooltip(dataPoint)},delay)}}},Graph3d.prototype._onTouchStart=function(event){this.touchDown=!0;var me=this;this.ontouchmove=function(event){me._onTouchMove(event)},this.ontouchend=function(event){me._onTouchEnd(event)},util.addEventListener(document,"touchmove",me.ontouchmove),util.addEventListener(document,"touchend",me.ontouchend),this._onMouseDown(event)},Graph3d.prototype._onTouchMove=function(event){this._onMouseMove(event)},Graph3d.prototype._onTouchEnd=function(event){this.touchDown=!1,util.removeEventListener(document,"touchmove",this.ontouchmove),util.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(event)},Graph3d.prototype._onWheel=function(event){event||(event=window.event);var delta=0;if(event.wheelDelta?delta=event.wheelDelta/120:event.detail&&(delta=-event.detail/3),delta){var oldLength=this.camera.getArmLength(),newLength=oldLength*(1-delta/10);this.camera.setArmLength(newLength),this.redraw(),this._hideTooltip()}var parameters=this.getCameraPosition();this.emit("cameraPositionChange",parameters),util.preventDefault(event)},Graph3d.prototype._insideTriangle=function(point,triangle){function sign(x){return x>0?1:x<0?-1:0}var a=triangle[0],b=triangle[1],c=triangle[2],as=sign((b.x-a.x)*(point.y-a.y)-(b.y-a.y)*(point.x-a.x)),bs=sign((c.x-b.x)*(point.y-b.y)-(c.y-b.y)*(point.x-b.x)),cs=sign((a.x-c.x)*(point.y-c.y)-(a.y-c.y)*(point.x-c.x));return!(0!=as&&0!=bs&&as!=bs||0!=bs&&0!=cs&&bs!=cs||0!=as&&0!=cs&&as!=cs)},Graph3d.prototype._dataPointFromXY=function(x,y){var i,distMax=100,dataPoint=null,closestDataPoint=null,closestDist=null,center=new Point2d(x,y);if(this.style===Graph3d.STYLE.BAR||this.style===Graph3d.STYLE.BARCOLOR||this.style===Graph3d.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){dataPoint=this.dataPoints[i];var surfaces=dataPoint.surfaces;if(surfaces)for(var s=surfaces.length-1;s>=0;s--){var surface=surfaces[s],corners=surface.corners,triangle1=[corners[0].screen,corners[1].screen,corners[2].screen],triangle2=[corners[2].screen,corners[3].screen,corners[0].screen];if(this._insideTriangle(center,triangle1)||this._insideTriangle(center,triangle2))return dataPoint}}else for(i=0;i<this.dataPoints.length;i++){dataPoint=this.dataPoints[i];var point=dataPoint.screen;if(point){var distX=Math.abs(x-point.x),distY=Math.abs(y-point.y),dist=Math.sqrt(distX*distX+distY*distY);(null===closestDist||dist<closestDist)&&dist<distMax&&(closestDist=dist,closestDataPoint=dataPoint)}}return closestDataPoint},Graph3d.prototype._showTooltip=function(dataPoint){var content,line,dot;this.tooltip?(content=this.tooltip.dom.content,line=this.tooltip.dom.line,dot=this.tooltip.dom.dot):(content=document.createElement("div"),content.style.position="absolute",content.style.padding="10px",content.style.border="1px solid #4d4d4d",content.style.color="#1a1a1a",content.style.background="rgba(255,255,255,0.7)",content.style.borderRadius="2px",content.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",line=document.createElement("div"),line.style.position="absolute",line.style.height="40px",line.style.width="0",line.style.borderLeft="1px solid #4d4d4d",dot=document.createElement("div"),dot.style.position="absolute",dot.style.height="0",dot.style.width="0",dot.style.border="5px solid #4d4d4d",dot.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:content,line:line,dot:dot}}),this._hideTooltip(),this.tooltip.dataPoint=dataPoint,"function"==typeof this.showTooltip?content.innerHTML=this.showTooltip(dataPoint.point):content.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+dataPoint.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+dataPoint.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+dataPoint.point.z+"</td></tr></table>",content.style.left="0",content.style.top="0",this.frame.appendChild(content),this.frame.appendChild(line),this.frame.appendChild(dot);var contentWidth=content.offsetWidth,contentHeight=content.offsetHeight,lineHeight=line.offsetHeight,dotWidth=dot.offsetWidth,dotHeight=dot.offsetHeight,left=dataPoint.screen.x-contentWidth/2;left=Math.min(Math.max(left,10),this.frame.clientWidth-10-contentWidth),line.style.left=dataPoint.screen.x+"px",line.style.top=dataPoint.screen.y-lineHeight+"px",content.style.left=left+"px",content.style.top=dataPoint.screen.y-lineHeight-contentHeight+"px",dot.style.left=dataPoint.screen.x-dotWidth/2+"px",dot.style.top=dataPoint.screen.y-dotHeight/2+"px"},Graph3d.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var prop in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(prop)){var elem=this.tooltip.dom[prop];elem&&elem.parentNode&&elem.parentNode.removeChild(elem)}}},module.exports=Graph3d},function(module,exports){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},function(module,exports){function Point3d(x,y,z){this.x=void 0!==x?x:0,this.y=void 0!==y?y:0,this.z=void 0!==z?z:0}Point3d.subtract=function(a,b){var sub=new Point3d;return sub.x=a.x-b.x,sub.y=a.y-b.y,sub.z=a.z-b.z,sub},Point3d.add=function(a,b){var sum=new Point3d;return sum.x=a.x+b.x,sum.y=a.y+b.y,sum.z=a.z+b.z,sum},Point3d.avg=function(a,b){return new Point3d((a.x+b.x)/2,(a.y+b.y)/2,(a.z+b.z)/2)},Point3d.crossProduct=function(a,b){var crossproduct=new Point3d;return crossproduct.x=a.y*b.z-a.z*b.y,crossproduct.y=a.z*b.x-a.x*b.z,crossproduct.z=a.x*b.y-a.y*b.x,crossproduct},Point3d.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},module.exports=Point3d},function(module,exports){function Point2d(x,y){this.x=void 0!==x?x:0,this.y=void 0!==y?y:0}module.exports=Point2d},function(module,exports,__webpack_require__){function Camera(){this.armLocation=new Point3d,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new Point3d,this.cameraRotation=new Point3d(.5*Math.PI,0,0),this.calculateCameraOrientation()}var Point3d=__webpack_require__(14);Camera.prototype.setArmLocation=function(x,y,z){this.armLocation.x=x,this.armLocation.y=y,this.armLocation.z=z,this.calculateCameraOrientation()},Camera.prototype.setArmRotation=function(horizontal,vertical){void 0!==horizontal&&(this.armRotation.horizontal=horizontal),void 0!==vertical&&(this.armRotation.vertical=vertical,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===horizontal&&void 0===vertical||this.calculateCameraOrientation()},Camera.prototype.getArmRotation=function(){var rot={};return rot.horizontal=this.armRotation.horizontal,rot.vertical=this.armRotation.vertical,rot},Camera.prototype.setArmLength=function(length){void 0!==length&&(this.armLength=length,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())},Camera.prototype.getArmLength=function(){return this.armLength},Camera.prototype.getCameraLocation=function(){return this.cameraLocation},Camera.prototype.getCameraRotation=function(){return this.cameraRotation},Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},module.exports=Camera},function(module,exports,__webpack_require__){function Filter(data,column,graph){this.data=data,this.column=column,this.graph=graph,this.index=void 0,this.value=void 0,this.values=graph.getDistinctValues(data.get(),this.column),this.values.sort(function(a,b){return a>b?1:a<b?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,graph.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var DataView=__webpack_require__(11);Filter.prototype.isLoaded=function(){return this.loaded},Filter.prototype.getLoadedProgress=function(){for(var len=this.values.length,i=0;this.dataPoints[i];)i++;return Math.round(i/len*100)},Filter.prototype.getLabel=function(){return this.graph.filterLabel},Filter.prototype.getColumn=function(){return this.column},Filter.prototype.getSelectedValue=function(){if(void 0!==this.index)return this.values[this.index]},Filter.prototype.getValues=function(){return this.values},Filter.prototype.getValue=function(index){if(index>=this.values.length)throw"Error: index out of range";return this.values[index]},Filter.prototype._getDataPoints=function(index){if(void 0===index&&(index=this.index),void 0===index)return[];var dataPoints;if(this.dataPoints[index])dataPoints=this.dataPoints[index];else{var f={};f.column=this.column,f.value=this.values[index];var dataView=new DataView(this.data,{filter:function(item){return item[f.column]==f.value}}).get();dataPoints=this.graph._getDataPoints(dataView),this.dataPoints[index]=dataPoints}return dataPoints},Filter.prototype.setOnLoadCallback=function(callback){this.onLoadCallback=callback},Filter.prototype.selectValue=function(index){if(index>=this.values.length)throw"Error: index out of range";this.index=index,this.value=this.values[index]},Filter.prototype.loadInBackground=function(index){void 0===index&&(index=0);var frame=this.graph.frame;if(index<this.values.length){this._getDataPoints(index);void 0===frame.progress&&(frame.progress=document.createElement("DIV"),frame.progress.style.position="absolute",frame.progress.style.color="gray",frame.appendChild(frame.progress));var progress=this.getLoadedProgress();frame.progress.innerHTML="Loading animation... "+progress+"%",frame.progress.style.bottom="60px",frame.progress.style.left="10px";var me=this;setTimeout(function(){me.loadInBackground(index+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==frame.progress&&(frame.removeChild(frame.progress),frame.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},module.exports=Filter},function(module,exports,__webpack_require__){function Slider(container,options){if(void 0===container)throw"Error: No container element defined";if(this.container=container,this.visible=!options||void 0==options.visible||options.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var me=this;this.frame.slide.onmousedown=function(event){me._onMouseDown(event)},this.frame.prev.onclick=function(event){me.prev(event)},this.frame.play.onclick=function(event){me.togglePlay(event)},this.frame.next.onclick=function(event){me.next(event)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var util=__webpack_require__(1);Slider.prototype.prev=function(){var index=this.getIndex();index>0&&(index--,this.setIndex(index))},Slider.prototype.next=function(){var index=this.getIndex();index<this.values.length-1&&(index++,this.setIndex(index))},Slider.prototype.playNext=function(){var start=new Date,index=this.getIndex();index<this.values.length-1?(index++,this.setIndex(index)):this.playLoop&&(index=0,this.setIndex(index));var end=new Date,diff=end-start,interval=Math.max(this.playInterval-diff,0),me=this;this.playTimeout=setTimeout(function(){me.playNext()},interval)},Slider.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},Slider.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},Slider.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},Slider.prototype.setOnChangeCallback=function(callback){this.onChangeCallback=callback},Slider.prototype.setPlayInterval=function(interval){this.playInterval=interval},Slider.prototype.getPlayInterval=function(interval){return this.playInterval},Slider.prototype.setPlayLoop=function(doLoop){this.playLoop=doLoop},Slider.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},Slider.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var left=this.indexToLeft(this.index);this.frame.slide.style.left=left+"px"}},Slider.prototype.setValues=function(values){this.values=values,this.values.length>0?this.setIndex(0):this.index=void 0},Slider.prototype.setIndex=function(index){if(!(index<this.values.length))throw"Error: index out of range";this.index=index,this.redraw(),this.onChange()},Slider.prototype.getIndex=function(){return this.index},Slider.prototype.get=function(){return this.values[this.index]},Slider.prototype._onMouseDown=function(event){var leftButtonDown=event.which?1===event.which:1===event.button;if(leftButtonDown){this.startClientX=event.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var me=this;this.onmousemove=function(event){me._onMouseMove(event)},this.onmouseup=function(event){me._onMouseUp(event)},util.addEventListener(document,"mousemove",this.onmousemove),util.addEventListener(document,"mouseup",this.onmouseup),util.preventDefault(event)}},Slider.prototype.leftToIndex=function(left){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,x=left-3,index=Math.round(x/width*(this.values.length-1));return index<0&&(index=0),index>this.values.length-1&&(index=this.values.length-1),index},Slider.prototype.indexToLeft=function(index){var width=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,x=index/(this.values.length-1)*width,left=x+3;return left},Slider.prototype._onMouseMove=function(event){var diff=event.clientX-this.startClientX,x=this.startSlideX+diff,index=this.leftToIndex(x);this.setIndex(index),util.preventDefault()},Slider.prototype._onMouseUp=function(event){this.frame.style.cursor="auto",util.removeEventListener(document,"mousemove",this.onmousemove),util.removeEventListener(document,"mouseup",this.onmouseup),util.preventDefault()},module.exports=Slider},function(module,exports){function StepNumber(start,end,step,prettyStep){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(start,end,step,prettyStep)}StepNumber.prototype.setRange=function(start,end,step,prettyStep){this._start=start?start:0,this._end=end?end:0,this.setStep(step,prettyStep)},StepNumber.prototype.setStep=function(step,prettyStep){void 0===step||step<=0||(void 0!==prettyStep&&(this.prettyStep=prettyStep),this.prettyStep===!0?this._step=StepNumber.calculatePrettyStep(step):this._step=step)},StepNumber.calculatePrettyStep=function(step){var log10=function(x){return Math.log(x)/Math.LN10},step1=Math.pow(10,Math.round(log10(step))),step2=2*Math.pow(10,Math.round(log10(step/2))),step5=5*Math.pow(10,Math.round(log10(step/5))),prettyStep=step1;return Math.abs(step2-step)<=Math.abs(prettyStep-step)&&(prettyStep=step2),Math.abs(step5-step)<=Math.abs(prettyStep-step)&&(prettyStep=step5),prettyStep<=0&&(prettyStep=1),prettyStep},StepNumber.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},StepNumber.prototype.getStep=function(){return this._step},StepNumber.prototype.start=function(){this._current=this._start-this._start%this._step},StepNumber.prototype.next=function(){this._current+=this._step},StepNumber.prototype.end=function(){return this._current>this._end},module.exports=StepNumber},function(module,exports,__webpack_require__){if("undefined"!=typeof window){var propagating=__webpack_require__(21),Hammer=window.Hammer||__webpack_require__(22);module.exports=propagating(Hammer,{preventDefault:"mouse"})}else module.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function(){var _firstTarget=null;return function propagating(hammer,options){function split(events){return events.match(/[^ ]+/g)}function propagatedHandler(event){if("hammer.input"!==event.type){if(event.srcEvent._handled||(event.srcEvent._handled={}),event.srcEvent._handled[event.type])return;event.srcEvent._handled[event.type]=!0}var stopped=!1;event.stopPropagation=function(){stopped=!0};var srcStop=event.srcEvent.stopPropagation.bind(event.srcEvent);"function"==typeof srcStop&&(event.srcEvent.stopPropagation=function(){srcStop(),event.stopPropagation()}),event.firstTarget=_firstTarget;for(var elem=_firstTarget;elem&&!stopped;){var elemHammer=elem.hammer;if(elemHammer)for(var _handlers,k=0;k<elemHammer.length;k++)if(_handlers=elemHammer[k]._handlers[event.type])for(var i=0;i<_handlers.length&&!stopped;i++)_handlers[i](event);elem=elem.parentNode}}var _options=options||{preventDefault:!1};if(hammer.Manager){var Hammer=hammer,PropagatingHammer=function(element,options){var o=Object.create(_options);return options&&Hammer.assign(o,options),propagating(new Hammer(element,o),o)};return Hammer.assign(PropagatingHammer,Hammer),PropagatingHammer.Manager=function(element,options){var o=Object.create(_options);return options&&Hammer.assign(o,options),propagating(new Hammer.Manager(element,o),o)},PropagatingHammer}var wrapper=Object.create(hammer),element=hammer.element;return element.hammer||(element.hammer=[]),element.hammer.push(wrapper),hammer.on("hammer.input",function(event){_options.preventDefault!==!0&&_options.preventDefault!==event.pointerType||event.preventDefault(),event.isFirst&&(_firstTarget=event.target)}),wrapper._handlers={},wrapper.on=function(events,handler){return split(events).forEach(function(event){var _handlers=wrapper._handlers[event];_handlers||(wrapper._handlers[event]=_handlers=[],hammer.on(event,propagatedHandler)),_handlers.push(handler)}),wrapper},wrapper.off=function(events,handler){return split(events).forEach(function(event){var _handlers=wrapper._handlers[event];_handlers&&(_handlers=handler?_handlers.filter(function(h){return h!==handler}):[],_handlers.length>0?wrapper._handlers[event]=_handlers:(hammer.off(event,propagatedHandler),delete wrapper._handlers[event]))}),wrapper},wrapper.emit=function(eventType,event){_firstTarget=event.target,hammer.emit(eventType,event)},wrapper.destroy=function(){var hammers=hammer.element.hammer,idx=hammers.indexOf(wrapper);idx!==-1&&hammers.splice(idx,1),hammers.length||delete hammer.element.hammer,wrapper._handlers={},hammer.destroy()},wrapper}})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;/*! Hammer.JS - v2.0.6 - 2015-12-23
	   * http://hammerjs.github.io/
	   *
	   * Copyright (c) 2015 Jorik Tangelder;
	   * Licensed under the  license */
!function(window,document,exportName,undefined){function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return!!Array.isArray(arg)&&(each(arg,context[fn],context),!0)}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace"),stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",log=window.console&&(window.console.warn||window.console.log);return log&&log.call(window.console,deprecationMessage,stack),method.apply(this,arguments)}}function inherit(child,base,properties){var childP,baseP=base.prototype;childP=child.prototype=Object.create(baseP),childP.constructor=child,childP._super=baseP,properties&&assign(childP,properties)}function bindFn(fn,context){return function(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args?args[0]||undefined:undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,!1)})}function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,!1)})}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort(function(a,b){return a[key]>b[key]}):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if(prefix=VENDOR_PREFIXES[i],prop=prefix?prefix+camelProp:property,prop in obj)return prop;i++}return undefined}function uniqueId(){return _uniqueId++}function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function createInputInstance(manager){var Type,inputClass=manager.options.inputClass;return new(Type=inputClass?inputClass:SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput)(manager,inputHandler)}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen===0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen===0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,computeInputData(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input)),pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),computeDeltaXY(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x,input.overallVelocityY=overallVelocity.y,input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y,input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0,input.maxPointers=session.prevInput?input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers:input.pointers.length,computeIntervalInputData(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target),input.target=target}function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};input.eventType!==INPUT_START&&prevInput.eventType!==INPUT_END||(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y}),input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}function computeIntervalInputData(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX,deltaY=input.deltaY-last.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;i<pointersLength;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x<0?DIRECTION_LEFT:DIRECTION_RIGHT:y<0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.allow=!0,this.pressed=!1,Input.apply(this,arguments)}function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS,this.evWin=SINGLE_TOUCH_WINDOW_EVENTS,this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);return type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0)),[all,changed]}function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target)}),type===INPUT_START)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;for(i=0;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;return changedTargetTouches.length?[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]:void 0}function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler)}function TouchAction(manager,value){this.manager=manager,this.set(value)}function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE))return TOUCH_ACTION_NONE;var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);return hasPanX&&hasPanY?TOUCH_ACTION_NONE:hasPanX||hasPanY?hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y:inStr(actions,TOUCH_ACTION_MANIPULATION)?TOUCH_ACTION_MANIPULATION:TOUCH_ACTION_AUTO}function Recognizer(options){this.options=assign({},this.defaults,options||{}),this.id=uniqueId(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return state&STATE_CANCELLED?"cancel":state&STATE_ENDED?"end":state&STATE_CHANGED?"move":state&STATE_BEGAN?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return options=options||{},options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}function Manager(element,options){this.options=assign({},Hammer.defaults,options||{}),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.element=element,this.input=createInputInstance(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])},this)}function toggleCssProps(manager,add){var element=manager.element;element.style&&each(manager.options.cssProps,function(value,name){element.style[prefixed(element.style,name)]=add?value:""})}function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}var assign,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now;assign="function"!=typeof Object.assign?function(target){if(target===undefined||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&null!==source)for(var nextKey in source)source.hasOwnProperty(nextKey)&&(output[nextKey]=source[nextKey])}return output}:Object.assign;var extend=deprecate(function(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&dest[keys[i]]===undefined)&&(dest[keys[i]]=src[keys[i]]),i++;return dest},"extend","Use `assign`."),merge=deprecate(function(dest,src){return extend(dest,src,!0)},"merge","Use `assign`."),_uniqueId=1,MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent),INPUT_TYPE_TOUCH="touch",INPUT_TYPE_PEN="pen",INPUT_TYPE_MOUSE="mouse",INPUT_TYPE_KINECT="kinect",COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_MOVE=2,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";inherit(MouseInput,Input,{handler:function(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&0===ev.button&&(this.pressed=!0),eventType&INPUT_MOVE&&1!==ev.which&&(eventType=INPUT_END),this.pressed&&this.allow&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";window.MSPointerEvent&&!window.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch=pointerType==INPUT_TYPE_TOUCH,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(0===ev.button||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0),storeIndex<0||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},SINGLE_TOUCH_TARGET_EVENTS="touchstart",SINGLE_TOUCH_WINDOW_EVENTS="touchstart touchmove touchend touchcancel";inherit(SingleTouchInput,Input,{handler:function(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START&&(this.started=!0),this.started){var touches=normalizeSingleTouches.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";inherit(TouchInput,Input,{handler:function(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=getTouches.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev})}}),inherit(TouchMouseInput,Input,{handler:function(manager,inputEvent,inputData){var isTouch=inputData.pointerType==INPUT_TYPE_TOUCH,isMouse=inputData.pointerType==INPUT_TYPE_MOUSE;if(isTouch)this.mouse.allow=!1;else if(isMouse&&!this.mouse.allow)return;inputEvent&(INPUT_END|INPUT_CANCEL)&&(this.mouse.allow=!0),this.callback(manager,inputEvent,inputData)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_COMPUTE="compute",TOUCH_ACTION_AUTO="auto",TOUCH_ACTION_MANIPULATION="manipulation",TOUCH_ACTION_NONE="none",TOUCH_ACTION_PAN_X="pan-x",TOUCH_ACTION_PAN_Y="pan-y";TouchAction.prototype={set:function(value){value==TOUCH_ACTION_COMPUTE&&(value=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))}),cleanTouchActions(actions.join(" "))},preventDefaults:function(input){if(!NATIVE_TOUCH_ACTION){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)return void srcEvent.preventDefault();var actions=this.actions,hasNone=inStr(actions,TOUCH_ACTION_NONE),hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y),hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);if(hasNone){var isTapPointer=1===input.pointers.length,isTapMovement=input.distance<2,isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime)return}if(!hasPanX||!hasPanY)return hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1,STATE_BEGAN=2,STATE_CHANGED=4,STATE_ENDED=8,STATE_RECOGNIZED=STATE_ENDED,STATE_CANCELLED=16,STATE_FAILED=32;Recognizer.prototype={defaults:{},set:function(options){return assign(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),simultaneous[otherRecognizer.id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)?this:(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id],this)},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),inArray(requireFail,otherRecognizer)===-1&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){function emit(event){self.manager.emit(event,input)}var self=this,state=this.state;state<STATE_ENDED&&emit(self.options.event+stateStr(state)),emit(self.options.event),input.additionalEvent&&emit(input.additionalEvent),state>=STATE_ENDED&&emit(self.options.event+stateStr(state))},tryEmit:function(input){return this.canEmit()?this.emit(input):void(this.state=STATE_FAILED)},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=assign({},inputData);return boolOrFn(this.options.enable,[this,inputDataClone])?(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),void(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)&&this.tryEmit(inputDataClone))):(this.reset(),void(this.state=STATE_FAILED))},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=state&(STATE_BEGAN|STATE_CHANGED),isValid=this.attrTest(input);return isRecognized&&(eventType&INPUT_CANCEL||!isValid)?state|STATE_CANCELLED:isRecognized||isValid?eventType&INPUT_END?state|STATE_ENDED:state&STATE_BEGAN?state|STATE_CHANGED:STATE_BEGAN:STATE_FAILED}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];return direction&DIRECTION_HORIZONTAL&&actions.push(TOUCH_ACTION_PAN_Y),direction&DIRECTION_VERTICAL&&actions.push(TOUCH_ACTION_PAN_X),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=0===x?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&(input.additionalEvent=this.options.event+direction),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN)},emit:function(input){if(1!==input.scale){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.time,this);else if(input.eventType&INPUT_END)return STATE_RECOGNIZED;return STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(input){this.state===STATE_RECOGNIZED&&(input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.overallVelocity:direction&DIRECTION_HORIZONTAL?velocity=input.overallVelocityX:direction&DIRECTION_VERTICAL&&(velocity=input.overallVelocityY),this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.offsetDirection);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),input.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=!this.pTime||input.timeStamp-this.pTime<options.interval,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input;var tapCount=this.count%options.taps;if(0===tapCount)return this.hasRequireFailures()?(this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED,this.tryEmit()},options.interval,this),STATE_BEGAN):STATE_RECOGNIZED}return STATE_FAILED},failTimeout:function(){return this._timer=setTimeoutContext(function(){this.state=STATE_FAILED},this.options.interval,this),STATE_FAILED},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==STATE_RECOGNIZED&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.6",Hammer.defaults={domEvents:!1,touchAction:TOUCH_ACTION_COMPUTE,enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var STOP=1,FORCED_STOP=2;Manager.prototype={set:function(options){return assign(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP},recognize:function(inputData){var session=this.session;if(!session.stopped){this.touchAction.preventDefaults(inputData);var recognizer,recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],session.stopped===FORCED_STOP||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;if(recognizer=this.get(recognizer)){var recognizers=this.recognizers,index=inArray(recognizers,recognizer);index!==-1&&(recognizers.splice(index,1),this.touchAction.update())}return this},on:function(events,handler){var handlers=this.handlers;return each(splitStr(events),function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)}),this},off:function(events,handler){var handlers=this.handlers;return each(splitStr(events),function(event){handler?handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]}),this},emit:function(event,data){this.options.domEvents&&triggerDomEvent(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,
Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};freeGlobal.Hammer=Hammer,__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(window,document,"Hammer")},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,function(){function keycharm(options){var i,preventDefault=options&&options.preventDefault||!1,container=options&&options.container||window,_exportFunctions={},_bound={keydown:{},keyup:{}},_keys={};for(i=97;i<=122;i++)_keys[String.fromCharCode(i)]={code:65+(i-97),shift:!1};for(i=65;i<=90;i++)_keys[String.fromCharCode(i)]={code:i,shift:!0};for(i=0;i<=9;i++)_keys[""+i]={code:48+i,shift:!1};for(i=1;i<=12;i++)_keys["F"+i]={code:111+i,shift:!1};for(i=0;i<=9;i++)_keys["num"+i]={code:96+i,shift:!1};_keys["num*"]={code:106,shift:!1},_keys["num+"]={code:107,shift:!1},_keys["num-"]={code:109,shift:!1},_keys["num/"]={code:111,shift:!1},_keys["num."]={code:110,shift:!1},_keys.left={code:37,shift:!1},_keys.up={code:38,shift:!1},_keys.right={code:39,shift:!1},_keys.down={code:40,shift:!1},_keys.space={code:32,shift:!1},_keys.enter={code:13,shift:!1},_keys.shift={code:16,shift:void 0},_keys.esc={code:27,shift:!1},_keys.backspace={code:8,shift:!1},_keys.tab={code:9,shift:!1},_keys.ctrl={code:17,shift:!1},_keys.alt={code:18,shift:!1},_keys.delete={code:46,shift:!1},_keys.pageup={code:33,shift:!1},_keys.pagedown={code:34,shift:!1},_keys["="]={code:187,shift:!1},_keys["-"]={code:189,shift:!1},_keys["]"]={code:221,shift:!1},_keys["["]={code:219,shift:!1};var down=function(event){handleEvent(event,"keydown")},up=function(event){handleEvent(event,"keyup")},handleEvent=function(event,type){if(void 0!==_bound[type][event.keyCode]){for(var bound=_bound[type][event.keyCode],i=0;i<bound.length;i++)void 0===bound[i].shift?bound[i].fn(event):1==bound[i].shift&&1==event.shiftKey?bound[i].fn(event):0==bound[i].shift&&0==event.shiftKey&&bound[i].fn(event);1==preventDefault&&event.preventDefault()}};return _exportFunctions.bind=function(key,callback,type){if(void 0===type&&(type="keydown"),void 0===_keys[key])throw new Error("unsupported key: "+key);void 0===_bound[type][_keys[key].code]&&(_bound[type][_keys[key].code]=[]),_bound[type][_keys[key].code].push({fn:callback,shift:_keys[key].shift})},_exportFunctions.bindAll=function(callback,type){void 0===type&&(type="keydown");for(var key in _keys)_keys.hasOwnProperty(key)&&_exportFunctions.bind(key,callback,type)},_exportFunctions.getKey=function(event){for(var key in _keys)if(_keys.hasOwnProperty(key)){if(1==event.shiftKey&&1==_keys[key].shift&&event.keyCode==_keys[key].code)return key;if(0==event.shiftKey&&0==_keys[key].shift&&event.keyCode==_keys[key].code)return key;if(event.keyCode==_keys[key].code&&"shift"==key)return key}return"unknown key, currently not supported"},_exportFunctions.unbind=function(key,callback,type){if(void 0===type&&(type="keydown"),void 0===_keys[key])throw new Error("unsupported key: "+key);if(void 0!==callback){var newBindings=[],bound=_bound[type][_keys[key].code];if(void 0!==bound)for(var i=0;i<bound.length;i++)bound[i].fn==callback&&bound[i].shift==_keys[key].shift||newBindings.push(_bound[type][_keys[key].code][i]);_bound[type][_keys[key].code]=newBindings}else _bound[type][_keys[key].code]=[]},_exportFunctions.reset=function(){_bound={keydown:{},keyup:{}}},_exportFunctions.destroy=function(){_bound={keydown:{},keyup:{}},container.removeEventListener("keydown",down,!0),container.removeEventListener("keyup",up,!0)},container.addEventListener("keydown",down,!0),container.addEventListener("keyup",up,!0),_exportFunctions}return keycharm})},function(module,exports,__webpack_require__){exports.util=__webpack_require__(1),exports.DOMutil=__webpack_require__(8),exports.DataSet=__webpack_require__(9),exports.DataView=__webpack_require__(11),exports.Queue=__webpack_require__(10),exports.Timeline=__webpack_require__(25),exports.Graph2d=__webpack_require__(50),exports.timeline={Core:__webpack_require__(33),DateUtil:__webpack_require__(32),Range:__webpack_require__(30),stack:__webpack_require__(37),TimeStep:__webpack_require__(35),components:{items:{Item:__webpack_require__(39),BackgroundItem:__webpack_require__(43),BoxItem:__webpack_require__(41),PointItem:__webpack_require__(42),RangeItem:__webpack_require__(38)},BackgroundGroup:__webpack_require__(40),Component:__webpack_require__(31),CurrentTime:__webpack_require__(48),CustomTime:__webpack_require__(46),DataAxis:__webpack_require__(52),DataScale:__webpack_require__(53),GraphGroup:__webpack_require__(54),Group:__webpack_require__(36),ItemSet:__webpack_require__(34),Legend:__webpack_require__(58),LineGraph:__webpack_require__(51),TimeAxis:__webpack_require__(44)}},exports.moment=__webpack_require__(2),exports.Hammer=__webpack_require__(20),exports.keycharm=__webpack_require__(23)},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Timeline(container,items,groups,options){if(!(this instanceof Timeline))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(groups)||groups instanceof DataSet||groups instanceof DataView)&&groups instanceof Object){var forthArgument=options;options=groups,groups=forthArgument}var me=this;this.defaultOptions={start:null,end:null,autoResize:!0,throttleRedraw:0,orientation:{axis:"bottom",item:"bottom"},rtl:!1,moment:moment,width:null,height:null,maxHeight:null,minHeight:null},this.options=util.deepExtend({},this.defaultOptions),this._create(container),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return me.timeAxis.step.scale},getStep:function(){return me.timeAxis.step.step},toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}},this.range=new Range(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new TimeAxis(this.body),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new CurrentTime(this.body),this.components.push(this.currentTime),this.itemSet=new ItemSet(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.on("tap",function(event){me.emit("click",me.getEventProperties(event))}),this.on("doubletap",function(event){me.emit("doubleClick",me.getEventProperties(event))}),this.dom.root.oncontextmenu=function(event){me.emit("contextmenu",me.getEventProperties(event))},this.fitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!me.fitDone)if(me.fitDone=!0,void 0!=me.options.start||void 0!=me.options.end){if(void 0==me.options.start||void 0==me.options.end)var range=me.getItemRange();var start=void 0!=me.options.start?me.options.start:range.min,end=void 0!=me.options.end?me.options.end:range.max;me.setWindow(start,end,{animation:!1})}else me.fit({animation:!1})}),options&&this.setOptions(options),groups&&this.setGroups(groups),items&&this.setItems(items),this._redraw()}var _Configurator=__webpack_require__(26),_Configurator2=_interopRequireDefault(_Configurator),_Validator=__webpack_require__(29),_Validator2=_interopRequireDefault(_Validator),moment=(__webpack_require__(13),__webpack_require__(20),__webpack_require__(2)),util=__webpack_require__(1),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),Range=__webpack_require__(30),Core=__webpack_require__(33),TimeAxis=__webpack_require__(44),CurrentTime=__webpack_require__(48),CustomTime=__webpack_require__(46),ItemSet=__webpack_require__(34),printStyle=__webpack_require__(29).printStyle,allOptions=__webpack_require__(49).allOptions,configureOptions=__webpack_require__(49).configureOptions;Timeline.prototype=new Core,Timeline.prototype._createConfigurator=function(){return new _Configurator2.default(this,this.dom.container,configureOptions)},Timeline.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},Timeline.prototype.setOptions=function(options){var errorFound=_Validator2.default.validate(options,allOptions);if(errorFound===!0&&console.log("%cErrors have been found in the supplied options object.",printStyle),Core.prototype.setOptions.call(this,options),"type"in options&&options.type!==this.options.type){this.options.type=options.type;var itemsData=this.itemsData;if(itemsData){var selection=this.getSelection();this.setItems(null),this.setItems(itemsData),this.setSelection(selection)}}},Timeline.prototype.setItems=function(items){var newDataSet;newDataSet=items?items instanceof DataSet||items instanceof DataView?items:new DataSet(items,{type:{start:"Date",end:"Date"}}):null,this.itemsData=newDataSet,this.itemSet&&this.itemSet.setItems(newDataSet)},Timeline.prototype.setGroups=function(groups){var newDataSet;newDataSet=groups?groups instanceof DataSet||groups instanceof DataView?groups:new DataSet(groups):null,this.groupsData=newDataSet,this.itemSet.setGroups(newDataSet)},Timeline.prototype.setData=function(data){data&&data.groups&&this.setGroups(data.groups),data&&data.items&&this.setItems(data.items)},Timeline.prototype.setSelection=function(ids,options){this.itemSet&&this.itemSet.setSelection(ids),options&&options.focus&&this.focus(ids,options)},Timeline.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},Timeline.prototype.focus=function(id,options){if(this.itemsData&&void 0!=id){var ids=Array.isArray(id)?id:[id],itemsData=this.itemsData.getDataSet().get(ids,{type:{start:"Date",end:"Date"}}),start=null,end=null;if(itemsData.forEach(function(itemData){var s=itemData.start.valueOf(),e="end"in itemData?itemData.end.valueOf():itemData.start.valueOf();(null===start||s<start)&&(start=s),(null===end||e>end)&&(end=e)}),null!==start&&null!==end){var middle=(start+end)/2,interval=Math.max(this.range.end-this.range.start,1.1*(end-start)),animation=!options||void 0===options.animation||options.animation;this.range.setRange(middle-interval/2,middle+interval/2,animation)}}},Timeline.prototype.fit=function(options){var range,animation=!options||void 0===options.animation||options.animation,dataset=this.itemsData&&this.itemsData.getDataSet();1===dataset.length&&void 0===dataset.get()[0].end?(range=this.getDataRange(),this.moveTo(range.min.valueOf(),{animation:animation})):(range=this.getItemRange(),this.range.setRange(range.min,range.max,animation))},Timeline.prototype.getItemRange=function(){var _this=this,range=this.getDataRange(),min=null!==range.min?range.min.valueOf():null,max=null!==range.max?range.max.valueOf():null,minItem=null,maxItem=null;if(null!=min&&null!=max){var interval,factor,lhs,rhs,delta;!function(){var getStart=function(item){return util.convert(item.data.start,"Date").valueOf()},getEnd=function(item){var end=void 0!=item.data.end?item.data.end:item.data.start;return util.convert(end,"Date").valueOf()};interval=max-min,interval<=0&&(interval=10),factor=interval/_this.props.center.width,util.forEach(_this.itemSet.items,function(item){item.show(),item.repositionX();var start=getStart(item),end=getEnd(item);if(this.options.rtl)var startSide=start-(item.getWidthRight()+10)*factor,endSide=end+(item.getWidthLeft()+10)*factor;else var startSide=start-(item.getWidthLeft()+10)*factor,endSide=end+(item.getWidthRight()+10)*factor;startSide<min&&(min=startSide,minItem=item),endSide>max&&(max=endSide,maxItem=item)}.bind(_this)),minItem&&maxItem&&(lhs=minItem.getWidthLeft()+10,rhs=maxItem.getWidthRight()+10,delta=_this.props.center.width-lhs-rhs,delta>0&&(_this.options.rtl?(min=getStart(minItem)-rhs*interval/delta,max=getEnd(maxItem)+lhs*interval/delta):(min=getStart(minItem)-lhs*interval/delta,max=getEnd(maxItem)+rhs*interval/delta)))}()}return{min:null!=min?new Date(min):null,max:null!=max?new Date(max):null}},Timeline.prototype.getDataRange=function(){var min=null,max=null,dataset=this.itemsData&&this.itemsData.getDataSet();return dataset&&dataset.forEach(function(item){var start=util.convert(item.start,"Date").valueOf(),end=util.convert(void 0!=item.end?item.end:item.start,"Date").valueOf();(null===min||start<min)&&(min=start),(null===max||end>max)&&(max=end)}),{min:null!=min?new Date(min):null,max:null!=max?new Date(max):null}},Timeline.prototype.getEventProperties=function(event){var clientX=event.center?event.center.x:event.clientX,clientY=event.center?event.center.y:event.clientY;if(this.options.rtl)var x=util.getAbsoluteRight(this.dom.centerContainer)-clientX;else var x=clientX-util.getAbsoluteLeft(this.dom.centerContainer);var y=clientY-util.getAbsoluteTop(this.dom.centerContainer),item=this.itemSet.itemFromTarget(event),group=this.itemSet.groupFromTarget(event),customTime=CustomTime.customTimeFromTarget(event),snap=this.itemSet.options.snap||null,scale=this.body.util.getScale(),step=this.body.util.getStep(),time=this._toTime(x),snappedTime=snap?snap(time,scale,step):time,element=util.getTarget(event),what=null;return null!=item?what="item":null!=customTime?what="custom-time":util.hasParent(element,this.timeAxis.dom.foreground)?what="axis":this.timeAxis2&&util.hasParent(element,this.timeAxis2.dom.foreground)?what="axis":util.hasParent(element,this.itemSet.dom.labelSet)?what="group-label":util.hasParent(element,this.currentTime.bar)?what="current-time":util.hasParent(element,this.dom.center)&&(what="background"),{event:event,item:item?item.id:null,group:group?group.groupId:null,what:what,pageX:event.srcEvent?event.srcEvent.pageX:event.pageX,pageY:event.srcEvent?event.srcEvent.pageY:event.pageY,x:x,y:y,time:time,snappedTime:snappedTime}},module.exports=Timeline},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ColorPicker=__webpack_require__(27),_ColorPicker2=_interopRequireDefault(_ColorPicker),util=__webpack_require__(1),Configurator=function(){function Configurator(parentModule,defaultContainer,configureOptions){var pixelRatio=arguments.length<=3||void 0===arguments[3]?1:arguments[3];_classCallCheck(this,Configurator),this.parent=parentModule,this.changedOptions=[],this.container=defaultContainer,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},util.extend(this.options,this.defaultOptions),this.configureOptions=configureOptions,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new _ColorPicker2.default(pixelRatio),this.wrapper=void 0}return _createClass(Configurator,[{key:"setOptions",value:function(options){if(void 0!==options){this.popupHistory={},this._removePopup();var enabled=!0;"string"==typeof options?this.options.filter=options:options instanceof Array?this.options.filter=options.join():"object"===("undefined"==typeof options?"undefined":_typeof(options))?(void 0!==options.container&&(this.options.container=options.container),void 0!==options.filter&&(this.options.filter=options.filter),void 0!==options.showButton&&(this.options.showButton=options.showButton),void 0!==options.enabled&&(enabled=options.enabled)):"boolean"==typeof options?(this.options.filter=!0,enabled=options):"function"==typeof options&&(this.options.filter=options,enabled=!0),this.options.filter===!1&&(enabled=!1),this.options.enabled=enabled}this._clean()}},{key:"setModuleOptions",value:function(moduleOptions){this.moduleOptions=moduleOptions,this.options.enabled===!0&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var _this=this;this._clean(),this.changedOptions=[];var filter=this.options.filter,counter=0,show=!1;for(var option in this.configureOptions)this.configureOptions.hasOwnProperty(option)&&(this.allowCreation=!1,show=!1,"function"==typeof filter?(show=filter(option,[]),show=show||this._handleObject(this.configureOptions[option],[option],!0)):filter!==!0&&filter.indexOf(option)===-1||(show=!0),show!==!1&&(this.allowCreation=!0,counter>0&&this._makeItem([]),this._makeHeader(option),this._handleObject(this.configureOptions[option],[option])),counter++);this.options.showButton===!0&&!function(){var generateButton=document.createElement("div");generateButton.className="vis-configuration vis-config-button",generateButton.innerHTML="generate options",generateButton.onclick=function(){_this._printOptions()},generateButton.onmouseover=function(){generateButton.className="vis-configuration vis-config-button hover"},generateButton.onmouseout=function(){generateButton.className="vis-configuration vis-config-button"},_this.optionsContainer=document.createElement("div"),_this.optionsContainer.className="vis-configuration vis-config-option-container",_this.domElements.push(_this.optionsContainer),_this.domElements.push(generateButton)}(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var i=0;i<this.domElements.length;i++)this.wrapper.appendChild(this.domElements[i]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var i=0;i<this.domElements.length;i++)this.wrapper.removeChild(this.domElements[i]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(path){for(var base=this.moduleOptions,i=0;i<path.length;i++){if(void 0===base[path[i]]){base=void 0;break}base=base[path[i]]}return base}},{key:"_makeItem",value:function(path){var _arguments=arguments,_this2=this;if(this.allowCreation===!0){var _len,domElements,_key,_ret2=function(){var item=document.createElement("div");for(item.className="vis-configuration vis-config-item vis-config-s"+path.length,_len=_arguments.length,domElements=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)domElements[_key-1]=_arguments[_key];return domElements.forEach(function(element){item.appendChild(element)}),_this2.domElements.push(item),{v:_this2.domElements.length}}();if("object"===("undefined"==typeof _ret2?"undefined":_typeof(_ret2)))return _ret2.v}return 0}},{key:"_makeHeader",value:function(name){var div=document.createElement("div");div.className="vis-configuration vis-config-header",div.innerHTML=name,this._makeItem([],div)}},{key:"_makeLabel",value:function(name,path){var objectLabel=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],div=document.createElement("div");return div.className="vis-configuration vis-config-label vis-config-s"+path.length,objectLabel===!0?div.innerHTML="<i><b>"+name+":</b></i>":div.innerHTML=name+":",div}},{key:"_makeDropdown",value:function(arr,value,path){var select=document.createElement("select");select.className="vis-configuration vis-config-select";var selectedValue=0;void 0!==value&&arr.indexOf(value)!==-1&&(selectedValue=arr.indexOf(value));for(var i=0;i<arr.length;i++){var option=document.createElement("option");option.value=arr[i],i===selectedValue&&(option.selected="selected"),option.innerHTML=arr[i],select.appendChild(option)}var me=this;select.onchange=function(){me._update(this.value,path)};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,select)}},{key:"_makeRange",value:function(arr,value,path){var defaultValue=arr[0],min=arr[1],max=arr[2],step=arr[3],range=document.createElement("input");range.className="vis-configuration vis-config-range";try{range.type="range",range.min=min,range.max=max}catch(err){}range.step=step;var popupString="",popupValue=0;if(void 0!==value){var factor=1.2;value<0&&value*factor<min?(range.min=Math.ceil(value*factor),popupValue=range.min,popupString="range increased"):value/factor<min&&(range.min=Math.ceil(value/factor),popupValue=range.min,popupString="range increased"),value*factor>max&&1!==max&&(range.max=Math.ceil(value*factor),popupValue=range.max,popupString="range increased"),range.value=value}else range.value=defaultValue;var input=document.createElement("input");input.className="vis-configuration vis-config-rangeinput",input.value=range.value;var me=this;range.onchange=function(){input.value=this.value,me._update(Number(this.value),path)},range.oninput=function(){input.value=this.value};var label=this._makeLabel(path[path.length-1],path),itemIndex=this._makeItem(path,label,range,input);""!==popupString&&this.popupHistory[itemIndex]!==popupValue&&(this.popupHistory[itemIndex]=popupValue,this._setupPopup(popupString,itemIndex))}},{key:"_setupPopup",value:function(string,index){var _this3=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var div=document.createElement("div");div.id="vis-configuration-popup",div.className="vis-configuration-popup",div.innerHTML=string,div.onclick=function(){_this3._removePopup()},this.popupCounter+=1,this.popupDiv={html:div,index:index}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var _this4=this;if(void 0!==this.popupDiv.html){var correspondingElement=this.domElements[this.popupDiv.index],rect=correspondingElement.getBoundingClientRect();this.popupDiv.html.style.left=rect.left+"px",this.popupDiv.html.style.top=rect.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){_this4.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){_this4._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(defaultValue,value,path){var checkbox=document.createElement("input");checkbox.type="checkbox",checkbox.className="vis-configuration vis-config-checkbox",checkbox.checked=defaultValue,void 0!==value&&(checkbox.checked=value,value!==defaultValue&&("object"===("undefined"==typeof defaultValue?"undefined":_typeof(defaultValue))?value!==defaultValue.enabled&&this.changedOptions.push({path:path,value:value}):this.changedOptions.push({path:path,value:value})));var me=this;checkbox.onchange=function(){me._update(this.checked,path)};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,checkbox)}},{key:"_makeTextInput",value:function(defaultValue,value,path){var checkbox=document.createElement("input");checkbox.type="text",checkbox.className="vis-configuration vis-config-text",checkbox.value=value,value!==defaultValue&&this.changedOptions.push({path:path,value:value});var me=this;checkbox.onchange=function(){me._update(this.value,path)};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,checkbox)}},{key:"_makeColorField",value:function(arr,value,path){var _this5=this,defaultColor=arr[1],div=document.createElement("div");value=void 0===value?defaultColor:value,"none"!==value?(div.className="vis-configuration vis-config-colorBlock",div.style.backgroundColor=value):div.className="vis-configuration vis-config-colorBlock none",value=void 0===value?defaultColor:value,div.onclick=function(){_this5._showColorPicker(value,div,path)};var label=this._makeLabel(path[path.length-1],path);this._makeItem(path,label,div)}},{key:"_showColorPicker",value:function(value,div,path){var _this6=this;div.onclick=function(){},this.colorPicker.insertTo(div),this.colorPicker.show(),this.colorPicker.setColor(value),this.colorPicker.setUpdateCallback(function(color){var colorString="rgba("+color.r+","+color.g+","+color.b+","+color.a+")";div.style.backgroundColor=colorString,_this6._update(colorString,path)}),this.colorPicker.setCloseCallback(function(){div.onclick=function(){_this6._showColorPicker(value,div,path)}})}},{key:"_handleObject",value:function(obj){var path=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],checkOnly=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],show=!1,filter=this.options.filter,visibleInSet=!1;for(var subObj in obj)if(obj.hasOwnProperty(subObj)){show=!0;var item=obj[subObj],newPath=util.copyAndExtendArray(path,subObj);if("function"==typeof filter&&(show=filter(subObj,path),show===!1&&!(item instanceof Array)&&"string"!=typeof item&&"boolean"!=typeof item&&item instanceof Object&&(this.allowCreation=!1,show=this._handleObject(item,newPath,!0),this.allowCreation=checkOnly===!1)),show!==!1){visibleInSet=!0;var value=this._getValue(newPath);if(item instanceof Array)this._handleArray(item,value,newPath);else if("string"==typeof item)this._makeTextInput(item,value,newPath);else if("boolean"==typeof item)this._makeCheckbox(item,value,newPath);else if(item instanceof Object){var draw=!0;if(path.indexOf("physics")!==-1&&this.moduleOptions.physics.solver!==subObj&&(draw=!1),draw===!0)if(void 0!==item.enabled){var enabledPath=util.copyAndExtendArray(newPath,"enabled"),enabledValue=this._getValue(enabledPath);if(enabledValue===!0){var label=this._makeLabel(subObj,newPath,!0);this._makeItem(newPath,label),visibleInSet=this._handleObject(item,newPath)||visibleInSet}else this._makeCheckbox(item,enabledValue,newPath)}else{var _label=this._makeLabel(subObj,newPath,!0);this._makeItem(newPath,_label),visibleInSet=this._handleObject(item,newPath)||visibleInSet}}else console.error("dont know how to handle",item,subObj,newPath)}}return visibleInSet}},{key:"_handleArray",value:function(arr,value,path){"string"==typeof arr[0]&&"color"===arr[0]?(this._makeColorField(arr,value,path),arr[1]!==value&&this.changedOptions.push({path:path,value:value})):"string"==typeof arr[0]?(this._makeDropdown(arr,value,path),arr[0]!==value&&this.changedOptions.push({path:path,value:value})):"number"==typeof arr[0]&&(this._makeRange(arr,value,path),arr[0]!==value&&this.changedOptions.push({path:path,value:Number(value)}))}},{key:"_update",value:function(value,path){var options=this._constructOptions(value,path);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",options),this.initialized=!0,this.parent.setOptions(options)}},{key:"_constructOptions",value:function(value,path){var optionsObj=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],pointer=optionsObj;value="true"===value||value,value="false"!==value&&value;for(var i=0;i<path.length;i++)"global"!==path[i]&&(void 0===pointer[path[i]]&&(pointer[path[i]]={}),i!==path.length-1?pointer=pointer[path[i]]:pointer[path[i]]=value);return optionsObj}},{key:"_printOptions",value:function(){var options=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(options,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var options={},i=0;i<this.changedOptions.length;i++)this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,options);return options}}]),Configurator}();exports.default=Configurator},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Hammer=__webpack_require__(20),hammerUtil=__webpack_require__(28),util=__webpack_require__(1),ColorPicker=function(){function ColorPicker(){var pixelRatio=arguments.length<=0||void 0===arguments[0]?1:arguments[0];_classCallCheck(this,ColorPicker),this.pixelRatio=pixelRatio,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return _createClass(ColorPicker,[{key:"insertTo",value:function(container){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=container,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(callback){if("function"!=typeof callback)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=callback}},{key:"setCloseCallback",value:function(callback){if("function"!=typeof callback)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=callback}},{key:"_isColorString",value:function(color){var htmlColors={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",
powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};if("string"==typeof color)return htmlColors[color]}},{key:"setColor",value:function(color){var setInitial=arguments.length<=1||void 0===arguments[1]||arguments[1];if("none"!==color){var rgba=void 0,htmlColor=this._isColorString(color);if(void 0!==htmlColor&&(color=htmlColor),util.isString(color)===!0){if(util.isValidRGB(color)===!0){var rgbaArray=color.substr(4).substr(0,color.length-5).split(",");rgba={r:rgbaArray[0],g:rgbaArray[1],b:rgbaArray[2],a:1}}else if(util.isValidRGBA(color)===!0){var _rgbaArray=color.substr(5).substr(0,color.length-6).split(",");rgba={r:_rgbaArray[0],g:_rgbaArray[1],b:_rgbaArray[2],a:_rgbaArray[3]}}else if(util.isValidHex(color)===!0){var rgbObj=util.hexToRGB(color);rgba={r:rgbObj.r,g:rgbObj.g,b:rgbObj.b,a:1}}}else if(color instanceof Object&&void 0!==color.r&&void 0!==color.g&&void 0!==color.b){var alpha=void 0!==color.a?color.a:"1.0";rgba={r:color.r,g:color.g,b:color.b,a:alpha}}if(void 0===rgba)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(color));this._setColor(rgba,setInitial)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var _this=this,storePrevious=arguments.length<=0||void 0===arguments[0]||arguments[0];storePrevious===!0&&(this.previousColor=util.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==_this.closeCallback&&(_this.closeCallback(),_this.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(rgba){var setInitial=arguments.length<=1||void 0===arguments[1]||arguments[1];setInitial===!0&&(this.initialColor=util.extend({},rgba)),this.color=rgba;var hsv=util.RGBToHSV(rgba.r,rgba.g,rgba.b),angleConvert=2*Math.PI,radius=this.r*hsv.s,x=this.centerCoordinates.x+radius*Math.sin(angleConvert*hsv.h),y=this.centerCoordinates.y+radius*Math.cos(angleConvert*hsv.h);this.colorPickerSelector.style.left=x-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=y-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(rgba)}},{key:"_setOpacity",value:function(value){this.color.a=value/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(value){var hsv=util.RGBToHSV(this.color.r,this.color.g,this.color.b);hsv.v=value/100;var rgba=util.HSVToRGB(hsv.h,hsv.s,hsv.v);rgba.a=this.color.a,this.color=rgba,this._updatePicker()}},{key:"_updatePicker",value:function(){var rgba=arguments.length<=0||void 0===arguments[0]?this.color:arguments[0],hsv=util.RGBToHSV(rgba.r,rgba.g,rgba.b),ctx=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1)),ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.colorPickerCanvas.clientWidth,h=this.colorPickerCanvas.clientHeight;ctx.clearRect(0,0,w,h),ctx.putImageData(this.hueCircle,0,0),ctx.fillStyle="rgba(0,0,0,"+(1-hsv.v)+")",ctx.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),ctx.fill(),this.brightnessRange.value=100*hsv.v,this.opacityRange.value=100*rgba.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var ctx=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var noCanvas=document.createElement("DIV");noCanvas.style.color="red",noCanvas.style.fontWeight="bold",noCanvas.style.padding="10px",noCanvas.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(noCanvas)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(err){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(err){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var me=this;this.opacityRange.onchange=function(){me._setOpacity(this.value)},this.opacityRange.oninput=function(){me._setOpacity(this.value)},this.brightnessRange.onchange=function(){me._setBrightness(this.value)},this.brightnessRange.oninput=function(){me._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var _this2=this;this.drag={},this.pinch={},this.hammer=new Hammer(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),hammerUtil.onTouch(this.hammer,function(event){_this2._moveSelector(event)}),this.hammer.on("tap",function(event){_this2._moveSelector(event)}),this.hammer.on("panstart",function(event){_this2._moveSelector(event)}),this.hammer.on("panmove",function(event){_this2._moveSelector(event)}),this.hammer.on("panend",function(event){_this2._moveSelector(event)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var ctx=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1)),ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.colorPickerCanvas.clientWidth,h=this.colorPickerCanvas.clientHeight;ctx.clearRect(0,0,w,h);var x=void 0,y=void 0,hue=void 0,sat=void 0;this.centerCoordinates={x:.5*w,y:.5*h},this.r=.49*w;var angleConvert=2*Math.PI/360,hfac=1/360,sfac=1/this.r,rgb=void 0;for(hue=0;hue<360;hue++)for(sat=0;sat<this.r;sat++)x=this.centerCoordinates.x+sat*Math.sin(angleConvert*hue),y=this.centerCoordinates.y+sat*Math.cos(angleConvert*hue),rgb=util.HSVToRGB(hue*hfac,sat*sfac,1),ctx.fillStyle="rgb("+rgb.r+","+rgb.g+","+rgb.b+")",ctx.fillRect(x-.5,y-.5,2,2);ctx.strokeStyle="rgba(0,0,0,1)",ctx.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),ctx.stroke(),this.hueCircle=ctx.getImageData(0,0,w,h)}this.generated=!0}},{key:"_moveSelector",value:function(event){var rect=this.colorPickerDiv.getBoundingClientRect(),left=event.center.x-rect.left,top=event.center.y-rect.top,centerY=.5*this.colorPickerDiv.clientHeight,centerX=.5*this.colorPickerDiv.clientWidth,x=left-centerX,y=top-centerY,angle=Math.atan2(x,y),radius=.98*Math.min(Math.sqrt(x*x+y*y),centerX),newTop=Math.cos(angle)*radius+centerY,newLeft=Math.sin(angle)*radius+centerX;this.colorPickerSelector.style.top=newTop-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=newLeft-.5*this.colorPickerSelector.clientWidth+"px";var h=angle/(2*Math.PI);h=h<0?h+1:h;var s=radius/this.r,hsv=util.RGBToHSV(this.color.r,this.color.g,this.color.b);hsv.h=h,hsv.s=s;var rgba=util.HSVToRGB(hsv.h,hsv.s,hsv.v);rgba.a=this.color.a,this.color=rgba,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),ColorPicker}();exports.default=ColorPicker},function(module,exports,__webpack_require__){__webpack_require__(20);exports.onTouch=function(hammer,callback){callback.inputHandler=function(event){event.isFirst&&callback(event)},hammer.on("hammer.input",callback.inputHandler)},exports.onRelease=function(hammer,callback){return callback.inputHandler=function(event){event.isFinal&&callback(event)},hammer.on("hammer.input",callback.inputHandler)},exports.offTouch=function(hammer,callback){hammer.off("hammer.input",callback.inputHandler)},exports.offRelease=exports.offTouch,exports.disablePreventDefaultVertically=function(pinchRecognizer){var TOUCH_ACTION_PAN_Y="pan-y";return pinchRecognizer.getTouchAction=function(){return[TOUCH_ACTION_PAN_Y]},pinchRecognizer}},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),util=__webpack_require__(1),errorFound=!1,allOptions=void 0,printStyle="background: #FFeeee; color: #dd0000",Validator=function(){function Validator(){_classCallCheck(this,Validator)}return _createClass(Validator,null,[{key:"validate",value:function(options,referenceOptions,subObject){errorFound=!1,allOptions=referenceOptions;var usedOptions=referenceOptions;return void 0!==subObject&&(usedOptions=referenceOptions[subObject]),Validator.parse(options,usedOptions,[]),errorFound}},{key:"parse",value:function(options,referenceOptions,path){for(var option in options)options.hasOwnProperty(option)&&Validator.check(option,options,referenceOptions,path)}},{key:"check",value:function(option,options,referenceOptions,path){void 0===referenceOptions[option]&&void 0===referenceOptions.__any__?Validator.getSuggestion(option,referenceOptions,path):void 0===referenceOptions[option]&&void 0!==referenceOptions.__any__?"object"===Validator.getType(options[option])&&void 0!==referenceOptions.__any__.__type__?Validator.checkFields(option,options,referenceOptions,"__any__",referenceOptions.__any__.__type__,path):Validator.checkFields(option,options,referenceOptions,"__any__",referenceOptions.__any__,path):void 0!==referenceOptions[option].__type__?Validator.checkFields(option,options,referenceOptions,option,referenceOptions[option].__type__,path):Validator.checkFields(option,options,referenceOptions,option,referenceOptions[option],path)}},{key:"checkFields",value:function(option,options,referenceOptions,referenceOption,refOptionObj,path){var optionType=Validator.getType(options[option]),refOptionType=refOptionObj[optionType];void 0!==refOptionType?"array"===Validator.getType(refOptionType)&&refOptionType.indexOf(options[option])===-1?(console.log('%cInvalid option detected in "'+option+'". Allowed values are:'+Validator.print(refOptionType)+' not "'+options[option]+'". '+Validator.printLocation(path,option),printStyle),errorFound=!0):"object"===optionType&&"__any__"!==referenceOption&&(path=util.copyAndExtendArray(path,option),Validator.parse(options[option],referenceOptions[referenceOption],path)):void 0===refOptionObj.any&&(console.log('%cInvalid type received for "'+option+'". Expected: '+Validator.print(Object.keys(refOptionObj))+". Received ["+optionType+'] "'+options[option]+'"'+Validator.printLocation(path,option),printStyle),errorFound=!0)}},{key:"getType",value:function(object){var type="undefined"==typeof object?"undefined":_typeof(object);return"object"===type?null===object?"null":object instanceof Boolean?"boolean":object instanceof Number?"number":object instanceof String?"string":Array.isArray(object)?"array":object instanceof Date?"date":void 0!==object.nodeType?"dom":object._isAMomentObject===!0?"moment":"object":"number"===type?"number":"boolean"===type?"boolean":"string"===type?"string":void 0===type?"undefined":type}},{key:"getSuggestion",value:function(option,options,path){var localSearch=Validator.findInOptions(option,options,path,!1),globalSearch=Validator.findInOptions(option,allOptions,[],!0),localSearchThreshold=8,globalSearchThreshold=4;void 0!==localSearch.indexMatch?console.log('%cUnknown option detected: "'+option+'" in '+Validator.printLocation(localSearch.path,option,"")+'Perhaps it was incomplete? Did you mean: "'+localSearch.indexMatch+'"?\n\n',printStyle):globalSearch.distance<=globalSearchThreshold&&localSearch.distance>globalSearch.distance?console.log('%cUnknown option detected: "'+option+'" in '+Validator.printLocation(localSearch.path,option,"")+"Perhaps it was misplaced? Matching option found at: "+Validator.printLocation(globalSearch.path,globalSearch.closestMatch,""),printStyle):localSearch.distance<=localSearchThreshold?console.log('%cUnknown option detected: "'+option+'". Did you mean "'+localSearch.closestMatch+'"?'+Validator.printLocation(localSearch.path,option),printStyle):console.log('%cUnknown option detected: "'+option+'". Did you mean one of these: '+Validator.print(Object.keys(options))+Validator.printLocation(path,option),printStyle),errorFound=!0}},{key:"findInOptions",value:function(option,options,path){var recursive=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],min=1e9,closestMatch="",closestMatchPath=[],lowerCaseOption=option.toLowerCase(),indexMatch=void 0;for(var op in options){var distance=void 0;if(void 0!==options[op].__type__&&recursive===!0){var result=Validator.findInOptions(option,options[op],util.copyAndExtendArray(path,op));min>result.distance&&(closestMatch=result.closestMatch,closestMatchPath=result.path,min=result.distance,indexMatch=result.indexMatch)}else op.toLowerCase().indexOf(lowerCaseOption)!==-1&&(indexMatch=op),distance=Validator.levenshteinDistance(option,op),min>distance&&(closestMatch=op,closestMatchPath=util.copyArray(path),min=distance)}return{closestMatch:closestMatch,path:closestMatchPath,distance:min,indexMatch:indexMatch}}},{key:"printLocation",value:function(path,option){for(var prefix=arguments.length<=2||void 0===arguments[2]?"Problem value found at: \n":arguments[2],str="\n\n"+prefix+"options = {\n",i=0;i<path.length;i++){for(var j=0;j<i+1;j++)str+="  ";str+=path[i]+": {\n"}for(var _j=0;_j<path.length+1;_j++)str+="  ";str+=option+"\n";for(var _i=0;_i<path.length+1;_i++){for(var _j2=0;_j2<path.length-_i;_j2++)str+="  ";str+="}\n"}return str+"\n\n"}},{key:"print",value:function(options){return JSON.stringify(options).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(a,b){if(0===a.length)return b.length;if(0===b.length)return a.length;var i,matrix=[];for(i=0;i<=b.length;i++)matrix[i]=[i];var j;for(j=0;j<=a.length;j++)matrix[0][j]=j;for(i=1;i<=b.length;i++)for(j=1;j<=a.length;j++)b.charAt(i-1)==a.charAt(j-1)?matrix[i][j]=matrix[i-1][j-1]:matrix[i][j]=Math.min(matrix[i-1][j-1]+1,Math.min(matrix[i][j-1]+1,matrix[i-1][j]+1));return matrix[b.length][a.length]}}]),Validator}();exports.default=Validator,exports.printStyle=printStyle},function(module,exports,__webpack_require__){function Range(body,options){var now=moment().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=now.clone().add(-3,"days").valueOf(),this.end=now.clone().add(4,"days").valueOf(),this.body=body,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:moment,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=util.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(options)}function validateDirection(direction){if("horizontal"!=direction&&"vertical"!=direction)throw new TypeError('Unknown direction "'+direction+'". Choose "horizontal" or "vertical".')}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},util=__webpack_require__(1),moment=(__webpack_require__(28),__webpack_require__(2)),Component=__webpack_require__(31),DateUtil=__webpack_require__(32);Range.prototype=new Component,Range.prototype.setOptions=function(options){if(options){var fields=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl"];util.selectiveExtend(fields,this.options,options),("start"in options||"end"in options)&&this.setRange(options.start,options.end)}},Range.prototype.setRange=function(start,end,animation,byUser){byUser!==!0&&(byUser=!1);var finalStart=void 0!=start?util.convert(start,"Date").valueOf():null,finalEnd=void 0!=end?util.convert(end,"Date").valueOf():null;if(this._cancelAnimation(),animation){var me=this,initStart=this.start,initEnd=this.end,duration="object"===("undefined"==typeof animation?"undefined":_typeof(animation))&&"duration"in animation?animation.duration:500,easingName="object"===("undefined"==typeof animation?"undefined":_typeof(animation))&&"easingFunction"in animation?animation.easingFunction:"easeInOutQuad",easingFunction=util.easingFunctions[easingName];if(!easingFunction)throw new Error("Unknown easing function "+JSON.stringify(easingName)+". Choose from: "+Object.keys(util.easingFunctions).join(", "));var initTime=(new Date).valueOf(),anyChanged=!1,next=function next(){if(!me.props.touch.dragging){var now=(new Date).valueOf(),time=now-initTime,ease=easingFunction(time/duration),done=time>duration,s=done||null===finalStart?finalStart:initStart+(finalStart-initStart)*ease,e=done||null===finalEnd?finalEnd:initEnd+(finalEnd-initEnd)*ease;changed=me._applyRange(s,e),DateUtil.updateHiddenDates(me.options.moment,me.body,me.options.hiddenDates),anyChanged=anyChanged||changed,changed&&me.body.emitter.emit("rangechange",{start:new Date(me.start),end:new Date(me.end),byUser:byUser}),done?anyChanged&&me.body.emitter.emit("rangechanged",{start:new Date(me.start),end:new Date(me.end),byUser:byUser}):me.animationTimer=setTimeout(next,20)}};return next()}var changed=this._applyRange(finalStart,finalEnd);if(DateUtil.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),changed){var params={start:new Date(this.start),end:new Date(this.end),byUser:byUser};this.body.emitter.emit("rangechange",params),this.body.emitter.emit("rangechanged",params)}},Range.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},Range.prototype._applyRange=function(start,end){var diff,newStart=null!=start?util.convert(start,"Date").valueOf():this.start,newEnd=null!=end?util.convert(end,"Date").valueOf():this.end,max=null!=this.options.max?util.convert(this.options.max,"Date").valueOf():null,min=null!=this.options.min?util.convert(this.options.min,"Date").valueOf():null;if(isNaN(newStart)||null===newStart)throw new Error('Invalid start "'+start+'"');if(isNaN(newEnd)||null===newEnd)throw new Error('Invalid end "'+end+'"');if(newEnd<newStart&&(newEnd=newStart),null!==min&&newStart<min&&(diff=min-newStart,newStart+=diff,newEnd+=diff,null!=max&&newEnd>max&&(newEnd=max)),null!==max&&newEnd>max&&(diff=newEnd-max,newStart-=diff,newEnd-=diff,null!=min&&newStart<min&&(newStart=min)),null!==this.options.zoomMin){var zoomMin=parseFloat(this.options.zoomMin);zoomMin<0&&(zoomMin=0),newEnd-newStart<zoomMin&&(this.end-this.start===zoomMin&&newStart>this.start&&newEnd<this.end?(newStart=this.start,newEnd=this.end):(diff=zoomMin-(newEnd-newStart),newStart-=diff/2,newEnd+=diff/2))}if(null!==this.options.zoomMax){var zoomMax=parseFloat(this.options.zoomMax);zoomMax<0&&(zoomMax=0),newEnd-newStart>zoomMax&&(this.end-this.start===zoomMax&&newStart<this.start&&newEnd>this.end?(newStart=this.start,newEnd=this.end):(diff=newEnd-newStart-zoomMax,newStart+=diff/2,newEnd-=diff/2))}var changed=this.start!=newStart||this.end!=newEnd;return newStart>=this.start&&newStart<=this.end||newEnd>=this.start&&newEnd<=this.end||this.start>=newStart&&this.start<=newEnd||this.end>=newStart&&this.end<=newEnd||this.body.emitter.emit("checkRangedItems"),this.start=newStart,this.end=newEnd,changed},Range.prototype.getRange=function(){return{start:this.start,end:this.end}},Range.prototype.conversion=function(width,totalHidden){return Range.conversion(this.start,this.end,width,totalHidden)},Range.conversion=function(start,end,width,totalHidden){return void 0===totalHidden&&(totalHidden=0),0!=width&&end-start!=0?{offset:start,scale:width/(end-start-totalHidden)}:{offset:0,scale:1}},Range.prototype._onDragStart=function(event){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(event)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},Range.prototype._onDrag=function(event){if(this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var direction=this.options.direction;validateDirection(direction);var delta="horizontal"==direction?event.deltaX:event.deltaY;delta-=this.deltaDifference;var interval=this.props.touch.end-this.props.touch.start,duration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);interval-=duration;var width="horizontal"==direction?this.body.domProps.center.width:this.body.domProps.center.height;if(this.options.rtl)var diffRange=delta/width*interval;else var diffRange=-delta/width*interval;var newStart=this.props.touch.start+diffRange,newEnd=this.props.touch.end+diffRange,safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,this.previousDelta-delta,!0),safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,this.previousDelta-delta,!0);if(safeStart!=newStart||safeEnd!=newEnd)return this.deltaDifference+=delta,this.props.touch.start=safeStart,this.props.touch.end=safeEnd,void this._onDrag(event);this.previousDelta=delta,this._applyRange(newStart,newEnd);var startDate=new Date(this.start),endDate=new Date(this.end);this.body.emitter.emit("rangechange",{start:startDate,end:endDate,byUser:!0})}},Range.prototype._onDragEnd=function(event){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},Range.prototype._onMouseWheel=function(event){if(this.options.zoomable&&this.options.moveable&&this._isInsideRange(event)&&(!this.options.zoomKey||event[this.options.zoomKey])){var delta=0;if(event.wheelDelta?delta=event.wheelDelta/120:event.detail&&(delta=-event.detail/3),delta){var scale;scale=delta<0?1-delta/5:1/(1+delta/5);var pointer=this.getPointer({x:event.clientX,y:event.clientY},this.body.dom.center),pointerDate=this._pointerToDate(pointer);this.zoom(scale,pointerDate,delta)}event.preventDefault()}},Range.prototype._onTouch=function(event){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},Range.prototype._onPinch=function(event){if(this.options.zoomable&&this.options.moveable){this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(event.center,this.body.dom.center));var scale=1/(event.scale+this.scaleOffset),centerDate=this._pointerToDate(this.props.touch.center),hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,centerDate),hiddenDurationAfter=hiddenDuration-hiddenDurationBefore,newStart=centerDate-hiddenDurationBefore+(this.props.touch.start-(centerDate-hiddenDurationBefore))*scale,newEnd=centerDate+hiddenDurationAfter+(this.props.touch.end-(centerDate+hiddenDurationAfter))*scale;this.startToFront=1-scale<=0,this.endToFront=scale-1<=0;var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,1-scale,!0),safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,scale-1,!0);safeStart==newStart&&safeEnd==newEnd||(this.props.touch.start=safeStart,this.props.touch.end=safeEnd,this.scaleOffset=1-event.scale,newStart=safeStart,newEnd=safeEnd),this.setRange(newStart,newEnd,!1,!0),this.startToFront=!1,this.endToFront=!0}},Range.prototype._isInsideRange=function(event){var clientX=event.center?event.center.x:event.clientX;if(this.options.rtl)var x=clientX-util.getAbsoluteLeft(this.body.dom.centerContainer);else var x=util.getAbsoluteRight(this.body.dom.centerContainer)-clientX;var time=this.body.util.toTime(x);return time>=this.start&&time<=this.end},Range.prototype._pointerToDate=function(pointer){var conversion,direction=this.options.direction;if(validateDirection(direction),"horizontal"==direction)return this.body.util.toTime(pointer.x).valueOf();var height=this.body.domProps.center.height;return conversion=this.conversion(height),pointer.y/conversion.scale+conversion.offset},Range.prototype.getPointer=function(touch,element){return this.options.rtl?{x:util.getAbsoluteRight(element)-touch.x,y:touch.y-util.getAbsoluteTop(element)}:{x:touch.x-util.getAbsoluteLeft(element),y:touch.y-util.getAbsoluteTop(element)}},Range.prototype.zoom=function(scale,center,delta){null==center&&(center=(this.start+this.end)/2);var hiddenDuration=DateUtil.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),hiddenDurationBefore=DateUtil.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,center),hiddenDurationAfter=hiddenDuration-hiddenDurationBefore,newStart=center-hiddenDurationBefore+(this.start-(center-hiddenDurationBefore))*scale,newEnd=center+hiddenDurationAfter+(this.end-(center+hiddenDurationAfter))*scale;this.startToFront=!(delta>0),this.endToFront=!(-delta>0);var safeStart=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newStart,delta,!0),safeEnd=DateUtil.snapAwayFromHidden(this.body.hiddenDates,newEnd,-delta,!0);safeStart==newStart&&safeEnd==newEnd||(newStart=safeStart,newEnd=safeEnd),this.setRange(newStart,newEnd,!1,!0),this.startToFront=!1,this.endToFront=!0},Range.prototype.move=function(delta){var diff=this.end-this.start,newStart=this.start+diff*delta,newEnd=this.end+diff*delta;this.start=newStart,this.end=newEnd},Range.prototype.moveTo=function(moveTo){var center=(this.start+this.end)/2,diff=center-moveTo,newStart=this.start-diff,newEnd=this.end-diff;this.setRange(newStart,newEnd)},module.exports=Range;
},function(module,exports){function Component(body,options){this.options=null,this.props=null}Component.prototype.setOptions=function(options){options&&util.extend(this.options,options)},Component.prototype.redraw=function(){return!1},Component.prototype.destroy=function(){},Component.prototype._isResized=function(){var resized=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,resized},module.exports=Component},function(module,exports){exports.convertHiddenOptions=function(moment,body,hiddenDates){if(hiddenDates&&!Array.isArray(hiddenDates))return exports.convertHiddenOptions(moment,body,[hiddenDates]);if(body.hiddenDates=[],hiddenDates&&1==Array.isArray(hiddenDates)){for(var i=0;i<hiddenDates.length;i++)if(void 0===hiddenDates[i].repeat){var dateItem={};dateItem.start=moment(hiddenDates[i].start).toDate().valueOf(),dateItem.end=moment(hiddenDates[i].end).toDate().valueOf(),body.hiddenDates.push(dateItem)}body.hiddenDates.sort(function(a,b){return a.start-b.start})}},exports.updateHiddenDates=function(moment,body,hiddenDates){if(hiddenDates&&!Array.isArray(hiddenDates))return exports.updateHiddenDates(moment,body,[hiddenDates]);if(hiddenDates&&void 0!==body.domProps.centerContainer.width){exports.convertHiddenOptions(moment,body,hiddenDates);for(var start=moment(body.range.start),end=moment(body.range.end),totalRange=body.range.end-body.range.start,pixelTime=totalRange/body.domProps.centerContainer.width,i=0;i<hiddenDates.length;i++)if(void 0!==hiddenDates[i].repeat){var startDate=moment(hiddenDates[i].start),endDate=moment(hiddenDates[i].end);if("Invalid Date"==startDate._d)throw new Error("Supplied start date is not valid: "+hiddenDates[i].start);if("Invalid Date"==endDate._d)throw new Error("Supplied end date is not valid: "+hiddenDates[i].end);var duration=endDate-startDate;if(duration>=4*pixelTime){var offset=0,runUntil=end.clone();switch(hiddenDates[i].repeat){case"daily":startDate.day()!=endDate.day()&&(offset=1),startDate.dayOfYear(start.dayOfYear()),startDate.year(start.year()),startDate.subtract(7,"days"),endDate.dayOfYear(start.dayOfYear()),endDate.year(start.year()),endDate.subtract(7-offset,"days"),runUntil.add(1,"weeks");break;case"weekly":var dayOffset=endDate.diff(startDate,"days"),day=startDate.day();startDate.date(start.date()),startDate.month(start.month()),startDate.year(start.year()),endDate=startDate.clone(),startDate.day(day),endDate.day(day),endDate.add(dayOffset,"days"),startDate.subtract(1,"weeks"),endDate.subtract(1,"weeks"),runUntil.add(1,"weeks");break;case"monthly":startDate.month()!=endDate.month()&&(offset=1),startDate.month(start.month()),startDate.year(start.year()),startDate.subtract(1,"months"),endDate.month(start.month()),endDate.year(start.year()),endDate.subtract(1,"months"),endDate.add(offset,"months"),runUntil.add(1,"months");break;case"yearly":startDate.year()!=endDate.year()&&(offset=1),startDate.year(start.year()),startDate.subtract(1,"years"),endDate.year(start.year()),endDate.subtract(1,"years"),endDate.add(offset,"years"),runUntil.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat)}for(;startDate<runUntil;)switch(body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()}),hiddenDates[i].repeat){case"daily":startDate.add(1,"days"),endDate.add(1,"days");break;case"weekly":startDate.add(1,"weeks"),endDate.add(1,"weeks");break;case"monthly":startDate.add(1,"months"),endDate.add(1,"months");break;case"yearly":startDate.add(1,"y"),endDate.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",hiddenDates[i].repeat)}body.hiddenDates.push({start:startDate.valueOf(),end:endDate.valueOf()})}}exports.removeDuplicates(body);var startHidden=exports.isHidden(body.range.start,body.hiddenDates),endHidden=exports.isHidden(body.range.end,body.hiddenDates),rangeStart=body.range.start,rangeEnd=body.range.end;1==startHidden.hidden&&(rangeStart=1==body.range.startToFront?startHidden.startDate-1:startHidden.endDate+1),1==endHidden.hidden&&(rangeEnd=1==body.range.endToFront?endHidden.startDate-1:endHidden.endDate+1),1!=startHidden.hidden&&1!=endHidden.hidden||body.range._applyRange(rangeStart,rangeEnd)}},exports.removeDuplicates=function(body){for(var hiddenDates=body.hiddenDates,safeDates=[],i=0;i<hiddenDates.length;i++)for(var j=0;j<hiddenDates.length;j++)i!=j&&1!=hiddenDates[j].remove&&1!=hiddenDates[i].remove&&(hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end?hiddenDates[j].remove=!0:hiddenDates[j].start>=hiddenDates[i].start&&hiddenDates[j].start<=hiddenDates[i].end?(hiddenDates[i].end=hiddenDates[j].end,hiddenDates[j].remove=!0):hiddenDates[j].end>=hiddenDates[i].start&&hiddenDates[j].end<=hiddenDates[i].end&&(hiddenDates[i].start=hiddenDates[j].start,hiddenDates[j].remove=!0));for(var i=0;i<hiddenDates.length;i++)hiddenDates[i].remove!==!0&&safeDates.push(hiddenDates[i]);body.hiddenDates=safeDates,body.hiddenDates.sort(function(a,b){return a.start-b.start})},exports.printDates=function(dates){for(var i=0;i<dates.length;i++)console.log(i,new Date(dates[i].start),new Date(dates[i].end),dates[i].start,dates[i].end,dates[i].remove)},exports.stepOverHiddenDates=function(moment,timeStep,previousTime){for(var stepInHidden=!1,currentValue=timeStep.current.valueOf(),i=0;i<timeStep.hiddenDates.length;i++){var startDate=timeStep.hiddenDates[i].start,endDate=timeStep.hiddenDates[i].end;if(currentValue>=startDate&&currentValue<endDate){stepInHidden=!0;break}}if(1==stepInHidden&&currentValue<timeStep._end.valueOf()&&currentValue!=previousTime){var prevValue=moment(previousTime),newValue=moment(endDate);prevValue.year()!=newValue.year()?timeStep.switchedYear=!0:prevValue.month()!=newValue.month()?timeStep.switchedMonth=!0:prevValue.dayOfYear()!=newValue.dayOfYear()&&(timeStep.switchedDay=!0),timeStep.current=newValue}},exports.toScreen=function(Core,time,width){if(0==Core.body.hiddenDates.length){var conversion=Core.range.conversion(width);return(time.valueOf()-conversion.offset)*conversion.scale}var hidden=exports.isHidden(time,Core.body.hiddenDates);1==hidden.hidden&&(time=hidden.startDate);var duration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end);time=exports.correctTimeForHidden(Core.options.moment,Core.body.hiddenDates,Core.range,time);var conversion=Core.range.conversion(width,duration);return(time.valueOf()-conversion.offset)*conversion.scale},exports.toTime=function(Core,x,width){if(0==Core.body.hiddenDates.length){var conversion=Core.range.conversion(width);return new Date(x/conversion.scale+conversion.offset)}var hiddenDuration=exports.getHiddenDurationBetween(Core.body.hiddenDates,Core.range.start,Core.range.end),totalDuration=Core.range.end-Core.range.start-hiddenDuration,partialDuration=totalDuration*x/width,accumulatedHiddenDuration=exports.getAccumulatedHiddenDuration(Core.body.hiddenDates,Core.range,partialDuration),newTime=new Date(accumulatedHiddenDuration+partialDuration+Core.range.start);return newTime},exports.getHiddenDurationBetween=function(hiddenDates,start,end){for(var duration=0,i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;startDate>=start&&endDate<end&&(duration+=endDate-startDate)}return duration},exports.correctTimeForHidden=function(moment,hiddenDates,range,time){return time=moment(time).toDate().valueOf(),time-=exports.getHiddenDurationBefore(moment,hiddenDates,range,time)},exports.getHiddenDurationBefore=function(moment,hiddenDates,range,time){var timeOffset=0;time=moment(time).toDate().valueOf();for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;startDate>=range.start&&endDate<range.end&&time>=endDate&&(timeOffset+=endDate-startDate)}return timeOffset},exports.getAccumulatedHiddenDuration=function(hiddenDates,range,requiredDuration){for(var hiddenDuration=0,duration=0,previousPoint=range.start,i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;if(startDate>=range.start&&endDate<range.end){if(duration+=startDate-previousPoint,previousPoint=endDate,duration>=requiredDuration)break;hiddenDuration+=endDate-startDate}}return hiddenDuration},exports.snapAwayFromHidden=function(hiddenDates,time,direction,correctionEnabled){var isHidden=exports.isHidden(time,hiddenDates);return 1==isHidden.hidden?direction<0?1==correctionEnabled?isHidden.startDate-(isHidden.endDate-time)-1:isHidden.startDate-1:1==correctionEnabled?isHidden.endDate+(time-isHidden.startDate)+1:isHidden.endDate+1:time},exports.isHidden=function(time,hiddenDates){for(var i=0;i<hiddenDates.length;i++){var startDate=hiddenDates[i].start,endDate=hiddenDates[i].end;if(time>=startDate&&time<endDate)return{hidden:!0,startDate:startDate,endDate:endDate}}return{hidden:!1,startDate:startDate,endDate:endDate}}},function(module,exports,__webpack_require__){function Core(){}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},Emitter=__webpack_require__(13),Hammer=__webpack_require__(20),hammerUtil=__webpack_require__(28),util=__webpack_require__(1),TimeAxis=(__webpack_require__(9),__webpack_require__(11),__webpack_require__(30),__webpack_require__(34),__webpack_require__(44)),Activator=__webpack_require__(45),DateUtil=__webpack_require__(32),CustomTime=__webpack_require__(46);Emitter(Core.prototype),Core.prototype._create=function(container){function onMouseWheel(event){me.isActive()&&me.emit("mousewheel",event)}this.dom={},this.dom.container=container,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",function(){this.initialDrawDone===!0&&this._redraw()}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pan",this._onDrag.bind(this));var me=this;this.on("_change",function(properties){properties&&1==properties.queue?me._redrawTimer||(me._redrawTimer=setTimeout(function(){me._redrawTimer=null,me._redraw()},0)):me._redraw()}),this.hammer=new Hammer(this.dom.root);var pinchRecognizer=this.hammer.get("pinch").set({enable:!0});hammerUtil.disablePreventDefaultVertically(pinchRecognizer),this.hammer.get("pan").set({threshold:5,direction:Hammer.DIRECTION_HORIZONTAL}),this.listeners={};var events=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];if(events.forEach(function(type){var listener=function(event){me.isActive()&&me.emit(type,event)};me.hammer.on(type,listener),me.listeners[type]=listener}),hammerUtil.onTouch(this.hammer,function(event){me.emit("touch",event)}.bind(this)),hammerUtil.onRelease(this.hammer,function(event){me.emit("release",event)}.bind(this)),this.dom.root.addEventListener("mousewheel",onMouseWheel),this.dom.root.addEventListener("DOMMouseScroll",onMouseWheel),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,!container)throw new Error("No container provided");container.appendChild(this.dom.root)},Core.prototype.setOptions=function(options){if(options){var fields=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","throttleRedraw"];if(util.selectiveExtend(fields,this.options,options),this.options.rtl){var contentContainer=this.dom.leftContainer;this.dom.leftContainer=this.dom.rightContainer,this.dom.rightContainer=contentContainer,this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"}if(this.options.orientation={item:void 0,axis:void 0},"orientation"in options&&("string"==typeof options.orientation?this.options.orientation={item:options.orientation,axis:options.orientation}:"object"===_typeof(options.orientation)&&("item"in options.orientation&&(this.options.orientation.item=options.orientation.item),"axis"in options.orientation&&(this.options.orientation.axis=options.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var timeAxis2=this.timeAxis2=new TimeAxis(this.body);timeAxis2.setOptions=function(options){var _options=options?util.extend({},options):{};_options.orientation="top",TimeAxis.prototype.setOptions.call(timeAxis2,_options)},this.components.push(timeAxis2)}}else if(this.timeAxis2){var index=this.components.indexOf(this.timeAxis2);index!==-1&&this.components.splice(index,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof options.drawPoints&&(options.drawPoints={onRender:options.drawPoints}),"hiddenDates"in this.options&&DateUtil.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in options&&(options.clickToUse?this.activator||(this.activator=new Activator(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in options)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(component){return component.setOptions(options)}),"configure"in options){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(options.configure);var appliedOptions=util.deepExtend({},this.options);this.components.forEach(function(component){util.deepExtend(appliedOptions,component.options)}),this.configurator.setModuleOptions({global:appliedOptions})}this._origRedraw?this._redraw():(this._origRedraw=this._redraw.bind(this),this._redraw=util.throttle(this._origRedraw,this.options.throttleRedraw))},Core.prototype.isActive=function(){return!this.activator||this.activator.active},Core.prototype.destroy=function(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var event in this.listeners)this.listeners.hasOwnProperty(event)&&delete this.listeners[event];this.listeners=null,this.hammer=null,this.components.forEach(function(component){return component.destroy()}),this.body=null},Core.prototype.setCustomTime=function(time,id){var customTimes=this.customTimes.filter(function(component){return id===component.options.id});if(0===customTimes.length)throw new Error("No custom time bar found with id "+JSON.stringify(id));customTimes.length>0&&customTimes[0].setCustomTime(time)},Core.prototype.getCustomTime=function(id){var customTimes=this.customTimes.filter(function(component){return component.options.id===id});if(0===customTimes.length)throw new Error("No custom time bar found with id "+JSON.stringify(id));return customTimes[0].getCustomTime()},Core.prototype.setCustomTimeTitle=function(title,id){var customTimes=this.customTimes.filter(function(component){return component.options.id===id});if(0===customTimes.length)throw new Error("No custom time bar found with id "+JSON.stringify(id));if(customTimes.length>0)return customTimes[0].setCustomTitle(title)},Core.prototype.getEventProperties=function(event){return{event:event}},Core.prototype.addCustomTime=function(time,id){var timestamp=void 0!==time?util.convert(time,"Date").valueOf():new Date,exists=this.customTimes.some(function(customTime){return customTime.options.id===id});if(exists)throw new Error("A custom time with id "+JSON.stringify(id)+" already exists");var customTime=new CustomTime(this.body,util.extend({},this.options,{time:timestamp,id:id}));return this.customTimes.push(customTime),this.components.push(customTime),this._redraw(),id},Core.prototype.removeCustomTime=function(id){var customTimes=this.customTimes.filter(function(bar){return bar.options.id===id});if(0===customTimes.length)throw new Error("No custom time bar found with id "+JSON.stringify(id));customTimes.forEach(function(customTime){this.customTimes.splice(this.customTimes.indexOf(customTime),1),this.components.splice(this.components.indexOf(customTime),1),customTime.destroy()}.bind(this))},Core.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},Core.prototype.fit=function(options){var range=this.getDataRange();if(null!==range.min||null!==range.max){var interval=range.max-range.min,min=new Date(range.min.valueOf()-.01*interval),max=new Date(range.max.valueOf()+.01*interval),animation=!options||void 0===options.animation||options.animation;this.range.setRange(min,max,animation)}},Core.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},Core.prototype.setWindow=function(start,end,options){var animation;if(1==arguments.length){var range=arguments[0];animation=void 0===range.animation||range.animation,this.range.setRange(range.start,range.end,animation)}else animation=!options||void 0===options.animation||options.animation,this.range.setRange(start,end,animation)},Core.prototype.moveTo=function(time,options){var interval=this.range.end-this.range.start,t=util.convert(time,"Date").valueOf(),start=t-interval/2,end=t+interval/2,animation=!options||void 0===options.animation||options.animation;this.range.setRange(start,end,animation)},Core.prototype.getWindow=function(){var range=this.range.getRange();return{start:new Date(range.start),end:new Date(range.end)}},Core.prototype.redraw=function(){this._redraw()},Core.prototype._redraw=function(){this.redrawCount++;var resized=!1,options=this.options,props=this.props,dom=this.dom;if(dom&&dom.container&&0!=dom.root.offsetWidth){DateUtil.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==options.orientation?(util.addClassName(dom.root,"vis-top"),util.removeClassName(dom.root,"vis-bottom")):(util.removeClassName(dom.root,"vis-top"),util.addClassName(dom.root,"vis-bottom")),dom.root.style.maxHeight=util.option.asSize(options.maxHeight,""),dom.root.style.minHeight=util.option.asSize(options.minHeight,""),dom.root.style.width=util.option.asSize(options.width,""),props.border.left=(dom.centerContainer.offsetWidth-dom.centerContainer.clientWidth)/2,props.border.right=props.border.left,props.border.top=(dom.centerContainer.offsetHeight-dom.centerContainer.clientHeight)/2,props.border.bottom=props.border.top;var borderRootHeight=dom.root.offsetHeight-dom.root.clientHeight,borderRootWidth=dom.root.offsetWidth-dom.root.clientWidth;0===dom.centerContainer.clientHeight&&(props.border.left=props.border.top,props.border.right=props.border.left),0===dom.root.clientHeight&&(borderRootWidth=borderRootHeight),props.center.height=dom.center.offsetHeight,props.left.height=dom.left.offsetHeight,props.right.height=dom.right.offsetHeight,props.top.height=dom.top.clientHeight||-props.border.top,props.bottom.height=dom.bottom.clientHeight||-props.border.bottom;var contentHeight=Math.max(props.left.height,props.center.height,props.right.height),autoHeight=props.top.height+contentHeight+props.bottom.height+borderRootHeight+props.border.top+props.border.bottom;dom.root.style.height=util.option.asSize(options.height,autoHeight+"px"),props.root.height=dom.root.offsetHeight,props.background.height=props.root.height-borderRootHeight;var containerHeight=props.root.height-props.top.height-props.bottom.height-borderRootHeight;props.centerContainer.height=containerHeight,props.leftContainer.height=containerHeight,props.rightContainer.height=props.leftContainer.height,props.root.width=dom.root.offsetWidth,props.background.width=props.root.width-borderRootWidth,props.left.width=dom.leftContainer.clientWidth||-props.border.left,props.leftContainer.width=props.left.width,props.right.width=dom.rightContainer.clientWidth||-props.border.right,props.rightContainer.width=props.right.width;var centerWidth=props.root.width-props.left.width-props.right.width-borderRootWidth;props.center.width=centerWidth,props.centerContainer.width=centerWidth,props.top.width=centerWidth,props.bottom.width=centerWidth,dom.background.style.height=props.background.height+"px",dom.backgroundVertical.style.height=props.background.height+"px",dom.backgroundHorizontal.style.height=props.centerContainer.height+"px",dom.centerContainer.style.height=props.centerContainer.height+"px",dom.leftContainer.style.height=props.leftContainer.height+"px",dom.rightContainer.style.height=props.rightContainer.height+"px",dom.background.style.width=props.background.width+"px",dom.backgroundVertical.style.width=props.centerContainer.width+"px",dom.backgroundHorizontal.style.width=props.background.width+"px",dom.centerContainer.style.width=props.center.width+"px",dom.top.style.width=props.top.width+"px",dom.bottom.style.width=props.bottom.width+"px",dom.background.style.left="0",dom.background.style.top="0",dom.backgroundVertical.style.left=props.left.width+props.border.left+"px",dom.backgroundVertical.style.top="0",dom.backgroundHorizontal.style.left="0",dom.backgroundHorizontal.style.top=props.top.height+"px",dom.centerContainer.style.left=props.left.width+"px",dom.centerContainer.style.top=props.top.height+"px",dom.leftContainer.style.left="0",dom.leftContainer.style.top=props.top.height+"px",dom.rightContainer.style.left=props.left.width+props.center.width+"px",dom.rightContainer.style.top=props.top.height+"px",dom.top.style.left=props.left.width+"px",dom.top.style.top="0",dom.bottom.style.left=props.left.width+"px",dom.bottom.style.top=props.top.height+props.centerContainer.height+"px",this._updateScrollTop();var offset=this.props.scrollTop;"top"!=options.orientation.item&&(offset+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),dom.center.style.left="0",dom.center.style.top=offset+"px",dom.left.style.left="0",dom.left.style.top=offset+"px",dom.right.style.left="0",dom.right.style.top=offset+"px";var visibilityTop=0==this.props.scrollTop?"hidden":"",visibilityBottom=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";dom.shadowTop.style.visibility=visibilityTop,dom.shadowBottom.style.visibility=visibilityBottom,dom.shadowTopLeft.style.visibility=visibilityTop,dom.shadowBottomLeft.style.visibility=visibilityBottom,dom.shadowTopRight.style.visibility=visibilityTop,dom.shadowBottomRight.style.visibility=visibilityBottom;var contentsOverflow=this.props.center.height>this.props.centerContainer.height;this.hammer.get("pan").set({direction:contentsOverflow?Hammer.DIRECTION_ALL:Hammer.DIRECTION_HORIZONTAL}),this.components.forEach(function(component){resized=component.redraw()||resized});var MAX_REDRAW=5;if(resized){if(this.redrawCount<MAX_REDRAW)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.initialDrawDone=!0,this.body.emitter.emit("changed")}},Core.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},Core.prototype.setCurrentTime=function(time){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(time)},Core.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},Core.prototype._toTime=function(x){return DateUtil.toTime(this,x,this.props.center.width)},Core.prototype._toGlobalTime=function(x){return DateUtil.toTime(this,x,this.props.root.width)},Core.prototype._toScreen=function(time){return DateUtil.toScreen(this,time,this.props.center.width)},Core.prototype._toGlobalScreen=function(time){return DateUtil.toScreen(this,time,this.props.root.width)},Core.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},Core.prototype._startAutoResize=function(){var me=this;this._stopAutoResize(),this._onResize=function(){return 1!=me.options.autoResize?void me._stopAutoResize():void(me.dom.root&&(me.dom.root.offsetWidth==me.props.lastWidth&&me.dom.root.offsetHeight==me.props.lastHeight||(me.props.lastWidth=me.dom.root.offsetWidth,me.props.lastHeight=me.dom.root.offsetHeight,me.body.emitter.emit("_change"))))},util.addEventListener(window,"resize",this._onResize),me.dom.root&&(me.props.lastWidth=me.dom.root.offsetWidth,me.props.lastHeight=me.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},Core.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(util.removeEventListener(window,"resize",this._onResize),this._onResize=null)},Core.prototype._onTouch=function(event){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},Core.prototype._onPinch=function(event){this.touch.allowDragging=!1},Core.prototype._onDrag=function(event){if(this.touch.allowDragging){var delta=event.deltaY,oldScrollTop=this._getScrollTop(),newScrollTop=this._setScrollTop(this.touch.initialScrollTop+delta);newScrollTop!=oldScrollTop&&this.emit("verticalDrag")}},Core.prototype._setScrollTop=function(scrollTop){return this.props.scrollTop=scrollTop,this._updateScrollTop(),this.props.scrollTop},Core.prototype._updateScrollTop=function(){var scrollTopMin=Math.min(this.props.centerContainer.height-this.props.center.height,0);return scrollTopMin!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=scrollTopMin-this.props.scrollTopMin),this.props.scrollTopMin=scrollTopMin),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<scrollTopMin&&(this.props.scrollTop=scrollTopMin),this.props.scrollTop},Core.prototype._getScrollTop=function(){return this.props.scrollTop},Core.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},module.exports=Core},function(module,exports,__webpack_require__){function ItemSet(body,options){this.body=body,this.defaultOptions={rtl:!1,type:null,orientation:{item:"bottom"},align:"auto",stack:!0,groupOrderSwap:function(fromGroup,toGroup,groups){var targetOrder=toGroup.order;toGroup.order=fromGroup.order,fromGroup.order=targetOrder},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:!1,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:TimeStep.snap,onAdd:function(item,callback){callback(item)},onUpdate:function(item,callback){callback(item)},onMove:function(item,callback){callback(item)},onRemove:function(item,callback){callback(item)},onMoving:function(item,callback){callback(item)},onAddGroup:function(item,callback){callback(item)},onMoveGroup:function(item,callback){callback(item)},onRemoveGroup:function(item,callback){callback(item)},margin:{item:{horizontal:10,vertical:10},axis:20}},this.options=util.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:body.util.toScreen,toTime:body.util.toTime},this.dom={},this.props={},this.hammer=null;var me=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(event,params,senderId){me._onAdd(params.items)},update:function(event,params,senderId){me._onUpdate(params.items)},remove:function(event,params,senderId){me._onRemove(params.items)}},this.groupListeners={add:function(event,params,senderId){me._onAddGroups(params.items)},update:function(event,params,senderId){me._onUpdateGroups(params.items)},remove:function(event,params,senderId){me._onRemoveGroups(params.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(options)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},Hammer=__webpack_require__(20),util=__webpack_require__(1),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),TimeStep=__webpack_require__(35),Component=__webpack_require__(31),Group=__webpack_require__(36),BackgroundGroup=__webpack_require__(40),BoxItem=__webpack_require__(41),PointItem=__webpack_require__(42),RangeItem=__webpack_require__(38),BackgroundItem=__webpack_require__(43),UNGROUPED="__ungrouped__",BACKGROUND="__background__";ItemSet.prototype=new Component,ItemSet.types={background:BackgroundItem,box:BoxItem,range:RangeItem,point:PointItem},ItemSet.prototype._create=function(){var frame=document.createElement("div");frame.className="vis-itemset",frame["timeline-itemset"]=this,this.dom.frame=frame;var background=document.createElement("div");background.className="vis-background",frame.appendChild(background),this.dom.background=background;var foreground=document.createElement("div");foreground.className="vis-foreground",frame.appendChild(foreground),this.dom.foreground=foreground;var axis=document.createElement("div");axis.className="vis-axis",
this.dom.axis=axis;var labelSet=document.createElement("div");labelSet.className="vis-labelset",this.dom.labelSet=labelSet,this._updateUngrouped();var backgroundGroup=new BackgroundGroup(BACKGROUND,null,this);backgroundGroup.show(),this.groups[BACKGROUND]=backgroundGroup,this.hammer=new Hammer(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(event){event.isFirst&&this._onTouch(event)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:Hammer.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.groupHammer=new Hammer(this.body.dom.leftContainer),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:Hammer.DIRECTION_HORIZONTAL}),this.show()},ItemSet.prototype.setOptions=function(options){if(options){var fields=["type","rtl","align","order","stack","selectable","multiselect","itemsAlwaysDraggable","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","hide","snap","groupOrderSwap"];util.selectiveExtend(fields,this.options,options),"orientation"in options&&("string"==typeof options.orientation?this.options.orientation.item="top"===options.orientation?"top":"bottom":"object"===_typeof(options.orientation)&&"item"in options.orientation&&(this.options.orientation.item=options.orientation.item)),"margin"in options&&("number"==typeof options.margin?(this.options.margin.axis=options.margin,this.options.margin.item.horizontal=options.margin,this.options.margin.item.vertical=options.margin):"object"===_typeof(options.margin)&&(util.selectiveExtend(["axis"],this.options.margin,options.margin),"item"in options.margin&&("number"==typeof options.margin.item?(this.options.margin.item.horizontal=options.margin.item,this.options.margin.item.vertical=options.margin.item):"object"===_typeof(options.margin.item)&&util.selectiveExtend(["horizontal","vertical"],this.options.margin.item,options.margin.item)))),"editable"in options&&("boolean"==typeof options.editable?(this.options.editable.updateTime=options.editable,this.options.editable.updateGroup=options.editable,this.options.editable.add=options.editable,this.options.editable.remove=options.editable):"object"===_typeof(options.editable)&&util.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,options.editable)),"groupEditable"in options&&("boolean"==typeof options.groupEditable?(this.options.groupEditable.order=options.groupEditable,this.options.groupEditable.add=options.groupEditable,this.options.groupEditable.remove=options.groupEditable):"object"===_typeof(options.groupEditable)&&util.selectiveExtend(["order","add","remove"],this.options.groupEditable,options.groupEditable));var addCallback=function(name){var fn=options[name];if(fn){if(!(fn instanceof Function))throw new Error("option "+name+" must be a function "+name+"(item, callback)");this.options[name]=fn}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(addCallback),this.markDirty()}},ItemSet.prototype.markDirty=function(options){this.groupIds=[],this.stackDirty=!0,options&&options.refreshItems&&util.forEach(this.items,function(item){item.dirty=!0,item.displayed&&item.redraw()})},ItemSet.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},ItemSet.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},ItemSet.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},ItemSet.prototype.setSelection=function(ids){var i,ii,id,item;for(void 0==ids&&(ids=[]),Array.isArray(ids)||(ids=[ids]),i=0,ii=this.selection.length;i<ii;i++)id=this.selection[i],item=this.items[id],item&&item.unselect();for(this.selection=[],i=0,ii=ids.length;i<ii;i++)id=ids[i],item=this.items[id],item&&(this.selection.push(id),item.select())},ItemSet.prototype.getSelection=function(){return this.selection.concat([])},ItemSet.prototype.getVisibleItems=function(){var range=this.body.range.getRange();if(this.options.rtl)var right=this.body.util.toScreen(range.start),left=this.body.util.toScreen(range.end);else var left=this.body.util.toScreen(range.start),right=this.body.util.toScreen(range.end);var ids=[];for(var groupId in this.groups)if(this.groups.hasOwnProperty(groupId))for(var group=this.groups[groupId],rawVisibleItems=group.visibleItems,i=0;i<rawVisibleItems.length;i++){var item=rawVisibleItems[i];this.options.rtl?item.right<left&&item.right+item.width>right&&ids.push(item.id):item.left<right&&item.left+item.width>left&&ids.push(item.id)}return ids},ItemSet.prototype._deselect=function(id){for(var selection=this.selection,i=0,ii=selection.length;i<ii;i++)if(selection[i]==id){selection.splice(i,1);break}},ItemSet.prototype.redraw=function(){var margin=this.options.margin,range=this.body.range,asSize=util.option.asSize,options=this.options,orientation=options.orientation.item,resized=!1,frame=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,frame.className="vis-itemset",resized=this._orderGroups()||resized;var visibleInterval=range.end-range.start,zoomed=visibleInterval!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;zoomed&&(this.stackDirty=!0),this.lastVisibleInterval=visibleInterval,this.props.lastWidth=this.props.width;var restack=this.stackDirty,firstGroup=this._firstGroup(),firstMargin={item:margin.item,axis:margin.axis},nonFirstMargin={item:margin.item,axis:margin.item.vertical/2},height=0,minHeight=margin.axis+margin.item.vertical;return this.groups[BACKGROUND].redraw(range,nonFirstMargin,restack),util.forEach(this.groups,function(group){var groupMargin=group==firstGroup?firstMargin:nonFirstMargin,groupResized=group.redraw(range,groupMargin,restack);resized=groupResized||resized,height+=group.height}),height=Math.max(height,minHeight),this.stackDirty=!1,frame.style.height=asSize(height),this.props.width=frame.offsetWidth,this.props.height=height,this.dom.axis.style.top=asSize("top"==orientation?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",resized=this._isResized()||resized},ItemSet.prototype._firstGroup=function(){var firstGroupIndex="top"==this.options.orientation.item?0:this.groupIds.length-1,firstGroupId=this.groupIds[firstGroupIndex],firstGroup=this.groups[firstGroupId]||this.groups[UNGROUPED];return firstGroup||null},ItemSet.prototype._updateUngrouped=function(){var item,itemId,ungrouped=this.groups[UNGROUPED];this.groups[BACKGROUND];if(this.groupsData){if(ungrouped){ungrouped.hide(),delete this.groups[UNGROUPED];for(itemId in this.items)if(this.items.hasOwnProperty(itemId)){item=this.items[itemId],item.parent&&item.parent.remove(item);var groupId=this._getGroupId(item.data),group=this.groups[groupId];group&&group.add(item)||item.hide()}}}else if(!ungrouped){var id=null,data=null;ungrouped=new Group(id,data,this),this.groups[UNGROUPED]=ungrouped;for(itemId in this.items)this.items.hasOwnProperty(itemId)&&(item=this.items[itemId],ungrouped.add(item));ungrouped.show()}},ItemSet.prototype.getLabelSet=function(){return this.dom.labelSet},ItemSet.prototype.setItems=function(items){var ids,me=this,oldItemsData=this.itemsData;if(items){if(!(items instanceof DataSet||items instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=items}else this.itemsData=null;if(oldItemsData&&(util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback)}),ids=oldItemsData.getIds(),this._onRemove(ids)),this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id)}),ids=this.itemsData.getIds(),this._onAdd(ids),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},ItemSet.prototype.getItems=function(){return this.itemsData},ItemSet.prototype.setGroups=function(groups){var ids,me=this;if(this.groupsData&&(util.forEach(this.groupListeners,function(callback,event){me.groupsData.off(event,callback)}),ids=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(ids)),groups){if(!(groups instanceof DataSet||groups instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=groups}else this.groupsData=null;if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id)}),ids=this.groupsData.getIds(),this._onAddGroups(ids)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},ItemSet.prototype.getGroups=function(){return this.groupsData},ItemSet.prototype.removeItem=function(id){var item=this.itemsData.get(id),dataset=this.itemsData.getDataSet();item&&this.options.onRemove(item,function(item){item&&dataset.remove(id)})},ItemSet.prototype._getType=function(itemData){return itemData.type||this.options.type||(itemData.end?"range":"box")},ItemSet.prototype._getGroupId=function(itemData){var type=this._getType(itemData);return"background"==type&&void 0==itemData.group?BACKGROUND:this.groupsData?itemData.group:UNGROUPED},ItemSet.prototype._onUpdate=function(ids){var me=this;ids.forEach(function(id){var selected,itemData=me.itemsData.get(id,me.itemOptions),item=me.items[id],type=me._getType(itemData),constructor=ItemSet.types[type];if(item&&(constructor&&item instanceof constructor?me._updateItem(item,itemData):(selected=item.selected,me._removeItem(item),item=null)),!item){if(!constructor)throw"rangeoverflow"==type?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+type+'"');item=new constructor(itemData,me.conversion,me.options),item.id=id,me._addItem(item),selected&&(this.selection.push(id),item.select())}}.bind(this)),this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0})},ItemSet.prototype._onAdd=ItemSet.prototype._onUpdate,ItemSet.prototype._onRemove=function(ids){var count=0,me=this;ids.forEach(function(id){var item=me.items[id];item&&(count++,me._removeItem(item))}),count&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("_change",{queue:!0}))},ItemSet.prototype._order=function(){util.forEach(this.groups,function(group){group.order()})},ItemSet.prototype._onUpdateGroups=function(ids){this._onAddGroups(ids)},ItemSet.prototype._onAddGroups=function(ids){var me=this;ids.forEach(function(id){var groupData=me.groupsData.get(id),group=me.groups[id];if(group)group.setData(groupData);else{if(id==UNGROUPED||id==BACKGROUND)throw new Error("Illegal group id. "+id+" is a reserved id.");var groupOptions=Object.create(me.options);util.extend(groupOptions,{height:null}),group=new Group(id,groupData,me),me.groups[id]=group;for(var itemId in me.items)if(me.items.hasOwnProperty(itemId)){var item=me.items[itemId];item.data.group==id&&group.add(item)}group.order(),group.show()}}),this.body.emitter.emit("_change",{queue:!0})},ItemSet.prototype._onRemoveGroups=function(ids){var groups=this.groups;ids.forEach(function(id){var group=groups[id];group&&(group.hide(),delete groups[id])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},ItemSet.prototype._orderGroups=function(){if(this.groupsData){var groupIds=this.groupsData.getIds({order:this.options.groupOrder}),changed=!util.equalArray(groupIds,this.groupIds);if(changed){var groups=this.groups;groupIds.forEach(function(groupId){groups[groupId].hide()}),groupIds.forEach(function(groupId){groups[groupId].show()}),this.groupIds=groupIds}return changed}return!1},ItemSet.prototype._addItem=function(item){this.items[item.id]=item;var groupId=this._getGroupId(item.data),group=this.groups[groupId];group&&group.add(item)},ItemSet.prototype._updateItem=function(item,itemData){var oldGroupId=item.data.group,oldSubGroupId=item.data.subgroup;if(item.setData(itemData),oldGroupId!=item.data.group||oldSubGroupId!=item.data.subgroup){var oldGroup=this.groups[oldGroupId];oldGroup&&oldGroup.remove(item);var groupId=this._getGroupId(item.data),group=this.groups[groupId];group&&group.add(item)}},ItemSet.prototype._removeItem=function(item){item.hide(),delete this.items[item.id];var index=this.selection.indexOf(item.id);index!=-1&&this.selection.splice(index,1),item.parent&&item.parent.remove(item)},ItemSet.prototype._constructByEndArray=function(array){for(var endArray=[],i=0;i<array.length;i++)array[i]instanceof RangeItem&&endArray.push(array[i]);return endArray},ItemSet.prototype._onTouch=function(event){this.touchParams.item=this.itemFromTarget(event),this.touchParams.dragLeftItem=event.target.dragLeftItem||!1,this.touchParams.dragRightItem=event.target.dragRightItem||!1,this.touchParams.itemProps=null},ItemSet.prototype._getGroupIndex=function(groupId){for(var i=0;i<this.groupIds.length;i++)if(groupId==this.groupIds[i])return i},ItemSet.prototype._onDragStart=function(event){var props,item=this.touchParams.item||null,me=this;if(item&&(item.selected||this.options.itemsAlwaysDraggable)){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!item.editable)return;if(item.editable===!1)return;var dragLeftItem=this.touchParams.dragLeftItem,dragRightItem=this.touchParams.dragRightItem;if(dragLeftItem)props={item:dragLeftItem,initialX:event.center.x,dragLeft:!0,data:this._cloneItemData(item.data)},this.touchParams.itemProps=[props];else if(dragRightItem)props={item:dragRightItem,initialX:event.center.x,dragRight:!0,data:this._cloneItemData(item.data)},this.touchParams.itemProps=[props];else{this.touchParams.selectedItem=item;var baseGroupIndex=this._getGroupIndex(item.data.group),itemsToDrag=this.options.itemsAlwaysDraggable&&!item.selected?[item.id]:this.getSelection();this.touchParams.itemProps=itemsToDrag.map(function(id){var item=me.items[id],groupIndex=me._getGroupIndex(item.data.group);return{item:item,initialX:event.center.x,groupOffset:baseGroupIndex-groupIndex,data:this._cloneItemData(item.data)}}.bind(this))}event.stopPropagation()}else this.options.editable.add&&(event.srcEvent.ctrlKey||event.srcEvent.metaKey)&&this._onDragStartAddItem(event)},ItemSet.prototype._onDragStartAddItem=function(event){var snap=this.options.snap||null;if(this.options.rtl)var xAbs=util.getAbsoluteRight(this.dom.frame),x=xAbs-event.center.x+10;else var xAbs=util.getAbsoluteLeft(this.dom.frame),x=event.center.x-xAbs-10;var time=this.body.util.toTime(x),scale=this.body.util.getScale(),step=this.body.util.getStep(),start=snap?snap(time,scale,step):time,end=start,itemData={type:"range",start:start,end:end,content:"new item"},id=util.randomUUID();itemData[this.itemsData._fieldId]=id;var group=this.groupFromTarget(event);group&&(itemData.group=group.groupId);var newItem=new RangeItem(itemData,this.conversion,this.options);newItem.id=id,newItem.data=this._cloneItemData(itemData),this._addItem(newItem);var props={item:newItem,initialX:event.center.x,data:newItem.data};this.options.rtl?props.dragLeft=!0:props.dragRight=!0,this.touchParams.itemProps=[props],event.stopPropagation()},ItemSet.prototype._onDrag=function(event){if(this.touchParams.itemProps){event.stopPropagation();var me=this,snap=this.options.snap||null;if(this.options.rtl)var xOffset=this.body.dom.root.offsetLeft+this.body.domProps.right.width;else var xOffset=this.body.dom.root.offsetLeft+this.body.domProps.left.width;var scale=this.body.util.getScale(),step=this.body.util.getStep(),selectedItem=this.touchParams.selectedItem,updateGroupAllowed=me.options.editable.updateGroup,newGroupBase=null;if(updateGroupAllowed&&selectedItem&&void 0!=selectedItem.data.group){var group=me.groupFromTarget(event);group&&(newGroupBase=this._getGroupIndex(group.groupId))}this.touchParams.itemProps.forEach(function(props){var current=me.body.util.toTime(event.center.x-xOffset),initial=me.body.util.toTime(props.initialX-xOffset);if(this.options.rtl)var offset=-(current-initial);else var offset=current-initial;var itemData=this._cloneItemData(props.item.data);if(props.item.editable!==!1){var updateTimeAllowed=me.options.editable.updateTime||props.item.editable===!0;if(updateTimeAllowed)if(props.dragLeft){if(this.options.rtl){if(void 0!=itemData.end){var initialEnd=util.convert(props.data.end,"Date"),end=new Date(initialEnd.valueOf()+offset);itemData.end=snap?snap(end,scale,step):end}}else if(void 0!=itemData.start){var initialStart=util.convert(props.data.start,"Date"),start=new Date(initialStart.valueOf()+offset);itemData.start=snap?snap(start,scale,step):start}}else if(props.dragRight){if(this.options.rtl){if(void 0!=itemData.start){var initialStart=util.convert(props.data.start,"Date"),start=new Date(initialStart.valueOf()+offset);itemData.start=snap?snap(start,scale,step):start}}else if(void 0!=itemData.end){var initialEnd=util.convert(props.data.end,"Date"),end=new Date(initialEnd.valueOf()+offset);itemData.end=snap?snap(end,scale,step):end}}else if(void 0!=itemData.start){var initialStart=util.convert(props.data.start,"Date").valueOf(),start=new Date(initialStart+offset);if(void 0!=itemData.end){var initialEnd=util.convert(props.data.end,"Date"),duration=initialEnd.valueOf()-initialStart.valueOf();itemData.start=snap?snap(start,scale,step):start,itemData.end=new Date(itemData.start.valueOf()+duration)}else itemData.start=snap?snap(start,scale,step):start}var updateGroupAllowed=me.options.editable.updateGroup||props.item.editable===!0;if(updateGroupAllowed&&!props.dragLeft&&!props.dragRight&&null!=newGroupBase&&void 0!=itemData.group){var newOffset=newGroupBase-props.groupOffset;newOffset=Math.max(0,newOffset),newOffset=Math.min(me.groupIds.length-1,newOffset),itemData.group=me.groupIds[newOffset]}itemData=this._cloneItemData(itemData),me.options.onMoving(itemData,function(itemData){itemData&&props.item.setData(this._cloneItemData(itemData,"Date"))}.bind(this))}}.bind(this)),this.stackDirty=!0,this.body.emitter.emit("_change")}},ItemSet.prototype._moveToGroup=function(item,groupId){var group=this.groups[groupId];if(group&&group.groupId!=item.data.group){var oldGroup=item.parent;oldGroup.remove(item),oldGroup.order(),group.add(item),group.order(),item.data.group=group.groupId}},ItemSet.prototype._onDragEnd=function(event){if(this.touchParams.itemProps){event.stopPropagation();var me=this,dataset=this.itemsData.getDataSet(),itemProps=this.touchParams.itemProps;this.touchParams.itemProps=null,itemProps.forEach(function(props){var id=props.item.id,exists=null!=me.itemsData.get(id,me.itemOptions);if(exists){var itemData=this._cloneItemData(props.item.data);me.options.onMove(itemData,function(itemData){itemData?(itemData[dataset._fieldId]=id,dataset.update(itemData)):(props.item.setData(props.data),me.stackDirty=!0,me.body.emitter.emit("_change"))})}else me.options.onAdd(props.item.data,function(itemData){me._removeItem(props.item),itemData&&me.itemsData.getDataSet().add(itemData),me.stackDirty=!0,me.body.emitter.emit("_change")})}.bind(this))}},ItemSet.prototype._onGroupDragStart=function(event){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(event),this.groupTouchParams.group&&(event.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},ItemSet.prototype._onGroupDrag=function(event){if(this.options.groupEditable.order&&this.groupTouchParams.group){event.stopPropagation();var group=this.groupFromTarget(event);if(group&&group.height!=this.groupTouchParams.group.height){var movingUp=group.top<this.groupTouchParams.group.top,clientY=event.center?event.center.y:event.clientY,targetGroupTop=util.getAbsoluteTop(group.dom.foreground),draggedGroupHeight=this.groupTouchParams.group.height;if(movingUp){if(targetGroupTop+draggedGroupHeight<clientY)return}else{var targetGroupHeight=group.height;if(targetGroupTop+targetGroupHeight-draggedGroupHeight>clientY)return}}if(group&&group!=this.groupTouchParams.group){var groupsData=this.groupsData,targetGroup=groupsData.get(group.groupId),draggedGroup=groupsData.get(this.groupTouchParams.group.groupId);draggedGroup&&targetGroup&&(this.options.groupOrderSwap(draggedGroup,targetGroup,this.groupsData),this.groupsData.update(draggedGroup),this.groupsData.update(targetGroup));var newOrder=this.groupsData.getIds({order:this.options.groupOrder});if(!util.equalArray(newOrder,this.groupTouchParams.originalOrder))for(var groupsData=this.groupsData,origOrder=this.groupTouchParams.originalOrder,draggedId=this.groupTouchParams.group.groupId,numGroups=Math.min(origOrder.length,newOrder.length),curPos=0,newOffset=0,orgOffset=0;curPos<numGroups;){for(;curPos+newOffset<numGroups&&curPos+orgOffset<numGroups&&newOrder[curPos+newOffset]==origOrder[curPos+orgOffset];)curPos++;if(curPos+newOffset>=numGroups)break;if(newOrder[curPos+newOffset]!=draggedId)if(origOrder[curPos+orgOffset]!=draggedId){var slippedPosition=newOrder.indexOf(origOrder[curPos+orgOffset]),switchGroup=groupsData.get(newOrder[curPos+newOffset]),shouldBeGroup=groupsData.get(origOrder[curPos+orgOffset]);this.options.groupOrderSwap(switchGroup,shouldBeGroup,groupsData),groupsData.update(switchGroup),groupsData.update(shouldBeGroup);var switchGroupId=newOrder[curPos+newOffset];newOrder[curPos+newOffset]=origOrder[curPos+orgOffset],newOrder[slippedPosition]=switchGroupId,curPos++}else orgOffset=1;else newOffset=1}}}},ItemSet.prototype._onGroupDragEnd=function(event){if(this.options.groupEditable.order&&this.groupTouchParams.group){event.stopPropagation();var me=this,id=me.groupTouchParams.group.groupId,dataset=me.groupsData.getDataSet(),groupData=util.extend({},dataset.get(id));me.options.onMoveGroup(groupData,function(groupData){if(groupData)groupData[dataset._fieldId]=id,dataset.update(groupData);else{var newOrder=dataset.getIds({order:me.options.groupOrder});if(!util.equalArray(newOrder,me.groupTouchParams.originalOrder))for(var origOrder=me.groupTouchParams.originalOrder,numGroups=Math.min(origOrder.length,newOrder.length),curPos=0;curPos<numGroups;){for(;curPos<numGroups&&newOrder[curPos]==origOrder[curPos];)curPos++;if(curPos>=numGroups)break;var slippedPosition=newOrder.indexOf(origOrder[curPos]),switchGroup=dataset.get(newOrder[curPos]),shouldBeGroup=dataset.get(origOrder[curPos]);me.options.groupOrderSwap(switchGroup,shouldBeGroup,dataset),groupsData.update(switchGroup),groupsData.update(shouldBeGroup);var switchGroupId=newOrder[curPos];newOrder[curPos]=origOrder[curPos],newOrder[slippedPosition]=switchGroupId,curPos++}}}),me.body.emitter.emit("groupDragged",{groupId:id})}},ItemSet.prototype._onSelectItem=function(event){if(this.options.selectable){var ctrlKey=event.srcEvent&&(event.srcEvent.ctrlKey||event.srcEvent.metaKey),shiftKey=event.srcEvent&&event.srcEvent.shiftKey;if(ctrlKey||shiftKey)return void this._onMultiSelectItem(event);var oldSelection=this.getSelection(),item=this.itemFromTarget(event),selection=item?[item.id]:[];this.setSelection(selection);var newSelection=this.getSelection();(newSelection.length>0||oldSelection.length>0)&&this.body.emitter.emit("select",{items:newSelection,event:event})}},ItemSet.prototype._onAddItem=function(event){if(this.options.selectable&&this.options.editable.add){var me=this,snap=this.options.snap||null,item=this.itemFromTarget(event);if(item){var itemData=me.itemsData.get(item.id);this.options.onUpdate(itemData,function(itemData){itemData&&me.itemsData.getDataSet().update(itemData)})}else{if(this.options.rtl)var xAbs=util.getAbsoluteRight(this.dom.frame),x=xAbs-event.center.x;else var xAbs=util.getAbsoluteLeft(this.dom.frame),x=event.center.x-xAbs;var start=this.body.util.toTime(x),scale=this.body.util.getScale(),step=this.body.util.getStep(),newItemData={start:snap?snap(start,scale,step):start,content:"new item"};if("range"===this.options.type){var end=this.body.util.toTime(x+this.props.width/5);newItemData.end=snap?snap(end,scale,step):end}newItemData[this.itemsData._fieldId]=util.randomUUID();var group=this.groupFromTarget(event);group&&(newItemData.group=group.groupId),newItemData=this._cloneItemData(newItemData),this.options.onAdd(newItemData,function(item){item&&me.itemsData.getDataSet().add(item)})}}},ItemSet.prototype._onMultiSelectItem=function(event){if(this.options.selectable){var item=this.itemFromTarget(event);if(item){var selection=this.options.multiselect?this.getSelection():[],shiftKey=event.srcEvent&&event.srcEvent.shiftKey||!1;if(shiftKey&&this.options.multiselect){var itemGroup=this.itemsData.get(item.id).group,lastSelectedGroup=void 0;this.options.multiselectPerGroup&&selection.length>0&&(lastSelectedGroup=this.itemsData.get(selection[0]).group),this.options.multiselectPerGroup&&void 0!=lastSelectedGroup&&lastSelectedGroup!=itemGroup||selection.push(item.id);var range=ItemSet._getItemRange(this.itemsData.get(selection,this.itemOptions));if(!this.options.multiselectPerGroup||lastSelectedGroup==itemGroup){selection=[];for(var id in this.items)if(this.items.hasOwnProperty(id)){var _item=this.items[id],start=_item.data.start,end=void 0!==_item.data.end?_item.data.end:start;!(start>=range.min&&end<=range.max)||this.options.multiselectPerGroup&&lastSelectedGroup!=this.itemsData.get(_item.id).group||_item instanceof BackgroundItem||selection.push(_item.id)}}}else{var index=selection.indexOf(item.id);index==-1?selection.push(item.id):selection.splice(index,1)}this.setSelection(selection),this.body.emitter.emit("select",{items:this.getSelection(),event:event})}}},ItemSet._getItemRange=function(itemsData){var max=null,min=null;return itemsData.forEach(function(data){(null==min||data.start<min)&&(min=data.start),void 0!=data.end?(null==max||data.end>max)&&(max=data.end):(null==max||data.start>max)&&(max=data.start)}),{min:min,max:max}},ItemSet.prototype.itemFromTarget=function(event){for(var target=event.target;target;){if(target.hasOwnProperty("timeline-item"))return target["timeline-item"];target=target.parentNode}return null},ItemSet.prototype.groupFromTarget=function(event){for(var clientY=event.center?event.center.y:event.clientY,i=0;i<this.groupIds.length;i++){var groupId=this.groupIds[i],group=this.groups[groupId],foreground=group.dom.foreground,top=util.getAbsoluteTop(foreground);if(clientY>top&&clientY<top+foreground.offsetHeight)return group;if("top"===this.options.orientation.item){if(i===this.groupIds.length-1&&clientY>top)return group}else if(0===i&&clientY<top+foreground.offset)return group}return null},ItemSet.itemSetFromTarget=function(event){for(var target=event.target;target;){if(target.hasOwnProperty("timeline-itemset"))return target["timeline-itemset"];target=target.parentNode}return null},ItemSet.prototype._cloneItemData=function(itemData,type){var clone=util.extend({},itemData);return type||(type=this.itemsData.getDataSet()._options.type),void 0!=clone.start&&(clone.start=util.convert(clone.start,type&&type.start||"Date")),void 0!=clone.end&&(clone.end=util.convert(clone.end,type&&type.end||"Date")),clone},module.exports=ItemSet},function(module,exports,__webpack_require__){function TimeStep(start,end,minimumStep,hiddenDates){this.moment=moment,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(start,end,minimumStep),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(hiddenDates)?this.hiddenDates=hiddenDates:void 0!=hiddenDates?this.hiddenDates=[hiddenDates]:this.hiddenDates=[],this.format=TimeStep.FORMAT}var moment=__webpack_require__(2),DateUtil=__webpack_require__(32),util=__webpack_require__(1);TimeStep.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},TimeStep.prototype.setMoment=function(moment){this.moment=moment,this.current=this.moment(this.current),this._start=this.moment(this._start),this._end=this.moment(this._end)},TimeStep.prototype.setFormat=function(format){var defaultFormat=util.deepExtend({},TimeStep.FORMAT);this.format=util.deepExtend(defaultFormat,format)},TimeStep.prototype.setRange=function(start,end,minimumStep){if(!(start instanceof Date&&end instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=start?this.moment(start.valueOf()):new Date,this._end=void 0!=end?this.moment(end.valueOf()):new Date,this.autoScale&&this.setMinimumStep(minimumStep)},TimeStep.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},TimeStep.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},TimeStep.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},TimeStep.prototype.next=function(){var prev=this.current.valueOf();if(this.current.month()<6)switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.subtract(this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}else switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":
this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break;case"year":}this.current.valueOf()==prev&&(this.current=this._end.clone()),DateUtil.stepOverHiddenDates(this.moment,this,prev)},TimeStep.prototype.getCurrent=function(){return this.current},TimeStep.prototype.setScale=function(params){params&&"string"==typeof params.scale&&(this.scale=params.scale,this.step=params.step>0?params.step:1,this.autoScale=!1)},TimeStep.prototype.setAutoScale=function(enable){this.autoScale=enable},TimeStep.prototype.setMinimumStep=function(minimumStep){if(void 0!=minimumStep){var stepYear=31104e6,stepMonth=2592e6,stepDay=864e5,stepHour=36e5,stepMinute=6e4,stepSecond=1e3,stepMillisecond=1;1e3*stepYear>minimumStep&&(this.scale="year",this.step=1e3),500*stepYear>minimumStep&&(this.scale="year",this.step=500),100*stepYear>minimumStep&&(this.scale="year",this.step=100),50*stepYear>minimumStep&&(this.scale="year",this.step=50),10*stepYear>minimumStep&&(this.scale="year",this.step=10),5*stepYear>minimumStep&&(this.scale="year",this.step=5),stepYear>minimumStep&&(this.scale="year",this.step=1),3*stepMonth>minimumStep&&(this.scale="month",this.step=3),stepMonth>minimumStep&&(this.scale="month",this.step=1),5*stepDay>minimumStep&&(this.scale="day",this.step=5),2*stepDay>minimumStep&&(this.scale="day",this.step=2),stepDay>minimumStep&&(this.scale="day",this.step=1),stepDay/2>minimumStep&&(this.scale="weekday",this.step=1),4*stepHour>minimumStep&&(this.scale="hour",this.step=4),stepHour>minimumStep&&(this.scale="hour",this.step=1),15*stepMinute>minimumStep&&(this.scale="minute",this.step=15),10*stepMinute>minimumStep&&(this.scale="minute",this.step=10),5*stepMinute>minimumStep&&(this.scale="minute",this.step=5),stepMinute>minimumStep&&(this.scale="minute",this.step=1),15*stepSecond>minimumStep&&(this.scale="second",this.step=15),10*stepSecond>minimumStep&&(this.scale="second",this.step=10),5*stepSecond>minimumStep&&(this.scale="second",this.step=5),stepSecond>minimumStep&&(this.scale="second",this.step=1),200*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=200),100*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=100),50*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=50),10*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=10),5*stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=5),stepMillisecond>minimumStep&&(this.scale="millisecond",this.step=1)}},TimeStep.snap=function(date,scale,step){var clone=moment(date);if("year"==scale){var year=clone.year()+Math.round(clone.month()/12);clone.year(Math.round(year/step)*step),clone.month(0),clone.date(0),clone.hours(0),clone.minutes(0),clone.seconds(0),clone.milliseconds(0)}else if("month"==scale)clone.date()>15?(clone.date(1),clone.add(1,"month")):clone.date(1),clone.hours(0),clone.minutes(0),clone.seconds(0),clone.milliseconds(0);else if("day"==scale){switch(step){case 5:case 2:clone.hours(24*Math.round(clone.hours()/24));break;default:clone.hours(12*Math.round(clone.hours()/12))}clone.minutes(0),clone.seconds(0),clone.milliseconds(0)}else if("weekday"==scale){switch(step){case 5:case 2:clone.hours(12*Math.round(clone.hours()/12));break;default:clone.hours(6*Math.round(clone.hours()/6))}clone.minutes(0),clone.seconds(0),clone.milliseconds(0)}else if("hour"==scale){switch(step){case 4:clone.minutes(60*Math.round(clone.minutes()/60));break;default:clone.minutes(30*Math.round(clone.minutes()/30))}clone.seconds(0),clone.milliseconds(0)}else if("minute"==scale){switch(step){case 15:case 10:clone.minutes(5*Math.round(clone.minutes()/5)),clone.seconds(0);break;case 5:clone.seconds(60*Math.round(clone.seconds()/60));break;default:clone.seconds(30*Math.round(clone.seconds()/30))}clone.milliseconds(0)}else if("second"==scale)switch(step){case 15:case 10:clone.seconds(5*Math.round(clone.seconds()/5)),clone.milliseconds(0);break;case 5:clone.milliseconds(1e3*Math.round(clone.milliseconds()/1e3));break;default:clone.milliseconds(500*Math.round(clone.milliseconds()/500))}else if("millisecond"==scale){var _step=step>5?step/2:1;clone.milliseconds(Math.round(clone.milliseconds()/_step)*_step)}return clone},TimeStep.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var date=this.moment(this.current);switch(this.scale){case"millisecond":return 0==date.milliseconds();case"second":return 0==date.seconds();case"minute":return 0==date.hours()&&0==date.minutes();case"hour":return 0==date.hours();case"weekday":case"day":return 1==date.date();case"month":return 0==date.month();case"year":return!1;default:return!1}},TimeStep.prototype.getLabelMinor=function(date){void 0==date&&(date=this.current);var format=this.format.minorLabels[this.scale];return format&&format.length>0?this.moment(date).format(format):""},TimeStep.prototype.getLabelMajor=function(date){void 0==date&&(date=this.current);var format=this.format.majorLabels[this.scale];return format&&format.length>0?this.moment(date).format(format):""},TimeStep.prototype.getClassName=function(){function even(value){return value/step%2==0?" vis-even":" vis-odd"}function today(date){return date.isSame(new Date,"day")?" vis-today":date.isSame(_moment().add(1,"day"),"day")?" vis-tomorrow":date.isSame(_moment().add(-1,"day"),"day")?" vis-yesterday":""}function currentWeek(date){return date.isSame(new Date,"week")?" vis-current-week":""}function currentMonth(date){return date.isSame(new Date,"month")?" vis-current-month":""}function currentYear(date){return date.isSame(new Date,"year")?" vis-current-year":""}var _moment=this.moment,m=this.moment(this.current),current=m.locale?m.locale("en"):m.lang("en"),step=this.step;switch(this.scale){case"millisecond":return even(current.milliseconds()).trim();case"second":return even(current.seconds()).trim();case"minute":return even(current.minutes()).trim();case"hour":var hours=current.hours();return 4==this.step&&(hours=hours+"-h"+(hours+4)),"vis-h"+hours+today(current)+even(current.hours());case"weekday":return"vis-"+current.format("dddd").toLowerCase()+today(current)+currentWeek(current)+even(current.date());case"day":var day=current.date(),month=current.format("MMMM").toLowerCase();return"vis-day"+day+" vis-"+month+currentMonth(current)+even(day-1);case"month":return"vis-"+current.format("MMMM").toLowerCase()+currentMonth(current)+even(current.month());case"year":var year=current.year();return"vis-year"+year+currentYear(current)+even(year);default:return""}},module.exports=TimeStep},function(module,exports,__webpack_require__){function Group(groupId,data,itemSet){this.groupId=groupId,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=data&&data.subgroupOrder,this.itemSet=itemSet,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var me=this;this.itemSet.body.emitter.on("checkRangedItems",function(){me.checkRangedItems=!0}),this._create(),this.setData(data)}var util=__webpack_require__(1),stack=__webpack_require__(37);__webpack_require__(38);Group.prototype._create=function(){var label=document.createElement("div");this.itemSet.options.groupEditable.order?label.className="vis-label draggable":label.className="vis-label",this.dom.label=label;var inner=document.createElement("div");inner.className="vis-inner",label.appendChild(inner),this.dom.inner=inner;var foreground=document.createElement("div");foreground.className="vis-group",foreground["timeline-group"]=this,this.dom.foreground=foreground,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},Group.prototype.setData=function(data){var content;if(content=this.itemSet.options&&this.itemSet.options.groupTemplate?this.itemSet.options.groupTemplate(data):data&&data.content,content instanceof Element){for(this.dom.inner.appendChild(content);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(content)}else void 0!==content&&null!==content?this.dom.inner.innerHTML=content:this.dom.inner.innerHTML=this.groupId||"";this.dom.label.title=data&&data.title||"",this.dom.inner.firstChild?util.removeClassName(this.dom.inner,"vis-hidden"):util.addClassName(this.dom.inner,"vis-hidden");var className=data&&data.className||null;className!=this.className&&(this.className&&(util.removeClassName(this.dom.label,this.className),util.removeClassName(this.dom.foreground,this.className),util.removeClassName(this.dom.background,this.className),util.removeClassName(this.dom.axis,this.className)),util.addClassName(this.dom.label,className),util.addClassName(this.dom.foreground,className),util.addClassName(this.dom.background,className),util.addClassName(this.dom.axis,className),this.className=className),this.style&&(util.removeCssText(this.dom.label,this.style),this.style=null),data&&data.style&&(util.addCssText(this.dom.label,data.style),this.style=data.style)},Group.prototype.getLabelWidth=function(){return this.props.label.width},Group.prototype.redraw=function(range,margin,restack){var resized=!1,markerHeight=this.dom.marker.clientHeight;if(markerHeight!=this.lastMarkerHeight&&(this.lastMarkerHeight=markerHeight,util.forEach(this.items,function(item){item.dirty=!0,item.displayed&&item.redraw()}),restack=!0),this._calculateSubGroupHeights(),"function"==typeof this.itemSet.options.order){if(restack){var me=this,limitSize=!1;util.forEach(this.items,function(item){item.displayed||(item.redraw(),me.visibleItems.push(item)),item.repositionX(limitSize)});var customOrderedItems=this.orderedItems.byStart.slice().sort(function(a,b){return me.itemSet.options.order(a.data,b.data)});stack.stack(customOrderedItems,margin,!0)}this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range)}else this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range),this.itemSet.options.stack?stack.stack(this.visibleItems,margin,restack):stack.nostack(this.visibleItems,margin,this.subgroups);var height=this._calculateHeight(margin),foreground=this.dom.foreground;this.top=foreground.offsetTop,this.right=foreground.offsetLeft,this.width=foreground.offsetWidth,resized=util.updateProperty(this,"height",height)||resized,resized=util.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||resized,resized=util.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||resized,this.dom.background.style.height=height+"px",this.dom.foreground.style.height=height+"px",this.dom.label.style.height=height+"px";for(var i=0,ii=this.visibleItems.length;i<ii;i++){var item=this.visibleItems[i];item.repositionY(margin)}return resized},Group.prototype._calculateSubGroupHeights=function(){if(Object.keys(this.subgroups).length>0){var me=this;this.resetSubgroups(),util.forEach(this.visibleItems,function(item){void 0!==item.data.subgroup&&(me.subgroups[item.data.subgroup].height=Math.max(me.subgroups[item.data.subgroup].height,item.height),me.subgroups[item.data.subgroup].visible=!0)})}},Group.prototype._calculateHeight=function(margin){var height,visibleItems=this.visibleItems;if(visibleItems.length>0){var min=visibleItems[0].top,max=visibleItems[0].top+visibleItems[0].height;if(util.forEach(visibleItems,function(item){min=Math.min(min,item.top),max=Math.max(max,item.top+item.height)}),min>margin.axis){var offset=min-margin.axis;max-=offset,util.forEach(visibleItems,function(item){item.top-=offset})}height=max+margin.item.vertical/2}else height=0;return height=Math.max(height,this.props.label.height)},Group.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},Group.prototype.hide=function(){var label=this.dom.label;label.parentNode&&label.parentNode.removeChild(label);var foreground=this.dom.foreground;foreground.parentNode&&foreground.parentNode.removeChild(foreground);var background=this.dom.background;background.parentNode&&background.parentNode.removeChild(background);var axis=this.dom.axis;axis.parentNode&&axis.parentNode.removeChild(axis)},Group.prototype.add=function(item){if(this.items[item.id]=item,item.setParent(this),void 0!==item.data.subgroup&&(void 0===this.subgroups[item.data.subgroup]&&(this.subgroups[item.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[item.data.subgroup].items.push(item)),this.orderSubgroups(),this.visibleItems.indexOf(item)==-1){var range=this.itemSet.body.range;this._checkIfVisible(item,this.visibleItems,range)}},Group.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var sortArray=[];if("string"==typeof this.subgroupOrderer){for(var subgroup in this.subgroups)sortArray.push({subgroup:subgroup,sortField:this.subgroups[subgroup].items[0].data[this.subgroupOrderer]});sortArray.sort(function(a,b){return a.sortField-b.sortField})}else if("function"==typeof this.subgroupOrderer){for(var subgroup in this.subgroups)sortArray.push(this.subgroups[subgroup].items[0].data);sortArray.sort(this.subgroupOrderer)}if(sortArray.length>0)for(var i=0;i<sortArray.length;i++)this.subgroups[sortArray[i].subgroup].index=i}},Group.prototype.resetSubgroups=function(){for(var subgroup in this.subgroups)this.subgroups.hasOwnProperty(subgroup)&&(this.subgroups[subgroup].visible=!1)},Group.prototype.remove=function(item){delete this.items[item.id],item.setParent(null);var index=this.visibleItems.indexOf(item);if(index!=-1&&this.visibleItems.splice(index,1),void 0!==item.data.subgroup){var subgroup=this.subgroups[item.data.subgroup];if(subgroup){var itemIndex=subgroup.items.indexOf(item);subgroup.items.splice(itemIndex,1),subgroup.items.length||(delete this.subgroups[item.data.subgroup],this.subgroupIndex--),this.orderSubgroups()}}},Group.prototype.removeFromDataSet=function(item){this.itemSet.removeItem(item.id)},Group.prototype.order=function(){for(var array=util.toArray(this.items),startArray=[],endArray=[],i=0;i<array.length;i++)void 0!==array[i].data.end&&endArray.push(array[i]),startArray.push(array[i]);this.orderedItems={byStart:startArray,byEnd:endArray},stack.orderByStart(this.orderedItems.byStart),stack.orderByEnd(this.orderedItems.byEnd)},Group.prototype._updateVisibleItems=function(orderedItems,oldVisibleItems,range){var item,i,visibleItems=[],visibleItemsLookup={},interval=(range.end-range.start)/4,lowerBound=range.start-interval,upperBound=range.end+interval,searchFunction=function(value){return value<lowerBound?-1:value<=upperBound?0:1};if(oldVisibleItems.length>0)for(i=0;i<oldVisibleItems.length;i++)this._checkIfVisibleWithReference(oldVisibleItems[i],visibleItems,visibleItemsLookup,range);var initialPosByStart=util.binarySearchCustom(orderedItems.byStart,searchFunction,"data","start");if(this._traceVisible(initialPosByStart,orderedItems.byStart,visibleItems,visibleItemsLookup,function(item){return item.data.start<lowerBound||item.data.start>upperBound}),1==this.checkRangedItems)for(this.checkRangedItems=!1,i=0;i<orderedItems.byEnd.length;i++)this._checkIfVisibleWithReference(orderedItems.byEnd[i],visibleItems,visibleItemsLookup,range);else{var initialPosByEnd=util.binarySearchCustom(orderedItems.byEnd,searchFunction,"data","end");this._traceVisible(initialPosByEnd,orderedItems.byEnd,visibleItems,visibleItemsLookup,function(item){return item.data.end<lowerBound||item.data.end>upperBound})}for(i=0;i<visibleItems.length;i++)item=visibleItems[i],item.displayed||item.show(),item.repositionX();return visibleItems},Group.prototype._traceVisible=function(initialPos,items,visibleItems,visibleItemsLookup,breakCondition){var item,i;if(initialPos!=-1){for(i=initialPos;i>=0&&(item=items[i],!breakCondition(item));i--)void 0===visibleItemsLookup[item.id]&&(visibleItemsLookup[item.id]=!0,visibleItems.push(item));for(i=initialPos+1;i<items.length&&(item=items[i],!breakCondition(item));i++)void 0===visibleItemsLookup[item.id]&&(visibleItemsLookup[item.id]=!0,visibleItems.push(item))}},Group.prototype._checkIfVisible=function(item,visibleItems,range){item.isVisible(range)?(item.displayed||item.show(),item.repositionX(),visibleItems.push(item)):item.displayed&&item.hide()},Group.prototype._checkIfVisibleWithReference=function(item,visibleItems,visibleItemsLookup,range){item.isVisible(range)?void 0===visibleItemsLookup[item.id]&&(visibleItemsLookup[item.id]=!0,visibleItems.push(item)):item.displayed&&item.hide()},module.exports=Group},function(module,exports){var EPSILON=.001;exports.orderByStart=function(items){items.sort(function(a,b){return a.data.start-b.data.start})},exports.orderByEnd=function(items){items.sort(function(a,b){var aTime="end"in a.data?a.data.end:a.data.start,bTime="end"in b.data?b.data.end:b.data.start;return aTime-bTime})},exports.stack=function(items,margin,force){var i,iMax;if(force)for(i=0,iMax=items.length;i<iMax;i++)items[i].top=null;for(i=0,iMax=items.length;i<iMax;i++){var item=items[i];if(item.stack&&null===item.top){item.top=margin.axis;do{for(var collidingItem=null,j=0,jj=items.length;j<jj;j++){var other=items[j];if(null!==other.top&&other!==item&&other.stack&&exports.collision(item,other,margin.item,other.options.rtl)){collidingItem=other;break}}null!=collidingItem&&(item.top=collidingItem.top+collidingItem.height+margin.item.vertical)}while(collidingItem)}}},exports.nostack=function(items,margin,subgroups){var i,iMax,newTop;for(i=0,iMax=items.length;i<iMax;i++)if(void 0!==items[i].data.subgroup){newTop=margin.axis;for(var subgroup in subgroups)subgroups.hasOwnProperty(subgroup)&&1==subgroups[subgroup].visible&&subgroups[subgroup].index<subgroups[items[i].data.subgroup].index&&(newTop+=subgroups[subgroup].height+margin.item.vertical);items[i].top=newTop}else items[i].top=margin.axis},exports.collision=function(a,b,margin,rtl){return rtl?a.right-margin.horizontal+EPSILON<b.right+b.width&&a.right+a.width+margin.horizontal-EPSILON>b.right&&a.top-margin.vertical+EPSILON<b.top+b.height&&a.top+a.height+margin.vertical-EPSILON>b.top:a.left-margin.horizontal+EPSILON<b.left+b.width&&a.left+a.width+margin.horizontal-EPSILON>b.left&&a.top-margin.vertical+EPSILON<b.top+b.height&&a.top+a.height+margin.vertical-EPSILON>b.top}},function(module,exports,__webpack_require__){function RangeItem(data,conversion,options){if(this.props={content:{width:0}},this.overflow=!1,this.options=options,data){if(void 0==data.start)throw new Error('Property "start" missing in item '+data.id);if(void 0==data.end)throw new Error('Property "end" missing in item '+data.id)}Item.call(this,data,conversion,options)}var Item=(__webpack_require__(20),__webpack_require__(39));RangeItem.prototype=new Item(null,null,null),RangeItem.prototype.baseClassName="vis-item vis-range",RangeItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start},RangeItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.box=document.createElement("div"),dom.frame=document.createElement("div"),dom.frame.className="vis-item-overflow",dom.box.appendChild(dom.frame),dom.content=document.createElement("div"),dom.content.className="vis-item-content",dom.frame.appendChild(dom.content),dom.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var editable=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,className=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(editable?" vis-editable":" vis-readonly");dom.box.className=this.baseClassName+className,this.overflow="hidden"!==window.getComputedStyle(dom.frame).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(dom.box),this._repaintDragLeft(),this._repaintDragRight()},RangeItem.prototype.show=function(){this.displayed||this.redraw()},RangeItem.prototype.hide=function(){if(this.displayed){var box=this.dom.box;box.parentNode&&box.parentNode.removeChild(box),this.displayed=!1}},RangeItem.prototype.repositionX=function(limitSize){var contentStartPosition,contentWidth,parentWidth=this.parent.width,start=this.conversion.toScreen(this.data.start),end=this.conversion.toScreen(this.data.end);void 0!==limitSize&&limitSize!==!0||(start<-parentWidth&&(start=-parentWidth),end>2*parentWidth&&(end=2*parentWidth));var boxWidth=Math.max(end-start,1);switch(this.overflow?(this.options.rtl?this.right=start:this.left=start,this.width=boxWidth+this.props.content.width,contentWidth=this.props.content.width):(this.options.rtl?this.right=start:this.left=start,this.width=boxWidth,contentWidth=Math.min(end-start,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=boxWidth+"px",this.options.align){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(boxWidth-contentWidth,0)+"px":this.dom.content.style.left=Math.max(boxWidth-contentWidth,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((boxWidth-contentWidth)/2,0)+"px":this.dom.content.style.left=Math.max((boxWidth-contentWidth)/2,0)+"px";break;default:contentStartPosition=this.overflow?end>0?Math.max(-start,0):-contentWidth:start<0?-start:0,this.options.rtl?this.dom.content.style.right=contentStartPosition+"px":this.dom.content.style.left=contentStartPosition+"px"}},RangeItem.prototype.repositionY=function(){var orientation=this.options.orientation.item,box=this.dom.box;"top"==orientation?box.style.top=this.top+"px":box.style.top=this.parent.height-this.top-this.height+"px"},RangeItem.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var dragLeft=document.createElement("div");dragLeft.className="vis-drag-left",dragLeft.dragLeftItem=this,this.dom.box.appendChild(dragLeft),this.dom.dragLeft=dragLeft}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},RangeItem.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var dragRight=document.createElement("div");dragRight.className="vis-drag-right",dragRight.dragRightItem=this,this.dom.box.appendChild(dragRight),this.dom.dragRight=dragRight}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},module.exports=RangeItem},function(module,exports,__webpack_require__){function Item(data,conversion,options){this.id=null,this.parent=null,this.data=data,this.dom=null,this.conversion=conversion||{},this.options=options||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this.data&&this.data.hasOwnProperty("editable")&&"boolean"==typeof this.data.editable&&(this.editable=data.editable)}var Hammer=__webpack_require__(20),util=__webpack_require__(1);Item.prototype.stack=!0,Item.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},Item.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},Item.prototype.setData=function(data){var groupChanged=void 0!=data.group&&this.data.group!=data.group;groupChanged&&this.parent.itemSet._moveToGroup(this,data.group),data.hasOwnProperty("editable")&&"boolean"==typeof data.editable&&(this.editable=data.editable),this.data=data,this.dirty=!0,this.displayed&&this.redraw()},Item.prototype.setParent=function(parent){this.displayed?(this.hide(),this.parent=parent,this.parent&&this.show()):this.parent=parent},Item.prototype.isVisible=function(range){return!1},Item.prototype.show=function(){return!1},Item.prototype.hide=function(){return!1},Item.prototype.redraw=function(){},Item.prototype.repositionX=function(){},Item.prototype.repositionY=function(){},Item.prototype._repaintDeleteButton=function(anchor){var editable=(this.options.editable.remove||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&editable&&!this.dom.deleteButton){var me=this,deleteButton=document.createElement("div");this.options.rtl?deleteButton.className="vis-delete-rtl":deleteButton.className="vis-delete",deleteButton.title="Delete this item",new Hammer(deleteButton).on("tap",function(event){event.stopPropagation(),me.parent.removeFromDataSet(me)}),anchor.appendChild(deleteButton),this.dom.deleteButton=deleteButton}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},Item.prototype._updateContents=function(element){var content;if(this.options.template){var itemData=this.parent.itemSet.itemsData.get(this.id);content=this.options.template(itemData)}else content=this.data.content;var changed=this._contentToString(this.content)!==this._contentToString(content);if(changed){if(content instanceof Element)element.innerHTML="",element.appendChild(content);else if(void 0!=content)element.innerHTML=content;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=content}},Item.prototype._updateTitle=function(element){null!=this.data.title?element.title=this.data.title||"":element.removeAttribute("vis-title")},Item.prototype._updateDataAttributes=function(element){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var attributes=[];if(Array.isArray(this.options.dataAttributes))attributes=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;attributes=Object.keys(this.data)}for(var i=0;i<attributes.length;i++){var name=attributes[i],value=this.data[name];null!=value?element.setAttribute("data-"+name,value):element.removeAttribute("data-"+name)}}},Item.prototype._updateStyle=function(element){this.style&&(util.removeCssText(element,this.style),this.style=null),this.data.style&&(util.addCssText(element,this.data.style),this.style=this.data.style)},Item.prototype._contentToString=function(content){return"string"==typeof content?content:content&&"outerHTML"in content?content.outerHTML:content},Item.prototype.getWidthLeft=function(){return 0},Item.prototype.getWidthRight=function(){return 0},module.exports=Item},function(module,exports,__webpack_require__){function BackgroundGroup(groupId,data,itemSet){Group.call(this,groupId,data,itemSet),this.width=0,this.height=0,this.top=0,this.left=0}var Group=(__webpack_require__(1),__webpack_require__(36));BackgroundGroup.prototype=Object.create(Group.prototype),BackgroundGroup.prototype.redraw=function(range,margin,restack){var resized=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,range),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var i=0,ii=this.visibleItems.length;i<ii;i++){var item=this.visibleItems[i];item.repositionY(margin)}return resized},BackgroundGroup.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},module.exports=BackgroundGroup},function(module,exports,__webpack_require__){function BoxItem(data,conversion,options){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=options,data&&void 0==data.start)throw new Error('Property "start" missing in item '+data);Item.call(this,data,conversion,options)}var Item=__webpack_require__(39);__webpack_require__(1);BoxItem.prototype=new Item(null,null,null),BoxItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval},BoxItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.box=document.createElement("DIV"),dom.content=document.createElement("DIV"),dom.content.className="vis-item-content",dom.box.appendChild(dom.content),dom.line=document.createElement("DIV"),dom.line.className="vis-line",dom.dot=document.createElement("DIV"),dom.dot.className="vis-dot",dom.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.box.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.box)}if(!dom.line.parentNode){var background=this.parent.dom.background;if(!background)throw new Error("Cannot redraw item: parent has no background container element");background.appendChild(dom.line)}if(!dom.dot.parentNode){var axis=this.parent.dom.axis;if(!background)throw new Error("Cannot redraw item: parent has no axis container element");axis.appendChild(dom.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var editable=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,className=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(editable?" vis-editable":" vis-readonly");dom.box.className="vis-item vis-box"+className,dom.line.className="vis-item vis-line"+className,dom.dot.className="vis-item vis-dot"+className,this.props.dot.height=dom.dot.offsetHeight,this.props.dot.width=dom.dot.offsetWidth,this.props.line.width=dom.line.offsetWidth,this.width=dom.box.offsetWidth,this.height=dom.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(dom.box)},BoxItem.prototype.show=function(){this.displayed||this.redraw()},BoxItem.prototype.hide=function(){if(this.displayed){var dom=this.dom;dom.box.parentNode&&dom.box.parentNode.removeChild(dom.box),dom.line.parentNode&&dom.line.parentNode.removeChild(dom.line),dom.dot.parentNode&&dom.dot.parentNode.removeChild(dom.dot),this.displayed=!1}},BoxItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start),align=this.options.align;"right"==align?this.options.rtl?(this.right=start-this.width,this.dom.box.style.right=this.right+"px",
this.dom.line.style.right=start-this.props.line.width+"px",this.dom.dot.style.right=start-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=start-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=start-this.props.line.width+"px",this.dom.dot.style.left=start-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==align?this.options.rtl?(this.right=start,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=start+"px",this.dom.dot.style.right=start+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=start,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=start+"px",this.dom.dot.style.left=start+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=start-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=start-this.props.line.width+"px",this.dom.dot.style.right=start-this.props.dot.width/2+"px"):(this.left=start-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=start-this.props.line.width/2+"px",this.dom.dot.style.left=start-this.props.dot.width/2+"px")},BoxItem.prototype.repositionY=function(){var orientation=this.options.orientation.item,box=this.dom.box,line=this.dom.line,dot=this.dom.dot;if("top"==orientation)box.style.top=(this.top||0)+"px",line.style.top="0",line.style.height=this.parent.top+this.top+1+"px",line.style.bottom="";else{var itemSetHeight=this.parent.itemSet.props.height,lineHeight=itemSetHeight-this.parent.top-this.parent.height+this.top;box.style.top=(this.parent.height-this.top-this.height||0)+"px",line.style.top=itemSetHeight-lineHeight+"px",line.style.bottom="0"}dot.style.top=-this.props.dot.height/2+"px"},BoxItem.prototype.getWidthLeft=function(){return this.width/2},BoxItem.prototype.getWidthRight=function(){return this.width/2},module.exports=BoxItem},function(module,exports,__webpack_require__){function PointItem(data,conversion,options){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=options,data&&void 0==data.start)throw new Error('Property "start" missing in item '+data);Item.call(this,data,conversion,options)}var Item=__webpack_require__(39);PointItem.prototype=new Item(null,null,null),PointItem.prototype.isVisible=function(range){var interval=(range.end-range.start)/4;return this.data.start>range.start-interval&&this.data.start<range.end+interval},PointItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.point=document.createElement("div"),dom.content=document.createElement("div"),dom.content.className="vis-item-content",dom.point.appendChild(dom.content),dom.dot=document.createElement("div"),dom.point.appendChild(dom.dot),dom.point["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.point.parentNode){var foreground=this.parent.dom.foreground;if(!foreground)throw new Error("Cannot redraw item: parent has no foreground container element");foreground.appendChild(dom.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var editable=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,className=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(editable?" vis-editable":" vis-readonly");dom.point.className="vis-item vis-point"+className,dom.dot.className="vis-item vis-dot"+className,this.props.dot.width=dom.dot.offsetWidth,this.props.dot.height=dom.dot.offsetHeight,this.props.content.height=dom.content.offsetHeight,this.options.rtl?dom.content.style.marginRight=2*this.props.dot.width+"px":dom.content.style.marginLeft=2*this.props.dot.width+"px",this.width=dom.point.offsetWidth,this.height=dom.point.offsetHeight,dom.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?dom.dot.style.right=this.props.dot.width/2+"px":dom.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(dom.point)},PointItem.prototype.show=function(){this.displayed||this.redraw()},PointItem.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},PointItem.prototype.repositionX=function(){var start=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=start-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=start-this.props.dot.width,this.dom.point.style.left=this.left+"px")},PointItem.prototype.repositionY=function(){var orientation=this.options.orientation.item,point=this.dom.point;"top"==orientation?point.style.top=this.top+"px":point.style.top=this.parent.height-this.top-this.height+"px"},PointItem.prototype.getWidthLeft=function(){return this.props.dot.width},PointItem.prototype.getWidthRight=function(){return this.props.dot.width},module.exports=PointItem},function(module,exports,__webpack_require__){function BackgroundItem(data,conversion,options){if(this.props={content:{width:0}},this.overflow=!1,data){if(void 0==data.start)throw new Error('Property "start" missing in item '+data.id);if(void 0==data.end)throw new Error('Property "end" missing in item '+data.id)}Item.call(this,data,conversion,options)}var Item=(__webpack_require__(20),__webpack_require__(39)),BackgroundGroup=__webpack_require__(40),RangeItem=__webpack_require__(38);BackgroundItem.prototype=new Item(null,null,null),BackgroundItem.prototype.baseClassName="vis-item vis-background",BackgroundItem.prototype.stack=!1,BackgroundItem.prototype.isVisible=function(range){return this.data.start<range.end&&this.data.end>range.start},BackgroundItem.prototype.redraw=function(){var dom=this.dom;if(dom||(this.dom={},dom=this.dom,dom.box=document.createElement("div"),dom.frame=document.createElement("div"),dom.frame.className="vis-item-overflow",dom.box.appendChild(dom.frame),dom.content=document.createElement("div"),dom.content.className="vis-item-content",dom.frame.appendChild(dom.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!dom.box.parentNode){var background=this.parent.dom.background;if(!background)throw new Error("Cannot redraw item: parent has no background container element");background.appendChild(dom.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var className=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");dom.box.className=this.baseClassName+className,this.overflow="hidden"!==window.getComputedStyle(dom.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},BackgroundItem.prototype.show=RangeItem.prototype.show,BackgroundItem.prototype.hide=RangeItem.prototype.hide,BackgroundItem.prototype.repositionX=RangeItem.prototype.repositionX,BackgroundItem.prototype.repositionY=function(margin){var onTop="top"===this.options.orientation.item;this.dom.content.style.top=onTop?"":"0",this.dom.content.style.bottom=onTop?"0":"";var height;if(void 0!==this.data.subgroup){var itemSubgroup=this.data.subgroup,subgroups=this.parent.subgroups,subgroupIndex=subgroups[itemSubgroup].index;if(1==onTop){height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical,height+=0==subgroupIndex?margin.axis-.5*margin.item.vertical:0;var newTop=this.parent.top;for(var subgroup in subgroups)subgroups.hasOwnProperty(subgroup)&&1==subgroups[subgroup].visible&&subgroups[subgroup].index<subgroupIndex&&(newTop+=subgroups[subgroup].height+margin.item.vertical);newTop+=0!=subgroupIndex?margin.axis-.5*margin.item.vertical:0,this.dom.box.style.top=newTop+"px",this.dom.box.style.bottom=""}else{var newTop=this.parent.top,totalHeight=0;for(var subgroup in subgroups)if(subgroups.hasOwnProperty(subgroup)&&1==subgroups[subgroup].visible){var newHeight=subgroups[subgroup].height+margin.item.vertical;totalHeight+=newHeight,subgroups[subgroup].index>subgroupIndex&&(newTop+=newHeight)}height=this.parent.subgroups[itemSubgroup].height+margin.item.vertical,this.dom.box.style.top=this.parent.height-totalHeight+newTop+"px",this.dom.box.style.bottom=""}}else this.parent instanceof BackgroundGroup?(height=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=onTop?"0":"",this.dom.box.style.bottom=onTop?"":"0"):(height=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=height+"px"},module.exports=BackgroundItem},function(module,exports,__webpack_require__){function TimeAxis(body,options){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:TimeStep.FORMAT,moment:moment,timeAxis:null},this.options=util.extend({},this.defaultOptions),this.body=body,this._create(),this.setOptions(options)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},util=__webpack_require__(1),Component=__webpack_require__(31),TimeStep=__webpack_require__(35),DateUtil=__webpack_require__(32),moment=__webpack_require__(2);TimeAxis.prototype=new Component,TimeAxis.prototype.setOptions=function(options){options&&(util.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,options),util.selectiveDeepExtend(["format"],this.options,options),"orientation"in options&&("string"==typeof options.orientation?this.options.orientation.axis=options.orientation:"object"===_typeof(options.orientation)&&"axis"in options.orientation&&(this.options.orientation.axis=options.orientation.axis)),"locale"in options&&("function"==typeof moment.locale?moment.locale(options.locale):moment.lang(options.locale)))},TimeAxis.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},TimeAxis.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},TimeAxis.prototype.redraw=function(){var props=this.props,foreground=this.dom.foreground,background=this.dom.background,parent="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,parentChanged=foreground.parentNode!==parent;this._calculateCharSize();var showMinorLabels=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,showMajorLabels=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0,props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0,props.height=props.minorLabelHeight+props.majorLabelHeight,props.width=foreground.offsetWidth,props.minorLineHeight=this.body.domProps.root.height-props.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),props.minorLineWidth=1,props.majorLineHeight=props.minorLineHeight+props.majorLabelHeight,props.majorLineWidth=1;var foregroundNextSibling=foreground.nextSibling,backgroundNextSibling=background.nextSibling;return foreground.parentNode&&foreground.parentNode.removeChild(foreground),background.parentNode&&background.parentNode.removeChild(background),foreground.style.height=this.props.height+"px",this._repaintLabels(),foregroundNextSibling?parent.insertBefore(foreground,foregroundNextSibling):parent.appendChild(foreground),backgroundNextSibling?this.body.dom.backgroundVertical.insertBefore(background,backgroundNextSibling):this.body.dom.backgroundVertical.appendChild(background),this._isResized()||parentChanged},TimeAxis.prototype._repaintLabels=function(){var orientation=this.options.orientation.axis,start=util.convert(this.body.range.start,"Number"),end=util.convert(this.body.range.end,"Number"),timeLabelsize=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),minimumStep=timeLabelsize-DateUtil.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,timeLabelsize);minimumStep-=this.body.util.toTime(0).valueOf();var step=new TimeStep(new Date(start),new Date(end),minimumStep,this.body.hiddenDates);step.setMoment(this.options.moment),this.options.format&&step.setFormat(this.options.format),this.options.timeAxis&&step.setScale(this.options.timeAxis),this.step=step;var dom=this.dom;dom.redundant.lines=dom.lines,dom.redundant.majorTexts=dom.majorTexts,dom.redundant.minorTexts=dom.minorTexts,dom.lines=[],dom.majorTexts=[],dom.minorTexts=[];var current,next,x,xNext,isMajor,nextIsMajor,prevWidth,line,labelMinor,className,width=0,xFirstMajorLabel=void 0,count=0,MAX=1e3;for(step.start(),next=step.getCurrent(),xNext=this.body.util.toScreen(next);step.hasNext()&&count<MAX;){count++,isMajor=step.isMajor(),className=step.getClassName(),labelMinor=step.getLabelMinor(),current=next,x=xNext,step.next(),next=step.getCurrent(),nextIsMajor=step.isMajor(),xNext=this.body.util.toScreen(next),prevWidth=width,width=xNext-x;var showMinorGrid=width>=.4*prevWidth;if(this.options.showMinorLabels&&showMinorGrid){var label=this._repaintMinorText(x,labelMinor,orientation,className);label.style.width=width+"px"}isMajor&&this.options.showMajorLabels?(x>0&&(void 0==xFirstMajorLabel&&(xFirstMajorLabel=x),label=this._repaintMajorText(x,step.getLabelMajor(),orientation,className)),line=this._repaintMajorLine(x,width,orientation,className)):showMinorGrid?line=this._repaintMinorLine(x,width,orientation,className):line&&(line.style.width=parseInt(line.style.width)+width+"px")}if(count!==MAX||warnedForOverflow||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to "+MAX+" lines."),warnedForOverflow=!0),this.options.showMajorLabels){var leftTime=this.body.util.toTime(0),leftText=step.getLabelMajor(leftTime),widthText=leftText.length*(this.props.majorCharWidth||10)+10;(void 0==xFirstMajorLabel||widthText<xFirstMajorLabel)&&this._repaintMajorText(0,leftText,orientation,className)}util.forEach(this.dom.redundant,function(arr){for(;arr.length;){var elem=arr.pop();elem&&elem.parentNode&&elem.parentNode.removeChild(elem)}})},TimeAxis.prototype._repaintMinorText=function(x,text,orientation,className){var label=this.dom.redundant.minorTexts.shift();if(!label){var content=document.createTextNode("");label=document.createElement("div"),label.appendChild(content),this.dom.foreground.appendChild(label)}return this.dom.minorTexts.push(label),label.childNodes[0].nodeValue=text,label.style.top="top"==orientation?this.props.majorLabelHeight+"px":"0",this.options.rtl?(label.style.left="",label.style.right=x+"px"):label.style.left=x+"px",label.className="vis-text vis-minor "+className,label},TimeAxis.prototype._repaintMajorText=function(x,text,orientation,className){var label=this.dom.redundant.majorTexts.shift();if(!label){var content=document.createTextNode(text);label=document.createElement("div"),label.appendChild(content),this.dom.foreground.appendChild(label)}return this.dom.majorTexts.push(label),label.childNodes[0].nodeValue=text,label.className="vis-text vis-major "+className,label.style.top="top"==orientation?"0":this.props.minorLabelHeight+"px",this.options.rtl?(label.style.left="",label.style.right=x+"px"):label.style.left=x+"px",label},TimeAxis.prototype._repaintMinorLine=function(x,width,orientation,className){var line=this.dom.redundant.lines.shift();line||(line=document.createElement("div"),this.dom.background.appendChild(line)),this.dom.lines.push(line);var props=this.props;return"top"==orientation?line.style.top=props.majorLabelHeight+"px":line.style.top=this.body.domProps.top.height+"px",line.style.height=props.minorLineHeight+"px",this.options.rtl?(line.style.left="",line.style.right=x-props.minorLineWidth/2+"px",line.className="vis-grid vis-vertical-rtl vis-minor "+className):(line.style.left=x-props.minorLineWidth/2+"px",line.className="vis-grid vis-vertical vis-minor "+className),line.style.width=width+"px",line},TimeAxis.prototype._repaintMajorLine=function(x,width,orientation,className){var line=this.dom.redundant.lines.shift();line||(line=document.createElement("div"),this.dom.background.appendChild(line)),this.dom.lines.push(line);var props=this.props;return"top"==orientation?line.style.top="0":line.style.top=this.body.domProps.top.height+"px",this.options.rtl?(line.style.left="",line.style.right=x-props.majorLineWidth/2+"px",line.className="vis-grid vis-vertical-rtl vis-major "+className):(line.style.left=x-props.majorLineWidth/2+"px",line.className="vis-grid vis-vertical vis-major "+className),line.style.height=props.majorLineHeight+"px",line.style.width=width+"px",line},TimeAxis.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var warnedForOverflow=!1;module.exports=TimeAxis},function(module,exports,__webpack_require__){function Activator(container){this.active=!1,this.dom={container:container},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Hammer(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var me=this,events=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];events.forEach(function(event){me.hammer.on(event,function(event){event.stopPropagation()})}),document&&document.body&&(this.onClick=function(event){_hasParent(event.target,container)||me.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=keycharm(),this.escListener=this.deactivate.bind(this)}function _hasParent(element,parent){for(;element;){if(element===parent)return!0;element=element.parentNode}return!1}var keycharm=__webpack_require__(23),Emitter=__webpack_require__(13),Hammer=__webpack_require__(20),util=__webpack_require__(1);Emitter(Activator.prototype),Activator.current=null,Activator.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},Activator.prototype.activate=function(){Activator.current&&Activator.current.deactivate(),Activator.current=this,this.active=!0,this.dom.overlay.style.display="none",util.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},Activator.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",util.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Activator.prototype._onTapOverlay=function(event){this.activate(),event.stopPropagation()},module.exports=Activator},function(module,exports,__webpack_require__){function CustomTime(body,options){this.body=body,this.defaultOptions={moment:moment,locales:locales,locale:"en",id:void 0,title:void 0},this.options=util.extend({},this.defaultOptions),options&&options.time?this.customTime=options.time:this.customTime=new Date,this.eventParams={},this.setOptions(options),this._create()}var Hammer=__webpack_require__(20),util=__webpack_require__(1),Component=__webpack_require__(31),moment=__webpack_require__(2),locales=__webpack_require__(47);CustomTime.prototype=new Component,CustomTime.prototype.setOptions=function(options){options&&util.selectiveExtend(["moment","locale","locales","id"],this.options,options)},CustomTime.prototype._create=function(){var bar=document.createElement("div");bar["custom-time"]=this,bar.className="vis-custom-time "+(this.options.id||""),bar.style.position="absolute",bar.style.top="0px",bar.style.height="100%",this.bar=bar;var drag=document.createElement("div");drag.style.position="relative",drag.style.top="0px",drag.style.left="-10px",drag.style.height="100%",drag.style.width="20px",bar.appendChild(drag),this.hammer=new Hammer(drag),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:Hammer.DIRECTION_HORIZONTAL})},CustomTime.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},CustomTime.prototype.redraw=function(){var parent=this.body.dom.backgroundVertical;this.bar.parentNode!=parent&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),parent.appendChild(this.bar));var x=this.body.util.toScreen(this.customTime),locale=this.options.locales[this.options.locale];locale||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),locale=this.options.locales.en);var title=this.options.title;return void 0===title&&(title=locale.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"),title=title.charAt(0).toUpperCase()+title.substring(1)),this.bar.style.left=x+"px",this.bar.title=title,!1},CustomTime.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},CustomTime.prototype.setCustomTime=function(time){this.customTime=util.convert(time,"Date"),this.redraw()},CustomTime.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},CustomTime.prototype.setCustomTitle=function(title){this.options.title=title},CustomTime.prototype._onDragStart=function(event){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,event.stopPropagation()},CustomTime.prototype._onDrag=function(event){if(this.eventParams.dragging){var x=this.body.util.toScreen(this.eventParams.customTime)+event.deltaX,time=this.body.util.toTime(x);this.setCustomTime(time),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf())}),event.stopPropagation()}},CustomTime.prototype._onDragEnd=function(event){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf())}),event.stopPropagation())},CustomTime.customTimeFromTarget=function(event){for(var target=event.target;target;){if(target.hasOwnProperty("custom-time"))return target["custom-time"];target=target.parentNode}return null},module.exports=CustomTime},function(module,exports){exports.en={current:"current",time:"time"},exports.en_EN=exports.en,exports.en_US=exports.en,exports.nl={current:"huidige",time:"tijd"},exports.nl_NL=exports.nl,exports.nl_BE=exports.nl},function(module,exports,__webpack_require__){function CurrentTime(body,options){this.body=body,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:moment,locales:locales,locale:"en"},this.options=util.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(options)}var util=__webpack_require__(1),Component=__webpack_require__(31),moment=__webpack_require__(2),locales=__webpack_require__(47);CurrentTime.prototype=new Component,CurrentTime.prototype._create=function(){var bar=document.createElement("div");bar.className="vis-current-time",bar.style.position="absolute",bar.style.top="0px",bar.style.height="100%",this.bar=bar},CurrentTime.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},CurrentTime.prototype.setOptions=function(options){options&&util.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,options)},CurrentTime.prototype.redraw=function(){if(this.options.showCurrentTime){var parent=this.body.dom.backgroundVertical;this.bar.parentNode!=parent&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),parent.appendChild(this.bar),this.start());var now=this.options.moment((new Date).valueOf()+this.offset),x=this.body.util.toScreen(now),locale=this.options.locales[this.options.locale];locale||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),locale=this.options.locales.en);var title=locale.current+" "+locale.time+": "+now.format("dddd, MMMM Do YYYY, H:mm:ss");title=title.charAt(0).toUpperCase()+title.substring(1),this.options.rtl?this.bar.style.right=x+"px":this.bar.style.left=x+"px",this.bar.title=title}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},CurrentTime.prototype.start=function(){function update(){me.stop();var scale=me.body.range.conversion(me.body.domProps.center.width).scale,interval=1/scale/10;interval<30&&(interval=30),interval>1e3&&(interval=1e3),me.redraw(),me.body.emitter.emit("currentTimeTick"),me.currentTimeTimer=setTimeout(update,interval)}var me=this;update()},CurrentTime.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},CurrentTime.prototype.setCurrentTime=function(time){var t=util.convert(time,"Date").valueOf(),now=(new Date).valueOf();this.offset=t-now,this.redraw()},CurrentTime.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},module.exports=CurrentTime},function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var string="string",boolean="boolean",number="number",array="array",date="date",object="object",dom="dom",moment="moment",any="any",allOptions={configure:{enabled:{boolean:boolean},filter:{boolean:boolean,function:"function"},container:{dom:dom},__type__:{object:object,boolean:boolean,function:"function"}},align:{string:string},rtl:{boolean:boolean,undefined:"undefined"},autoResize:{boolean:boolean},throttleRedraw:{number:number},clickToUse:{boolean:boolean},dataAttributes:{string:string,array:array},editable:{add:{boolean:boolean,undefined:"undefined"},remove:{boolean:boolean,undefined:"undefined"},updateGroup:{boolean:boolean,undefined:"undefined"},updateTime:{boolean:boolean,undefined:"undefined"},__type__:{boolean:boolean,object:object}},end:{number:number,date:date,string:string,moment:moment},format:{minorLabels:{millisecond:{string:string,undefined:"undefined"},second:{string:string,undefined:"undefined"},minute:{string:string,undefined:"undefined"},hour:{string:string,undefined:"undefined"},weekday:{string:string,undefined:"undefined"},day:{string:string,undefined:"undefined"},month:{string:string,undefined:"undefined"},year:{string:string,undefined:"undefined"},__type__:{object:object}},majorLabels:{millisecond:{string:string,undefined:"undefined"},second:{string:string,undefined:"undefined"},minute:{string:string,undefined:"undefined"},hour:{string:string,undefined:"undefined"},weekday:{string:string,undefined:"undefined"},day:{string:string,undefined:"undefined"},month:{string:string,undefined:"undefined"},year:{string:string,undefined:"undefined"},__type__:{object:object}},__type__:{object:object}},moment:{function:"function"},groupOrder:{string:string,function:"function"},groupEditable:{add:{boolean:boolean,undefined:"undefined"},remove:{boolean:boolean,undefined:"undefined"},order:{boolean:boolean,undefined:"undefined"},__type__:{boolean:boolean,object:object}},groupOrderSwap:{function:"function"},height:{string:string,number:number},hiddenDates:{start:{date:date,number:number,string:string,moment:moment},end:{date:date,number:number,string:string,moment:moment},repeat:{string:string},__type__:{object:object,array:array}},itemsAlwaysDraggable:{boolean:boolean},locale:{string:string},locales:{__any__:{any:any},__type__:{object:object}},margin:{axis:{number:number},item:{horizontal:{number:number,undefined:"undefined"},vertical:{number:number,undefined:"undefined"},__type__:{object:object,number:number}},__type__:{object:object,number:number}},max:{date:date,number:number,string:string,moment:moment},maxHeight:{number:number,string:string},maxMinorChars:{number:number},min:{date:date,number:number,string:string,moment:moment},minHeight:{number:number,string:string},moveable:{boolean:boolean},multiselect:{boolean:boolean},multiselectPerGroup:{boolean:boolean},onAdd:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},order:{function:"function"},orientation:{axis:{string:string,undefined:"undefined"},item:{string:string,undefined:"undefined"},__type__:{string:string,object:object}},selectable:{boolean:boolean},showCurrentTime:{boolean:boolean},showMajorLabels:{boolean:boolean},showMinorLabels:{boolean:boolean},stack:{boolean:boolean},snap:{function:"function",null:"null"},start:{date:date,number:number,string:string,moment:moment},template:{function:"function"},groupTemplate:{function:"function"},timeAxis:{scale:{string:string,undefined:"undefined"},step:{number:number,undefined:"undefined"},__type__:{object:object}},type:{string:string},width:{string:string,number:number},zoomable:{boolean:boolean},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:number},zoomMin:{number:number},__type__:{object:object}},configureOptions={global:{align:["center","left","right"],direction:!1,autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,start:"",type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}};exports.allOptions=allOptions,exports.configureOptions=configureOptions},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{
default:obj}}function Graph2d(container,items,groups,options){if(!(Array.isArray(groups)||groups instanceof DataSet||groups instanceof DataView)&&groups instanceof Object){var forthArgument=options;options=groups,groups=forthArgument}var me=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:moment,width:null,height:null,maxHeight:null,minHeight:null},this.options=util.deepExtend({},this.defaultOptions),this._create(container),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:me._toScreen.bind(me),toGlobalScreen:me._toGlobalScreen.bind(me),toTime:me._toTime.bind(me),toGlobalTime:me._toGlobalTime.bind(me)}},this.range=new Range(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new TimeAxis(this.body),this.components.push(this.timeAxis),this.currentTime=new CurrentTime(this.body),this.components.push(this.currentTime),this.linegraph=new LineGraph(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(event){me.emit("click",me.getEventProperties(event))}),this.on("doubletap",function(event){me.emit("doubleClick",me.getEventProperties(event))}),this.dom.root.oncontextmenu=function(event){me.emit("contextmenu",me.getEventProperties(event))},options&&this.setOptions(options),groups&&this.setGroups(groups),items&&this.setItems(items),this._redraw()}var _Configurator=__webpack_require__(26),_Configurator2=_interopRequireDefault(_Configurator),_Validator=__webpack_require__(29),_Validator2=_interopRequireDefault(_Validator),moment=(__webpack_require__(13),__webpack_require__(20),__webpack_require__(2)),util=__webpack_require__(1),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),Range=__webpack_require__(30),Core=__webpack_require__(33),TimeAxis=__webpack_require__(44),CurrentTime=__webpack_require__(48),CustomTime=__webpack_require__(46),LineGraph=__webpack_require__(51),printStyle=__webpack_require__(29).printStyle,allOptions=__webpack_require__(59).allOptions,configureOptions=__webpack_require__(59).configureOptions;Graph2d.prototype=new Core,Graph2d.prototype.setOptions=function(options){var errorFound=_Validator2.default.validate(options,allOptions);errorFound===!0&&console.log("%cErrors have been found in the supplied options object.",printStyle),Core.prototype.setOptions.call(this,options)},Graph2d.prototype.setItems=function(items){var newDataSet,initialLoad=null==this.itemsData;if(newDataSet=items?items instanceof DataSet||items instanceof DataView?items:new DataSet(items,{type:{start:"Date",end:"Date"}}):null,this.itemsData=newDataSet,this.linegraph&&this.linegraph.setItems(newDataSet),initialLoad)if(void 0!=this.options.start||void 0!=this.options.end){var start=void 0!=this.options.start?this.options.start:null,end=void 0!=this.options.end?this.options.end:null;this.setWindow(start,end,{animation:!1})}else this.fit({animation:!1})},Graph2d.prototype.setGroups=function(groups){var newDataSet;newDataSet=groups?groups instanceof DataSet||groups instanceof DataView?groups:new DataSet(groups):null,this.groupsData=newDataSet,this.linegraph.setGroups(newDataSet)},Graph2d.prototype.getLegend=function(groupId,width,height){return void 0===width&&(width=15),void 0===height&&(height=15),void 0!==this.linegraph.groups[groupId]?this.linegraph.groups[groupId].getLegend(width,height):"cannot find group:'"+groupId+"'"},Graph2d.prototype.isGroupVisible=function(groupId){return void 0!==this.linegraph.groups[groupId]&&(this.linegraph.groups[groupId].visible&&(void 0===this.linegraph.options.groups.visibility[groupId]||1==this.linegraph.options.groups.visibility[groupId]))},Graph2d.prototype.getDataRange=function(){var min=null,max=null;for(var groupId in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(groupId)&&1==this.linegraph.groups[groupId].visible)for(var i=0;i<this.linegraph.groups[groupId].itemsData.length;i++){var item=this.linegraph.groups[groupId].itemsData[i],value=util.convert(item.x,"Date").valueOf();min=null==min?value:min>value?value:min,max=null==max?value:max<value?value:max}return{min:null!=min?new Date(min):null,max:null!=max?new Date(max):null}},Graph2d.prototype.getEventProperties=function(event){var clientX=event.center?event.center.x:event.clientX,clientY=event.center?event.center.y:event.clientY,x=clientX-util.getAbsoluteLeft(this.dom.centerContainer),y=clientY-util.getAbsoluteTop(this.dom.centerContainer),time=this._toTime(x),customTime=CustomTime.customTimeFromTarget(event),element=util.getTarget(event),what=null;util.hasParent(element,this.timeAxis.dom.foreground)?what="axis":this.timeAxis2&&util.hasParent(element,this.timeAxis2.dom.foreground)?what="axis":util.hasParent(element,this.linegraph.yAxisLeft.dom.frame)?what="data-axis":util.hasParent(element,this.linegraph.yAxisRight.dom.frame)?what="data-axis":util.hasParent(element,this.linegraph.legendLeft.dom.frame)?what="legend":util.hasParent(element,this.linegraph.legendRight.dom.frame)?what="legend":null!=customTime?what="custom-time":util.hasParent(element,this.currentTime.bar)?what="current-time":util.hasParent(element,this.dom.center)&&(what="background");var value=[],yAxisLeft=this.linegraph.yAxisLeft,yAxisRight=this.linegraph.yAxisRight;return yAxisLeft.hidden||value.push(yAxisLeft.screenToValue(y)),yAxisRight.hidden||value.push(yAxisRight.screenToValue(y)),{event:event,what:what,pageX:event.srcEvent?event.srcEvent.pageX:event.pageX,pageY:event.srcEvent?event.srcEvent.pageY:event.pageY,x:x,y:y,time:time,value:value}},Graph2d.prototype._createConfigurator=function(){return new _Configurator2.default(this,this.dom.container,configureOptions)},module.exports=Graph2d},function(module,exports,__webpack_require__){function LineGraph(body,options){this.id=util.randomUUID(),this.body=body,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=util.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var me=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(event,params,senderId){me._onAdd(params.items)},update:function(event,params,senderId){me._onUpdate(params.items)},remove:function(event,params,senderId){me._onRemove(params.items)}},this.groupListeners={add:function(event,params,senderId){me._onAddGroups(params.items)},update:function(event,params,senderId){me._onUpdateGroups(params.items)},remove:function(event,params,senderId){me._onRemoveGroups(params.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(options),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){me.lastStart=me.body.range.start,me.svg.style.left=util.option.asSize(-me.props.width),me.forceGraphUpdate=!0,me.redraw.call(me)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},util=__webpack_require__(1),DOMutil=__webpack_require__(8),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),Component=__webpack_require__(31),DataAxis=__webpack_require__(52),GraphGroup=__webpack_require__(54),Legend=__webpack_require__(58),Bars=__webpack_require__(55),Lines=__webpack_require__(57),Points=__webpack_require__(56),UNGROUPED="__ungrouped__";LineGraph.prototype=new Component,LineGraph.prototype._create=function(){var frame=document.createElement("div");frame.className="vis-line-graph",this.dom.frame=frame,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",frame.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new DataAxis(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new Legend(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new Legend(this.body,this.options.legend,"right",this.options.groups),this.show()},LineGraph.prototype.setOptions=function(options){if(options){var fields=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];void 0===options.graphHeight&&void 0!==options.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==options.graphHeight&&parseInt((options.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),util.selectiveDeepExtend(fields,this.options,options),util.mergeOptions(this.options,options,"interpolation"),util.mergeOptions(this.options,options,"drawPoints"),util.mergeOptions(this.options,options,"shaded"),util.mergeOptions(this.options,options,"legend"),options.interpolation&&"object"==_typeof(options.interpolation)&&options.interpolation.parametrization&&("uniform"==options.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==options.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==options.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==options.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(UNGROUPED)&&this.groups[UNGROUPED].setOptions(options)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},LineGraph.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},LineGraph.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},LineGraph.prototype.setItems=function(items){var ids,me=this,oldItemsData=this.itemsData;if(items){if(!(items instanceof DataSet||items instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=items}else this.itemsData=null;if(oldItemsData&&(util.forEach(this.itemListeners,function(callback,event){oldItemsData.off(event,callback)}),ids=oldItemsData.getIds(),this._onRemove(ids)),this.itemsData){var id=this.id;util.forEach(this.itemListeners,function(callback,event){me.itemsData.on(event,callback,id)}),ids=this.itemsData.getIds(),this._onAdd(ids)}},LineGraph.prototype.setGroups=function(groups){var ids,me=this;if(this.groupsData){util.forEach(this.groupListeners,function(callback,event){me.groupsData.off(event,callback)}),ids=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<ids.length;i++)this._removeGroup(ids[i])}if(groups){if(!(groups instanceof DataSet||groups instanceof DataView))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=groups}else this.groupsData=null;if(this.groupsData){var id=this.id;util.forEach(this.groupListeners,function(callback,event){me.groupsData.on(event,callback,id)}),ids=this.groupsData.getIds(),this._onAddGroups(ids)}},LineGraph.prototype._onUpdate=function(ids){this._updateAllGroupData()},LineGraph.prototype._onAdd=function(ids){this._onUpdate(ids)},LineGraph.prototype._onRemove=function(ids){this._onUpdate(ids)},LineGraph.prototype._onUpdateGroups=function(groupIds){this._updateAllGroupData()},LineGraph.prototype._onAddGroups=function(groupIds){this._onUpdateGroups(groupIds)},LineGraph.prototype._onRemoveGroups=function(groupIds){for(var i=0;i<groupIds.length;i++)this._removeGroup(groupIds[i]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},LineGraph.prototype._removeGroup=function(groupId){this.groups.hasOwnProperty(groupId)&&("right"==this.groups[groupId].options.yAxisOrientation?(this.yAxisRight.removeGroup(groupId),this.legendRight.removeGroup(groupId),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(groupId),this.legendLeft.removeGroup(groupId),this.legendLeft.redraw()),delete this.groups[groupId])},LineGraph.prototype._updateGroup=function(group,groupId){this.groups.hasOwnProperty(groupId)?(this.groups[groupId].update(group),"right"==this.groups[groupId].options.yAxisOrientation?(this.yAxisRight.updateGroup(groupId,this.groups[groupId]),this.legendRight.updateGroup(groupId,this.groups[groupId]),this.yAxisLeft.removeGroup(groupId),this.legendLeft.removeGroup(groupId)):(this.yAxisLeft.updateGroup(groupId,this.groups[groupId]),this.legendLeft.updateGroup(groupId,this.groups[groupId]),this.yAxisRight.removeGroup(groupId),this.legendRight.removeGroup(groupId))):(this.groups[groupId]=new GraphGroup(group,groupId,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[groupId].options.yAxisOrientation?(this.yAxisRight.addGroup(groupId,this.groups[groupId]),this.legendRight.addGroup(groupId,this.groups[groupId])):(this.yAxisLeft.addGroup(groupId,this.groups[groupId]),this.legendLeft.addGroup(groupId,this.groups[groupId]))),this.legendLeft.redraw(),this.legendRight.redraw()},LineGraph.prototype._updateAllGroupData=function(){if(null!=this.itemsData){for(var groupsContent={},items=this.itemsData.get(),groupCounts={},i=0;i<items.length;i++){var item=items[i],groupId=item.group;null!==groupId&&void 0!==groupId||(groupId=UNGROUPED),groupCounts.hasOwnProperty(groupId)?groupCounts[groupId]++:groupCounts[groupId]=1}for(var i=0;i<items.length;i++){var item=items[i],groupId=item.group;null!==groupId&&void 0!==groupId||(groupId=UNGROUPED),groupsContent.hasOwnProperty(groupId)||(groupsContent[groupId]=new Array(groupCounts[groupId]));var extended=util.bridgeObject(item);extended.x=util.convert(item.x,"Date"),extended.orginalY=item.y,extended.y=Number(item.y);var index=groupsContent[groupId].length-groupCounts[groupId]--;groupsContent[groupId][index]=extended}for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(groupsContent.hasOwnProperty(groupId)||(groupsContent[groupId]=new Array(0)));for(var groupId in groupsContent)if(groupsContent.hasOwnProperty(groupId))if(0==groupsContent[groupId].length)this.groups.hasOwnProperty(groupId)&&this._removeGroup(groupId);else{var group=void 0;void 0!=this.groupsData&&(group=this.groupsData.get(groupId)),void 0==group&&(group={id:groupId,content:this.options.defaultGroup+groupId}),this._updateGroup(group,groupId),this.groups[groupId].setItems(groupsContent[groupId])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},LineGraph.prototype.redraw=function(){var resized=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,resized=this._isResized()||resized;var visibleInterval=this.body.range.end-this.body.range.start,zoomed=visibleInterval!=this.lastVisibleInterval;if(this.lastVisibleInterval=visibleInterval,1==resized&&(this.svg.style.width=util.option.asSize(3*this.props.width),this.svg.style.left=util.option.asSize(-this.props.width),(this.options.height+"").indexOf("%")==-1&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==resized||1==zoomed||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)resized=this._updateGraph()||resized,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var offset=this.body.range.start-this.lastStart,range=this.body.range.end-this.body.range.start;if(0!=this.props.width){var rangePerPixelInv=this.props.width/range,xOffset=offset*rangePerPixelInv;this.svg.style.left=-this.props.width-xOffset+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),resized},LineGraph.prototype._getSortedGroupIds=function(){var grouplist=[];for(var groupId in this.groups)if(this.groups.hasOwnProperty(groupId)){var group=this.groups[groupId];1!=group.visible||void 0!==this.options.groups.visibility[groupId]&&1!=this.options.groups.visibility[groupId]||grouplist.push({id:groupId,zIndex:group.options.zIndex})}util.insertSort(grouplist,function(a,b){var az=a.zIndex,bz=b.zIndex;return void 0===az&&(az=0),void 0===bz&&(bz=0),az==bz?0:az<bz?-1:1});for(var groupIds=new Array(grouplist.length),i=0;i<grouplist.length;i++)groupIds[i]=grouplist[i].id;return groupIds},LineGraph.prototype._updateGraph=function(){if(DOMutil.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var group,i,groupRanges={},changeCalled=!1,minDate=this.body.util.toGlobalTime(-this.body.domProps.root.width),maxDate=this.body.util.toGlobalTime(2*this.body.domProps.root.width),groupIds=this._getSortedGroupIds();if(groupIds.length>0){var groupsData={};for(this._getRelevantData(groupIds,groupsData,minDate,maxDate),this._applySampling(groupIds,groupsData),i=0;i<groupIds.length;i++)this._convertXcoordinates(groupsData[groupIds[i]]);if(this._getYRanges(groupIds,groupsData,groupRanges),changeCalled=this._updateYAxis(groupIds,groupRanges),1==changeCalled)return DOMutil.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var below=void 0;for(i=0;i<groupIds.length;i++)group=this.groups[groupIds[i]],this.options.stack===!0&&"line"===this.options.style&&(void 0!=group.options.excludeFromStacking&&group.options.excludeFromStacking||(void 0!=below&&(this._stack(groupsData[group.id],groupsData[below.id]),1==group.options.shaded.enabled&&"group"!==group.options.shaded.orientation&&("top"==group.options.shaded.orientation&&"group"!==below.options.shaded.orientation?(below.options.shaded.orientation="group",below.options.shaded.groupId=group.id):(group.options.shaded.orientation="group",group.options.shaded.groupId=below.id))),below=group)),this._convertYcoordinates(groupsData[groupIds[i]],group);var paths={};for(i=0;i<groupIds.length;i++)if(group=this.groups[groupIds[i]],"line"===group.options.style&&1==group.options.shaded.enabled){var dataset=groupsData[groupIds[i]];if(null==dataset||0==dataset.length)continue;if(paths.hasOwnProperty(groupIds[i])||(paths[groupIds[i]]=Lines.calcPath(dataset,group)),"group"===group.options.shaded.orientation){var subGroupId=group.options.shaded.groupId;if(groupIds.indexOf(subGroupId)===-1){console.log(group.id+": Unknown shading group target given:"+subGroupId);continue}paths.hasOwnProperty(subGroupId)||(paths[subGroupId]=Lines.calcPath(groupsData[subGroupId],this.groups[subGroupId])),Lines.drawShading(paths[groupIds[i]],group,paths[subGroupId],this.framework)}else Lines.drawShading(paths[groupIds[i]],group,void 0,this.framework)}for(Bars.draw(groupIds,groupsData,this.framework),i=0;i<groupIds.length;i++)if(group=this.groups[groupIds[i]],groupsData[groupIds[i]].length>0)switch(group.options.style){case"line":paths.hasOwnProperty(groupIds[i])||(paths[groupIds[i]]=Lines.calcPath(groupsData[groupIds[i]],group)),Lines.draw(paths[groupIds[i]],group,this.framework);case"point":case"points":"point"!=group.options.style&&"points"!=group.options.style&&1!=group.options.drawPoints.enabled||Points.draw(groupsData[groupIds[i]],group,this.framework);break;case"bar":}}}return DOMutil.cleanupElements(this.svgElements),!1},LineGraph.prototype._stack=function(data,subData){var index,dx,dy,subPrevPoint,subNextPoint;index=0;for(var j=0;j<data.length;j++){subPrevPoint=void 0,subNextPoint=void 0;for(var k=index;k<subData.length;k++){if(subData[k].x===data[j].x){subPrevPoint=subData[k],subNextPoint=subData[k],index=k;break}if(subData[k].x>data[j].x){subNextPoint=subData[k],subPrevPoint=0==k?subNextPoint:subData[k-1],index=k;break}}void 0===subNextPoint&&(subPrevPoint=subData[subData.length-1],subNextPoint=subData[subData.length-1]),dx=subNextPoint.x-subPrevPoint.x,dy=subNextPoint.y-subPrevPoint.y,0==dx?data[j].y=data[j].orginalY+subNextPoint.y:data[j].y=data[j].orginalY+dy/dx*(data[j].x-subPrevPoint.x)+subPrevPoint.y}},LineGraph.prototype._getRelevantData=function(groupIds,groupsData,minDate,maxDate){var group,i,j,item;if(groupIds.length>0)for(i=0;i<groupIds.length;i++){group=this.groups[groupIds[i]];var itemsData=group.getItems();if(1==group.options.sort){var dateComparator=function(a,b){return a.getTime()==b.getTime()?0:a<b?-1:1},first=Math.max(0,util.binarySearchValue(itemsData,minDate,"x","before",dateComparator)),last=Math.min(itemsData.length,util.binarySearchValue(itemsData,maxDate,"x","after",dateComparator)+1);last<=0&&(last=itemsData.length);var dataContainer=new Array(last-first);for(j=first;j<last;j++)item=group.itemsData[j],dataContainer[j-first]=item;groupsData[groupIds[i]]=dataContainer}else groupsData[groupIds[i]]=group.itemsData}},LineGraph.prototype._applySampling=function(groupIds,groupsData){var group;if(groupIds.length>0)for(var i=0;i<groupIds.length;i++)if(group=this.groups[groupIds[i]],1==group.options.sampling){var dataContainer=groupsData[groupIds[i]];if(dataContainer.length>0){var increment=1,amountOfPoints=dataContainer.length,xDistance=this.body.util.toGlobalScreen(dataContainer[dataContainer.length-1].x)-this.body.util.toGlobalScreen(dataContainer[0].x),pointsPerPixel=amountOfPoints/xDistance;increment=Math.min(Math.ceil(.2*amountOfPoints),Math.max(1,Math.round(pointsPerPixel)));for(var sampledData=new Array(amountOfPoints),j=0;j<amountOfPoints;j+=increment){var idx=Math.round(j/increment);sampledData[idx]=dataContainer[j]}groupsData[groupIds[i]]=sampledData.splice(0,Math.round(amountOfPoints/increment))}}},LineGraph.prototype._getYRanges=function(groupIds,groupsData,groupRanges){var groupData,group,i,options,combinedDataLeft=[],combinedDataRight=[];if(groupIds.length>0){for(i=0;i<groupIds.length;i++)groupData=groupsData[groupIds[i]],options=this.groups[groupIds[i]].options,groupData.length>0&&(group=this.groups[groupIds[i]],options.stack===!0&&"bar"===options.style?"left"===options.yAxisOrientation?combinedDataLeft=combinedDataLeft.concat(group.getItems()):combinedDataRight=combinedDataRight.concat(group.getItems()):groupRanges[groupIds[i]]=group.getYRange(groupData,groupIds[i]));Bars.getStackedYRange(combinedDataLeft,groupRanges,groupIds,"__barStackLeft","left"),Bars.getStackedYRange(combinedDataRight,groupRanges,groupIds,"__barStackRight","right")}},LineGraph.prototype._updateYAxis=function(groupIds,groupRanges){var minVal,maxVal,resized=!1,yAxisLeftUsed=!1,yAxisRightUsed=!1,minLeft=1e9,minRight=1e9,maxLeft=-1e9,maxRight=-1e9;if(groupIds.length>0){for(var i=0;i<groupIds.length;i++){var group=this.groups[groupIds[i]];group&&"right"!=group.options.yAxisOrientation?(yAxisLeftUsed=!0,minLeft=1e9,maxLeft=-1e9):group&&group.options.yAxisOrientation&&(yAxisRightUsed=!0,minRight=1e9,maxRight=-1e9)}for(var i=0;i<groupIds.length;i++)groupRanges.hasOwnProperty(groupIds[i])&&groupRanges[groupIds[i]].ignore!==!0&&(minVal=groupRanges[groupIds[i]].min,maxVal=groupRanges[groupIds[i]].max,"right"!=groupRanges[groupIds[i]].yAxisOrientation?(yAxisLeftUsed=!0,minLeft=minLeft>minVal?minVal:minLeft,maxLeft=maxLeft<maxVal?maxVal:maxLeft):(yAxisRightUsed=!0,minRight=minRight>minVal?minVal:minRight,maxRight=maxRight<maxVal?maxVal:maxRight));1==yAxisLeftUsed&&this.yAxisLeft.setRange(minLeft,maxLeft),1==yAxisRightUsed&&this.yAxisRight.setRange(minRight,maxRight)}resized=this._toggleAxisVisiblity(yAxisLeftUsed,this.yAxisLeft)||resized,resized=this._toggleAxisVisiblity(yAxisRightUsed,this.yAxisRight)||resized,1==yAxisRightUsed&&1==yAxisLeftUsed?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!yAxisLeftUsed,this.yAxisRight.masterAxis=this.yAxisLeft,0==this.yAxisRight.master?(1==yAxisRightUsed?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,resized=this.yAxisLeft.redraw()||resized,resized=this.yAxisRight.redraw()||resized):resized=this.yAxisRight.redraw()||resized;for(var tempGroups=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"],i=0;i<tempGroups.length;i++)groupIds.indexOf(tempGroups[i])!=-1&&groupIds.splice(groupIds.indexOf(tempGroups[i]),1);return resized},LineGraph.prototype._toggleAxisVisiblity=function(axisUsed,axis){var changed=!1;return 0==axisUsed?axis.dom.frame.parentNode&&0==axis.hidden&&(axis.hide(),changed=!0):axis.dom.frame.parentNode||1!=axis.hidden||(axis.show(),changed=!0),changed},LineGraph.prototype._convertXcoordinates=function(datapoints){for(var toScreen=this.body.util.toScreen,i=0;i<datapoints.length;i++)datapoints[i].screen_x=toScreen(datapoints[i].x)+this.props.width,datapoints[i].screen_y=datapoints[i].y},LineGraph.prototype._convertYcoordinates=function(datapoints,group){var axis=this.yAxisLeft,svgHeight=Number(this.svg.style.height.replace("px",""));"right"==group.options.yAxisOrientation&&(axis=this.yAxisRight);for(var i=0;i<datapoints.length;i++)datapoints[i].screen_y=Math.round(axis.convertValue(datapoints[i].y));group.setZeroPosition(Math.min(svgHeight,axis.convertValue(0)))},module.exports=LineGraph},function(module,exports,__webpack_require__){function DataAxis(body,options,svg,linegraphOptions){this.id=util.randomUUID(),this.body=body,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(value){return""+parseFloat(value.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(value){return""+parseFloat(value.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=linegraphOptions,this.linegraphSVG=svg,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=util.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(options),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var me=this;this.body.emitter.on("verticalDrag",function(){me.dom.lineContainer.style.top=me.body.domProps.scrollTop+"px"})}var util=__webpack_require__(1),DOMutil=__webpack_require__(8),Component=__webpack_require__(31),DataScale=__webpack_require__(53);DataAxis.prototype=new Component,DataAxis.prototype.addGroup=function(label,graphOptions){this.groups.hasOwnProperty(label)||(this.groups[label]=graphOptions),this.amountOfGroups+=1},DataAxis.prototype.updateGroup=function(label,graphOptions){this.groups.hasOwnProperty(label)||(this.amountOfGroups+=1),this.groups[label]=graphOptions},DataAxis.prototype.removeGroup=function(label){this.groups.hasOwnProperty(label)&&(delete this.groups[label],this.amountOfGroups-=1)},DataAxis.prototype.setOptions=function(options){if(options){var redraw=!1;this.options.orientation!=options.orientation&&void 0!==options.orientation&&(redraw=!0);var fields=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];util.selectiveDeepExtend(fields,this.options,options),this.minWidth=Number((""+this.options.width).replace("px","")),redraw===!0&&this.dom.frame&&(this.hide(),this.show())}},DataAxis.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},DataAxis.prototype._redrawGroupIcons=function(){DOMutil.prepareElements(this.svgElements);var x,iconWidth=this.options.iconWidth,iconHeight=15,iconOffset=4,y=iconOffset+.5*iconHeight;x="left"===this.options.orientation?iconOffset:this.width-iconWidth-iconOffset;var groupArray=Object.keys(this.groups);groupArray.sort(function(a,b){return a<b?-1:1});for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];this.groups[groupId].visible!==!0||void 0!==this.linegraphOptions.visibility[groupId]&&this.linegraphOptions.visibility[groupId]!==!0||(this.groups[groupId].getLegend(iconWidth,iconHeight,this.framework,x,y),y+=iconHeight+iconOffset)}DOMutil.cleanupElements(this.svgElements),this.iconsRemoved=!1},DataAxis.prototype._cleanupIcons=function(){this.iconsRemoved===!1&&(DOMutil.prepareElements(this.svgElements),DOMutil.cleanupElements(this.svgElements),this.iconsRemoved=!0)},DataAxis.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.rtl?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.left.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},DataAxis.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},DataAxis.prototype.setRange=function(start,end){this.range.start=start,this.range.end=end},DataAxis.prototype.redraw=function(){var resized=!1,activeGroups=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var groupId in this.groups)this.groups.hasOwnProperty(groupId)&&(this.groups[groupId].visible!==!0||void 0!==this.linegraphOptions.visibility[groupId]&&this.linegraphOptions.visibility[groupId]!==!0||activeGroups++);if(0===this.amountOfGroups||0===activeGroups)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=this.options.visible===!0?Number((""+this.options.width).replace("px","")):0;var props=this.props,frame=this.dom.frame;frame.className="vis-data-axis",this._calculateCharSize();var orientation=this.options.orientation,showMinorLabels=this.options.showMinorLabels,showMajorLabels=this.options.showMajorLabels;props.minorLabelHeight=showMinorLabels?props.minorCharHeight:0,props.majorLabelHeight=showMajorLabels?props.majorCharHeight:0,props.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,props.minorLineHeight=1,props.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,
props.majorLineHeight=1,"left"===orientation?(frame.style.top="0",frame.style.left="0",frame.style.bottom="",frame.style.width=this.width+"px",frame.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(frame.style.top="",frame.style.bottom="0",frame.style.left="0",frame.style.width=this.width+"px",frame.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),resized=this._redrawLabels(),resized=this._isResized()||resized,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(orientation)}return resized},DataAxis.prototype._redrawLabels=function(){var _this=this,resized=!1;DOMutil.prepareElements(this.DOMelements.lines),DOMutil.prepareElements(this.DOMelements.labels);var orientation=this.options.orientation,customRange=void 0!=this.options[orientation].range?this.options[orientation].range:{},autoScaleEnd=!0;void 0!=customRange.max&&(this.range.end=customRange.max,autoScaleEnd=!1);var autoScaleStart=!0;void 0!=customRange.min&&(this.range.start=customRange.min,autoScaleStart=!1),this.scale=new DataScale(this.range.start,this.range.end,autoScaleStart,autoScaleEnd,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[orientation].format),this.master===!1&&void 0!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0;var lines=this.scale.getLines();lines.forEach(function(line){var y=line.y,isMajor=line.major;_this.options.showMinorLabels&&isMajor===!1&&_this._redrawLabel(y-2,line.val,orientation,"vis-y-axis vis-minor",_this.props.minorCharHeight),isMajor&&y>=0&&_this._redrawLabel(y-2,line.val,orientation,"vis-y-axis vis-major",_this.props.majorCharHeight),_this.master===!0&&(isMajor?_this._redrawLine(y,orientation,"vis-grid vis-horizontal vis-major",_this.options.majorLinesOffset,_this.props.majorLineWidth):_this._redrawLine(y,orientation,"vis-grid vis-horizontal vis-minor",_this.options.minorLinesOffset,_this.props.minorLineWidth))});var titleWidth=0;void 0!==this.options[orientation].title&&void 0!==this.options[orientation].title.text&&(titleWidth=this.props.titleCharHeight);var offset=this.options.icons===!0?Math.max(this.options.iconWidth,titleWidth)+this.options.labelOffsetX+15:titleWidth+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-offset&&this.options.visible===!0?(this.width=this.maxLabelSize+offset,this.options.width=this.width+"px",DOMutil.cleanupElements(this.DOMelements.lines),DOMutil.cleanupElements(this.DOMelements.labels),this.redraw(),resized=!0):this.maxLabelSize<this.width-offset&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+offset),this.options.width=this.width+"px",DOMutil.cleanupElements(this.DOMelements.lines),DOMutil.cleanupElements(this.DOMelements.labels),this.redraw(),resized=!0):(DOMutil.cleanupElements(this.DOMelements.lines),DOMutil.cleanupElements(this.DOMelements.labels),resized=!1),resized},DataAxis.prototype.convertValue=function(value){return this.scale.convertValue(value)},DataAxis.prototype.screenToValue=function(x){return this.scale.screenToValue(x)},DataAxis.prototype._redrawLabel=function(y,text,orientation,className,characterHeight){var label=DOMutil.getDOMElement("div",this.DOMelements.labels,this.dom.frame);label.className=className,label.innerHTML=text,"left"===orientation?(label.style.left="-"+this.options.labelOffsetX+"px",label.style.textAlign="right"):(label.style.right="-"+this.options.labelOffsetX+"px",label.style.textAlign="left"),label.style.top=y-.5*characterHeight+this.options.labelOffsetY+"px",text+="";var largestWidth=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<text.length*largestWidth&&(this.maxLabelSize=text.length*largestWidth)},DataAxis.prototype._redrawLine=function(y,orientation,className,offset,width){if(this.master===!0){var line=DOMutil.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);line.className=className,line.innerHTML="","left"===orientation?line.style.left=this.width-offset+"px":line.style.right=this.width-offset+"px",line.style.width=width+"px",line.style.top=y+"px"}},DataAxis.prototype._redrawTitle=function(orientation){if(DOMutil.prepareElements(this.DOMelements.title),void 0!==this.options[orientation].title&&void 0!==this.options[orientation].title.text){var title=DOMutil.getDOMElement("div",this.DOMelements.title,this.dom.frame);title.className="vis-y-axis vis-title vis-"+orientation,title.innerHTML=this.options[orientation].title.text,void 0!==this.options[orientation].title.style&&util.addCssText(title,this.options[orientation].title.style),"left"===orientation?title.style.left=this.props.titleCharHeight+"px":title.style.right=this.props.titleCharHeight+"px",title.style.width=this.height+"px"}DOMutil.cleanupElements(this.DOMelements.title)},DataAxis.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var textMinor=document.createTextNode("0"),measureCharMinor=document.createElement("div");measureCharMinor.className="vis-y-axis vis-minor vis-measure",measureCharMinor.appendChild(textMinor),this.dom.frame.appendChild(measureCharMinor),this.props.minorCharHeight=measureCharMinor.clientHeight,this.props.minorCharWidth=measureCharMinor.clientWidth,this.dom.frame.removeChild(measureCharMinor)}if(!("majorCharHeight"in this.props)){var textMajor=document.createTextNode("0"),measureCharMajor=document.createElement("div");measureCharMajor.className="vis-y-axis vis-major vis-measure",measureCharMajor.appendChild(textMajor),this.dom.frame.appendChild(measureCharMajor),this.props.majorCharHeight=measureCharMajor.clientHeight,this.props.majorCharWidth=measureCharMajor.clientWidth,this.dom.frame.removeChild(measureCharMajor)}if(!("titleCharHeight"in this.props)){var textTitle=document.createTextNode("0"),measureCharTitle=document.createElement("div");measureCharTitle.className="vis-y-axis vis-title vis-measure",measureCharTitle.appendChild(textTitle),this.dom.frame.appendChild(measureCharTitle),this.props.titleCharHeight=measureCharTitle.clientHeight,this.props.titleCharWidth=measureCharTitle.clientWidth,this.dom.frame.removeChild(measureCharTitle)}},module.exports=DataAxis},function(module,exports){function DataScale(start,end,autoScaleStart,autoScaleEnd,containerHeight,majorCharHeight){var zeroAlign=!(arguments.length<=6||void 0===arguments[6])&&arguments[6],formattingFunction=!(arguments.length<=7||void 0===arguments[7])&&arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=containerHeight,this.majorCharHeight=majorCharHeight,this._start=start,this._end=end,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=zeroAlign,this.autoScaleStart=autoScaleStart,this.autoScaleEnd=autoScaleEnd,this.formattingFunction=formattingFunction,autoScaleStart||autoScaleEnd){var me=this,roundToMinor=function(value){var rounded=value-value%(me.magnitudefactor*me.minorSteps[me.minorStepIdx]);return value%(me.magnitudefactor*me.minorSteps[me.minorStepIdx])>.5*(me.magnitudefactor*me.minorSteps[me.minorStepIdx])?rounded+me.magnitudefactor*me.minorSteps[me.minorStepIdx]:rounded};autoScaleStart&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=roundToMinor(this._start)),autoScaleEnd&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=roundToMinor(this._end)),this.determineScale()}}DataScale.prototype.setCharHeight=function(majorCharHeight){this.majorCharHeight=majorCharHeight},DataScale.prototype.setHeight=function(containerHeight){this.containerHeight=containerHeight},DataScale.prototype.determineScale=function(){var range=this._end-this._start;this.scale=this.containerHeight/range;var minimumStepValue=this.majorCharHeight/this.scale,orderOfMagnitude=range>0?Math.round(Math.log(range)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,orderOfMagnitude);var start=0;orderOfMagnitude<0&&(start=orderOfMagnitude);for(var solutionFound=!1,l=start;Math.abs(l)<=Math.abs(orderOfMagnitude);l++){this.magnitudefactor=Math.pow(10,l);for(var j=0;j<this.minorSteps.length;j++){var stepSize=this.magnitudefactor*this.minorSteps[j];if(stepSize>=minimumStepValue){solutionFound=!0,this.minorStepIdx=j;break}}if(solutionFound===!0)break}},DataScale.prototype.is_major=function(value){return value%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0},DataScale.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},DataScale.prototype.getFirstMajor=function(){var majorStep=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(majorStep-this._start%majorStep)%majorStep)},DataScale.prototype.formatValue=function(current){var returnValue=current.toPrecision(5);return"function"==typeof this.formattingFunction&&(returnValue=this.formattingFunction(current)),"number"==typeof returnValue?""+returnValue:"string"==typeof returnValue?returnValue:current.toPrecision(5)},DataScale.prototype.getLines=function(){for(var lines=[],step=this.getStep(),bottomOffset=(step-this._start%step)%step,i=this._start+bottomOffset;this._end-i>1e-5;i+=step)i!=this._start&&lines.push({major:this.is_major(i),y:this.convertValue(i),val:this.formatValue(i)});return lines},DataScale.prototype.followScale=function(other){var oldStepIdx=this.minorStepIdx,oldStart=this._start,oldEnd=this._end,me=this,increaseMagnitude=function(){me.magnitudefactor*=2},decreaseMagnitude=function(){me.magnitudefactor/=2};other.minorStepIdx<=1&&this.minorStepIdx<=1||other.minorStepIdx>1&&this.minorStepIdx>1||(other.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==oldStepIdx?increaseMagnitude():(increaseMagnitude(),increaseMagnitude())):(this.minorStepIdx=2,1==oldStepIdx?decreaseMagnitude():(decreaseMagnitude(),decreaseMagnitude())));for(var otherZero=(other.getLines(),other.convertValue(0)),otherStep=other.getStep()*other.scale,done=!1,count=0;!done&&count++<5;){this.scale=otherStep/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var newRange=this.containerHeight/this.scale;this._start=oldStart,this._end=this._start+newRange;var myOriginalZero=this._end*this.scale,majorStep=this.magnitudefactor*this.majorSteps[this.minorStepIdx],majorOffset=this.getFirstMajor()-other.getFirstMajor();if(this.zeroAlign){var zeroOffset=otherZero-myOriginalZero;this._end+=zeroOffset/this.scale,this._start=this._end-newRange}else this.autoScaleStart?(this._start-=majorOffset/this.scale,this._end=this._start+newRange):(this._start+=majorStep-majorOffset/this.scale,this._end=this._start+newRange);if(!this.autoScaleEnd&&this._end>oldEnd+1e-5)decreaseMagnitude(),done=!1;else{if(!this.autoScaleStart&&this._start<oldStart-1e-5){if(!(this.zeroAlign&&oldStart>=0)){decreaseMagnitude(),done=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}this.autoScaleStart&&this.autoScaleEnd&&newRange<oldEnd-oldStart?(increaseMagnitude(),done=!1):done=!0}}},DataScale.prototype.convertValue=function(value){return this.containerHeight-(value-this._start)*this.scale},DataScale.prototype.screenToValue=function(pixels){return(this.containerHeight-pixels)/this.scale+this._start},module.exports=DataScale},function(module,exports,__webpack_require__){function GraphGroup(group,groupId,options,groupsUsingDefaultStyles){this.id=groupId;var fields=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=util.selectiveBridgeObject(fields,options),this.usingDefaultStyle=void 0===group.className,this.groupsUsingDefaultStyles=groupsUsingDefaultStyles,this.zeroPosition=0,this.update(group),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===group.visible||group.visible}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},util=__webpack_require__(1),Bars=(__webpack_require__(8),__webpack_require__(55)),Lines=__webpack_require__(57),Points=__webpack_require__(56);GraphGroup.prototype.setItems=function(items){null!=items?(this.itemsData=items,1==this.options.sort&&util.insertSort(this.itemsData,function(a,b){return a.x>b.x?1:-1})):this.itemsData=[]},GraphGroup.prototype.getItems=function(){return this.itemsData},GraphGroup.prototype.setZeroPosition=function(pos){this.zeroPosition=pos},GraphGroup.prototype.setOptions=function(options){if(void 0!==options){var fields=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];util.selectiveDeepExtend(fields,this.options,options),"function"==typeof options.drawPoints&&(options.drawPoints={onRender:options.drawPoints}),util.mergeOptions(this.options,options,"interpolation"),util.mergeOptions(this.options,options,"drawPoints"),util.mergeOptions(this.options,options,"shaded"),options.interpolation&&"object"==_typeof(options.interpolation)&&options.interpolation.parametrization&&("uniform"==options.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==options.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},GraphGroup.prototype.update=function(group){this.group=group,this.content=group.content||"graph",this.className=group.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===group.visible||group.visible,this.style=group.style,this.setOptions(group.options)},GraphGroup.prototype.getLegend=function(iconWidth,iconHeight,framework,x,y){if(void 0==framework||null==framework){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");framework={svg:svg,svgElements:{},options:this.options,groups:[this]}}switch(void 0!=x&&null!=x||(x=0),void 0!=y&&null!=y||(y=.5*iconHeight),this.options.style){case"line":Lines.drawIcon(this,x,y,iconWidth,iconHeight,framework);break;case"points":case"point":Points.drawIcon(this,x,y,iconWidth,iconHeight,framework);break;case"bar":Bars.drawIcon(this,x,y,iconWidth,iconHeight,framework)}return{icon:framework.svg,label:this.content,orientation:this.options.yAxisOrientation}},GraphGroup.prototype.getYRange=function(groupData){for(var yMin=groupData[0].y,yMax=groupData[0].y,j=0;j<groupData.length;j++)yMin=yMin>groupData[j].y?groupData[j].y:yMin,yMax=yMax<groupData[j].y?groupData[j].y:yMax;return{min:yMin,max:yMax,yAxisOrientation:this.options.yAxisOrientation}},module.exports=GraphGroup},function(module,exports,__webpack_require__){function Bargraph(groupId,options){}var DOMutil=__webpack_require__(8),Points=__webpack_require__(56);Bargraph.drawIcon=function(group,x,y,iconWidth,iconHeight,framework){var fillHeight=.5*iconHeight,outline=DOMutil.getSVGElement("rect",framework.svgElements,framework.svg);outline.setAttributeNS(null,"x",x),outline.setAttributeNS(null,"y",y-fillHeight),outline.setAttributeNS(null,"width",iconWidth),outline.setAttributeNS(null,"height",2*fillHeight),outline.setAttributeNS(null,"class","vis-outline");var barWidth=Math.round(.3*iconWidth),originalWidth=group.options.barChart.width,scale=originalWidth/barWidth,bar1Height=Math.round(.4*iconHeight),bar2Height=Math.round(.75*iconHeight),offset=Math.round((iconWidth-2*barWidth)/3);if(DOMutil.drawBar(x+.5*barWidth+offset,y+fillHeight-bar1Height-1,barWidth,bar1Height,group.className+" vis-bar",framework.svgElements,framework.svg,group.style),DOMutil.drawBar(x+1.5*barWidth+offset+2,y+fillHeight-bar2Height-1,barWidth,bar2Height,group.className+" vis-bar",framework.svgElements,framework.svg,group.style),1==group.options.drawPoints.enabled){var groupTemplate={style:group.options.drawPoints.style,styles:group.options.drawPoints.styles,size:group.options.drawPoints.size/scale,className:group.className};DOMutil.drawPoint(x+.5*barWidth+offset,y+fillHeight-bar1Height-1,groupTemplate,framework.svgElements,framework.svg),DOMutil.drawPoint(x+1.5*barWidth+offset+2,y+fillHeight-bar2Height-1,groupTemplate,framework.svgElements,framework.svg)}},Bargraph.draw=function(groupIds,processedGroupData,framework){var coreDistance,key,drawData,group,i,j,combinedData=[],intersections={},barPoints=0;for(i=0;i<groupIds.length;i++)if(group=framework.groups[groupIds[i]],"bar"===group.options.style&&group.visible===!0&&(void 0===framework.options.groups.visibility[groupIds[i]]||framework.options.groups.visibility[groupIds[i]]===!0))for(j=0;j<processedGroupData[groupIds[i]].length;j++)combinedData.push({screen_x:processedGroupData[groupIds[i]][j].screen_x,screen_y:processedGroupData[groupIds[i]][j].screen_y,x:processedGroupData[groupIds[i]][j].x,y:processedGroupData[groupIds[i]][j].y,groupId:groupIds[i],label:processedGroupData[groupIds[i]][j].label}),barPoints+=1;if(0!==barPoints)for(combinedData.sort(function(a,b){return a.screen_x===b.screen_x?a.groupId<b.groupId?-1:1:a.screen_x-b.screen_x}),Bargraph._getDataIntersections(intersections,combinedData),i=0;i<combinedData.length;i++){group=framework.groups[combinedData[i].groupId];var minWidth=void 0!=group.options.barChart.minWidth?group.options.barChart.minWidth:.1*group.options.barChart.width;key=combinedData[i].screen_x;var heightOffset=0;if(void 0===intersections[key])i+1<combinedData.length&&(coreDistance=Math.abs(combinedData[i+1].screen_x-key)),drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth);else{var nextKey=i+(intersections[key].amount-intersections[key].resolved);i-(intersections[key].resolved+1);nextKey<combinedData.length&&(coreDistance=Math.abs(combinedData[nextKey].screen_x-key)),drawData=Bargraph._getSafeDrawData(coreDistance,group,minWidth),intersections[key].resolved+=1,group.options.stack===!0&&group.options.excludeFromStacking!==!0?combinedData[i].screen_y<group.zeroPosition?(heightOffset=intersections[key].accumulatedNegative,intersections[key].accumulatedNegative+=group.zeroPosition-combinedData[i].screen_y):(heightOffset=intersections[key].accumulatedPositive,intersections[key].accumulatedPositive+=group.zeroPosition-combinedData[i].screen_y):group.options.barChart.sideBySide===!0&&(drawData.width=drawData.width/intersections[key].amount,drawData.offset+=intersections[key].resolved*drawData.width-.5*drawData.width*(intersections[key].amount+1))}if(DOMutil.drawBar(combinedData[i].screen_x+drawData.offset,combinedData[i].screen_y-heightOffset,drawData.width,group.zeroPosition-combinedData[i].screen_y,group.className+" vis-bar",framework.svgElements,framework.svg,group.style),group.options.drawPoints.enabled===!0){var pointData={screen_x:combinedData[i].screen_x,screen_y:combinedData[i].screen_y-heightOffset,x:combinedData[i].x,y:combinedData[i].y,groupId:combinedData[i].groupId,label:combinedData[i].label};Points.draw([pointData],group,framework,drawData.offset)}}},Bargraph._getDataIntersections=function(intersections,combinedData){for(var coreDistance,i=0;i<combinedData.length;i++)i+1<combinedData.length&&(coreDistance=Math.abs(combinedData[i+1].screen_x-combinedData[i].screen_x)),i>0&&(coreDistance=Math.min(coreDistance,Math.abs(combinedData[i-1].screen_x-combinedData[i].screen_x))),0===coreDistance&&(void 0===intersections[combinedData[i].screen_x]&&(intersections[combinedData[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),intersections[combinedData[i].screen_x].amount+=1)},Bargraph._getSafeDrawData=function(coreDistance,group,minWidth){var width,offset;return coreDistance<group.options.barChart.width&&coreDistance>0?(width=coreDistance<minWidth?minWidth:coreDistance,offset=0,"left"===group.options.barChart.align?offset-=.5*coreDistance:"right"===group.options.barChart.align&&(offset+=.5*coreDistance)):(width=group.options.barChart.width,offset=0,"left"===group.options.barChart.align?offset-=.5*group.options.barChart.width:"right"===group.options.barChart.align&&(offset+=.5*group.options.barChart.width)),{width:width,offset:offset}},Bargraph.getStackedYRange=function(combinedData,groupRanges,groupIds,groupLabel,orientation){if(combinedData.length>0){combinedData.sort(function(a,b){return a.screen_x===b.screen_x?a.groupId<b.groupId?-1:1:a.screen_x-b.screen_x});var intersections={};Bargraph._getDataIntersections(intersections,combinedData),groupRanges[groupLabel]=Bargraph._getStackedYRange(intersections,combinedData),groupRanges[groupLabel].yAxisOrientation=orientation,groupIds.push(groupLabel)}},Bargraph._getStackedYRange=function(intersections,combinedData){for(var key,yMin=combinedData[0].screen_y,yMax=combinedData[0].screen_y,i=0;i<combinedData.length;i++)key=combinedData[i].screen_x,void 0===intersections[key]?(yMin=yMin>combinedData[i].screen_y?combinedData[i].screen_y:yMin,yMax=yMax<combinedData[i].screen_y?combinedData[i].screen_y:yMax):combinedData[i].screen_y<0?intersections[key].accumulatedNegative+=combinedData[i].screen_y:intersections[key].accumulatedPositive+=combinedData[i].screen_y;for(var xpos in intersections)intersections.hasOwnProperty(xpos)&&(yMin=yMin>intersections[xpos].accumulatedNegative?intersections[xpos].accumulatedNegative:yMin,yMin=yMin>intersections[xpos].accumulatedPositive?intersections[xpos].accumulatedPositive:yMin,yMax=yMax<intersections[xpos].accumulatedNegative?intersections[xpos].accumulatedNegative:yMax,yMax=yMax<intersections[xpos].accumulatedPositive?intersections[xpos].accumulatedPositive:yMax);return{min:yMin,max:yMax}},module.exports=Bargraph},function(module,exports,__webpack_require__){function Points(groupId,options){}function getGroupTemplate(group,callbackResult){return callbackResult="undefined"==typeof callbackResult?{}:callbackResult,{style:callbackResult.style||group.options.drawPoints.style,styles:callbackResult.styles||group.options.drawPoints.styles,size:callbackResult.size||group.options.drawPoints.size,className:callbackResult.className||group.className}}function getCallback(framework,group){var callback=void 0;return framework.options&&framework.options.drawPoints&&framework.options.drawPoints.onRender&&"function"==typeof framework.options.drawPoints.onRender&&(callback=framework.options.drawPoints.onRender),group.group.options&&group.group.options.drawPoints&&group.group.options.drawPoints.onRender&&"function"==typeof group.group.options.drawPoints.onRender&&(callback=group.group.options.drawPoints.onRender),callback}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},DOMutil=__webpack_require__(8);Points.draw=function(dataset,group,framework,offset){offset=offset||0;for(var callback=getCallback(framework,group),i=0;i<dataset.length;i++)if(callback){var callbackResult=callback(dataset[i],group);callbackResult!==!0&&"object"!==("undefined"==typeof callbackResult?"undefined":_typeof(callbackResult))||DOMutil.drawPoint(dataset[i].screen_x+offset,dataset[i].screen_y,getGroupTemplate(group,callbackResult),framework.svgElements,framework.svg,dataset[i].label)}else DOMutil.drawPoint(dataset[i].screen_x+offset,dataset[i].screen_y,getGroupTemplate(group),framework.svgElements,framework.svg,dataset[i].label)},Points.drawIcon=function(group,x,y,iconWidth,iconHeight,framework){var fillHeight=.5*iconHeight,outline=DOMutil.getSVGElement("rect",framework.svgElements,framework.svg);outline.setAttributeNS(null,"x",x),outline.setAttributeNS(null,"y",y-fillHeight),outline.setAttributeNS(null,"width",iconWidth),outline.setAttributeNS(null,"height",2*fillHeight),outline.setAttributeNS(null,"class","vis-outline"),DOMutil.drawPoint(x+.5*iconWidth,y,getGroupTemplate(group),framework.svgElements,framework.svg)},module.exports=Points},function(module,exports,__webpack_require__){function Line(groupId,options){}var DOMutil=__webpack_require__(8);Line.calcPath=function(dataset,group){if(null!=dataset&&dataset.length>0){var d=[];return d=1==group.options.interpolation.enabled?Line._catmullRom(dataset,group):Line._linear(dataset)}},Line.drawIcon=function(group,x,y,iconWidth,iconHeight,framework){var path,fillPath,fillHeight=.5*iconHeight,outline=DOMutil.getSVGElement("rect",framework.svgElements,framework.svg);if(outline.setAttributeNS(null,"x",x),outline.setAttributeNS(null,"y",y-fillHeight),outline.setAttributeNS(null,"width",iconWidth),outline.setAttributeNS(null,"height",2*fillHeight),outline.setAttributeNS(null,"class","vis-outline"),path=DOMutil.getSVGElement("path",framework.svgElements,framework.svg),path.setAttributeNS(null,"class",group.className),void 0!==group.style&&path.setAttributeNS(null,"style",group.style),path.setAttributeNS(null,"d","M"+x+","+y+" L"+(x+iconWidth)+","+y),1==group.options.shaded.enabled&&(fillPath=DOMutil.getSVGElement("path",framework.svgElements,framework.svg),"top"==group.options.shaded.orientation?fillPath.setAttributeNS(null,"d","M"+x+", "+(y-fillHeight)+"L"+x+","+y+" L"+(x+iconWidth)+","+y+" L"+(x+iconWidth)+","+(y-fillHeight)):fillPath.setAttributeNS(null,"d","M"+x+","+y+" L"+x+","+(y+fillHeight)+" L"+(x+iconWidth)+","+(y+fillHeight)+"L"+(x+iconWidth)+","+y),fillPath.setAttributeNS(null,"class",group.className+" vis-icon-fill"),void 0!==group.options.shaded.style&&""!==group.options.shaded.style&&fillPath.setAttributeNS(null,"style",group.options.shaded.style)),1==group.options.drawPoints.enabled){var groupTemplate={style:group.options.drawPoints.style,styles:group.options.drawPoints.styles,size:group.options.drawPoints.size,className:group.className};DOMutil.drawPoint(x+.5*iconWidth,y,groupTemplate,framework.svgElements,framework.svg)}},Line.drawShading=function(pathArray,group,subPathArray,framework){if(1==group.options.shaded.enabled){var svgHeight=Number(framework.svg.style.height.replace("px","")),fillPath=DOMutil.getSVGElement("path",framework.svgElements,framework.svg),type="L";1==group.options.interpolation.enabled&&(type="C");var dFill,zero=0;zero="top"==group.options.shaded.orientation?0:"bottom"==group.options.shaded.orientation?svgHeight:Math.min(Math.max(0,group.zeroPosition),svgHeight),dFill="group"==group.options.shaded.orientation&&null!=subPathArray&&void 0!=subPathArray?"M"+pathArray[0][0]+","+pathArray[0][1]+" "+this.serializePath(pathArray,type,!1)+" L"+subPathArray[subPathArray.length-1][0]+","+subPathArray[subPathArray.length-1][1]+" "+this.serializePath(subPathArray,type,!0)+subPathArray[0][0]+","+subPathArray[0][1]+" Z":"M"+pathArray[0][0]+","+pathArray[0][1]+" "+this.serializePath(pathArray,type,!1)+" V"+zero+" H"+pathArray[0][0]+" Z",fillPath.setAttributeNS(null,"class",group.className+" vis-fill"),void 0!==group.options.shaded.style&&fillPath.setAttributeNS(null,"style",group.options.shaded.style),fillPath.setAttributeNS(null,"d",dFill)}},Line.draw=function(pathArray,group,framework){if(null!=pathArray&&void 0!=pathArray){var path=DOMutil.getSVGElement("path",framework.svgElements,framework.svg);path.setAttributeNS(null,"class",group.className),void 0!==group.style&&path.setAttributeNS(null,"style",group.style);var type="L";1==group.options.interpolation.enabled&&(type="C"),path.setAttributeNS(null,"d","M"+pathArray[0][0]+","+pathArray[0][1]+" "+this.serializePath(pathArray,type,!1))}},Line.serializePath=function(pathArray,type,inverse){if(pathArray.length<2)return"";var d=type;if(inverse)for(var i=pathArray.length-2;i>0;i--)d+=pathArray[i][0]+","+pathArray[i][1]+" ";else for(var i=1;i<pathArray.length;i++)d+=pathArray[i][0]+","+pathArray[i][1]+" ";return d},Line._catmullRomUniform=function(data){var p0,p1,p2,p3,bp1,bp2,d=[];d.push([Math.round(data[0].screen_x),Math.round(data[0].screen_y)]);for(var normalization=1/6,length=data.length,i=0;i<length-1;i++)p0=0==i?data[0]:data[i-1],p1=data[i],p2=data[i+1],p3=i+2<length?data[i+2]:p2,bp1={screen_x:(-p0.screen_x+6*p1.screen_x+p2.screen_x)*normalization,screen_y:(-p0.screen_y+6*p1.screen_y+p2.screen_y)*normalization},bp2={screen_x:(p1.screen_x+6*p2.screen_x-p3.screen_x)*normalization,screen_y:(p1.screen_y+6*p2.screen_y-p3.screen_y)*normalization},d.push([bp1.screen_x,bp1.screen_y]),d.push([bp2.screen_x,bp2.screen_y]),d.push([p2.screen_x,p2.screen_y]);return d},Line._catmullRom=function(data,group){var alpha=group.options.interpolation.alpha;if(0==alpha||void 0===alpha)return this._catmullRomUniform(data);var p0,p1,p2,p3,bp1,bp2,d1,d2,d3,A,B,N,M,d3powA,d2powA,d3pow2A,d2pow2A,d1pow2A,d1powA,d=[];d.push([Math.round(data[0].screen_x),Math.round(data[0].screen_y)]);for(var length=data.length,i=0;i<length-1;i++)p0=0==i?data[0]:data[i-1],p1=data[i],p2=data[i+1],p3=i+2<length?data[i+2]:p2,d1=Math.sqrt(Math.pow(p0.screen_x-p1.screen_x,2)+Math.pow(p0.screen_y-p1.screen_y,2)),d2=Math.sqrt(Math.pow(p1.screen_x-p2.screen_x,2)+Math.pow(p1.screen_y-p2.screen_y,2)),d3=Math.sqrt(Math.pow(p2.screen_x-p3.screen_x,2)+Math.pow(p2.screen_y-p3.screen_y,2)),d3powA=Math.pow(d3,alpha),d3pow2A=Math.pow(d3,2*alpha),d2powA=Math.pow(d2,alpha),d2pow2A=Math.pow(d2,2*alpha),d1powA=Math.pow(d1,alpha),d1pow2A=Math.pow(d1,2*alpha),A=2*d1pow2A+3*d1powA*d2powA+d2pow2A,B=2*d3pow2A+3*d3powA*d2powA+d2pow2A,N=3*d1powA*(d1powA+d2powA),N>0&&(N=1/N),M=3*d3powA*(d3powA+d2powA),M>0&&(M=1/M),bp1={screen_x:(-d2pow2A*p0.screen_x+A*p1.screen_x+d1pow2A*p2.screen_x)*N,screen_y:(-d2pow2A*p0.screen_y+A*p1.screen_y+d1pow2A*p2.screen_y)*N},bp2={screen_x:(d3pow2A*p1.screen_x+B*p2.screen_x-d2pow2A*p3.screen_x)*M,screen_y:(d3pow2A*p1.screen_y+B*p2.screen_y-d2pow2A*p3.screen_y)*M},0==bp1.screen_x&&0==bp1.screen_y&&(bp1=p1),0==bp2.screen_x&&0==bp2.screen_y&&(bp2=p2),d.push([bp1.screen_x,bp1.screen_y]),d.push([bp2.screen_x,bp2.screen_y]),d.push([p2.screen_x,p2.screen_y]);return d},Line._linear=function(data){for(var d=[],i=0;i<data.length;i++)d.push([data[i].screen_x,data[i].screen_y]);return d},module.exports=Line},function(module,exports,__webpack_require__){function Legend(body,options,side,linegraphOptions){this.body=body,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=side,this.options=util.extend({},this.defaultOptions),this.linegraphOptions=linegraphOptions,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(options)}var util=__webpack_require__(1),DOMutil=__webpack_require__(8),Component=__webpack_require__(31);Legend.prototype=new Component,Legend.prototype.clear=function(){this.groups={},this.amountOfGroups=0},Legend.prototype.addGroup=function(label,graphOptions){1!=graphOptions.options.excludeFromLegend&&(this.groups.hasOwnProperty(label)||(this.groups[label]=graphOptions),this.amountOfGroups+=1)},Legend.prototype.updateGroup=function(label,graphOptions){this.groups[label]=graphOptions},Legend.prototype.removeGroup=function(label){this.groups.hasOwnProperty(label)&&(delete this.groups[label],this.amountOfGroups-=1)},Legend.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},Legend.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame);
},Legend.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},Legend.prototype.setOptions=function(options){var fields=["enabled","orientation","icons","left","right"];util.selectiveDeepExtend(fields,this.options,options)},Legend.prototype.redraw=function(){var activeGroups=0,groupArray=Object.keys(this.groups);groupArray.sort(function(a,b){return a<b?-1:1});for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||activeGroups++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==activeGroups)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var scrollableHeight=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+scrollableHeight+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());for(var content="",i=0;i<groupArray.length;i++){var groupId=groupArray[i];1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||(content+=this.groups[groupId].content+"<br />")}this.dom.textArea.innerHTML=content,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},Legend.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var groupArray=Object.keys(this.groups);groupArray.sort(function(a,b){return a<b?-1:1}),DOMutil.resetElements(this.svgElements);var padding=window.getComputedStyle(this.dom.frame).paddingTop,iconOffset=Number(padding.replace("px","")),x=iconOffset,iconWidth=this.options.iconSize,iconHeight=.75*this.options.iconSize,y=iconOffset+.5*iconHeight+3;this.svg.style.width=iconWidth+5+iconOffset+"px";for(var i=0;i<groupArray.length;i++){var groupId=groupArray[i];1!=this.groups[groupId].visible||void 0!==this.linegraphOptions.visibility[groupId]&&1!=this.linegraphOptions.visibility[groupId]||(this.groups[groupId].getLegend(iconWidth,iconHeight,this.framework,x,y),y+=iconHeight+this.options.iconSpacing)}}},module.exports=Legend},function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var string="string",boolean="boolean",number="number",array="array",date="date",object="object",dom="dom",moment="moment",any="any",allOptions={configure:{enabled:{boolean:boolean},filter:{boolean:boolean,function:"function"},container:{dom:dom},__type__:{object:object,boolean:boolean,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:string},sort:{boolean:boolean},sampling:{boolean:boolean},stack:{boolean:boolean},graphHeight:{string:string,number:number},shaded:{enabled:{boolean:boolean},orientation:{string:["bottom","top","zero","group"]},groupId:{object:object},__type__:{boolean:boolean,object:object}},style:{string:["line","bar","points"]},barChart:{width:{number:number},minWidth:{number:number},sideBySide:{boolean:boolean},align:{string:["left","center","right"]},__type__:{object:object}},interpolation:{enabled:{boolean:boolean},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:number},__type__:{object:object,boolean:boolean}},drawPoints:{enabled:{boolean:boolean},onRender:{function:"function"},size:{number:number},style:{string:["square","circle"]},__type__:{object:object,boolean:boolean,function:"function"}},dataAxis:{showMinorLabels:{boolean:boolean},showMajorLabels:{boolean:boolean},icons:{boolean:boolean},width:{string:string,number:number},visible:{boolean:boolean},alignZeros:{boolean:boolean},left:{range:{min:{number:number},max:{number:number},__type__:{object:object}},format:{function:"function"},title:{text:{string:string,number:number},style:{string:string},__type__:{object:object}},__type__:{object:object}},right:{range:{min:{number:number},max:{number:number},__type__:{object:object}},format:{function:"function"},title:{text:{string:string,number:number},style:{string:string},__type__:{object:object}},__type__:{object:object}},__type__:{object:object}},legend:{enabled:{boolean:boolean},icons:{boolean:boolean},left:{visible:{boolean:boolean},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:object}},right:{visible:{boolean:boolean},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:object}},__type__:{object:object,boolean:boolean}},groups:{visibility:{any:any},__type__:{object:object}},autoResize:{boolean:boolean},throttleRedraw:{number:number},clickToUse:{boolean:boolean},end:{number:number,date:date,string:string,moment:moment},format:{minorLabels:{millisecond:{string:string,undefined:"undefined"},second:{string:string,undefined:"undefined"},minute:{string:string,undefined:"undefined"},hour:{string:string,undefined:"undefined"},weekday:{string:string,undefined:"undefined"},day:{string:string,undefined:"undefined"},month:{string:string,undefined:"undefined"},year:{string:string,undefined:"undefined"},__type__:{object:object}},majorLabels:{millisecond:{string:string,undefined:"undefined"},second:{string:string,undefined:"undefined"},minute:{string:string,undefined:"undefined"},hour:{string:string,undefined:"undefined"},weekday:{string:string,undefined:"undefined"},day:{string:string,undefined:"undefined"},month:{string:string,undefined:"undefined"},year:{string:string,undefined:"undefined"},__type__:{object:object}},__type__:{object:object}},moment:{function:"function"},height:{string:string,number:number},hiddenDates:{start:{date:date,number:number,string:string,moment:moment},end:{date:date,number:number,string:string,moment:moment},repeat:{string:string},__type__:{object:object,array:array}},locale:{string:string},locales:{__any__:{any:any},__type__:{object:object}},max:{date:date,number:number,string:string,moment:moment},maxHeight:{number:number,string:string},maxMinorChars:{number:number},min:{date:date,number:number,string:string,moment:moment},minHeight:{number:number,string:string},moveable:{boolean:boolean},multiselect:{boolean:boolean},orientation:{string:string},showCurrentTime:{boolean:boolean},showMajorLabels:{boolean:boolean},showMinorLabels:{boolean:boolean},start:{date:date,number:number,string:string,moment:moment},timeAxis:{scale:{string:string,undefined:"undefined"},step:{number:number,undefined:"undefined"},__type__:{object:object}},width:{string:string,number:number},zoomable:{boolean:boolean},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:number},zoomMin:{number:number},zIndex:{number:number},__type__:{object:object}},configureOptions={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};exports.allOptions=allOptions,exports.configureOptions=configureOptions},function(module,exports,__webpack_require__){exports.util=__webpack_require__(1),exports.DOMutil=__webpack_require__(8),exports.DataSet=__webpack_require__(9),exports.DataView=__webpack_require__(11),exports.Queue=__webpack_require__(10),exports.Network=__webpack_require__(61),exports.network={Images:__webpack_require__(62),dotparser:__webpack_require__(118),gephiParser:__webpack_require__(119),allOptions:__webpack_require__(114)},exports.network.convertDot=function(input){return exports.network.dotparser.DOTToGraph(input)},exports.network.convertGephi=function(input,options){return exports.network.gephiParser.parseGephi(input,options)},exports.moment=__webpack_require__(2),exports.Hammer=__webpack_require__(20),exports.keycharm=__webpack_require__(23)},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Network(container,data,options){var _this=this;if(!(this instanceof Network))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:locales,clickToUse:!1},util.extend(this.options,this.defaultOptions),this.body={container:container,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new _Images2.default(function(){return _this.body.emitter.emit("_requestRedraw")}),this.groups=new _Groups2.default,this.canvas=new _Canvas2.default(this.body),this.selectionHandler=new _SelectionHandler2.default(this.body,this.canvas),this.interactionHandler=new _InteractionHandler2.default(this.body,this.canvas,this.selectionHandler),this.view=new _View2.default(this.body,this.canvas),this.renderer=new _CanvasRenderer2.default(this.body,this.canvas),this.physics=new _PhysicsEngine2.default(this.body),this.layoutEngine=new _LayoutEngine2.default(this.body),this.clustering=new _Clustering2.default(this.body),this.manipulation=new _ManipulationSystem2.default(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new _NodesHandler2.default(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new _EdgesHandler2.default(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new _KamadaKawai2.default(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(options),this.setData(data)}var _Images=__webpack_require__(62),_Images2=_interopRequireDefault(_Images),_Groups=__webpack_require__(63),_Groups2=_interopRequireDefault(_Groups),_NodesHandler=__webpack_require__(64),_NodesHandler2=_interopRequireDefault(_NodesHandler),_EdgesHandler=__webpack_require__(84),_EdgesHandler2=_interopRequireDefault(_EdgesHandler),_PhysicsEngine=__webpack_require__(93),_PhysicsEngine2=_interopRequireDefault(_PhysicsEngine),_Clustering=__webpack_require__(102),_Clustering2=_interopRequireDefault(_Clustering),_CanvasRenderer=__webpack_require__(105),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_Canvas=__webpack_require__(106),_Canvas2=_interopRequireDefault(_Canvas),_View=__webpack_require__(107),_View2=_interopRequireDefault(_View),_InteractionHandler=__webpack_require__(108),_InteractionHandler2=_interopRequireDefault(_InteractionHandler),_SelectionHandler=__webpack_require__(111),_SelectionHandler2=_interopRequireDefault(_SelectionHandler),_LayoutEngine=__webpack_require__(112),_LayoutEngine2=_interopRequireDefault(_LayoutEngine),_ManipulationSystem=__webpack_require__(113),_ManipulationSystem2=_interopRequireDefault(_ManipulationSystem),_Configurator=__webpack_require__(26),_Configurator2=_interopRequireDefault(_Configurator),_Validator=__webpack_require__(29),_Validator2=_interopRequireDefault(_Validator),_options=__webpack_require__(114),_KamadaKawai=__webpack_require__(115),_KamadaKawai2=_interopRequireDefault(_KamadaKawai);__webpack_require__(117);var Emitter=__webpack_require__(13),util=__webpack_require__(1),dotparser=(__webpack_require__(9),__webpack_require__(11),__webpack_require__(118)),gephiParser=__webpack_require__(119),Activator=__webpack_require__(45),locales=__webpack_require__(120);Emitter(Network.prototype),Network.prototype.setOptions=function(options){var _this2=this;if(void 0!==options){var errorFound=_Validator2.default.validate(options,_options.allOptions);errorFound===!0&&console.log("%cErrors have been found in the supplied options object.",_Validator.printStyle);var fields=["locale","locales","clickToUse"];if(util.selectiveDeepExtend(fields,this.options,options),options=this.layoutEngine.setOptions(options.layout,options),this.canvas.setOptions(options),this.groups.setOptions(options.groups),this.nodesHandler.setOptions(options.nodes),this.edgesHandler.setOptions(options.edges),this.physics.setOptions(options.physics),this.manipulation.setOptions(options.manipulation,options,this.options),this.interactionHandler.setOptions(options.interaction),this.renderer.setOptions(options.interaction),this.selectionHandler.setOptions(options.interaction),void 0!==options.groups&&this.body.emitter.emit("refreshNodes"),"configure"in options&&(this.configurator||(this.configurator=new _Configurator2.default(this,this.body.container,_options.configureOptions,this.canvas.pixelRatio)),this.configurator.setOptions(options.configure)),this.configurator&&this.configurator.options.enabled===!0){var networkOptions={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};util.deepExtend(networkOptions.nodes,this.nodesHandler.options),util.deepExtend(networkOptions.edges,this.edgesHandler.options),util.deepExtend(networkOptions.layout,this.layoutEngine.options),util.deepExtend(networkOptions.interaction,this.selectionHandler.options),util.deepExtend(networkOptions.interaction,this.renderer.options),util.deepExtend(networkOptions.interaction,this.interactionHandler.options),util.deepExtend(networkOptions.manipulation,this.manipulation.options),util.deepExtend(networkOptions.physics,this.physics.options),util.deepExtend(networkOptions.global,this.canvas.options),util.deepExtend(networkOptions.global,this.options),this.configurator.setModuleOptions(networkOptions)}void 0!==options.clickToUse?options.clickToUse===!0?void 0===this.activator&&(this.activator=new Activator(this.canvas.frame),this.activator.on("change",function(){_this2.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},Network.prototype._updateVisibleIndices=function(){var nodes=this.body.nodes,edges=this.body.edges;this.body.nodeIndices=[],this.body.edgeIndices=[];for(var nodeId in nodes)nodes.hasOwnProperty(nodeId)&&nodes[nodeId].options.hidden===!1&&this.body.nodeIndices.push(nodes[nodeId].id);for(var edgeId in edges)edges.hasOwnProperty(edgeId)&&edges[edgeId].options.hidden===!1&&this.body.edgeIndices.push(edges[edgeId].id)},Network.prototype.bindEventListeners=function(){var _this3=this;this.body.emitter.on("_dataChanged",function(){_this3._updateVisibleIndices(),_this3.body.emitter.emit("_requestRedraw"),_this3.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){_this3._updateValueRange(_this3.body.nodes),_this3._updateValueRange(_this3.body.edges),_this3.body.emitter.emit("startSimulation"),_this3.body.emitter.emit("_requestRedraw")})},Network.prototype.setData=function(data){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),data&&data.dot&&(data.nodes||data.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(data&&data.options),data&&data.dot){console.log("The dot property has been depricated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var dotData=dotparser.DOTToGraph(data.dot);return void this.setData(dotData)}if(data&&data.gephi){console.log("The gephi property has been depricated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var gephiData=gephiParser.parseGephi(data.gephi);return void this.setData(gephiData)}this.nodesHandler.setData(data&&data.nodes,!0),this.edgesHandler.setData(data&&data.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},Network.prototype.destroy=function(){this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images;for(var nodeId in this.body.nodes)delete this.body.nodes[nodeId];for(var edgeId in this.body.edges)delete this.body.edges[edgeId];util.recursiveDOMDelete(this.body.container)},Network.prototype._updateValueRange=function(obj){var id,valueMin=void 0,valueMax=void 0,valueTotal=0;for(id in obj)if(obj.hasOwnProperty(id)){var value=obj[id].getValue();void 0!==value&&(valueMin=void 0===valueMin?value:Math.min(value,valueMin),valueMax=void 0===valueMax?value:Math.max(value,valueMax),valueTotal+=value)}if(void 0!==valueMin&&void 0!==valueMax)for(id in obj)obj.hasOwnProperty(id)&&obj[id].setValueRange(valueMin,valueMax,valueTotal)},Network.prototype.isActive=function(){return!this.activator||this.activator.active},Network.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},Network.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},Network.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},Network.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},Network.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},Network.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},Network.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},Network.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},Network.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},Network.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},Network.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},Network.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},Network.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},Network.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},Network.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},Network.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},Network.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},Network.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},Network.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},Network.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},Network.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},Network.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},Network.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},Network.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},Network.prototype.getConnectedNodes=function(objectId){return void 0!==this.body.nodes[objectId]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},Network.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},Network.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},Network.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},Network.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},Network.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},Network.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},Network.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},Network.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},Network.prototype.getNodeAt=function(){var node=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==node&&void 0!==node.id?node.id:node},Network.prototype.getEdgeAt=function(){var edge=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==edge&&void 0!==edge.id?edge.id:edge},Network.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},Network.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},Network.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},Network.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},Network.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},Network.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},Network.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},Network.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},Network.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},Network.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},Network.prototype.getOptionsFromConfigurator=function(){var options={};return this.configurator&&(options=this.configurator.getOptions.apply(this.configurator)),options},module.exports=Network},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Images=function(){function Images(callback){_classCallCheck(this,Images),this.images={},this.imageBroken={},this.callback=callback}return _createClass(Images,[{key:"_addImageToCache",value:function(url,imageToCache){0===imageToCache.width&&(document.body.appendChild(imageToCache),imageToCache.width=imageToCache.offsetWidth,imageToCache.height=imageToCache.offsetHeight,document.body.removeChild(imageToCache)),this.images[url]=imageToCache}},{key:"_tryloadBrokenUrl",value:function(url,brokenUrl,imageToLoadBrokenUrlOn){var _this=this;void 0!==url&&void 0!==brokenUrl&&void 0!==imageToLoadBrokenUrlOn&&(imageToLoadBrokenUrlOn.onerror=function(){console.error("Could not load brokenImage:",brokenUrl),_this._addImageToCache(url,new Image)},imageToLoadBrokenUrlOn.src=brokenUrl)}},{key:"_redrawWithImage",value:function(imageToRedrawWith){this.callback&&this.callback(imageToRedrawWith)}},{key:"load",value:function(url,brokenUrl,id){var _this2=this,cachedImage=this.images[url];if(cachedImage)return cachedImage;var img=new Image;return img.onload=function(){_this2._addImageToCache(url,img),_this2._redrawWithImage(img)},img.onerror=function(){console.error("Could not load image:",url),_this2._tryloadBrokenUrl(url,brokenUrl,img)},img.src=url,img}}]),Images}();exports.default=Images},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),util=__webpack_require__(1),Groups=function(){function Groups(){_classCallCheck(this,Groups),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},util.extend(this.options,this.defaultOptions)}return _createClass(Groups,[{key:"setOptions",value:function(options){var optionFields=["useDefaultGroups"];if(void 0!==options)for(var groupName in options)if(options.hasOwnProperty(groupName)&&optionFields.indexOf(groupName)===-1){var group=options[groupName];this.add(groupName,group)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(groupname){var group=this.groups[groupname];if(void 0===group)if(this.options.useDefaultGroups===!1&&this.groupsArray.length>0){var index=this.groupIndex%this.groupsArray.length;this.groupIndex++,group={},group.color=this.groups[this.groupsArray[index]],this.groups[groupname]=group}else{var _index=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,group={},group.color=this.defaultGroups[_index],this.groups[groupname]=group}return group}},{key:"add",value:function(groupName,style){return this.groups[groupName]=style,this.groupsArray.push(groupName),style}}]),Groups}();exports.default=Groups},function(module,exports,__webpack_require__){
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Node=__webpack_require__(65),_Node2=_interopRequireDefault(_Node),_Label=__webpack_require__(66),_Label2=_interopRequireDefault(_Label),util=__webpack_require__(1),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),NodesHandler=function(){function NodesHandler(body,images,groups,layoutEngine){var _this=this;_classCallCheck(this,NodesHandler),this.body=body,this.images=images,this.groups=groups,this.layoutEngine=layoutEngine,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(event,params){_this.add(params.items)},update:function(event,params){_this.update(params.items,params.data)},remove:function(event,params){_this.remove(params.items)}},this.options={},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center"},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(min,max,total,value){if(max===min)return.5;var scale=1/(max-min);return Math.max(0,(value-min)*scale)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},util.extend(this.options,this.defaultOptions),this.bindEventListeners()}return _createClass(NodesHandler,[{key:"bindEventListeners",value:function(){var _this2=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){util.forEach(_this2.nodesListeners,function(callback,event){_this2.body.data.nodes&&_this2.body.data.nodes.off(event,callback)}),delete _this2.body.functions.createNode,delete _this2.nodesListeners.add,delete _this2.nodesListeners.update,delete _this2.nodesListeners.remove,delete _this2.nodesListeners})}},{key:"setOptions",value:function(options){if(void 0!==options){if(_Node2.default.parseOptions(this.options,options),void 0!==options.shape)for(var nodeId in this.body.nodes)this.body.nodes.hasOwnProperty(nodeId)&&this.body.nodes[nodeId].updateShape();if(void 0!==options.font){_Label2.default.parseOptions(this.options.font,options);for(var _nodeId in this.body.nodes)this.body.nodes.hasOwnProperty(_nodeId)&&(this.body.nodes[_nodeId].updateLabelModule(),this.body.nodes[_nodeId]._reset())}if(void 0!==options.size)for(var _nodeId2 in this.body.nodes)this.body.nodes.hasOwnProperty(_nodeId2)&&this.body.nodes[_nodeId2]._reset();void 0===options.hidden&&void 0===options.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(nodes){var _this3=this,doNotEmit=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],oldNodesData=this.body.data.nodes;if(nodes instanceof DataSet||nodes instanceof DataView)this.body.data.nodes=nodes;else if(Array.isArray(nodes))this.body.data.nodes=new DataSet,this.body.data.nodes.add(nodes);else{if(nodes)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new DataSet}oldNodesData&&util.forEach(this.nodesListeners,function(callback,event){oldNodesData.off(event,callback)}),this.body.nodes={},this.body.data.nodes&&!function(){var me=_this3;util.forEach(_this3.nodesListeners,function(callback,event){me.body.data.nodes.on(event,callback)});var ids=_this3.body.data.nodes.getIds();_this3.add(ids,!0)}(),doNotEmit===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(ids){for(var doNotEmit=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],id=void 0,newNodes=[],i=0;i<ids.length;i++){id=ids[i];var properties=this.body.data.nodes.get(id),node=this.create(properties);newNodes.push(node),this.body.nodes[id]=node}this.layoutEngine.positionInitially(newNodes),doNotEmit===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(ids,changedData){for(var nodes=this.body.nodes,dataChanged=!1,i=0;i<ids.length;i++){var id=ids[i],node=nodes[id],data=changedData[i];void 0!==node?dataChanged=node.setOptions(data):(dataChanged=!0,node=this.create(data),nodes[id]=node)}dataChanged===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(ids){for(var nodes=this.body.nodes,i=0;i<ids.length;i++){var id=ids[i];delete nodes[id]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(properties){var constructorClass=arguments.length<=1||void 0===arguments[1]?_Node2.default:arguments[1];return new constructorClass(properties,this.body,this.images,this.groups,this.options)}},{key:"refresh",value:function(){var clearPositions=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],nodes=this.body.nodes;for(var nodeId in nodes){var node=void 0;nodes.hasOwnProperty(nodeId)&&(node=nodes[nodeId]);var data=this.body.data.nodes._data[nodeId];void 0!==node&&void 0!==data&&(clearPositions===!0&&node.setOptions({x:null,y:null}),node.setOptions({fixed:!1}),node.setOptions(data))}}},{key:"getPositions",value:function(ids){var dataArray={};if(void 0!==ids){if(Array.isArray(ids)===!0){for(var i=0;i<ids.length;i++)if(void 0!==this.body.nodes[ids[i]]){var node=this.body.nodes[ids[i]];dataArray[ids[i]]={x:Math.round(node.x),y:Math.round(node.y)}}}else if(void 0!==this.body.nodes[ids]){var _node=this.body.nodes[ids];dataArray[ids]={x:Math.round(_node.x),y:Math.round(_node.y)}}}else for(var _i=0;_i<this.body.nodeIndices.length;_i++){var _node2=this.body.nodes[this.body.nodeIndices[_i]];dataArray[this.body.nodeIndices[_i]]={x:Math.round(_node2.x),y:Math.round(_node2.y)}}return dataArray}},{key:"storePositions",value:function(){var dataArray=[],dataset=this.body.data.nodes.getDataSet();for(var nodeId in dataset._data)if(dataset._data.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];dataset._data[nodeId].x==Math.round(node.x)&&dataset._data[nodeId].y==Math.round(node.y)||dataArray.push({id:node.id,x:Math.round(node.x),y:Math.round(node.y)})}dataset.update(dataArray)}},{key:"getBoundingBox",value:function(nodeId){if(void 0!==this.body.nodes[nodeId])return this.body.nodes[nodeId].shape.boundingBox}},{key:"getConnectedNodes",value:function(nodeId){var nodeList=[];if(void 0!==this.body.nodes[nodeId])for(var node=this.body.nodes[nodeId],nodeObj={},i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.toId==node.id?void 0===nodeObj[edge.fromId]&&(nodeList.push(edge.fromId),nodeObj[edge.fromId]=!0):edge.fromId==node.id&&void 0===nodeObj[edge.toId]&&(nodeList.push(edge.toId),nodeObj[edge.toId]=!0)}return nodeList}},{key:"getConnectedEdges",value:function(nodeId){var edgeList=[];if(void 0!==this.body.nodes[nodeId])for(var node=this.body.nodes[nodeId],i=0;i<node.edges.length;i++)edgeList.push(node.edges[i].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",nodeId);return edgeList}},{key:"moveNode",value:function(nodeId,x,y){var _this4=this;void 0!==this.body.nodes[nodeId]?(this.body.nodes[nodeId].x=Number(x),this.body.nodes[nodeId].y=Number(y),setTimeout(function(){_this4.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",nodeId)}}]),NodesHandler}();exports.default=NodesHandler},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Label=__webpack_require__(66),_Label2=_interopRequireDefault(_Label),_Box=__webpack_require__(67),_Box2=_interopRequireDefault(_Box),_Circle=__webpack_require__(69),_Circle2=_interopRequireDefault(_Circle),_CircularImage=__webpack_require__(71),_CircularImage2=_interopRequireDefault(_CircularImage),_Database=__webpack_require__(72),_Database2=_interopRequireDefault(_Database),_Diamond=__webpack_require__(73),_Diamond2=_interopRequireDefault(_Diamond),_Dot=__webpack_require__(75),_Dot2=_interopRequireDefault(_Dot),_Ellipse=__webpack_require__(76),_Ellipse2=_interopRequireDefault(_Ellipse),_Icon=__webpack_require__(77),_Icon2=_interopRequireDefault(_Icon),_Image=__webpack_require__(78),_Image2=_interopRequireDefault(_Image),_Square=__webpack_require__(79),_Square2=_interopRequireDefault(_Square),_Star=__webpack_require__(80),_Star2=_interopRequireDefault(_Star),_Text=__webpack_require__(81),_Text2=_interopRequireDefault(_Text),_Triangle=__webpack_require__(82),_Triangle2=_interopRequireDefault(_Triangle),_TriangleDown=__webpack_require__(83),_TriangleDown2=_interopRequireDefault(_TriangleDown),_Validator=__webpack_require__(29),util=(_interopRequireDefault(_Validator),__webpack_require__(1)),Node=function(){function Node(options,body,imagelist,grouplist,globalOptions){_classCallCheck(this,Node),this.options=util.bridgeObject(globalOptions),this.globalOptions=globalOptions,this.body=body,this.edges=[],this.id=void 0,this.imagelist=imagelist,this.grouplist=grouplist,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new _Label2.default(this.body,this.options,!1),this.setOptions(options)}return _createClass(Node,[{key:"attachEdge",value:function(edge){this.edges.indexOf(edge)===-1&&this.edges.push(edge)}},{key:"detachEdge",value:function(edge){var index=this.edges.indexOf(edge);index!=-1&&this.edges.splice(index,1)}},{key:"setOptions",value:function(options){var currentShape=this.options.shape;if(options){if(void 0!==options.id&&(this.id=options.id),void 0===this.id)throw"Node must have an id";if(void 0!==options.x&&(null===options.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(options.x),this.predefinedPosition=!0)),void 0!==options.y&&(null===options.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(options.y),this.predefinedPosition=!0)),void 0!==options.size&&(this.baseSize=options.size),void 0!==options.value&&(options.value=parseFloat(options.value)),"number"==typeof options.group||"string"==typeof options.group&&""!=options.group){var groupObj=this.grouplist.get(options.group);util.deepExtend(this.options,groupObj),this.options.color=util.parseColor(this.options.color)}if(Node.parseOptions(this.options,options,!0,this.globalOptions),void 0!==this.options.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id)}return this.updateLabelModule(),this.updateShape(currentShape),void 0!==options.hidden||void 0!==options.physics}}},{key:"updateLabelModule",value:function(){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(currentShape){if(currentShape===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj);else switch(this.options.shape){case"box":this.shape=new _Box2.default(this.options,this.body,this.labelModule);break;case"circle":this.shape=new _Circle2.default(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new _CircularImage2.default(this.options,this.body,this.labelModule,this.imageObj);break;case"database":this.shape=new _Database2.default(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new _Diamond2.default(this.options,this.body,this.labelModule);break;case"dot":this.shape=new _Dot2.default(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new _Ellipse2.default(this.options,this.body,this.labelModule);break;case"icon":this.shape=new _Icon2.default(this.options,this.body,this.labelModule);break;case"image":this.shape=new _Image2.default(this.options,this.body,this.labelModule,this.imageObj);break;case"square":this.shape=new _Square2.default(this.options,this.body,this.labelModule);break;case"star":this.shape=new _Star2.default(this.options,this.body,this.labelModule);break;case"text":this.shape=new _Text2.default(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new _Triangle2.default(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new _TriangleDown2.default(this.options,this.body,this.labelModule);break;default:this.shape=new _Ellipse2.default(this.options,this.body,this.labelModule)}this._reset()}},{key:"select",value:function(){this.selected=!0,this._reset()}},{key:"unselect",value:function(){this.selected=!1,this._reset()}},{key:"_reset",value:function(){this.shape.width=void 0,this.shape.height=void 0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(ctx,angle){return this.shape.distanceToBorder(ctx,angle)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(min,max,total){if(void 0!==this.options.value){var scale=this.options.scaling.customScalingFunction(min,max,total,this.options.value),sizeDiff=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var fontDiff=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+scale*fontDiff}this.options.size=this.options.scaling.min+scale*sizeDiff}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(ctx){this.shape.draw(ctx,this.x,this.y,this.selected,this.hover)}},{key:"updateBoundingBox",value:function(ctx){this.shape.updateBoundingBox(this.x,this.y,ctx)}},{key:"resize",value:function(ctx){this.shape.resize(ctx,this.selected)}},{key:"isOverlappingWith",value:function(obj){return this.shape.left<obj.right&&this.shape.left+this.shape.width>obj.left&&this.shape.top<obj.bottom&&this.shape.top+this.shape.height>obj.top}},{key:"isBoundingBoxOverlappingWith",value:function(obj){return this.shape.boundingBox.left<obj.right&&this.shape.boundingBox.right>obj.left&&this.shape.boundingBox.top<obj.bottom&&this.shape.boundingBox.bottom>obj.top}}],[{key:"parseOptions",value:function(parentOptions,newOptions){var allowDeletion=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],globalOptions=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],fields=["color","font","fixed","shadow"];if(util.selectiveNotDeepExtend(fields,parentOptions,newOptions,allowDeletion),util.mergeOptions(parentOptions,newOptions,"shadow",allowDeletion,globalOptions),void 0!==newOptions.color&&null!==newOptions.color){var parsedColor=util.parseColor(newOptions.color);util.fillIfDefined(parentOptions.color,parsedColor)}else allowDeletion===!0&&null===newOptions.color&&(parentOptions.color=util.bridgeObject(globalOptions.color));void 0!==newOptions.fixed&&null!==newOptions.fixed&&("boolean"==typeof newOptions.fixed?(parentOptions.fixed.x=newOptions.fixed,parentOptions.fixed.y=newOptions.fixed):(void 0!==newOptions.fixed.x&&"boolean"==typeof newOptions.fixed.x&&(parentOptions.fixed.x=newOptions.fixed.x),void 0!==newOptions.fixed.y&&"boolean"==typeof newOptions.fixed.y&&(parentOptions.fixed.y=newOptions.fixed.y))),void 0!==newOptions.font&&null!==newOptions.font?_Label2.default.parseOptions(parentOptions.font,newOptions):allowDeletion===!0&&null===newOptions.font&&(parentOptions.font=util.bridgeObject(globalOptions.font)),void 0!==newOptions.scaling&&util.mergeOptions(parentOptions.scaling,newOptions.scaling,"label",allowDeletion,globalOptions.scaling)}}]),Node}();exports.default=Node},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),util=__webpack_require__(1),Label=function(){function Label(body,options){var edgelabel=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];_classCallCheck(this,Label),this.body=body,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(options),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=edgelabel}return _createClass(Label,[{key:"setOptions",value:function(options){var allowDeletion=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.nodeOptions=options,this.fontOptions=util.deepExtend({},options.font,!0),void 0!==options.label&&(this.labelDirty=!0),void 0!==options.font&&(Label.parseOptions(this.fontOptions,options,allowDeletion),"string"==typeof options.font?this.baseSize=this.fontOptions.size:"object"===_typeof(options.font)&&void 0!==options.font.size&&(this.baseSize=options.font.size))}},{key:"draw",value:function(ctx,x,y,selected){var baseline=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];if(void 0!==this.nodeOptions.label){var viewFontSize=this.fontOptions.size*this.body.view.scale;this.nodeOptions.label&&viewFontSize<this.nodeOptions.scaling.label.drawThreshold-1||(this.calculateLabelSize(ctx,selected,x,y,baseline),this._drawBackground(ctx),this._drawText(ctx,selected,x,y,baseline))}}},{key:"_drawBackground",value:function(ctx){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){ctx.fillStyle=this.fontOptions.background;var lineMargin=2;if(this.isEdgeLabel)switch(this.fontOptions.align){case"middle":ctx.fillRect(.5*-this.size.width,.5*-this.size.height,this.size.width,this.size.height);break;case"top":ctx.fillRect(.5*-this.size.width,-(this.size.height+lineMargin),this.size.width,this.size.height);break;case"bottom":ctx.fillRect(.5*-this.size.width,lineMargin,this.size.width,this.size.height);break;default:ctx.fillRect(this.size.left,this.size.top-.5*lineMargin,this.size.width,this.size.height)}else ctx.fillRect(this.size.left,this.size.top-.5*lineMargin,this.size.width,this.size.height)}}},{key:"_drawText",value:function(ctx,selected,x,y){var baseline=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4],fontSize=this.fontOptions.size,viewFontSize=fontSize*this.body.view.scale;viewFontSize>=this.nodeOptions.scaling.label.maxVisible&&(fontSize=Number(this.nodeOptions.scaling.label.maxVisible)/this.body.view.scale);var yLine=this.size.yLine,_getColor2=this._getColor(viewFontSize),_getColor3=_slicedToArray(_getColor2,2),fontColor=_getColor3[0],strokeColor=_getColor3[1],_setAlignment2=this._setAlignment(ctx,x,yLine,baseline),_setAlignment3=_slicedToArray(_setAlignment2,2);x=_setAlignment3[0],yLine=_setAlignment3[1],ctx.font=(selected&&this.nodeOptions.labelHighlightBold?"bold ":"")+fontSize+"px "+this.fontOptions.face,ctx.fillStyle=fontColor,this.isEdgeLabel||"left"!==this.fontOptions.align?ctx.textAlign="center":(ctx.textAlign=this.fontOptions.align,x-=.5*this.size.width),this.fontOptions.strokeWidth>0&&(ctx.lineWidth=this.fontOptions.strokeWidth,ctx.strokeStyle=strokeColor,ctx.lineJoin="round");for(var i=0;i<this.lineCount;i++)this.fontOptions.strokeWidth>0&&ctx.strokeText(this.lines[i],x,yLine),ctx.fillText(this.lines[i],x,yLine),yLine+=fontSize}},{key:"_setAlignment",value:function(ctx,x,yLine,baseline){if(this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&this.pointToSelf===!1){x=0,yLine=0;var lineMargin=2;"top"===this.fontOptions.align?(ctx.textBaseline="alphabetic",yLine-=2*lineMargin):"bottom"===this.fontOptions.align?(ctx.textBaseline="hanging",yLine+=2*lineMargin):ctx.textBaseline="middle"}else ctx.textBaseline=baseline;return[x,yLine]}},{key:"_getColor",value:function(viewFontSize){var fontColor=this.fontOptions.color||"#000000",strokeColor=this.fontOptions.strokeColor||"#ffffff";if(viewFontSize<=this.nodeOptions.scaling.label.drawThreshold){var opacity=Math.max(0,Math.min(1,1-(this.nodeOptions.scaling.label.drawThreshold-viewFontSize)));fontColor=util.overrideOpacity(fontColor,opacity),strokeColor=util.overrideOpacity(strokeColor,opacity)}return[fontColor,strokeColor]}},{key:"getTextSize",value:function(ctx){var selected=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],size={width:this._processLabel(ctx,selected),height:this.fontOptions.size*this.lineCount,lineCount:this.lineCount};return size}},{key:"calculateLabelSize",value:function(ctx,selected){var x=arguments.length<=2||void 0===arguments[2]?0:arguments[2],y=arguments.length<=3||void 0===arguments[3]?0:arguments[3],baseline=arguments.length<=4||void 0===arguments[4]?"middle":arguments[4];this.labelDirty===!0&&(this.size.width=this._processLabel(ctx,selected)),this.size.height=this.fontOptions.size*this.lineCount,this.size.left=x-.5*this.size.width,this.size.top=y-.5*this.size.height,this.size.yLine=y+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===baseline&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4),this.labelDirty=!1}},{key:"_processLabel",value:function(ctx,selected){var width=0,lines=[""],lineCount=0;if(void 0!==this.nodeOptions.label){lines=String(this.nodeOptions.label).split("\n"),lineCount=lines.length,ctx.font=(selected&&this.nodeOptions.labelHighlightBold?"bold ":"")+this.fontOptions.size+"px "+this.fontOptions.face,width=ctx.measureText(lines[0]).width;for(var i=1;i<lineCount;i++){var lineWidth=ctx.measureText(lines[i]).width;width=lineWidth>width?lineWidth:width}}return this.lines=lines,this.lineCount=lineCount,width}}],[{key:"parseOptions",value:function(parentOptions,newOptions){var allowDeletion=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if("string"==typeof newOptions.font){var newOptionsArray=newOptions.font.split(" ");parentOptions.size=newOptionsArray[0].replace("px",""),parentOptions.face=newOptionsArray[1],parentOptions.color=newOptionsArray[2]}else"object"===_typeof(newOptions.font)&&util.fillIfDefined(parentOptions,newOptions.font,allowDeletion);parentOptions.size=Number(parentOptions.size)}}]),Label}();exports.default=Label},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),Box=function(_NodeBase){function Box(options,body,labelModule){return _classCallCheck(this,Box),_possibleConstructorReturn(this,Object.getPrototypeOf(Box).call(this,options,body,labelModule))}return _inherits(Box,_NodeBase),_createClass(Box,[{key:"resize",value:function(ctx,selected){if(void 0===this.width){var margin=5,textSize=this.labelModule.getTextSize(ctx,selected);this.width=textSize.width+2*margin,this.height=textSize.height+2*margin,this.radius=.5*this.width}}},{key:"draw",value:function(ctx,x,y,selected,hover){this.resize(ctx,selected),this.left=x-this.width/2,this.top=y-this.height/2;var borderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth;ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border,ctx.lineWidth=selected?selectionLineWidth:borderWidth,ctx.lineWidth/=this.body.view.scale,ctx.lineWidth=Math.min(this.width,ctx.lineWidth),ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background;var borderRadius=this.options.shapeProperties.borderRadius;ctx.roundRect(this.left,this.top,this.width,this.height,borderRadius),this.enableShadow(ctx),ctx.fill(),this.disableShadow(ctx),ctx.save(),borderWidth>0&&(this.enableBorderDashes(ctx),ctx.stroke(),this.disableBorderDashes(ctx)),ctx.restore(),this.updateBoundingBox(x,y,ctx,selected),this.labelModule.draw(ctx,x,y,selected)}},{key:"updateBoundingBox",value:function(x,y,ctx,selected){this.resize(ctx,selected),this.left=x-.5*this.width,this.top=y-.5*this.height;var borderRadius=this.options.shapeProperties.borderRadius;this.boundingBox.left=this.left-borderRadius,this.boundingBox.top=this.top-borderRadius,this.boundingBox.bottom=this.top+this.height+borderRadius,this.boundingBox.right=this.left+this.width+borderRadius}},{key:"distanceToBorder",value:function(ctx,angle){this.resize(ctx);var borderWidth=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(angle)),Math.abs(this.height/2/Math.sin(angle)))+borderWidth}}]),Box}(_NodeBase3.default);exports.default=Box},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),NodeBase=function(){function NodeBase(options,body,labelModule){_classCallCheck(this,NodeBase),this.body=body,this.labelModule=labelModule,this.setOptions(options),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return _createClass(NodeBase,[{key:"setOptions",value:function(options){this.options=options}},{key:"_distanceToBorder",value:function(ctx,angle){var borderWidth=this.options.borderWidth;return this.resize(ctx),Math.min(Math.abs(this.width/2/Math.cos(angle)),Math.abs(this.height/2/Math.sin(angle)))+borderWidth}},{key:"enableShadow",value:function(ctx){this.options.shadow.enabled===!0&&(ctx.shadowColor=this.options.shadow.color,ctx.shadowBlur=this.options.shadow.size,ctx.shadowOffsetX=this.options.shadow.x,ctx.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(ctx){this.options.shadow.enabled===!0&&(ctx.shadowColor="rgba(0,0,0,0)",ctx.shadowBlur=0,ctx.shadowOffsetX=0,ctx.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(ctx){if(this.options.shapeProperties.borderDashes!==!1)if(void 0!==ctx.setLineDash){var dashes=this.options.shapeProperties.borderDashes;dashes===!0&&(dashes=[5,15]),ctx.setLineDash(dashes)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1}},{key:"disableBorderDashes",value:function(ctx){this.options.shapeProperties.borderDashes!==!1&&(void 0!==ctx.setLineDash?ctx.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1))}}]),NodeBase}();exports.default=NodeBase},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass);
}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CircleImageBase2=__webpack_require__(70),_CircleImageBase3=_interopRequireDefault(_CircleImageBase2),Circle=function(_CircleImageBase){function Circle(options,body,labelModule){return _classCallCheck(this,Circle),_possibleConstructorReturn(this,Object.getPrototypeOf(Circle).call(this,options,body,labelModule))}return _inherits(Circle,_CircleImageBase),_createClass(Circle,[{key:"resize",value:function(ctx,selected){if(void 0===this.width){var margin=5,textSize=this.labelModule.getTextSize(ctx,selected),diameter=Math.max(textSize.width,textSize.height)+2*margin;this.options.size=diameter/2,this.width=diameter,this.height=diameter,this.radius=.5*this.width}}},{key:"draw",value:function(ctx,x,y,selected,hover){this.resize(ctx,selected),this.left=x-this.width/2,this.top=y-this.height/2,this._drawRawCircle(ctx,x,y,selected,hover,this.options.size),this.boundingBox.top=y-this.options.size,this.boundingBox.left=x-this.options.size,this.boundingBox.right=x+this.options.size,this.boundingBox.bottom=y+this.options.size,this.updateBoundingBox(x,y),this.labelModule.draw(ctx,x,y,selected)}},{key:"updateBoundingBox",value:function(x,y){this.boundingBox.top=y-this.options.size,this.boundingBox.left=x-this.options.size,this.boundingBox.right=x+this.options.size,this.boundingBox.bottom=y+this.options.size}},{key:"distanceToBorder",value:function(ctx,angle){return this.resize(ctx),.5*this.width}}]),Circle}(_CircleImageBase3.default);exports.default=Circle},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),CircleImageBase=function(_NodeBase){function CircleImageBase(options,body,labelModule){_classCallCheck(this,CircleImageBase);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(CircleImageBase).call(this,options,body,labelModule));return _this.labelOffset=0,_this.imageLoaded=!1,_this}return _inherits(CircleImageBase,_NodeBase),_createClass(CircleImageBase,[{key:"setOptions",value:function(options,imageObj){this.options=options,imageObj&&(this.imageObj=imageObj)}},{key:"_resizeImage",value:function(){var force=!1;if(this.imageObj.width&&this.imageObj.height?this.imageLoaded===!1&&(this.imageLoaded=!0,force=!0):this.imageLoaded=!1,!this.width||!this.height||force===!0){var width,height,ratio;this.imageObj.width&&this.imageObj.height&&(width=0,height=0),this.options.shapeProperties.useImageSize===!1?this.imageObj.width>this.imageObj.height?(ratio=this.imageObj.width/this.imageObj.height,width=2*this.options.size*ratio||this.imageObj.width,height=2*this.options.size||this.imageObj.height):(ratio=this.imageObj.width&&this.imageObj.height?this.imageObj.height/this.imageObj.width:1,width=2*this.options.size,height=2*this.options.size*ratio):(width=this.imageObj.width,height=this.imageObj.height),this.width=width,this.height=height,this.radius=.5*this.width}}},{key:"_drawRawCircle",value:function(ctx,x,y,selected,hover,size){var neutralborderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth,borderWidth=(selected?selectionLineWidth:neutralborderWidth)/this.body.view.scale;ctx.lineWidth=Math.min(this.width,borderWidth),ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border,ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background,ctx.circle(x,y,size),this.enableShadow(ctx),ctx.fill(),this.disableShadow(ctx),ctx.save(),borderWidth>0&&(this.enableBorderDashes(ctx),ctx.stroke(),this.disableBorderDashes(ctx)),ctx.restore()}},{key:"_drawImageAtPosition",value:function(ctx){if(0!=this.imageObj.width){ctx.globalAlpha=1,this.enableShadow(ctx);var factor=this.imageObj.width/this.width/this.body.view.scale;if(factor>2&&this.options.shapeProperties.interpolation===!0){var w=this.imageObj.width,h=this.imageObj.height,can2=document.createElement("canvas");can2.width=w,can2.height=w;var ctx2=can2.getContext("2d");factor*=.5,w*=.5,h*=.5,ctx2.drawImage(this.imageObj,0,0,w,h);for(var distance=0,iterations=1;factor>2&&iterations<4;)ctx2.drawImage(can2,distance,0,w,h,distance+w,0,w/2,h/2),distance+=w,factor*=.5,w*=.5,h*=.5,iterations+=1;ctx.drawImage(can2,distance,0,w,h,this.left,this.top,this.width,this.height)}else ctx.drawImage(this.imageObj,this.left,this.top,this.width,this.height);this.disableShadow(ctx)}}},{key:"_drawImageLabel",value:function(ctx,x,y,selected){var yLabel,offset=0;if(void 0!==this.height){offset=.5*this.height;var labelDimensions=this.labelModule.getTextSize(ctx);labelDimensions.lineCount>=1&&(offset+=labelDimensions.height/2)}yLabel=y+offset,this.options.label&&(this.labelOffset=offset),this.labelModule.draw(ctx,x,yLabel,selected,"hanging")}}]),CircleImageBase}(_NodeBase3.default);exports.default=CircleImageBase},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CircleImageBase2=__webpack_require__(70),_CircleImageBase3=_interopRequireDefault(_CircleImageBase2),CircularImage=function(_CircleImageBase){function CircularImage(options,body,labelModule,imageObj){_classCallCheck(this,CircularImage);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(CircularImage).call(this,options,body,labelModule));return _this.imageObj=imageObj,_this._swapToImageResizeWhenImageLoaded=!0,_this}return _inherits(CircularImage,_CircleImageBase),_createClass(CircularImage,[{key:"resize",value:function(){if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){if(!this.width){var diameter=2*this.options.size;this.width=diameter,this.height=diameter,this._swapToImageResizeWhenImageLoaded=!0,this.radius=.5*this.width}}else this._swapToImageResizeWhenImageLoaded&&(this.width=void 0,this.height=void 0,this._swapToImageResizeWhenImageLoaded=!1),this._resizeImage()}},{key:"draw",value:function(ctx,x,y,selected,hover){this.resize(),this.left=x-this.width/2,this.top=y-this.height/2;var size=Math.min(.5*this.height,.5*this.width);this._drawRawCircle(ctx,x,y,selected,hover,size),ctx.save(),ctx.clip(),this._drawImageAtPosition(ctx),ctx.restore(),this._drawImageLabel(ctx,x,y,selected),this.updateBoundingBox(x,y)}},{key:"updateBoundingBox",value:function(x,y){this.boundingBox.top=y-this.options.size,this.boundingBox.left=x-this.options.size,this.boundingBox.right=x+this.options.size,this.boundingBox.bottom=y+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(ctx,angle){return this.resize(ctx),.5*this.width}}]),CircularImage}(_CircleImageBase3.default);exports.default=CircularImage},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),Database=function(_NodeBase){function Database(options,body,labelModule){return _classCallCheck(this,Database),_possibleConstructorReturn(this,Object.getPrototypeOf(Database).call(this,options,body,labelModule))}return _inherits(Database,_NodeBase),_createClass(Database,[{key:"resize",value:function(ctx,selected){if(void 0===this.width){var margin=5,textSize=this.labelModule.getTextSize(ctx,selected),size=textSize.width+2*margin;this.width=size,this.height=size,this.radius=.5*this.width}}},{key:"draw",value:function(ctx,x,y,selected,hover){this.resize(ctx,selected),this.left=x-this.width/2,this.top=y-this.height/2;var neutralborderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth,borderWidth=(selected?selectionLineWidth:neutralborderWidth)/this.body.view.scale;ctx.lineWidth=Math.min(this.width,borderWidth),ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border,ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background,ctx.database(x-this.width/2,y-.5*this.height,this.width,this.height),this.enableShadow(ctx),ctx.fill(),this.disableShadow(ctx),ctx.save(),borderWidth>0&&(this.enableBorderDashes(ctx),ctx.stroke(),this.disableBorderDashes(ctx)),ctx.restore(),this.updateBoundingBox(x,y,ctx,selected),this.labelModule.draw(ctx,x,y,selected)}},{key:"updateBoundingBox",value:function(x,y,ctx,selected){this.resize(ctx,selected),this.left=x-.5*this.width,this.top=y-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Database}(_NodeBase3.default);exports.default=Database},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ShapeBase2=__webpack_require__(74),_ShapeBase3=_interopRequireDefault(_ShapeBase2),Diamond=function(_ShapeBase){function Diamond(options,body,labelModule){return _classCallCheck(this,Diamond),_possibleConstructorReturn(this,Object.getPrototypeOf(Diamond).call(this,options,body,labelModule))}return _inherits(Diamond,_ShapeBase),_createClass(Diamond,[{key:"resize",value:function(ctx){this._resizeShape()}},{key:"draw",value:function(ctx,x,y,selected,hover){this._drawShape(ctx,"diamond",4,x,y,selected,hover)}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Diamond}(_ShapeBase3.default);exports.default=Diamond},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),ShapeBase=function(_NodeBase){function ShapeBase(options,body,labelModule){return _classCallCheck(this,ShapeBase),_possibleConstructorReturn(this,Object.getPrototypeOf(ShapeBase).call(this,options,body,labelModule))}return _inherits(ShapeBase,_NodeBase),_createClass(ShapeBase,[{key:"_resizeShape",value:function(){if(void 0===this.width){var size=2*this.options.size;this.width=size,this.height=size,this.radius=.5*this.width}}},{key:"_drawShape",value:function(ctx,shape,sizeMultiplier,x,y,selected,hover){this._resizeShape(),this.left=x-this.width/2,this.top=y-this.height/2;var neutralborderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth,borderWidth=(selected?selectionLineWidth:neutralborderWidth)/this.body.view.scale;if(ctx.lineWidth=Math.min(this.width,borderWidth),ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border,ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background,ctx[shape](x,y,this.options.size),this.enableShadow(ctx),ctx.fill(),this.disableShadow(ctx),ctx.save(),borderWidth>0&&(this.enableBorderDashes(ctx),ctx.stroke(),this.disableBorderDashes(ctx)),ctx.restore(),void 0!==this.options.label){var yLabel=y+.5*this.height+3;this.labelModule.draw(ctx,x,yLabel,selected,"hanging")}this.updateBoundingBox(x,y)}},{key:"updateBoundingBox",value:function(x,y){this.boundingBox.top=y-this.options.size,this.boundingBox.left=x-this.options.size,this.boundingBox.right=x+this.options.size,this.boundingBox.bottom=y+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+3))}}]),ShapeBase}(_NodeBase3.default);exports.default=ShapeBase},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ShapeBase2=__webpack_require__(74),_ShapeBase3=_interopRequireDefault(_ShapeBase2),Dot=function(_ShapeBase){function Dot(options,body,labelModule){return _classCallCheck(this,Dot),_possibleConstructorReturn(this,Object.getPrototypeOf(Dot).call(this,options,body,labelModule))}return _inherits(Dot,_ShapeBase),_createClass(Dot,[{key:"resize",value:function(ctx){this._resizeShape()}},{key:"draw",value:function(ctx,x,y,selected,hover){this._drawShape(ctx,"circle",2,x,y,selected,hover)}},{key:"distanceToBorder",value:function(ctx,angle){return this.resize(ctx),this.options.size}}]),Dot}(_ShapeBase3.default);exports.default=Dot},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),Ellipse=function(_NodeBase){function Ellipse(options,body,labelModule){return _classCallCheck(this,Ellipse),_possibleConstructorReturn(this,Object.getPrototypeOf(Ellipse).call(this,options,body,labelModule))}return _inherits(Ellipse,_NodeBase),_createClass(Ellipse,[{key:"resize",value:function(ctx,selected){if(void 0===this.width){var textSize=this.labelModule.getTextSize(ctx,selected);this.width=1.5*textSize.width,this.height=2*textSize.height,this.width<this.height&&(this.width=this.height),this.radius=.5*this.width}}},{key:"draw",value:function(ctx,x,y,selected,hover){this.resize(ctx,selected),this.left=x-.5*this.width,this.top=y-.5*this.height;var neutralborderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth,borderWidth=(selected?selectionLineWidth:neutralborderWidth)/this.body.view.scale;ctx.lineWidth=Math.min(this.width,borderWidth),ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border,ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background,ctx.ellipse(this.left,this.top,this.width,this.height),this.enableShadow(ctx),ctx.fill(),this.disableShadow(ctx),ctx.save(),borderWidth>0&&(this.enableBorderDashes(ctx),ctx.stroke(),this.disableBorderDashes(ctx)),ctx.restore(),this.updateBoundingBox(x,y,ctx,selected),this.labelModule.draw(ctx,x,y,selected)}},{key:"updateBoundingBox",value:function(x,y,ctx,selected){this.resize(ctx,selected),this.left=x-.5*this.width,this.top=y-.5*this.height,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function(ctx,angle){this.resize(ctx);var a=.5*this.width,b=.5*this.height,w=Math.sin(angle)*a,h=Math.cos(angle)*b;return a*b/Math.sqrt(w*w+h*h)}}]),Ellipse}(_NodeBase3.default);exports.default=Ellipse},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),Icon=function(_NodeBase){function Icon(options,body,labelModule){return _classCallCheck(this,Icon),_possibleConstructorReturn(this,Object.getPrototypeOf(Icon).call(this,options,body,labelModule))}return _inherits(Icon,_NodeBase),_createClass(Icon,[{key:"resize",value:function(ctx){if(void 0===this.width){var margin=5,iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)};this.width=iconSize.width+2*margin,this.height=iconSize.height+2*margin,this.radius=.5*this.width}}},{key:"draw",value:function(ctx,x,y,selected,hover){if(this.resize(ctx),this.options.icon.size=this.options.icon.size||50,this.left=x-.5*this.width,this.top=y-.5*this.height,this._icon(ctx,x,y,selected),void 0!==this.options.label){var iconTextSpacing=5;this.labelModule.draw(ctx,x,y+.5*this.height+iconTextSpacing,selected)}this.updateBoundingBox(x,y)}},{key:"updateBoundingBox",value:function(x,y){if(this.boundingBox.top=y-.5*this.options.icon.size,this.boundingBox.left=x-.5*this.options.icon.size,this.boundingBox.right=x+.5*this.options.icon.size,this.boundingBox.bottom=y+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0){var iconTextSpacing=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+iconTextSpacing)}}},{key:"_icon",value:function(ctx,x,y,selected){var iconSize=Number(this.options.icon.size);void 0!==this.options.icon.code?(ctx.font=(selected?"bold ":"")+iconSize+"px "+this.options.icon.face,ctx.fillStyle=this.options.icon.color||"black",ctx.textAlign="center",ctx.textBaseline="middle",this.enableShadow(ctx),ctx.fillText(this.options.icon.code,x,y),this.disableShadow(ctx)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Icon}(_NodeBase3.default);exports.default=Icon},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CircleImageBase2=__webpack_require__(70),_CircleImageBase3=_interopRequireDefault(_CircleImageBase2),Image=function(_CircleImageBase){function Image(options,body,labelModule,imageObj){_classCallCheck(this,Image);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Image).call(this,options,body,labelModule));return _this.imageObj=imageObj,_this}return _inherits(Image,_CircleImageBase),_createClass(Image,[{key:"resize",value:function(){this._resizeImage()}},{key:"draw",value:function(ctx,x,y,selected,hover){if(this.resize(),this.left=x-this.width/2,this.top=y-this.height/2,this.options.shapeProperties.useBorderWithImage===!0){var neutralborderWidth=this.options.borderWidth,selectionLineWidth=this.options.borderWidthSelected||2*this.options.borderWidth,borderWidth=(selected?selectionLineWidth:neutralborderWidth)/this.body.view.scale;ctx.lineWidth=Math.min(this.width,borderWidth),ctx.beginPath(),ctx.strokeStyle=selected?this.options.color.highlight.border:hover?this.options.color.hover.border:this.options.color.border,ctx.fillStyle=selected?this.options.color.highlight.background:hover?this.options.color.hover.background:this.options.color.background,ctx.rect(this.left-.5*ctx.lineWidth,this.top-.5*ctx.lineWidth,this.width+ctx.lineWidth,this.height+ctx.lineWidth),ctx.fill(),ctx.save(),borderWidth>0&&(this.enableBorderDashes(ctx),ctx.stroke(),this.disableBorderDashes(ctx)),ctx.restore(),ctx.closePath()}this._drawImageAtPosition(ctx),this._drawImageLabel(ctx,x,y,selected||hover),this.updateBoundingBox(x,y)}},{key:"updateBoundingBox",value:function(x,y){this.resize(),this.left=x-this.width/2,this.top=y-this.height/2,
this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Image}(_CircleImageBase3.default);exports.default=Image},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ShapeBase2=__webpack_require__(74),_ShapeBase3=_interopRequireDefault(_ShapeBase2),Square=function(_ShapeBase){function Square(options,body,labelModule){return _classCallCheck(this,Square),_possibleConstructorReturn(this,Object.getPrototypeOf(Square).call(this,options,body,labelModule))}return _inherits(Square,_ShapeBase),_createClass(Square,[{key:"resize",value:function(){this._resizeShape()}},{key:"draw",value:function(ctx,x,y,selected,hover){this._drawShape(ctx,"square",2,x,y,selected,hover)}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Square}(_ShapeBase3.default);exports.default=Square},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ShapeBase2=__webpack_require__(74),_ShapeBase3=_interopRequireDefault(_ShapeBase2),Star=function(_ShapeBase){function Star(options,body,labelModule){return _classCallCheck(this,Star),_possibleConstructorReturn(this,Object.getPrototypeOf(Star).call(this,options,body,labelModule))}return _inherits(Star,_ShapeBase),_createClass(Star,[{key:"resize",value:function(ctx){this._resizeShape()}},{key:"draw",value:function(ctx,x,y,selected,hover){this._drawShape(ctx,"star",4,x,y,selected,hover)}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Star}(_ShapeBase3.default);exports.default=Star},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NodeBase2=__webpack_require__(68),_NodeBase3=_interopRequireDefault(_NodeBase2),Text=function(_NodeBase){function Text(options,body,labelModule){return _classCallCheck(this,Text),_possibleConstructorReturn(this,Object.getPrototypeOf(Text).call(this,options,body,labelModule))}return _inherits(Text,_NodeBase),_createClass(Text,[{key:"resize",value:function(ctx,selected){if(void 0===this.width){var margin=5,textSize=this.labelModule.getTextSize(ctx,selected);this.width=textSize.width+2*margin,this.height=textSize.height+2*margin,this.radius=.5*this.width}}},{key:"draw",value:function(ctx,x,y,selected,hover){this.resize(ctx,selected||hover),this.left=x-this.width/2,this.top=y-this.height/2,this.enableShadow(ctx),this.labelModule.draw(ctx,x,y,selected||hover),this.disableShadow(ctx),this.updateBoundingBox(x,y,ctx,selected)}},{key:"updateBoundingBox",value:function(x,y,ctx,selected){this.resize(ctx,selected),this.left=x-this.width/2,this.top=y-this.height/2,this.boundingBox.top=this.top,this.boundingBox.left=this.left,this.boundingBox.right=this.left+this.width,this.boundingBox.bottom=this.top+this.height}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Text}(_NodeBase3.default);exports.default=Text},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ShapeBase2=__webpack_require__(74),_ShapeBase3=_interopRequireDefault(_ShapeBase2),Triangle=function(_ShapeBase){function Triangle(options,body,labelModule){return _classCallCheck(this,Triangle),_possibleConstructorReturn(this,Object.getPrototypeOf(Triangle).call(this,options,body,labelModule))}return _inherits(Triangle,_ShapeBase),_createClass(Triangle,[{key:"resize",value:function(ctx){this._resizeShape()}},{key:"draw",value:function(ctx,x,y,selected,hover){this._drawShape(ctx,"triangle",3,x,y,selected,hover)}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),Triangle}(_ShapeBase3.default);exports.default=Triangle},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ShapeBase2=__webpack_require__(74),_ShapeBase3=_interopRequireDefault(_ShapeBase2),TriangleDown=function(_ShapeBase){function TriangleDown(options,body,labelModule){return _classCallCheck(this,TriangleDown),_possibleConstructorReturn(this,Object.getPrototypeOf(TriangleDown).call(this,options,body,labelModule))}return _inherits(TriangleDown,_ShapeBase),_createClass(TriangleDown,[{key:"resize",value:function(ctx){this._resizeShape()}},{key:"draw",value:function(ctx,x,y,selected,hover){this._drawShape(ctx,"triangleDown",3,x,y,selected,hover)}},{key:"distanceToBorder",value:function(ctx,angle){return this._distanceToBorder(ctx,angle)}}]),TriangleDown}(_ShapeBase3.default);exports.default=TriangleDown},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Edge=__webpack_require__(85),_Edge2=_interopRequireDefault(_Edge),_Label=__webpack_require__(66),_Label2=_interopRequireDefault(_Label),util=__webpack_require__(1),DataSet=__webpack_require__(9),DataView=__webpack_require__(11),EdgesHandler=function(){function EdgesHandler(body,images,groups){var _this=this;_classCallCheck(this,EdgesHandler),this.body=body,this.images=images,this.groups=groups,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(event,params){_this.add(params.items)},update:function(event,params){_this.update(params.items)},remove:function(event,params){_this.remove(params.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1},middle:{enabled:!1,scaleFactor:1},from:{enabled:!1,scaleFactor:1}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal"},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(min,max,total,value){if(max===min)return.5;var scale=1/(max-min);return Math.max(0,(value-min)*scale)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},util.extend(this.options,this.defaultOptions),this.bindEventListeners()}return _createClass(EdgesHandler,[{key:"bindEventListeners",value:function(){var _this2=this;this.body.emitter.on("_forceDisableDynamicCurves",function(type){"dynamic"===type&&(type="continuous");var emitChange=!1;for(var edgeId in _this2.body.edges)if(_this2.body.edges.hasOwnProperty(edgeId)){var edge=_this2.body.edges[edgeId],edgeData=_this2.body.data.edges._data[edgeId];if(void 0!==edgeData){var edgeOptions=edgeData.smooth;void 0!==edgeOptions&&edgeOptions.enabled===!0&&"dynamic"===edgeOptions.type&&(void 0===type?edge.setOptions({smooth:!1}):edge.setOptions({smooth:{type:type}}),emitChange=!0)}}emitChange===!0&&_this2.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){_this2.reconnectEdges(),_this2.markAllEdgesAsDirty()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){util.forEach(_this2.edgesListeners,function(callback,event){_this2.body.data.edges&&_this2.body.data.edges.off(event,callback)}),delete _this2.body.functions.createEdge,delete _this2.edgesListeners.add,delete _this2.edgesListeners.update,delete _this2.edgesListeners.remove,delete _this2.edgesListeners})}},{key:"setOptions",value:function(options){if(void 0!==options){_Edge2.default.parseOptions(this.options,options),void 0!==options.color&&this.markAllEdgesAsDirty();var dataChanged=!1;if(void 0!==options.smooth)for(var edgeId in this.body.edges)this.body.edges.hasOwnProperty(edgeId)&&(dataChanged=this.body.edges[edgeId].updateEdgeType()||dataChanged);if(void 0!==options.font){_Label2.default.parseOptions(this.options.font,options);for(var _edgeId in this.body.edges)this.body.edges.hasOwnProperty(_edgeId)&&this.body.edges[_edgeId].updateLabelModule()}void 0===options.hidden&&void 0===options.physics&&dataChanged!==!0||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(edges){var _this3=this,doNotEmit=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],oldEdgesData=this.body.data.edges;if(edges instanceof DataSet||edges instanceof DataView)this.body.data.edges=edges;else if(Array.isArray(edges))this.body.data.edges=new DataSet,this.body.data.edges.add(edges);else{if(edges)throw new TypeError("Array or DataSet expected");this.body.data.edges=new DataSet}if(oldEdgesData&&util.forEach(this.edgesListeners,function(callback,event){oldEdgesData.off(event,callback)}),this.body.edges={},this.body.data.edges){util.forEach(this.edgesListeners,function(callback,event){_this3.body.data.edges.on(event,callback)});var ids=this.body.data.edges.getIds();this.add(ids,!0)}doNotEmit===!1&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(ids){for(var doNotEmit=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],edges=this.body.edges,edgesData=this.body.data.edges,i=0;i<ids.length;i++){var id=ids[i],oldEdge=edges[id];oldEdge&&oldEdge.disconnect();var data=edgesData.get(id,{showInternalIds:!0});edges[id]=this.create(data)}doNotEmit===!1&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(ids){for(var edges=this.body.edges,edgesData=this.body.data.edges,dataChanged=!1,i=0;i<ids.length;i++){var id=ids[i],data=edgesData.get(id),edge=edges[id];void 0!==edge?(edge.disconnect(),dataChanged=edge.setOptions(data)||dataChanged,edge.connect()):(this.body.edges[id]=this.create(data),dataChanged=!0)}dataChanged===!0?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(ids){for(var edges=this.body.edges,i=0;i<ids.length;i++){var id=ids[i],edge=edges[id];void 0!==edge&&(edge.cleanup(),edge.disconnect(),delete edges[id])}this.body.emitter.emit("_dataChanged")}},{key:"refresh",value:function(){var edges=this.body.edges;for(var edgeId in edges){var edge=void 0;edges.hasOwnProperty(edgeId)&&(edge=edges[edgeId]);var data=this.body.data.edges._data[edgeId];void 0!==edge&&void 0!==data&&edge.setOptions(data)}}},{key:"create",value:function(properties){return new _Edge2.default(properties,this.body,this.options)}},{key:"markAllEdgesAsDirty",value:function(){for(var edgeId in this.body.edges)this.body.edges[edgeId].edgeType.colorDirty=!0}},{key:"reconnectEdges",value:function(){var id,nodes=this.body.nodes,edges=this.body.edges;for(id in nodes)nodes.hasOwnProperty(id)&&(nodes[id].edges=[]);for(id in edges)if(edges.hasOwnProperty(id)){var edge=edges[id];edge.from=null,edge.to=null,edge.connect()}}},{key:"getConnectedNodes",value:function(edgeId){var nodeList=[];if(void 0!==this.body.edges[edgeId]){var edge=this.body.edges[edgeId];edge.fromId&&nodeList.push(edge.fromId),edge.toId&&nodeList.push(edge.toId)}return nodeList}}]),EdgesHandler}();exports.default=EdgesHandler},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Label=__webpack_require__(66),_Label2=_interopRequireDefault(_Label),_CubicBezierEdge=__webpack_require__(86),_CubicBezierEdge2=_interopRequireDefault(_CubicBezierEdge),_BezierEdgeDynamic=__webpack_require__(90),_BezierEdgeDynamic2=_interopRequireDefault(_BezierEdgeDynamic),_BezierEdgeStatic=__webpack_require__(91),_BezierEdgeStatic2=_interopRequireDefault(_BezierEdgeStatic),_StraightEdge=__webpack_require__(92),_StraightEdge2=_interopRequireDefault(_StraightEdge),util=__webpack_require__(1),Edge=function(){function Edge(options,body,globalOptions){if(_classCallCheck(this,Edge),void 0===body)throw"No body provided";this.options=util.bridgeObject(globalOptions),this.globalOptions=globalOptions,this.body=body,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.colorDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new _Label2.default(this.body,this.options,!0),this.setOptions(options)}return _createClass(Edge,[{key:"setOptions",value:function(options){if(options){this.colorDirty=!0,Edge.parseOptions(this.options,options,!0,this.globalOptions),void 0!==options.id&&(this.id=options.id),void 0!==options.from&&(this.fromId=options.from),void 0!==options.to&&(this.toId=options.to),void 0!==options.title&&(this.title=options.title),void 0!==options.value&&(options.value=parseFloat(options.value)),this.updateLabelModule();var dataChanged=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===options.hidden&&void 0===options.physics||(dataChanged=!0),dataChanged}}},{key:"updateLabelModule",value:function(){this.labelModule.setOptions(this.options,!0),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var dataChanged=!1,changeInType=!0,smooth=this.options.smooth;return void 0!==this.edgeType&&(this.edgeType instanceof _BezierEdgeDynamic2.default&&smooth.enabled===!0&&"dynamic"===smooth.type&&(changeInType=!1),this.edgeType instanceof _CubicBezierEdge2.default&&smooth.enabled===!0&&"cubicBezier"===smooth.type&&(changeInType=!1),this.edgeType instanceof _BezierEdgeStatic2.default&&smooth.enabled===!0&&"dynamic"!==smooth.type&&"cubicBezier"!==smooth.type&&(changeInType=!1),this.edgeType instanceof _StraightEdge2.default&&smooth.enabled===!1&&(changeInType=!1),changeInType===!0&&(dataChanged=this.cleanup())),changeInType===!0?this.options.smooth.enabled===!0?"dynamic"===this.options.smooth.type?(dataChanged=!0,this.edgeType=new _BezierEdgeDynamic2.default(this.options,this.body,this.labelModule)):"cubicBezier"===this.options.smooth.type?this.edgeType=new _CubicBezierEdge2.default(this.options,this.body,this.labelModule):this.edgeType=new _BezierEdgeStatic2.default(this.options,this.body,this.labelModule):this.edgeType=new _StraightEdge2.default(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),dataChanged}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,this.connected===!0?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(min,max,total){if(void 0!==this.options.value){var scale=this.options.scaling.customScalingFunction(min,max,total,this.options.value),widthDiff=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===!0){var fontDiff=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+scale*fontDiff}this.options.width=this.options.scaling.min+scale*widthDiff}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(ctx){var viaNode=this.edgeType.getViaNode(),arrowData={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,this.options.arrows.from.enabled===!0&&(arrowData.from=this.edgeType.getArrowData(ctx,"from",viaNode,this.selected,this.hover),this.options.arrowStrikethrough===!1&&(this.edgeType.fromPoint=arrowData.from.core)),this.options.arrows.to.enabled===!0&&(arrowData.to=this.edgeType.getArrowData(ctx,"to",viaNode,this.selected,this.hover),this.options.arrowStrikethrough===!1&&(this.edgeType.toPoint=arrowData.to.core)),this.options.arrows.middle.enabled===!0&&(arrowData.middle=this.edgeType.getArrowData(ctx,"middle",viaNode,this.selected,this.hover)),this.edgeType.drawLine(ctx,this.selected,this.hover,viaNode),this.drawArrows(ctx,arrowData),this.drawLabel(ctx,viaNode)}},{key:"drawArrows",value:function(ctx,arrowData){this.options.arrows.from.enabled===!0&&this.edgeType.drawArrowHead(ctx,this.selected,this.hover,arrowData.from),this.options.arrows.middle.enabled===!0&&this.edgeType.drawArrowHead(ctx,this.selected,this.hover,arrowData.middle),this.options.arrows.to.enabled===!0&&this.edgeType.drawArrowHead(ctx,this.selected,this.hover,arrowData.to)}},{key:"drawLabel",value:function(ctx,viaNode){if(void 0!==this.options.label){var node1=this.from,node2=this.to,selected=this.from.selected||this.to.selected||this.selected;if(node1.id!=node2.id){this.labelModule.pointToSelf=!1;var point=this.edgeType.getPoint(.5,viaNode);ctx.save(),"horizontal"!==this.options.font.align&&(this.labelModule.calculateLabelSize(ctx,selected,point.x,point.y),ctx.translate(point.x,this.labelModule.size.yLine),this._rotateForLabelAlignment(ctx)),this.labelModule.draw(ctx,point.x,point.y,selected),ctx.restore()}else{this.labelModule.pointToSelf=!0;var x,y,radius=this.options.selfReferenceSize;node1.shape.width>node1.shape.height?(x=node1.x+.5*node1.shape.width,y=node1.y-radius):(x=node1.x+radius,y=node1.y-.5*node1.shape.height),point=this._pointOnCircle(x,y,radius,.125),this.labelModule.draw(ctx,point.x,point.y,selected)}}}},{key:"isOverlappingWith",value:function(obj){if(this.connected){var distMax=10,xFrom=this.from.x,yFrom=this.from.y,xTo=this.to.x,yTo=this.to.y,xObj=obj.left,yObj=obj.top,dist=this.edgeType.getDistanceToEdge(xFrom,yFrom,xTo,yTo,xObj,yObj);return dist<distMax}return!1}},{key:"_rotateForLabelAlignment",value:function(ctx){var dy=this.from.y-this.to.y,dx=this.from.x-this.to.x,angleInDegrees=Math.atan2(dy,dx);(angleInDegrees<-1&&dx<0||angleInDegrees>0&&dx<0)&&(angleInDegrees+=Math.PI),ctx.rotate(angleInDegrees)}},{key:"_pointOnCircle",value:function(x,y,radius,percentage){var angle=2*percentage*Math.PI;return{x:x+radius*Math.cos(angle),y:y-radius*Math.sin(angle)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}}],[{key:"parseOptions",value:function(parentOptions,newOptions){var allowDeletion=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],globalOptions=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],fields=["arrowStrikethrough","id","from","hidden","hoverWidth","label","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width"];if(util.selectiveDeepExtend(fields,parentOptions,newOptions,allowDeletion),util.mergeOptions(parentOptions,newOptions,"smooth",allowDeletion,globalOptions),util.mergeOptions(parentOptions,newOptions,"shadow",allowDeletion,globalOptions),void 0!==newOptions.dashes&&null!==newOptions.dashes?parentOptions.dashes=newOptions.dashes:allowDeletion===!0&&null===newOptions.dashes&&(parentOptions.dashes=Object.create(globalOptions.dashes)),void 0!==newOptions.scaling&&null!==newOptions.scaling?(void 0!==newOptions.scaling.min&&(parentOptions.scaling.min=newOptions.scaling.min),void 0!==newOptions.scaling.max&&(parentOptions.scaling.max=newOptions.scaling.max),util.mergeOptions(parentOptions.scaling,newOptions.scaling,"label",allowDeletion,globalOptions.scaling)):allowDeletion===!0&&null===newOptions.scaling&&(parentOptions.scaling=Object.create(globalOptions.scaling)),void 0!==newOptions.arrows&&null!==newOptions.arrows)if("string"==typeof newOptions.arrows){var arrows=newOptions.arrows.toLowerCase();parentOptions.arrows.to.enabled=arrows.indexOf("to")!=-1,parentOptions.arrows.middle.enabled=arrows.indexOf("middle")!=-1,parentOptions.arrows.from.enabled=arrows.indexOf("from")!=-1}else{if("object"!==_typeof(newOptions.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(newOptions.arrows));util.mergeOptions(parentOptions.arrows,newOptions.arrows,"to",allowDeletion,globalOptions.arrows),util.mergeOptions(parentOptions.arrows,newOptions.arrows,"middle",allowDeletion,globalOptions.arrows),util.mergeOptions(parentOptions.arrows,newOptions.arrows,"from",allowDeletion,globalOptions.arrows)}else allowDeletion===!0&&null===newOptions.arrows&&(parentOptions.arrows=Object.create(globalOptions.arrows));if(void 0!==newOptions.color&&null!==newOptions.color)if(parentOptions.color=util.deepExtend({},parentOptions.color,!0),util.isString(newOptions.color))parentOptions.color.color=newOptions.color,parentOptions.color.highlight=newOptions.color,parentOptions.color.hover=newOptions.color,parentOptions.color.inherit=!1;else{var colorsDefined=!1;void 0!==newOptions.color.color&&(parentOptions.color.color=newOptions.color.color,colorsDefined=!0),void 0!==newOptions.color.highlight&&(parentOptions.color.highlight=newOptions.color.highlight,colorsDefined=!0),void 0!==newOptions.color.hover&&(parentOptions.color.hover=newOptions.color.hover,colorsDefined=!0),void 0!==newOptions.color.inherit&&(parentOptions.color.inherit=newOptions.color.inherit),void 0!==newOptions.color.opacity&&(parentOptions.color.opacity=Math.min(1,Math.max(0,newOptions.color.opacity))),void 0===newOptions.color.inherit&&colorsDefined===!0&&(parentOptions.color.inherit=!1)}else allowDeletion===!0&&null===newOptions.color&&(parentOptions.color=util.bridgeObject(globalOptions.color));void 0!==newOptions.font&&null!==newOptions.font?_Label2.default.parseOptions(parentOptions.font,newOptions):allowDeletion===!0&&null===newOptions.font&&(parentOptions.font=util.bridgeObject(globalOptions.font))}}]),Edge}();exports.default=Edge},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);
subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CubicBezierEdgeBase2=__webpack_require__(87),_CubicBezierEdgeBase3=_interopRequireDefault(_CubicBezierEdgeBase2),CubicBezierEdge=function(_CubicBezierEdgeBase){function CubicBezierEdge(options,body,labelModule){return _classCallCheck(this,CubicBezierEdge),_possibleConstructorReturn(this,Object.getPrototypeOf(CubicBezierEdge).call(this,options,body,labelModule))}return _inherits(CubicBezierEdge,_CubicBezierEdgeBase),_createClass(CubicBezierEdge,[{key:"_line",value:function(ctx,viaNodes){var via1=viaNodes[0],via2=viaNodes[1];ctx.beginPath(),ctx.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===viaNodes||void 0===via1.x?ctx.lineTo(this.toPoint.x,this.toPoint.y):ctx.bezierCurveTo(via1.x,via1.y,via2.x,via2.y,this.toPoint.x,this.toPoint.y),this.enableShadow(ctx),ctx.stroke(),this.disableShadow(ctx)}},{key:"_getViaCoordinates",value:function(){var dx=this.from.x-this.to.x,dy=this.from.y-this.to.y,x1=void 0,y1=void 0,x2=void 0,y2=void 0,roundness=this.options.smooth.roundness;return(Math.abs(dx)>Math.abs(dy)||this.options.smooth.forceDirection===!0||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(y1=this.from.y,y2=this.to.y,x1=this.from.x-roundness*dx,x2=this.to.x+roundness*dx):(y1=this.from.y-roundness*dy,y2=this.to.y+roundness*dy,x1=this.from.x,x2=this.to.x),[{x:x1,y:y1},{x:x2,y:y2}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(nearNode,ctx){return this._findBorderPositionBezier(nearNode,ctx)}},{key:"_getDistanceToEdge",value:function(x1,y1,x2,y2,x3,y3){var _ref=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6],_ref2=_slicedToArray(_ref,2),via1=_ref2[0],via2=_ref2[1];return this._getDistanceToBezierEdge(x1,y1,x2,y2,x3,y3,via1,via2)}},{key:"getPoint",value:function(percentage){var _ref3=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],_ref4=_slicedToArray(_ref3,2),via1=_ref4[0],via2=_ref4[1],t=percentage,vec=[];vec[0]=Math.pow(1-t,3),vec[1]=3*t*Math.pow(1-t,2),vec[2]=3*Math.pow(t,2)*(1-t),vec[3]=Math.pow(t,3);var x=vec[0]*this.fromPoint.x+vec[1]*via1.x+vec[2]*via2.x+vec[3]*this.toPoint.x,y=vec[0]*this.fromPoint.y+vec[1]*via1.y+vec[2]*via2.y+vec[3]*this.toPoint.y;return{x:x,y:y}}}]),CubicBezierEdge}(_CubicBezierEdgeBase3.default);exports.default=CubicBezierEdge},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BezierEdgeBase2=__webpack_require__(88),_BezierEdgeBase3=_interopRequireDefault(_BezierEdgeBase2),CubicBezierEdgeBase=function(_BezierEdgeBase){function CubicBezierEdgeBase(options,body,labelModule){return _classCallCheck(this,CubicBezierEdgeBase),_possibleConstructorReturn(this,Object.getPrototypeOf(CubicBezierEdgeBase).call(this,options,body,labelModule))}return _inherits(CubicBezierEdgeBase,_BezierEdgeBase),_createClass(CubicBezierEdgeBase,[{key:"_getDistanceToBezierEdge",value:function(x1,y1,x2,y2,x3,y3,via1,via2){var minDistance=1e9,distance=void 0,i=void 0,t=void 0,x=void 0,y=void 0,lastX=x1,lastY=y1,vec=[0,0,0,0];for(i=1;i<10;i++)t=.1*i,vec[0]=Math.pow(1-t,3),vec[1]=3*t*Math.pow(1-t,2),vec[2]=3*Math.pow(t,2)*(1-t),vec[3]=Math.pow(t,3),x=vec[0]*x1+vec[1]*via1.x+vec[2]*via2.x+vec[3]*x2,y=vec[0]*y1+vec[1]*via1.y+vec[2]*via2.y+vec[3]*y2,i>0&&(distance=this._getDistanceToLine(lastX,lastY,x,y,x3,y3),minDistance=distance<minDistance?distance:minDistance),lastX=x,lastY=y;return minDistance}}]),CubicBezierEdgeBase}(_BezierEdgeBase3.default);exports.default=CubicBezierEdgeBase},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_EdgeBase2=__webpack_require__(89),_EdgeBase3=_interopRequireDefault(_EdgeBase2),BezierEdgeBase=function(_EdgeBase){function BezierEdgeBase(options,body,labelModule){return _classCallCheck(this,BezierEdgeBase),_possibleConstructorReturn(this,Object.getPrototypeOf(BezierEdgeBase).call(this,options,body,labelModule))}return _inherits(BezierEdgeBase,_EdgeBase),_createClass(BezierEdgeBase,[{key:"_findBorderPositionBezier",value:function(nearNode,ctx){var pos,angle,distanceToBorder,distanceToPoint,difference,viaNode=arguments.length<=2||void 0===arguments[2]?this._getViaCoordinates():arguments[2],maxIterations=10,iteration=0,low=0,high=1,threshold=.2,node=this.to,from=!1;for(nearNode.id===this.from.id&&(node=this.from,from=!0);low<=high&&iteration<maxIterations;){var middle=.5*(low+high);if(pos=this.getPoint(middle,viaNode),angle=Math.atan2(node.y-pos.y,node.x-pos.x),distanceToBorder=node.distanceToBorder(ctx,angle),distanceToPoint=Math.sqrt(Math.pow(pos.x-node.x,2)+Math.pow(pos.y-node.y,2)),difference=distanceToBorder-distanceToPoint,Math.abs(difference)<threshold)break;difference<0?from===!1?low=middle:high=middle:from===!1?high=middle:low=middle,iteration++}return pos.t=middle,pos}},{key:"_getDistanceToBezierEdge",value:function(x1,y1,x2,y2,x3,y3,via){var minDistance=1e9,distance=void 0,i=void 0,t=void 0,x=void 0,y=void 0,lastX=x1,lastY=y1;for(i=1;i<10;i++)t=.1*i,x=Math.pow(1-t,2)*x1+2*t*(1-t)*via.x+Math.pow(t,2)*x2,y=Math.pow(1-t,2)*y1+2*t*(1-t)*via.y+Math.pow(t,2)*y2,i>0&&(distance=this._getDistanceToLine(lastX,lastY,x,y,x3,y3),minDistance=distance<minDistance?distance:minDistance),lastX=x,lastY=y;return minDistance}}]),BezierEdgeBase}(_EdgeBase3.default);exports.default=BezierEdgeBase},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),util=__webpack_require__(1),EdgeBase=function(){function EdgeBase(options,body,labelModule){_classCallCheck(this,EdgeBase),this.body=body,this.labelModule=labelModule,this.options={},this.setOptions(options),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}return _createClass(EdgeBase,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(options){this.options=options,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(ctx,selected,hover,viaNode){ctx.strokeStyle=this.getColor(ctx,selected,hover),ctx.lineWidth=this.getLineWidth(selected,hover),this.options.dashes!==!1?this._drawDashedLine(ctx,viaNode):this._drawLine(ctx,viaNode)}},{key:"_drawLine",value:function(ctx,viaNode,fromPoint,toPoint){if(this.from!=this.to)this._line(ctx,viaNode,fromPoint,toPoint);else{var _getCircleData2=this._getCircleData(ctx),_getCircleData3=_slicedToArray(_getCircleData2,3),x=_getCircleData3[0],y=_getCircleData3[1],radius=_getCircleData3[2];this._circle(ctx,x,y,radius)}}},{key:"_drawDashedLine",value:function(ctx,viaNode,fromPoint,toPoint){ctx.lineCap="round";var pattern=[5,5];if(Array.isArray(this.options.dashes)===!0&&(pattern=this.options.dashes),void 0!==ctx.setLineDash){if(ctx.save(),ctx.setLineDash(pattern),ctx.lineDashOffset=0,this.from!=this.to)this._line(ctx,viaNode);else{var _getCircleData4=this._getCircleData(ctx),_getCircleData5=_slicedToArray(_getCircleData4,3),x=_getCircleData5[0],y=_getCircleData5[1],radius=_getCircleData5[2];this._circle(ctx,x,y,radius)}ctx.setLineDash([0]),ctx.lineDashOffset=0,ctx.restore()}else{if(this.from!=this.to)ctx.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,pattern);else{var _getCircleData6=this._getCircleData(ctx),_getCircleData7=_slicedToArray(_getCircleData6,3),_x=_getCircleData7[0],_y=_getCircleData7[1],_radius=_getCircleData7[2];this._circle(ctx,_x,_y,_radius)}this.enableShadow(ctx),ctx.stroke(),this.disableShadow(ctx)}}},{key:"findBorderPosition",value:function(nearNode,ctx,options){return this.from!=this.to?this._findBorderPosition(nearNode,ctx,options):this._findBorderPositionCircle(nearNode,ctx,options)}},{key:"findBorderPositions",value:function(ctx){var from={},to={};if(this.from!=this.to)from=this._findBorderPosition(this.from,ctx),to=this._findBorderPosition(this.to,ctx);else{var _getCircleData8=this._getCircleData(ctx),_getCircleData9=_slicedToArray(_getCircleData8,3),x=_getCircleData9[0],y=_getCircleData9[1];_getCircleData9[2];from=this._findBorderPositionCircle(this.from,ctx,{x:x,y:y,low:.25,high:.6,direction:-1}),to=this._findBorderPositionCircle(this.from,ctx,{x:x,y:y,low:.6,high:.8,direction:1})}return{from:from,to:to}}},{key:"_getCircleData",value:function(ctx){var x=void 0,y=void 0,node=this.from,radius=this.options.selfReferenceSize;return void 0!==ctx&&void 0===node.shape.width&&node.shape.resize(ctx),node.shape.width>node.shape.height?(x=node.x+.5*node.shape.width,y=node.y-radius):(x=node.x+radius,y=node.y-.5*node.shape.height),[x,y,radius]}},{key:"_pointOnCircle",value:function(x,y,radius,percentage){var angle=2*percentage*Math.PI;return{x:x+radius*Math.cos(angle),y:y-radius*Math.sin(angle)}}},{key:"_findBorderPositionCircle",value:function(node,ctx,options){for(var x=options.x,y=options.y,low=options.low,high=options.high,direction=options.direction,maxIterations=10,iteration=0,radius=this.options.selfReferenceSize,pos=void 0,angle=void 0,distanceToBorder=void 0,distanceToPoint=void 0,difference=void 0,threshold=.05,middle=.5*(low+high);low<=high&&iteration<maxIterations&&(middle=.5*(low+high),pos=this._pointOnCircle(x,y,radius,middle),angle=Math.atan2(node.y-pos.y,node.x-pos.x),distanceToBorder=node.distanceToBorder(ctx,angle),distanceToPoint=Math.sqrt(Math.pow(pos.x-node.x,2)+Math.pow(pos.y-node.y,2)),difference=distanceToBorder-distanceToPoint,!(Math.abs(difference)<threshold));)difference>0?direction>0?low=middle:high=middle:direction>0?high=middle:low=middle,iteration++;return pos.t=middle,pos}},{key:"getLineWidth",value:function(selected,hover){return selected===!0?Math.max(this.selectionWidth,.3/this.body.view.scale):hover===!0?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(ctx,selected,hover){var colorOptions=this.options.color;if(colorOptions.inherit!==!1){if("both"===colorOptions.inherit&&this.from.id!==this.to.id){var grd=ctx.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),fromColor=void 0,toColor=void 0;return fromColor=this.from.options.color.highlight.border,toColor=this.to.options.color.highlight.border,this.from.selected===!1&&this.to.selected===!1?(fromColor=util.overrideOpacity(this.from.options.color.border,this.options.color.opacity),toColor=util.overrideOpacity(this.to.options.color.border,this.options.color.opacity)):this.from.selected===!0&&this.to.selected===!1?toColor=this.to.options.color.border:this.from.selected===!1&&this.to.selected===!0&&(fromColor=this.from.options.color.border),grd.addColorStop(0,fromColor),grd.addColorStop(1,toColor),grd}this.colorDirty===!0&&("to"===colorOptions.inherit?(this.color.highlight=this.to.options.color.highlight.border,this.color.hover=this.to.options.color.hover.border,this.color.color=util.overrideOpacity(this.to.options.color.border,colorOptions.opacity)):(this.color.highlight=this.from.options.color.highlight.border,this.color.hover=this.from.options.color.hover.border,this.color.color=util.overrideOpacity(this.from.options.color.border,colorOptions.opacity)))}else this.colorDirty===!0&&(this.color.highlight=colorOptions.highlight,this.color.hover=colorOptions.hover,this.color.color=util.overrideOpacity(colorOptions.color,colorOptions.opacity));return this.colorDirty=!1,selected===!0?this.color.highlight:hover===!0?this.color.hover:this.color.color}},{key:"_circle",value:function(ctx,x,y,radius){this.enableShadow(ctx),ctx.beginPath(),ctx.arc(x,y,radius,0,2*Math.PI,!1),ctx.stroke(),this.disableShadow(ctx)}},{key:"getDistanceToEdge",value:function(x1,y1,x2,y2,x3,y3,via){var returnValue=0;if(this.from!=this.to)returnValue=this._getDistanceToEdge(x1,y1,x2,y2,x3,y3,via);else{var _getCircleData10=this._getCircleData(),_getCircleData11=_slicedToArray(_getCircleData10,3),x=_getCircleData11[0],y=_getCircleData11[1],radius=_getCircleData11[2],dx=x-x3,dy=y-y3;returnValue=Math.abs(Math.sqrt(dx*dx+dy*dy)-radius)}return this.labelModule.size.left<x3&&this.labelModule.size.left+this.labelModule.size.width>x3&&this.labelModule.size.top<y3&&this.labelModule.size.top+this.labelModule.size.height>y3?0:returnValue}},{key:"_getDistanceToLine",value:function(x1,y1,x2,y2,x3,y3){var px=x2-x1,py=y2-y1,something=px*px+py*py,u=((x3-x1)*px+(y3-y1)*py)/something;u>1?u=1:u<0&&(u=0);var x=x1+u*px,y=y1+u*py,dx=x-x3,dy=y-y3;return Math.sqrt(dx*dx+dy*dy)}},{key:"getArrowData",value:function(ctx,position,viaNode,selected,hover){var angle=void 0,arrowPoint=void 0,node1=void 0,node2=void 0,guideOffset=void 0,scaleFactor=void 0,lineWidth=this.getLineWidth(selected,hover);if("from"===position?(node1=this.from,node2=this.to,guideOffset=.1,scaleFactor=this.options.arrows.from.scaleFactor):"to"===position?(node1=this.to,node2=this.from,guideOffset=-.1,scaleFactor=this.options.arrows.to.scaleFactor):(node1=this.to,node2=this.from,scaleFactor=this.options.arrows.middle.scaleFactor),node1!=node2)if("middle"!==position)if(this.options.smooth.enabled===!0){arrowPoint=this.findBorderPosition(node1,ctx,{via:viaNode});var guidePos=this.getPoint(Math.max(0,Math.min(1,arrowPoint.t+guideOffset)),viaNode);angle=Math.atan2(arrowPoint.y-guidePos.y,arrowPoint.x-guidePos.x)}else angle=Math.atan2(node1.y-node2.y,node1.x-node2.x),arrowPoint=this.findBorderPosition(node1,ctx);else angle=Math.atan2(node1.y-node2.y,node1.x-node2.x),arrowPoint=this.getPoint(.5,viaNode);else{var _getCircleData12=this._getCircleData(ctx),_getCircleData13=_slicedToArray(_getCircleData12,3),x=_getCircleData13[0],y=_getCircleData13[1],radius=_getCircleData13[2];"from"===position?(arrowPoint=this.findBorderPosition(this.from,ctx,{x:x,y:y,low:.25,high:.6,direction:-1}),angle=arrowPoint.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI):"to"===position?(arrowPoint=this.findBorderPosition(this.from,ctx,{x:x,y:y,low:.6,high:1,direction:1}),angle=arrowPoint.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI):(arrowPoint=this._pointOnCircle(x,y,radius,.175),angle=3.9269908169872414)}var length=15*scaleFactor+3*lineWidth,xi=arrowPoint.x-.9*length*Math.cos(angle),yi=arrowPoint.y-.9*length*Math.sin(angle),arrowCore={x:xi,y:yi};return{point:arrowPoint,core:arrowCore,angle:angle,length:length}}},{key:"drawArrowHead",value:function(ctx,selected,hover,arrowData){ctx.strokeStyle=this.getColor(ctx,selected,hover),ctx.fillStyle=ctx.strokeStyle,ctx.lineWidth=this.getLineWidth(selected,hover),ctx.arrow(arrowData.point.x,arrowData.point.y,arrowData.angle,arrowData.length),this.enableShadow(ctx),ctx.fill(),this.disableShadow(ctx)}},{key:"enableShadow",value:function(ctx){this.options.shadow.enabled===!0&&(ctx.shadowColor=this.options.shadow.color,ctx.shadowBlur=this.options.shadow.size,ctx.shadowOffsetX=this.options.shadow.x,ctx.shadowOffsetY=this.options.shadow.y)}},{key:"disableShadow",value:function(ctx){this.options.shadow.enabled===!0&&(ctx.shadowColor="rgba(0,0,0,0)",ctx.shadowBlur=0,ctx.shadowOffsetX=0,ctx.shadowOffsetY=0)}}]),EdgeBase}();exports.default=EdgeBase},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BezierEdgeBase2=__webpack_require__(88),_BezierEdgeBase3=_interopRequireDefault(_BezierEdgeBase2),BezierEdgeDynamic=function(_BezierEdgeBase){function BezierEdgeDynamic(options,body,labelModule){_classCallCheck(this,BezierEdgeDynamic);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(BezierEdgeDynamic).call(this,options,body,labelModule));return _this._boundFunction=function(){_this.positionBezierNode()},_this.body.emitter.on("_repositionBezierNodes",_this._boundFunction),_this}return _inherits(BezierEdgeDynamic,_BezierEdgeBase),_createClass(BezierEdgeDynamic,[{key:"setOptions",value:function(options){var physicsChange=!1;this.options.physics!==options.physics&&(physicsChange=!0),this.options=options,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),physicsChange===!0&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||this.options.physics===!1?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this.body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var nodeId="edgeId:"+this.id,node=this.body.functions.createNode({id:nodeId,shape:"circle",physics:!0,hidden:!0});this.body.nodes[nodeId]=node,this.via=node,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(ctx,viaNode){ctx.beginPath(),ctx.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===viaNode.x?ctx.lineTo(this.toPoint.x,this.toPoint.y):ctx.quadraticCurveTo(viaNode.x,viaNode.y,this.toPoint.x,this.toPoint.y),this.enableShadow(ctx),ctx.stroke(),this.disableShadow(ctx)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(percentage){var viaNode=arguments.length<=1||void 0===arguments[1]?this.via:arguments[1],t=percentage,x=Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*viaNode.x+Math.pow(t,2)*this.toPoint.x,y=Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*viaNode.y+Math.pow(t,2)*this.toPoint.y;return{x:x,y:y}}},{key:"_findBorderPosition",value:function(nearNode,ctx){return this._findBorderPositionBezier(nearNode,ctx,this.via)}},{key:"_getDistanceToEdge",value:function(x1,y1,x2,y2,x3,y3){return this._getDistanceToBezierEdge(x1,y1,x2,y2,x3,y3,this.via)}}]),BezierEdgeDynamic}(_BezierEdgeBase3.default);exports.default=BezierEdgeDynamic},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BezierEdgeBase2=__webpack_require__(88),_BezierEdgeBase3=_interopRequireDefault(_BezierEdgeBase2),BezierEdgeStatic=function(_BezierEdgeBase){function BezierEdgeStatic(options,body,labelModule){return _classCallCheck(this,BezierEdgeStatic),_possibleConstructorReturn(this,Object.getPrototypeOf(BezierEdgeStatic).call(this,options,body,labelModule))}return _inherits(BezierEdgeStatic,_BezierEdgeBase),_createClass(BezierEdgeStatic,[{key:"_line",value:function(ctx,viaNode){ctx.beginPath(),ctx.moveTo(this.fromPoint.x,this.fromPoint.y),void 0===viaNode.x?ctx.lineTo(this.toPoint.x,this.toPoint.y):ctx.quadraticCurveTo(viaNode.x,viaNode.y,this.toPoint.x,this.toPoint.y),this.enableShadow(ctx),ctx.stroke(),this.disableShadow(ctx)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var xVia=void 0,yVia=void 0,factor=this.options.smooth.roundness,type=this.options.smooth.type,dx=Math.abs(this.from.x-this.to.x),dy=Math.abs(this.from.y-this.to.y);if("discrete"===type||"diagonalCross"===type)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(this.from.y>=this.to.y?this.from.x<=this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y-factor*dy):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y-factor*dy):this.from.y<this.to.y&&(this.from.x<=this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y+factor*dy):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y+factor*dy)),"discrete"===type&&(xVia=dx<factor*dy?this.from.x:xVia)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y-factor*dx):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y-factor*dx):this.from.y<this.to.y&&(this.from.x<=this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y+factor*dx):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y+factor*dx)),"discrete"===type&&(yVia=dy<factor*dx?this.from.y:yVia));else if("straightCross"===type)Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?(xVia=this.from.x,yVia=this.from.y<this.to.y?this.to.y-(1-factor)*dy:this.to.y+(1-factor)*dy):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(xVia=this.from.x<this.to.x?this.to.x-(1-factor)*dx:this.to.x+(1-factor)*dx,yVia=this.from.y);else if("horizontal"===type)xVia=this.from.x<this.to.x?this.to.x-(1-factor)*dx:this.to.x+(1-factor)*dx,yVia=this.from.y;else if("vertical"===type)xVia=this.from.x,yVia=this.from.y<this.to.y?this.to.y-(1-factor)*dy:this.to.y+(1-factor)*dy;else if("curvedCW"===type){dx=this.to.x-this.from.x,dy=this.from.y-this.to.y;var radius=Math.sqrt(dx*dx+dy*dy),pi=Math.PI,originalAngle=Math.atan2(dy,dx),myAngle=(originalAngle+(.5*factor+.5)*pi)%(2*pi);xVia=this.from.x+(.5*factor+.5)*radius*Math.sin(myAngle),yVia=this.from.y+(.5*factor+.5)*radius*Math.cos(myAngle)}else if("curvedCCW"===type){dx=this.to.x-this.from.x,dy=this.from.y-this.to.y;var _radius=Math.sqrt(dx*dx+dy*dy),_pi=Math.PI,_originalAngle=Math.atan2(dy,dx),_myAngle=(_originalAngle+(.5*-factor+.5)*_pi)%(2*_pi);xVia=this.from.x+(.5*factor+.5)*_radius*Math.sin(_myAngle),yVia=this.from.y+(.5*factor+.5)*_radius*Math.cos(_myAngle)}else Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)?this.from.y>=this.to.y?this.from.x<=this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y-factor*dy,xVia=this.to.x<xVia?this.to.x:xVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y-factor*dy,xVia=this.to.x>xVia?this.to.x:xVia):this.from.y<this.to.y&&(this.from.x<=this.to.x?(xVia=this.from.x+factor*dy,yVia=this.from.y+factor*dy,xVia=this.to.x<xVia?this.to.x:xVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dy,yVia=this.from.y+factor*dy,xVia=this.to.x>xVia?this.to.x:xVia)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>=this.to.y?this.from.x<=this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y-factor*dx,yVia=this.to.y>yVia?this.to.y:yVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y-factor*dx,yVia=this.to.y>yVia?this.to.y:yVia):this.from.y<this.to.y&&(this.from.x<=this.to.x?(xVia=this.from.x+factor*dx,yVia=this.from.y+factor*dx,yVia=this.to.y<yVia?this.to.y:yVia):this.from.x>this.to.x&&(xVia=this.from.x-factor*dx,yVia=this.from.y+factor*dx,yVia=this.to.y<yVia?this.to.y:yVia)));return{x:xVia,y:yVia}}},{key:"_findBorderPosition",value:function(nearNode,ctx){var options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return this._findBorderPositionBezier(nearNode,ctx,options.via)}},{key:"_getDistanceToEdge",value:function(x1,y1,x2,y2,x3,y3){var viaNode=arguments.length<=6||void 0===arguments[6]?this._getViaCoordinates():arguments[6];return this._getDistanceToBezierEdge(x1,y1,x2,y2,x3,y3,viaNode)}},{key:"getPoint",value:function(percentage){var viaNode=arguments.length<=1||void 0===arguments[1]?this._getViaCoordinates():arguments[1],t=percentage,x=Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*viaNode.x+Math.pow(t,2)*this.toPoint.x,y=Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*viaNode.y+Math.pow(t,2)*this.toPoint.y;return{x:x,y:y}}}]),BezierEdgeStatic}(_BezierEdgeBase3.default);exports.default=BezierEdgeStatic},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_EdgeBase2=__webpack_require__(89),_EdgeBase3=_interopRequireDefault(_EdgeBase2),StraightEdge=function(_EdgeBase){function StraightEdge(options,body,labelModule){return _classCallCheck(this,StraightEdge),_possibleConstructorReturn(this,Object.getPrototypeOf(StraightEdge).call(this,options,body,labelModule))}return _inherits(StraightEdge,_EdgeBase),_createClass(StraightEdge,[{key:"_line",value:function(ctx){ctx.beginPath(),ctx.moveTo(this.fromPoint.x,this.fromPoint.y),ctx.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(ctx),ctx.stroke(),this.disableShadow(ctx)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(percentage){return{x:(1-percentage)*this.fromPoint.x+percentage*this.toPoint.x,y:(1-percentage)*this.fromPoint.y+percentage*this.toPoint.y}}},{key:"_findBorderPosition",value:function(nearNode,ctx){var node1=this.to,node2=this.from;nearNode.id===this.from.id&&(node1=this.from,node2=this.to);var angle=Math.atan2(node1.y-node2.y,node1.x-node2.x),dx=node1.x-node2.x,dy=node1.y-node2.y,edgeSegmentLength=Math.sqrt(dx*dx+dy*dy),toBorderDist=nearNode.distanceToBorder(ctx,angle),toBorderPoint=(edgeSegmentLength-toBorderDist)/edgeSegmentLength,borderPos={};return borderPos.x=(1-toBorderPoint)*node2.x+toBorderPoint*node1.x,borderPos.y=(1-toBorderPoint)*node2.y+toBorderPoint*node1.y,borderPos}},{key:"_getDistanceToEdge",value:function(x1,y1,x2,y2,x3,y3){return this._getDistanceToLine(x1,y1,x2,y2,x3,y3)}}]),StraightEdge}(_EdgeBase3.default);exports.default=StraightEdge},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BarnesHutSolver=__webpack_require__(94),_BarnesHutSolver2=_interopRequireDefault(_BarnesHutSolver),_RepulsionSolver=__webpack_require__(95),_RepulsionSolver2=_interopRequireDefault(_RepulsionSolver),_HierarchicalRepulsionSolver=__webpack_require__(96),_HierarchicalRepulsionSolver2=_interopRequireDefault(_HierarchicalRepulsionSolver),_SpringSolver=__webpack_require__(97),_SpringSolver2=_interopRequireDefault(_SpringSolver),_HierarchicalSpringSolver=__webpack_require__(98),_HierarchicalSpringSolver2=_interopRequireDefault(_HierarchicalSpringSolver),_CentralGravitySolver=__webpack_require__(99),_CentralGravitySolver2=_interopRequireDefault(_CentralGravitySolver),_FA2BasedRepulsionSolver=__webpack_require__(100),_FA2BasedRepulsionSolver2=_interopRequireDefault(_FA2BasedRepulsionSolver),_FA2BasedCentralGravitySolver=__webpack_require__(101),_FA2BasedCentralGravitySolver2=_interopRequireDefault(_FA2BasedCentralGravitySolver),util=__webpack_require__(1),PhysicsEngine=function(){function PhysicsEngine(body){_classCallCheck(this,PhysicsEngine),this.body=body,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},util.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return _createClass(PhysicsEngine,[{key:"bindEventListeners",value:function(){var _this=this;this.body.emitter.on("initPhysics",function(){_this.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){_this.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){_this.stopSimulation(),_this.ready=!1}),this.body.emitter.on("disablePhysics",function(){_this.physicsEnabled=!1,_this.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){_this.setOptions(_this.options),_this.ready===!0&&_this.startSimulation()}),this.body.emitter.on("startSimulation",function(){_this.ready===!0&&_this.startSimulation()}),this.body.emitter.on("stopSimulation",function(){_this.stopSimulation()}),this.body.emitter.on("destroy",function(){_this.stopSimulation(!1),_this.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){_this.updatePhysicsData()})}},{key:"setOptions",value:function(options){void 0!==options&&(options===!1?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):(this.physicsEnabled=!0,util.selectiveNotDeepExtend(["stabilization"],this.options,options),util.mergeOptions(this.options,options,"stabilization"),void 0===options.enabled&&(this.options.enabled=!0),this.options.enabled===!1&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var options;"forceAtlas2Based"===this.options.solver?(options=this.options.forceAtlas2Based,this.nodesSolver=new _FA2BasedRepulsionSolver2.default(this.body,this.physicsBody,options),this.edgesSolver=new _SpringSolver2.default(this.body,this.physicsBody,options),this.gravitySolver=new _FA2BasedCentralGravitySolver2.default(this.body,this.physicsBody,options)):"repulsion"===this.options.solver?(options=this.options.repulsion,this.nodesSolver=new _RepulsionSolver2.default(this.body,this.physicsBody,options),this.edgesSolver=new _SpringSolver2.default(this.body,this.physicsBody,options),this.gravitySolver=new _CentralGravitySolver2.default(this.body,this.physicsBody,options)):"hierarchicalRepulsion"===this.options.solver?(options=this.options.hierarchicalRepulsion,this.nodesSolver=new _HierarchicalRepulsionSolver2.default(this.body,this.physicsBody,options),this.edgesSolver=new _HierarchicalSpringSolver2.default(this.body,this.physicsBody,options),this.gravitySolver=new _CentralGravitySolver2.default(this.body,this.physicsBody,options)):(options=this.options.barnesHut,this.nodesSolver=new _BarnesHutSolver2.default(this.body,this.physicsBody,options),this.edgesSolver=new _SpringSolver2.default(this.body,this.physicsBody,options),this.gravitySolver=new _CentralGravitySolver2.default(this.body,this.physicsBody,options)),this.modelOptions=options}},{key:"initPhysics",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?this.options.stabilization.enabled===!0?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){this.physicsEnabled===!0&&this.options.enabled===!0?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var emit=arguments.length<=0||void 0===arguments[0]||arguments[0];this.stabilized=!0,emit===!0&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,emit===!0&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var startTime=Date.now();this.physicsTick();var physicsTime=Date.now()-startTime;(physicsTime<.4*this.simulationInterval||this.runDoubleSpeed===!0)&&this.stabilized===!1&&(this.physicsTick(),this.runDoubleSpeed=!0),this.stabilized===!0&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var _this2=this,amountOfIterations=arguments.length<=0||void 0===arguments[0]?this.stabilizationIterations:arguments[0];(this.stabilizationIterations>1||this.startedStabilization===!0)&&setTimeout(function(){_this2.body.emitter.emit("stabilized",{iterations:amountOfIterations}),_this2.startedStabilization=!1,_this2.stabilizationIterations=0},0)}},{key:"physicsTick",value:function(){if(this.startedStabilization===!1&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0),this.stabilized===!1){if(this.adaptiveTimestep===!0&&this.adaptiveTimestepEnabled===!0){var factor=1.2;this.adaptiveCounter%this.adaptiveInterval===0?(this.timestep=2*this.timestep,this.calculateForces(),this.moveNodes(),this.revert(),this.timestep=.5*this.timestep,this.calculateForces(),this.moveNodes(),this.calculateForces(),this.moveNodes(),this._evaluateStepQuality()===!0?this.timestep=factor*this.timestep:this.timestep/factor<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/factor))):(this.calculateForces(),this.moveNodes()),this.adaptiveCounter+=1}else this.timestep=this.options.timestep,this.calculateForces(),this.moveNodes();this.stabilized===!0&&this.revert(),this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var nodes=this.body.nodes,edges=this.body.edges;for(var nodeId in nodes)nodes.hasOwnProperty(nodeId)&&nodes[nodeId].options.physics===!0&&this.physicsBody.physicsNodeIndices.push(nodes[nodeId].id);for(var edgeId in edges)edges.hasOwnProperty(edgeId)&&edges[edgeId].options.physics===!0&&this.physicsBody.physicsEdgeIndices.push(edges[edgeId].id);for(var i=0;i<this.physicsBody.physicsNodeIndices.length;i++){var _nodeId=this.physicsBody.physicsNodeIndices[i];this.physicsBody.forces[_nodeId]={x:0,y:0},void 0===this.physicsBody.velocities[_nodeId]&&(this.physicsBody.velocities[_nodeId]={x:0,y:0})}for(var _nodeId2 in this.physicsBody.velocities)void 0===nodes[_nodeId2]&&delete this.physicsBody.velocities[_nodeId2]}},{key:"revert",value:function(){var nodeIds=Object.keys(this.previousStates),nodes=this.body.nodes,velocities=this.physicsBody.velocities;this.referenceState={};for(var i=0;i<nodeIds.length;i++){var nodeId=nodeIds[i];void 0!==nodes[nodeId]?nodes[nodeId].options.physics===!0&&(this.referenceState[nodeId]={positions:{x:nodes[nodeId].x,y:nodes[nodeId].y}},velocities[nodeId].x=this.previousStates[nodeId].vx,velocities[nodeId].y=this.previousStates[nodeId].vy,nodes[nodeId].x=this.previousStates[nodeId].x,nodes[nodeId].y=this.previousStates[nodeId].y):delete this.previousStates[nodeId]}}},{key:"_evaluateStepQuality",value:function(){var dx=void 0,dy=void 0,dpos=void 0,nodes=this.body.nodes,reference=this.referenceState,posThreshold=.3;for(var nodeId in this.referenceState)if(this.referenceState.hasOwnProperty(nodeId)&&void 0!==nodes[nodeId]&&(dx=nodes[nodeId].x-reference[nodeId].positions.x,dy=nodes[nodeId].y-reference[nodeId].positions.y,dpos=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2)),dpos>posThreshold))return!1;return!0}},{key:"moveNodes",value:function(){for(var nodeIndices=this.physicsBody.physicsNodeIndices,maxVelocity=this.options.maxVelocity?this.options.maxVelocity:1e9,maxNodeVelocity=0,averageNodeVelocity=0,velocityAdaptiveThreshold=5,i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i],nodeVelocity=this._performStep(nodeId,maxVelocity);maxNodeVelocity=Math.max(maxNodeVelocity,nodeVelocity),averageNodeVelocity+=nodeVelocity}this.adaptiveTimestepEnabled=averageNodeVelocity/nodeIndices.length<velocityAdaptiveThreshold,this.stabilized=maxNodeVelocity<this.options.minVelocity}},{key:"_performStep",value:function(nodeId,maxVelocity){var node=this.body.nodes[nodeId],timestep=this.timestep,forces=this.physicsBody.forces,velocities=this.physicsBody.velocities;if(this.previousStates[nodeId]={x:node.x,y:node.y,vx:velocities[nodeId].x,vy:velocities[nodeId].y},node.options.fixed.x===!1){var dx=this.modelOptions.damping*velocities[nodeId].x,ax=(forces[nodeId].x-dx)/node.options.mass;velocities[nodeId].x+=ax*timestep,velocities[nodeId].x=Math.abs(velocities[nodeId].x)>maxVelocity?velocities[nodeId].x>0?maxVelocity:-maxVelocity:velocities[nodeId].x,node.x+=velocities[nodeId].x*timestep}else forces[nodeId].x=0,velocities[nodeId].x=0;if(node.options.fixed.y===!1){var dy=this.modelOptions.damping*velocities[nodeId].y,ay=(forces[nodeId].y-dy)/node.options.mass;velocities[nodeId].y+=ay*timestep,velocities[nodeId].y=Math.abs(velocities[nodeId].y)>maxVelocity?velocities[nodeId].y>0?maxVelocity:-maxVelocity:velocities[nodeId].y,node.y+=velocities[nodeId].y*timestep}else forces[nodeId].y=0,velocities[nodeId].y=0;var totalVelocity=Math.sqrt(Math.pow(velocities[nodeId].x,2)+Math.pow(velocities[nodeId].y,2));return totalVelocity}},{key:"calculateForces",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve()}},{key:"_freezeNodes",value:function(){var nodes=this.body.nodes;for(var id in nodes)nodes.hasOwnProperty(id)&&nodes[id].x&&nodes[id].y&&(this.freezeCache[id]={x:nodes[id].options.fixed.x,y:nodes[id].options.fixed.y},nodes[id].options.fixed.x=!0,nodes[id].options.fixed.y=!0)}},{key:"_restoreFrozenNodes",value:function(){var nodes=this.body.nodes;for(var id in nodes)nodes.hasOwnProperty(id)&&void 0!==this.freezeCache[id]&&(nodes[id].options.fixed.x=this.freezeCache[id].x,nodes[id].options.fixed.y=this.freezeCache[id].y);this.freezeCache={}}},{key:"stabilize",value:function(){var _this3=this,iterations=arguments.length<=0||void 0===arguments[0]?this.options.stabilization.iterations:arguments[0];return"number"!=typeof iterations&&(console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",this.options.stabilization.iterations),iterations=this.options.stabilization.iterations),0===this.physicsBody.physicsNodeIndices.length?void(this.ready=!0):(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=iterations,this.options.stabilization.onlyDynamicEdges===!0&&this._freezeNodes(),this.stabilizationIterations=0,void setTimeout(function(){return _this3._stabilizationBatch()},0))}},{key:"_stabilizationBatch",value:function(){this.startedStabilization===!1&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0);for(var count=0;this.stabilized===!1&&count<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations;)this.physicsTick(),count++;this.stabilized===!1&&this.stabilizationIterations<this.targetIterations?(this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations}),setTimeout(this._stabilizationBatch.bind(this),0)):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),this.options.stabilization.fit===!0&&this.body.emitter.emit("fit"),this.options.stabilization.onlyDynamicEdges===!0&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),this.stabilized===!0?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(ctx){for(var i=0;i<this.physicsBody.physicsNodeIndices.length;i++){var node=this.body.nodes[this.physicsBody.physicsNodeIndices[i]],force=this.physicsBody.forces[this.physicsBody.physicsNodeIndices[i]],factor=20,colorFactor=.03,forceSize=Math.sqrt(Math.pow(force.x,2)+Math.pow(force.x,2)),size=Math.min(Math.max(5,forceSize),15),arrowSize=3*size,color=util.HSVToHex((180-180*Math.min(1,Math.max(0,colorFactor*forceSize)))/360,1,1);ctx.lineWidth=size,ctx.strokeStyle=color,ctx.beginPath(),ctx.moveTo(node.x,node.y),ctx.lineTo(node.x+factor*force.x,node.y+factor*force.y),ctx.stroke();var angle=Math.atan2(force.y,force.x);ctx.fillStyle=color,ctx.arrow(node.x+factor*force.x+Math.cos(angle)*arrowSize,node.y+factor*force.y+Math.sin(angle)*arrowSize,angle,arrowSize),ctx.fill()}}}]),PhysicsEngine}();exports.default=PhysicsEngine},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),BarnesHutSolver=function(){function BarnesHutSolver(body,physicsBody,options){_classCallCheck(this,BarnesHutSolver),this.body=body,this.physicsBody=physicsBody,this.barnesHutTree,this.setOptions(options),this.randomSeed=5}return _createClass(BarnesHutSolver,[{key:"setOptions",value:function(options){this.options=options,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var x=1e4*Math.sin(this.randomSeed++);return x-Math.floor(x)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var node=void 0,nodes=this.body.nodes,nodeIndices=this.physicsBody.physicsNodeIndices,nodeCount=nodeIndices.length,barnesHutTree=this._formBarnesHutTree(nodes,nodeIndices);this.barnesHutTree=barnesHutTree;for(var i=0;i<nodeCount;i++)node=nodes[nodeIndices[i]],node.options.mass>0&&(this._getForceContribution(barnesHutTree.root.children.NW,node),this._getForceContribution(barnesHutTree.root.children.NE,node),this._getForceContribution(barnesHutTree.root.children.SW,node),this._getForceContribution(barnesHutTree.root.children.SE,node))}}},{key:"_getForceContribution",value:function(parentBranch,node){if(parentBranch.childrenCount>0){var dx=void 0,dy=void 0,distance=void 0;dx=parentBranch.centerOfMass.x-node.x,dy=parentBranch.centerOfMass.y-node.y,distance=Math.sqrt(dx*dx+dy*dy),distance*parentBranch.calcSize>this.thetaInversed?this._calculateForces(distance,dx,dy,node,parentBranch):4===parentBranch.childrenCount?(this._getForceContribution(parentBranch.children.NW,node),this._getForceContribution(parentBranch.children.NE,node),this._getForceContribution(parentBranch.children.SW,node),this._getForceContribution(parentBranch.children.SE,node)):parentBranch.children.data.id!=node.id&&this._calculateForces(distance,dx,dy,node,parentBranch)}}},{key:"_calculateForces",value:function(distance,dx,dy,node,parentBranch){0===distance&&(distance=.1,dx=distance),this.overlapAvoidanceFactor<1&&(distance=Math.max(.1+this.overlapAvoidanceFactor*node.shape.radius,distance-node.shape.radius));var gravityForce=this.options.gravitationalConstant*parentBranch.mass*node.options.mass/Math.pow(distance,3),fx=dx*gravityForce,fy=dy*gravityForce;this.physicsBody.forces[node.id].x+=fx,this.physicsBody.forces[node.id].y+=fy}},{key:"_formBarnesHutTree",value:function(nodes,nodeIndices){for(var node=void 0,nodeCount=nodeIndices.length,minX=nodes[nodeIndices[0]].x,minY=nodes[nodeIndices[0]].y,maxX=nodes[nodeIndices[0]].x,maxY=nodes[nodeIndices[0]].y,i=1;i<nodeCount;i++){var x=nodes[nodeIndices[i]].x,y=nodes[nodeIndices[i]].y;nodes[nodeIndices[i]].options.mass>0&&(x<minX&&(minX=x),x>maxX&&(maxX=x),y<minY&&(minY=y),y>maxY&&(maxY=y))}var sizeDiff=Math.abs(maxX-minX)-Math.abs(maxY-minY);sizeDiff>0?(minY-=.5*sizeDiff,maxY+=.5*sizeDiff):(minX+=.5*sizeDiff,maxX-=.5*sizeDiff);var minimumTreeSize=1e-5,rootSize=Math.max(minimumTreeSize,Math.abs(maxX-minX)),halfRootSize=.5*rootSize,centerX=.5*(minX+maxX),centerY=.5*(minY+maxY),barnesHutTree={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:centerX-halfRootSize,maxX:centerX+halfRootSize,minY:centerY-halfRootSize,maxY:centerY+halfRootSize},size:rootSize,calcSize:1/rootSize,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(barnesHutTree.root);for(var _i=0;_i<nodeCount;_i++)node=nodes[nodeIndices[_i]],node.options.mass>0&&this._placeInTree(barnesHutTree.root,node);return barnesHutTree}},{key:"_updateBranchMass",value:function(parentBranch,node){var totalMass=parentBranch.mass+node.options.mass,totalMassInv=1/totalMass;parentBranch.centerOfMass.x=parentBranch.centerOfMass.x*parentBranch.mass+node.x*node.options.mass,parentBranch.centerOfMass.x*=totalMassInv,parentBranch.centerOfMass.y=parentBranch.centerOfMass.y*parentBranch.mass+node.y*node.options.mass,parentBranch.centerOfMass.y*=totalMassInv,parentBranch.mass=totalMass;var biggestSize=Math.max(Math.max(node.height,node.radius),node.width);parentBranch.maxWidth=parentBranch.maxWidth<biggestSize?biggestSize:parentBranch.maxWidth}},{key:"_placeInTree",value:function(parentBranch,node,skipMassUpdate){1==skipMassUpdate&&void 0!==skipMassUpdate||this._updateBranchMass(parentBranch,node),parentBranch.children.NW.range.maxX>node.x?parentBranch.children.NW.range.maxY>node.y?this._placeInRegion(parentBranch,node,"NW"):this._placeInRegion(parentBranch,node,"SW"):parentBranch.children.NW.range.maxY>node.y?this._placeInRegion(parentBranch,node,"NE"):this._placeInRegion(parentBranch,node,"SE")}},{key:"_placeInRegion",value:function(parentBranch,node,region){switch(parentBranch.children[region].childrenCount){case 0:parentBranch.children[region].children.data=node,parentBranch.children[region].childrenCount=1,this._updateBranchMass(parentBranch.children[region],node);break;case 1:parentBranch.children[region].children.data.x===node.x&&parentBranch.children[region].children.data.y===node.y?(node.x+=this.seededRandom(),node.y+=this.seededRandom()):(this._splitBranch(parentBranch.children[region]),this._placeInTree(parentBranch.children[region],node));break;case 4:this._placeInTree(parentBranch.children[region],node)}}},{key:"_splitBranch",value:function(parentBranch){var containedNode=null;1===parentBranch.childrenCount&&(containedNode=parentBranch.children.data,parentBranch.mass=0,parentBranch.centerOfMass.x=0,parentBranch.centerOfMass.y=0),parentBranch.childrenCount=4,parentBranch.children.data=null,this._insertRegion(parentBranch,"NW"),this._insertRegion(parentBranch,"NE"),this._insertRegion(parentBranch,"SW"),this._insertRegion(parentBranch,"SE"),null!=containedNode&&this._placeInTree(parentBranch,containedNode)}},{key:"_insertRegion",value:function(parentBranch,region){var minX=void 0,maxX=void 0,minY=void 0,maxY=void 0,childSize=.5*parentBranch.size;switch(region){case"NW":minX=parentBranch.range.minX,maxX=parentBranch.range.minX+childSize,minY=parentBranch.range.minY,maxY=parentBranch.range.minY+childSize;break;case"NE":minX=parentBranch.range.minX+childSize,maxX=parentBranch.range.maxX,minY=parentBranch.range.minY,maxY=parentBranch.range.minY+childSize;break;case"SW":minX=parentBranch.range.minX,maxX=parentBranch.range.minX+childSize,minY=parentBranch.range.minY+childSize,maxY=parentBranch.range.maxY;break;case"SE":minX=parentBranch.range.minX+childSize,maxX=parentBranch.range.maxX,minY=parentBranch.range.minY+childSize,maxY=parentBranch.range.maxY}parentBranch.children[region]={centerOfMass:{x:0,y:0},mass:0,range:{minX:minX,maxX:maxX,minY:minY,maxY:maxY},size:.5*parentBranch.size,calcSize:2*parentBranch.calcSize,children:{data:null},maxWidth:0,level:parentBranch.level+1,childrenCount:0}}},{key:"_debug",value:function(ctx,color){void 0!==this.barnesHutTree&&(ctx.lineWidth=1,this._drawBranch(this.barnesHutTree.root,ctx,color))}},{key:"_drawBranch",value:function(branch,ctx,color){void 0===color&&(color="#FF0000"),4===branch.childrenCount&&(this._drawBranch(branch.children.NW,ctx),this._drawBranch(branch.children.NE,ctx),this._drawBranch(branch.children.SE,ctx),this._drawBranch(branch.children.SW,ctx)),ctx.strokeStyle=color,ctx.beginPath(),ctx.moveTo(branch.range.minX,branch.range.minY),ctx.lineTo(branch.range.maxX,branch.range.minY),ctx.stroke(),ctx.beginPath(),ctx.moveTo(branch.range.maxX,branch.range.minY),ctx.lineTo(branch.range.maxX,branch.range.maxY),ctx.stroke(),ctx.beginPath(),ctx.moveTo(branch.range.maxX,branch.range.maxY),ctx.lineTo(branch.range.minX,branch.range.maxY),ctx.stroke(),ctx.beginPath(),ctx.moveTo(branch.range.minX,branch.range.maxY),ctx.lineTo(branch.range.minX,branch.range.minY),ctx.stroke()}}]),BarnesHutSolver}();exports.default=BarnesHutSolver},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),RepulsionSolver=function(){function RepulsionSolver(body,physicsBody,options){_classCallCheck(this,RepulsionSolver),this.body=body,this.physicsBody=physicsBody,this.setOptions(options)}return _createClass(RepulsionSolver,[{key:"setOptions",value:function(options){this.options=options}},{key:"solve",value:function(){for(var dx,dy,distance,fx,fy,repulsingForce,node1,node2,nodes=this.body.nodes,nodeIndices=this.physicsBody.physicsNodeIndices,forces=this.physicsBody.forces,nodeDistance=this.options.nodeDistance,a=-2/3/nodeDistance,b=4/3,i=0;i<nodeIndices.length-1;i++){node1=nodes[nodeIndices[i]];for(var j=i+1;j<nodeIndices.length;j++)node2=nodes[nodeIndices[j]],dx=node2.x-node1.x,dy=node2.y-node1.y,distance=Math.sqrt(dx*dx+dy*dy),0===distance&&(distance=.1*Math.random(),dx=distance),distance<2*nodeDistance&&(repulsingForce=distance<.5*nodeDistance?1:a*distance+b,repulsingForce/=distance,fx=dx*repulsingForce,fy=dy*repulsingForce,forces[node1.id].x-=fx,forces[node1.id].y-=fy,forces[node2.id].x+=fx,forces[node2.id].y+=fy)}}}]),RepulsionSolver}();exports.default=RepulsionSolver},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),HierarchicalRepulsionSolver=function(){function HierarchicalRepulsionSolver(body,physicsBody,options){_classCallCheck(this,HierarchicalRepulsionSolver),this.body=body,this.physicsBody=physicsBody,this.setOptions(options)}return _createClass(HierarchicalRepulsionSolver,[{key:"setOptions",value:function(options){this.options=options}},{key:"solve",value:function(){var dx,dy,distance,fx,fy,repulsingForce,node1,node2,i,j,nodes=this.body.nodes,nodeIndices=this.physicsBody.physicsNodeIndices,forces=this.physicsBody.forces,nodeDistance=this.options.nodeDistance;for(i=0;i<nodeIndices.length-1;i++)for(node1=nodes[nodeIndices[i]],j=i+1;j<nodeIndices.length;j++)if(node2=nodes[nodeIndices[j]],node1.level===node2.level){dx=node2.x-node1.x,dy=node2.y-node1.y,distance=Math.sqrt(dx*dx+dy*dy);var steepness=.05;repulsingForce=distance<nodeDistance?-Math.pow(steepness*distance,2)+Math.pow(steepness*nodeDistance,2):0,0===distance?distance=.01:repulsingForce/=distance,fx=dx*repulsingForce,fy=dy*repulsingForce,forces[node1.id].x-=fx,forces[node1.id].y-=fy,forces[node2.id].x+=fx,forces[node2.id].y+=fy}}}]),HierarchicalRepulsionSolver}();exports.default=HierarchicalRepulsionSolver},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),SpringSolver=function(){function SpringSolver(body,physicsBody,options){_classCallCheck(this,SpringSolver),this.body=body,this.physicsBody=physicsBody,this.setOptions(options)}return _createClass(SpringSolver,[{key:"setOptions",value:function(options){this.options=options}},{key:"solve",value:function(){for(var edgeLength=void 0,edge=void 0,edgeIndices=this.physicsBody.physicsEdgeIndices,edges=this.body.edges,node1=void 0,node2=void 0,node3=void 0,i=0;i<edgeIndices.length;i++)edge=edges[edgeIndices[i]],edge.connected===!0&&edge.toId!==edge.fromId&&void 0!==this.body.nodes[edge.toId]&&void 0!==this.body.nodes[edge.fromId]&&(void 0!==edge.edgeType.via?(edgeLength=void 0===edge.options.length?this.options.springLength:edge.options.length,node1=edge.to,node2=edge.edgeType.via,node3=edge.from,this._calculateSpringForce(node1,node2,.5*edgeLength),this._calculateSpringForce(node2,node3,.5*edgeLength)):(edgeLength=void 0===edge.options.length?1.5*this.options.springLength:edge.options.length,this._calculateSpringForce(edge.from,edge.to,edgeLength)))}},{key:"_calculateSpringForce",value:function(node1,node2,edgeLength){var dx=node1.x-node2.x,dy=node1.y-node2.y,distance=Math.max(Math.sqrt(dx*dx+dy*dy),.01),springForce=this.options.springConstant*(edgeLength-distance)/distance,fx=dx*springForce,fy=dy*springForce;
void 0!==this.physicsBody.forces[node1.id]&&(this.physicsBody.forces[node1.id].x+=fx,this.physicsBody.forces[node1.id].y+=fy),void 0!==this.physicsBody.forces[node2.id]&&(this.physicsBody.forces[node2.id].x-=fx,this.physicsBody.forces[node2.id].y-=fy)}}]),SpringSolver}();exports.default=SpringSolver},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),HierarchicalSpringSolver=function(){function HierarchicalSpringSolver(body,physicsBody,options){_classCallCheck(this,HierarchicalSpringSolver),this.body=body,this.physicsBody=physicsBody,this.setOptions(options)}return _createClass(HierarchicalSpringSolver,[{key:"setOptions",value:function(options){this.options=options}},{key:"solve",value:function(){for(var edgeLength,edge,dx,dy,fx,fy,springForce,distance,edges=this.body.edges,factor=.5,edgeIndices=this.physicsBody.physicsEdgeIndices,nodeIndices=this.physicsBody.physicsNodeIndices,forces=this.physicsBody.forces,i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];forces[nodeId].springFx=0,forces[nodeId].springFy=0}for(var _i=0;_i<edgeIndices.length;_i++)edge=edges[edgeIndices[_i]],edge.connected===!0&&(edgeLength=void 0===edge.options.length?this.options.springLength:edge.options.length,dx=edge.from.x-edge.to.x,dy=edge.from.y-edge.to.y,distance=Math.sqrt(dx*dx+dy*dy),distance=0===distance?.01:distance,springForce=this.options.springConstant*(edgeLength-distance)/distance,fx=dx*springForce,fy=dy*springForce,edge.to.level!=edge.from.level?(void 0!==forces[edge.toId]&&(forces[edge.toId].springFx-=fx,forces[edge.toId].springFy-=fy),void 0!==forces[edge.fromId]&&(forces[edge.fromId].springFx+=fx,forces[edge.fromId].springFy+=fy)):(void 0!==forces[edge.toId]&&(forces[edge.toId].x-=factor*fx,forces[edge.toId].y-=factor*fy),void 0!==forces[edge.fromId]&&(forces[edge.fromId].x+=factor*fx,forces[edge.fromId].y+=factor*fy)));for(var springFx,springFy,springForce=1,_i2=0;_i2<nodeIndices.length;_i2++){var _nodeId=nodeIndices[_i2];springFx=Math.min(springForce,Math.max(-springForce,forces[_nodeId].springFx)),springFy=Math.min(springForce,Math.max(-springForce,forces[_nodeId].springFy)),forces[_nodeId].x+=springFx,forces[_nodeId].y+=springFy}for(var totalFx=0,totalFy=0,_i3=0;_i3<nodeIndices.length;_i3++){var _nodeId2=nodeIndices[_i3];totalFx+=forces[_nodeId2].x,totalFy+=forces[_nodeId2].y}for(var correctionFx=totalFx/nodeIndices.length,correctionFy=totalFy/nodeIndices.length,_i4=0;_i4<nodeIndices.length;_i4++){var _nodeId3=nodeIndices[_i4];forces[_nodeId3].x-=correctionFx,forces[_nodeId3].y-=correctionFy}}}]),HierarchicalSpringSolver}();exports.default=HierarchicalSpringSolver},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),CentralGravitySolver=function(){function CentralGravitySolver(body,physicsBody,options){_classCallCheck(this,CentralGravitySolver),this.body=body,this.physicsBody=physicsBody,this.setOptions(options)}return _createClass(CentralGravitySolver,[{key:"setOptions",value:function(options){this.options=options}},{key:"solve",value:function(){for(var dx=void 0,dy=void 0,distance=void 0,node=void 0,nodes=this.body.nodes,nodeIndices=this.physicsBody.physicsNodeIndices,forces=this.physicsBody.forces,i=0;i<nodeIndices.length;i++){var nodeId=nodeIndices[i];node=nodes[nodeId],dx=-node.x,dy=-node.y,distance=Math.sqrt(dx*dx+dy*dy),this._calculateForces(distance,dx,dy,forces,node)}}},{key:"_calculateForces",value:function(distance,dx,dy,forces,node){var gravityForce=0===distance?0:this.options.centralGravity/distance;forces[node.id].x=dx*gravityForce,forces[node.id].y=dy*gravityForce}}]),CentralGravitySolver}();exports.default=CentralGravitySolver},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_BarnesHutSolver2=__webpack_require__(94),_BarnesHutSolver3=_interopRequireDefault(_BarnesHutSolver2),ForceAtlas2BasedRepulsionSolver=function(_BarnesHutSolver){function ForceAtlas2BasedRepulsionSolver(body,physicsBody,options){return _classCallCheck(this,ForceAtlas2BasedRepulsionSolver),_possibleConstructorReturn(this,Object.getPrototypeOf(ForceAtlas2BasedRepulsionSolver).call(this,body,physicsBody,options))}return _inherits(ForceAtlas2BasedRepulsionSolver,_BarnesHutSolver),_createClass(ForceAtlas2BasedRepulsionSolver,[{key:"_calculateForces",value:function(distance,dx,dy,node,parentBranch){0===distance&&(distance=.1*Math.random(),dx=distance),this.overlapAvoidanceFactor<1&&(distance=Math.max(.1+this.overlapAvoidanceFactor*node.shape.radius,distance-node.shape.radius));var degree=node.edges.length+1,gravityForce=this.options.gravitationalConstant*parentBranch.mass*node.options.mass*degree/Math.pow(distance,2),fx=dx*gravityForce,fy=dy*gravityForce;this.physicsBody.forces[node.id].x+=fx,this.physicsBody.forces[node.id].y+=fy}}]),ForceAtlas2BasedRepulsionSolver}(_BarnesHutSolver3.default);exports.default=ForceAtlas2BasedRepulsionSolver},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CentralGravitySolver2=__webpack_require__(99),_CentralGravitySolver3=_interopRequireDefault(_CentralGravitySolver2),ForceAtlas2BasedCentralGravitySolver=function(_CentralGravitySolver){function ForceAtlas2BasedCentralGravitySolver(body,physicsBody,options){return _classCallCheck(this,ForceAtlas2BasedCentralGravitySolver),_possibleConstructorReturn(this,Object.getPrototypeOf(ForceAtlas2BasedCentralGravitySolver).call(this,body,physicsBody,options))}return _inherits(ForceAtlas2BasedCentralGravitySolver,_CentralGravitySolver),_createClass(ForceAtlas2BasedCentralGravitySolver,[{key:"_calculateForces",value:function(distance,dx,dy,forces,node){if(distance>0){var degree=node.edges.length+1,gravityForce=this.options.centralGravity*degree*node.options.mass;forces[node.id].x=dx*gravityForce,forces[node.id].y=dy*gravityForce}}}]),ForceAtlas2BasedCentralGravitySolver}(_CentralGravitySolver3.default);exports.default=ForceAtlas2BasedCentralGravitySolver},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NetworkUtil=__webpack_require__(103),_NetworkUtil2=_interopRequireDefault(_NetworkUtil),_Cluster=__webpack_require__(104),_Cluster2=_interopRequireDefault(_Cluster),util=__webpack_require__(1),ClusterEngine=function(){function ClusterEngine(body){var _this=this;_classCallCheck(this,ClusterEngine),this.body=body,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},util.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){_this.clusteredNodes={},_this.clusteredEdges={}})}return _createClass(ClusterEngine,[{key:"setOptions",value:function(options){}},{key:"clusterByHubsize",value:function(hubsize,options){void 0===hubsize?hubsize=this._getHubSize():"object"===("undefined"==typeof hubsize?"undefined":_typeof(hubsize))&&(options=this._checkOptions(hubsize),hubsize=this._getHubSize());for(var nodesToCluster=[],i=0;i<this.body.nodeIndices.length;i++){var node=this.body.nodes[this.body.nodeIndices[i]];node.edges.length>=hubsize&&nodesToCluster.push(node.id)}for(var _i=0;_i<nodesToCluster.length;_i++)this.clusterByConnection(nodesToCluster[_i],options,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],refreshData=arguments.length<=1||void 0===arguments[1]||arguments[1];if(void 0===options.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");options=this._checkOptions(options);for(var childNodesObj={},childEdgesObj={},i=0;i<this.body.nodeIndices.length;i++){var nodeId=this.body.nodeIndices[i],node=this.body.nodes[nodeId],clonedOptions=_NetworkUtil2.default.cloneOptions(node);if(options.joinCondition(clonedOptions)===!0){childNodesObj[nodeId]=this.body.nodes[nodeId];for(var _i2=0;_i2<node.edges.length;_i2++){var edge=node.edges[_i2];void 0===this.clusteredEdges[edge.id]&&(childEdgesObj[edge.id]=edge)}}}this._cluster(childNodesObj,childEdgesObj,options,refreshData)}},{key:"clusterByEdgeCount",value:function(edgeCount,options){var refreshData=arguments.length<=2||void 0===arguments[2]||arguments[2];options=this._checkOptions(options);for(var clusters=[],usedNodes={},edge=void 0,edges=void 0,node=void 0,nodeId=void 0,relevantEdgeCount=void 0,i=0;i<this.body.nodeIndices.length;i++){var childNodesObj={},childEdgesObj={};if(nodeId=this.body.nodeIndices[i],void 0===usedNodes[nodeId]){relevantEdgeCount=0,node=this.body.nodes[nodeId],edges=[];for(var j=0;j<node.edges.length;j++)edge=node.edges[j],void 0===this.clusteredEdges[edge.id]&&(edge.toId!==edge.fromId&&relevantEdgeCount++,edges.push(edge));if(relevantEdgeCount===edgeCount){for(var gatheringSuccessful=!0,_j=0;_j<edges.length;_j++){edge=edges[_j];var childNodeId=this._getConnectedId(edge,nodeId);if(void 0===options.joinCondition)childEdgesObj[edge.id]=edge,childNodesObj[nodeId]=this.body.nodes[nodeId],childNodesObj[childNodeId]=this.body.nodes[childNodeId],usedNodes[nodeId]=!0;else{var clonedOptions=_NetworkUtil2.default.cloneOptions(this.body.nodes[nodeId]);if(options.joinCondition(clonedOptions)!==!0){gatheringSuccessful=!1;break}childEdgesObj[edge.id]=edge,childNodesObj[nodeId]=this.body.nodes[nodeId],usedNodes[nodeId]=!0}}Object.keys(childNodesObj).length>0&&Object.keys(childEdgesObj).length>0&&gatheringSuccessful===!0&&clusters.push({nodes:childNodesObj,edges:childEdgesObj})}}}for(var _i3=0;_i3<clusters.length;_i3++)this._cluster(clusters[_i3].nodes,clusters[_i3].edges,options,!1);refreshData===!0&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(options){var refreshData=arguments.length<=1||void 0===arguments[1]||arguments[1];this.clusterByEdgeCount(1,options,refreshData)}},{key:"clusterBridges",value:function(options){var refreshData=arguments.length<=1||void 0===arguments[1]||arguments[1];this.clusterByEdgeCount(2,options,refreshData)}},{key:"clusterByConnection",value:function(nodeId,options){var refreshData=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===nodeId)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[nodeId])throw new Error("The nodeId given to clusterByConnection does not exist!");var node=this.body.nodes[nodeId];options=this._checkOptions(options,node),void 0===options.clusterNodeProperties.x&&(options.clusterNodeProperties.x=node.x),void 0===options.clusterNodeProperties.y&&(options.clusterNodeProperties.y=node.y),void 0===options.clusterNodeProperties.fixed&&(options.clusterNodeProperties.fixed={},options.clusterNodeProperties.fixed.x=node.options.fixed.x,options.clusterNodeProperties.fixed.y=node.options.fixed.y);var childNodesObj={},childEdgesObj={},parentNodeId=node.id,parentClonedOptions=_NetworkUtil2.default.cloneOptions(node);childNodesObj[parentNodeId]=node;for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];if(void 0===this.clusteredEdges[edge.id]){var childNodeId=this._getConnectedId(edge,parentNodeId);if(void 0===this.clusteredNodes[childNodeId])if(childNodeId!==parentNodeId)if(void 0===options.joinCondition)childEdgesObj[edge.id]=edge,childNodesObj[childNodeId]=this.body.nodes[childNodeId];else{var childClonedOptions=_NetworkUtil2.default.cloneOptions(this.body.nodes[childNodeId]);options.joinCondition(parentClonedOptions,childClonedOptions)===!0&&(childEdgesObj[edge.id]=edge,childNodesObj[childNodeId]=this.body.nodes[childNodeId])}else childEdgesObj[edge.id]=edge}}this._cluster(childNodesObj,childEdgesObj,options,refreshData)}},{key:"_createClusterEdges",value:function(childNodesObj,childEdgesObj,clusterNodeProperties,clusterEdgeProperties){for(var edge=void 0,childNodeId=void 0,childNode=void 0,toId=void 0,fromId=void 0,otherNodeId=void 0,childKeys=Object.keys(childNodesObj),createEdges=[],i=0;i<childKeys.length;i++){childNodeId=childKeys[i],childNode=childNodesObj[childNodeId];for(var j=0;j<childNode.edges.length;j++)edge=childNode.edges[j],void 0===this.clusteredEdges[edge.id]&&(edge.toId==edge.fromId?childEdgesObj[edge.id]=edge:edge.toId==childNodeId?(toId=clusterNodeProperties.id,fromId=edge.fromId,otherNodeId=fromId):(toId=edge.toId,fromId=clusterNodeProperties.id,otherNodeId=toId),void 0===childNodesObj[otherNodeId]&&createEdges.push({edge:edge,fromId:fromId,toId:toId}))}for(var _j2=0;_j2<createEdges.length;_j2++){var _edge=createEdges[_j2].edge,clonedOptions=_NetworkUtil2.default.cloneOptions(_edge,"edge");util.deepExtend(clonedOptions,clusterEdgeProperties),clonedOptions.from=createEdges[_j2].fromId,clonedOptions.to=createEdges[_j2].toId,clonedOptions.id="clusterEdge:"+util.randomUUID();var newEdge=this.body.functions.createEdge(clonedOptions);newEdge.clusteringEdgeReplacingId=_edge.id,this.body.edges[newEdge.id]=newEdge,newEdge.connect(),this._backupEdgeOptions(_edge),_edge.setOptions({physics:!1,hidden:!0})}}},{key:"_checkOptions",value:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return void 0===options.clusterEdgeProperties&&(options.clusterEdgeProperties={}),void 0===options.clusterNodeProperties&&(options.clusterNodeProperties={}),options}},{key:"_cluster",value:function(childNodesObj,childEdgesObj,options){var refreshData=arguments.length<=3||void 0===arguments[3]||arguments[3];if(!(Object.keys(childNodesObj).length<2)){for(var nodeId in childNodesObj)if(childNodesObj.hasOwnProperty(nodeId)&&void 0!==this.clusteredNodes[nodeId])return;var clusterNodeProperties=util.deepExtend({},options.clusterNodeProperties);if(void 0!==options.processProperties){var childNodesOptions=[];for(var _nodeId in childNodesObj)if(childNodesObj.hasOwnProperty(_nodeId)){var clonedOptions=_NetworkUtil2.default.cloneOptions(childNodesObj[_nodeId]);childNodesOptions.push(clonedOptions)}var childEdgesOptions=[];for(var edgeId in childEdgesObj)if(childEdgesObj.hasOwnProperty(edgeId)&&"clusterEdge:"!==edgeId.substr(0,12)){var _clonedOptions=_NetworkUtil2.default.cloneOptions(childEdgesObj[edgeId],"edge");childEdgesOptions.push(_clonedOptions)}if(clusterNodeProperties=options.processProperties(clusterNodeProperties,childNodesOptions,childEdgesOptions),!clusterNodeProperties)throw new Error("The processProperties function does not return properties!")}void 0===clusterNodeProperties.id&&(clusterNodeProperties.id="cluster:"+util.randomUUID());var clusterId=clusterNodeProperties.id;void 0===clusterNodeProperties.label&&(clusterNodeProperties.label="cluster");var pos=void 0;void 0===clusterNodeProperties.x&&(pos=this._getClusterPosition(childNodesObj),clusterNodeProperties.x=pos.x),void 0===clusterNodeProperties.y&&(void 0===pos&&(pos=this._getClusterPosition(childNodesObj)),clusterNodeProperties.y=pos.y),clusterNodeProperties.id=clusterId;var clusterNode=this.body.functions.createNode(clusterNodeProperties,_Cluster2.default);clusterNode.isCluster=!0,clusterNode.containedNodes=childNodesObj,clusterNode.containedEdges=childEdgesObj,clusterNode.clusterEdgeProperties=options.clusterEdgeProperties,this.body.nodes[clusterNodeProperties.id]=clusterNode,this._createClusterEdges(childNodesObj,childEdgesObj,clusterNodeProperties,options.clusterEdgeProperties);for(var _edgeId in childEdgesObj)if(childEdgesObj.hasOwnProperty(_edgeId)&&void 0!==this.body.edges[_edgeId]){var edge=this.body.edges[_edgeId];this._backupEdgeOptions(edge),edge.setOptions({physics:!1,hidden:!0})}for(var _nodeId2 in childNodesObj)childNodesObj.hasOwnProperty(_nodeId2)&&(this.clusteredNodes[_nodeId2]={clusterId:clusterNodeProperties.id,node:this.body.nodes[_nodeId2]},this.body.nodes[_nodeId2].setOptions({hidden:!0,physics:!1}));clusterNodeProperties.id=void 0,refreshData===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(edge){void 0===this.clusteredEdges[edge.id]&&(this.clusteredEdges[edge.id]={physics:edge.options.physics,hidden:edge.options.hidden})}},{key:"_restoreEdge",value:function(edge){var originalOptions=this.clusteredEdges[edge.id];void 0!==originalOptions&&(edge.setOptions({physics:originalOptions.physics,hidden:originalOptions.hidden}),delete this.clusteredEdges[edge.id])}},{key:"isCluster",value:function(nodeId){return void 0!==this.body.nodes[nodeId]?this.body.nodes[nodeId].isCluster===!0:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(childNodesObj){for(var childKeys=Object.keys(childNodesObj),minX=childNodesObj[childKeys[0]].x,maxX=childNodesObj[childKeys[0]].x,minY=childNodesObj[childKeys[0]].y,maxY=childNodesObj[childKeys[0]].y,node=void 0,i=1;i<childKeys.length;i++)node=childNodesObj[childKeys[i]],minX=node.x<minX?node.x:minX,maxX=node.x>maxX?node.x:maxX,minY=node.y<minY?node.y:minY,maxY=node.y>maxY?node.y:maxY;return{x:.5*(minX+maxX),y:.5*(minY+maxY)}}},{key:"openCluster",value:function(clusterNodeId,options){var refreshData=arguments.length<=2||void 0===arguments[2]||arguments[2];if(void 0===clusterNodeId)throw new Error("No clusterNodeId supplied to openCluster.");if(void 0===this.body.nodes[clusterNodeId])throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(void 0===this.body.nodes[clusterNodeId].containedNodes)return void console.log("The node:"+clusterNodeId+" is not a cluster.");var clusterNode=this.body.nodes[clusterNodeId],containedNodes=clusterNode.containedNodes,containedEdges=clusterNode.containedEdges;if(void 0!==options&&void 0!==options.releaseFunction&&"function"==typeof options.releaseFunction){var positions={},clusterPosition={x:clusterNode.x,y:clusterNode.y};for(var nodeId in containedNodes)if(containedNodes.hasOwnProperty(nodeId)){var containedNode=this.body.nodes[nodeId];positions[nodeId]={x:containedNode.x,y:containedNode.y}}var newPositions=options.releaseFunction(clusterPosition,positions);for(var _nodeId3 in containedNodes)if(containedNodes.hasOwnProperty(_nodeId3)){var _containedNode=this.body.nodes[_nodeId3];void 0!==newPositions[_nodeId3]&&(_containedNode.x=void 0===newPositions[_nodeId3].x?clusterNode.x:newPositions[_nodeId3].x,_containedNode.y=void 0===newPositions[_nodeId3].y?clusterNode.y:newPositions[_nodeId3].y)}}else for(var _nodeId4 in containedNodes)if(containedNodes.hasOwnProperty(_nodeId4)){var _containedNode2=this.body.nodes[_nodeId4];_containedNode2=containedNodes[_nodeId4],_containedNode2.options.fixed.x===!1&&(_containedNode2.x=clusterNode.x),_containedNode2.options.fixed.y===!1&&(_containedNode2.y=clusterNode.y)}for(var _nodeId5 in containedNodes)if(containedNodes.hasOwnProperty(_nodeId5)){var _containedNode3=this.body.nodes[_nodeId5];_containedNode3.vx=clusterNode.vx,_containedNode3.vy=clusterNode.vy,_containedNode3.setOptions({hidden:!1,physics:!0}),delete this.clusteredNodes[_nodeId5]}for(var edgesToBeDeleted=[],i=0;i<clusterNode.edges.length;i++)edgesToBeDeleted.push(clusterNode.edges[i]);for(var _i4=0;_i4<edgesToBeDeleted.length;_i4++){var edge=edgesToBeDeleted[_i4],otherNodeId=this._getConnectedId(edge,clusterNodeId);if(void 0!==this.clusteredNodes[otherNodeId]){var otherCluster=this.body.nodes[this.clusteredNodes[otherNodeId].clusterId],transferEdge=this.body.edges[edge.clusteringEdgeReplacingId];if(void 0!==transferEdge){otherCluster.containedEdges[transferEdge.id]=transferEdge,delete containedEdges[transferEdge.id];var fromId=transferEdge.fromId,toId=transferEdge.toId;transferEdge.toId==otherNodeId?toId=this.clusteredNodes[otherNodeId].clusterId:fromId=this.clusteredNodes[otherNodeId].clusterId;var clonedOptions=_NetworkUtil2.default.cloneOptions(transferEdge,"edge");util.deepExtend(clonedOptions,otherCluster.clusterEdgeProperties);var id="clusterEdge:"+util.randomUUID();util.deepExtend(clonedOptions,{from:fromId,to:toId,hidden:!1,physics:!0,id:id});var newEdge=this.body.functions.createEdge(clonedOptions);newEdge.clusteringEdgeReplacingId=transferEdge.id,this.body.edges[id]=newEdge,this.body.edges[id].connect()}}else{var replacedEdge=this.body.edges[edge.clusteringEdgeReplacingId];void 0!==replacedEdge&&this._restoreEdge(replacedEdge)}edge.cleanup(),edge.disconnect(),delete this.body.edges[edge.id]}for(var edgeId in containedEdges)containedEdges.hasOwnProperty(edgeId)&&this._restoreEdge(containedEdges[edgeId]);delete this.body.nodes[clusterNodeId],refreshData===!0&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(clusterId){var nodesArray=[];if(this.isCluster(clusterId)===!0){var containedNodes=this.body.nodes[clusterId].containedNodes;for(var nodeId in containedNodes)containedNodes.hasOwnProperty(nodeId)&&nodesArray.push(this.body.nodes[nodeId].id)}return nodesArray}},{key:"findNode",value:function(nodeId){for(var stack=[],max=100,counter=0;void 0!==this.clusteredNodes[nodeId]&&counter<max;)stack.push(this.body.nodes[nodeId].id),nodeId=this.clusteredNodes[nodeId].clusterId,counter++;return stack.push(this.body.nodes[nodeId].id),stack.reverse(),stack}},{key:"_getConnectedId",value:function(edge,nodeId){return edge.toId!=nodeId?edge.toId:edge.fromId!=nodeId?edge.fromId:edge.fromId}},{key:"_getHubSize",value:function(){for(var average=0,averageSquared=0,hubCounter=0,largestHub=0,i=0;i<this.body.nodeIndices.length;i++){var node=this.body.nodes[this.body.nodeIndices[i]];node.edges.length>largestHub&&(largestHub=node.edges.length),average+=node.edges.length,averageSquared+=Math.pow(node.edges.length,2),hubCounter+=1}average/=hubCounter,averageSquared/=hubCounter;var variance=averageSquared-Math.pow(average,2),standardDeviation=Math.sqrt(variance),hubThreshold=Math.floor(average+2*standardDeviation);return hubThreshold>largestHub&&(hubThreshold=largestHub),hubThreshold}}]),ClusterEngine}();exports.default=ClusterEngine},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),util=__webpack_require__(1),NetworkUtil=function(){function NetworkUtil(){_classCallCheck(this,NetworkUtil)}return _createClass(NetworkUtil,null,[{key:"getRange",value:function(allNodes){var node,specificNodes=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9;if(specificNodes.length>0)for(var i=0;i<specificNodes.length;i++)node=allNodes[specificNodes[i]],minX>node.shape.boundingBox.left&&(minX=node.shape.boundingBox.left),maxX<node.shape.boundingBox.right&&(maxX=node.shape.boundingBox.right),minY>node.shape.boundingBox.top&&(minY=node.shape.boundingBox.top),maxY<node.shape.boundingBox.bottom&&(maxY=node.shape.boundingBox.bottom);return 1e9===minX&&maxX===-1e9&&1e9===minY&&maxY===-1e9&&(minY=0,maxY=0,minX=0,maxX=0),{minX:minX,maxX:maxX,minY:minY,maxY:maxY}}},{key:"getRangeCore",value:function(allNodes){var node,specificNodes=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],minY=1e9,maxY=-1e9,minX=1e9,maxX=-1e9;if(specificNodes.length>0)for(var i=0;i<specificNodes.length;i++)node=allNodes[specificNodes[i]],minX>node.x&&(minX=node.x),maxX<node.x&&(maxX=node.x),minY>node.y&&(minY=node.y),maxY<node.y&&(maxY=node.y);return 1e9===minX&&maxX===-1e9&&1e9===minY&&maxY===-1e9&&(minY=0,maxY=0,minX=0,maxX=0),{minX:minX,maxX:maxX,minY:minY,maxY:maxY}}},{key:"findCenter",value:function(range){return{x:.5*(range.maxX+range.minX),y:.5*(range.maxY+range.minY)}}},{key:"cloneOptions",value:function(item,type){var clonedOptions={};return void 0===type||"node"===type?(util.deepExtend(clonedOptions,item.options,!0),clonedOptions.x=item.x,clonedOptions.y=item.y,clonedOptions.amountOfConnections=item.edges.length):util.deepExtend(clonedOptions,item.options,!0),clonedOptions}}]),NetworkUtil}();exports.default=NetworkUtil},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _Node2=__webpack_require__(65),_Node3=_interopRequireDefault(_Node2),Cluster=function(_Node){function Cluster(options,body,imagelist,grouplist,globalOptions){_classCallCheck(this,Cluster);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(Cluster).call(this,options,body,imagelist,grouplist,globalOptions));return _this.isCluster=!0,_this.containedNodes={},_this.containedEdges={},_this}return _inherits(Cluster,_Node),Cluster}(_Node3.default);exports.default=Cluster},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);var util=__webpack_require__(1),CanvasRenderer=function(){function CanvasRenderer(body,canvas){_classCallCheck(this,CanvasRenderer),this.body=body,this.canvas=canvas,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.pixelRatio=void 0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},util.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),
this.bindEventListeners()}return _createClass(CanvasRenderer,[{key:"bindEventListeners",value:function(){var _this=this;this.body.emitter.on("dragStart",function(){_this.dragging=!0}),this.body.emitter.on("dragEnd",function(){return _this.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){return _this._resizeNodes()}),this.body.emitter.on("_redraw",function(){_this.renderingActive===!1&&_this._redraw()}),this.body.emitter.on("_blockRedraw",function(){_this.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){_this.allowRedraw=!0,_this.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){_this.renderRequests+=1,_this.renderingActive=!0,_this._startRendering()}),this.body.emitter.on("_stopRendering",function(){_this.renderRequests-=1,_this.renderingActive=_this.renderRequests>0,_this.renderTimer=void 0}),this.body.emitter.on("destroy",function(){_this.renderRequests=0,_this.allowRedraw=!1,_this.renderingActive=!1,_this.requiresTimeout===!0?clearTimeout(_this.renderTimer):cancelAnimationFrame(_this.renderTimer),_this.body.emitter.off()})}},{key:"setOptions",value:function(options){if(void 0!==options){var fields=["hideEdgesOnDrag","hideNodesOnDrag"];util.selectiveDeepExtend(fields,this.options,options)}}},{key:"_startRendering",value:function(){this.renderingActive===!0&&void 0===this.renderTimer&&(this.requiresTimeout===!0?this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval):this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this)))}},{key:"_renderStep",value:function(){this.renderingActive===!0&&(this.renderTimer=void 0,this.requiresTimeout===!0&&this._startRendering(),this._redraw(),this.requiresTimeout===!1&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var _this2=this;this.redrawRequested!==!0&&this.renderingActive===!1&&this.allowRedraw===!0&&(this.redrawRequested=!0,this.requiresTimeout===!0?window.setTimeout(function(){_this2._redraw(!1)},0):window.requestAnimationFrame(function(){_this2._redraw(!1)}))}},{key:"_redraw",value:function(){var hidden=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];if(this.allowRedraw===!0){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var ctx=this.canvas.frame.canvas.getContext("2d");0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1),ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var w=this.canvas.frame.canvas.clientWidth,h=this.canvas.frame.canvas.clientHeight;if(ctx.clearRect(0,0,w,h),0===this.canvas.frame.clientWidth)return;ctx.save(),ctx.translate(this.body.view.translation.x,this.body.view.translation.y),ctx.scale(this.body.view.scale,this.body.view.scale),ctx.beginPath(),this.body.emitter.emit("beforeDrawing",ctx),ctx.closePath(),hidden===!1&&(this.dragging===!1||this.dragging===!0&&this.options.hideEdgesOnDrag===!1)&&this._drawEdges(ctx),(this.dragging===!1||this.dragging===!0&&this.options.hideNodesOnDrag===!1)&&this._drawNodes(ctx,hidden),ctx.beginPath(),this.body.emitter.emit("afterDrawing",ctx),ctx.closePath(),ctx.restore(),hidden===!0&&ctx.clearRect(0,0,w,h)}}},{key:"_resizeNodes",value:function(){var ctx=this.canvas.frame.canvas.getContext("2d");void 0===this.pixelRatio&&(this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1)),ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),ctx.save(),ctx.translate(this.body.view.translation.x,this.body.view.translation.y),ctx.scale(this.body.view.scale,this.body.view.scale);var nodes=this.body.nodes,node=void 0;for(var nodeId in nodes)nodes.hasOwnProperty(nodeId)&&(node=nodes[nodeId],node.resize(ctx),node.updateBoundingBox(ctx,node.selected));ctx.restore()}},{key:"_drawNodes",value:function(ctx){for(var alwaysShow=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],nodes=this.body.nodes,nodeIndices=this.body.nodeIndices,node=void 0,selected=[],margin=20,topLeft=this.canvas.DOMtoCanvas({x:-margin,y:-margin}),bottomRight=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+margin,y:this.canvas.frame.canvas.clientHeight+margin}),viewableArea={top:topLeft.y,left:topLeft.x,bottom:bottomRight.y,right:bottomRight.x},i=0;i<nodeIndices.length;i++)node=nodes[nodeIndices[i]],node.isSelected()?selected.push(nodeIndices[i]):alwaysShow===!0?node.draw(ctx):node.isBoundingBoxOverlappingWith(viewableArea)===!0?node.draw(ctx):node.updateBoundingBox(ctx,node.selected);for(var _i=0;_i<selected.length;_i++)node=nodes[selected[_i]],node.draw(ctx)}},{key:"_drawEdges",value:function(ctx){for(var edges=this.body.edges,edgeIndices=this.body.edgeIndices,edge=void 0,i=0;i<edgeIndices.length;i++)edge=edges[edgeIndices[i]],edge.connected===!0&&edge.draw(ctx)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var browserType=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,browserType.indexOf("msie 9.0")!=-1?this.requiresTimeout=!0:browserType.indexOf("safari")!=-1&&browserType.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),CanvasRenderer}();exports.default=CanvasRenderer},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Hammer=__webpack_require__(20),hammerUtil=__webpack_require__(28),util=__webpack_require__(1),Canvas=function(){function Canvas(body){_classCallCheck(this,Canvas),this.body=body,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},util.extend(this.options,this.defaultOptions),this.bindEventListeners()}return _createClass(Canvas,[{key:"bindEventListeners",value:function(){var _this=this;this.body.emitter.once("resize",function(obj){0!==obj.width&&(_this.body.view.translation.x=.5*obj.width),0!==obj.height&&(_this.body.view.translation.y=.5*obj.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){_this.hammerFrame.destroy(),_this.hammer.destroy(),_this._cleanUp()})}},{key:"setOptions",value:function(options){var _this2=this;if(void 0!==options){var fields=["width","height","autoResize"];util.selectiveDeepExtend(fields,this.options,options)}this.options.autoResize===!0&&(this._cleanUp(),this.resizeTimer=setInterval(function(){var changed=_this2.setSize();changed===!0&&_this2.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),util.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),util.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var pixelRatio=arguments.length<=0||void 0===arguments[0]?this.pixelRatio:arguments[0];this.initialized===!0&&(this.cameraState.previousWidth=this.frame.canvas.width/pixelRatio,this.cameraState.previousHeight=this.frame.canvas.height/pixelRatio,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/pixelRatio,y:.5*this.frame.canvas.height/pixelRatio}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0){var widthRatio=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,heightRatio=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,newScale=this.cameraState.scale;1!=widthRatio&&1!=heightRatio?newScale=.5*this.cameraState.scale*(widthRatio+heightRatio):1!=widthRatio?newScale=this.cameraState.scale*widthRatio:1!=heightRatio&&(newScale=this.cameraState.scale*heightRatio),this.body.view.scale=newScale;var currentViewCenter=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),distanceFromCenter={x:currentViewCenter.x-this.cameraState.position.x,y:currentViewCenter.y-this.cameraState.position.y};this.body.view.translation.x+=distanceFromCenter.x*this.body.view.scale,this.body.view.translation.y+=distanceFromCenter.y*this.body.view.scale}}},{key:"_prepareValue",value:function(value){if("number"==typeof value)return value+"px";if("string"==typeof value){if(value.indexOf("%")!==-1||value.indexOf("px")!==-1)return value;if(value.indexOf("%")===-1)return value+"px"}throw new Error("Could not use the value supplied for width or height:"+value)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext){var ctx=this.frame.canvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1),this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var noCanvas=document.createElement("DIV");noCanvas.style.color="red",noCanvas.style.fontWeight="bold",noCanvas.style.padding="10px",noCanvas.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(noCanvas)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var _this3=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Hammer(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Hammer.DIRECTION_ALL}),hammerUtil.onTouch(this.hammer,function(event){_this3.body.eventListeners.onTouch(event)}),this.hammer.on("tap",function(event){_this3.body.eventListeners.onTap(event)}),this.hammer.on("doubletap",function(event){_this3.body.eventListeners.onDoubleTap(event)}),this.hammer.on("press",function(event){_this3.body.eventListeners.onHold(event)}),this.hammer.on("panstart",function(event){_this3.body.eventListeners.onDragStart(event)}),this.hammer.on("panmove",function(event){_this3.body.eventListeners.onDrag(event)}),this.hammer.on("panend",function(event){_this3.body.eventListeners.onDragEnd(event)}),this.hammer.on("pinch",function(event){_this3.body.eventListeners.onPinch(event)}),this.frame.canvas.addEventListener("mousewheel",function(event){_this3.body.eventListeners.onMouseWheel(event)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(event){_this3.body.eventListeners.onMouseWheel(event)}),this.frame.canvas.addEventListener("mousemove",function(event){_this3.body.eventListeners.onMouseMove(event)}),this.frame.canvas.addEventListener("contextmenu",function(event){_this3.body.eventListeners.onContext(event)}),this.hammerFrame=new Hammer(this.frame),hammerUtil.onRelease(this.hammerFrame,function(event){_this3.body.eventListeners.onRelease(event)})}},{key:"setSize",value:function(){var width=arguments.length<=0||void 0===arguments[0]?this.options.width:arguments[0],height=arguments.length<=1||void 0===arguments[1]?this.options.height:arguments[1];width=this._prepareValue(width),height=this._prepareValue(height);var emitEvent=!1,oldWidth=this.frame.canvas.width,oldHeight=this.frame.canvas.height,ctx=this.frame.canvas.getContext("2d"),previousRatio=this.pixelRatio;return this.pixelRatio=(window.devicePixelRatio||1)/(ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1),width!=this.options.width||height!=this.options.height||this.frame.style.width!=width||this.frame.style.height!=height?(this._getCameraState(previousRatio),this.frame.style.width=width,this.frame.style.height=height,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=width,this.options.height=height,emitEvent=!0):(this.frame.canvas.width==Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&this.frame.canvas.height==Math.round(this.frame.canvas.clientHeight*this.pixelRatio)||this._getCameraState(previousRatio),this.frame.canvas.width!=Math.round(this.frame.canvas.clientWidth*this.pixelRatio)&&(this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),emitEvent=!0),this.frame.canvas.height!=Math.round(this.frame.canvas.clientHeight*this.pixelRatio)&&(this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),emitEvent=!0)),emitEvent===!0&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(oldWidth/this.pixelRatio),oldHeight:Math.round(oldHeight/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,emitEvent}},{key:"_XconvertDOMtoCanvas",value:function(x){return(x-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(x){return x*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(y){return(y-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(y){return y*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(pos){return{x:this._XconvertCanvasToDOM(pos.x),y:this._YconvertCanvasToDOM(pos.y)}}},{key:"DOMtoCanvas",value:function(pos){return{x:this._XconvertDOMtoCanvas(pos.x),y:this._YconvertDOMtoCanvas(pos.y)}}}]),Canvas}();exports.default=Canvas},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NetworkUtil=__webpack_require__(103),_NetworkUtil2=_interopRequireDefault(_NetworkUtil),util=__webpack_require__(1),View=function(){function View(body,canvas){var _this=this;_classCallCheck(this,View),this.body=body,this.canvas=canvas,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){_this.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}return _createClass(View,[{key:"setOptions",value:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=options}},{key:"fit",value:function(){var options=arguments.length<=0||void 0===arguments[0]?{nodes:[]}:arguments[0],initialZoom=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],range=void 0,zoomLevel=void 0;if(void 0!==options.nodes&&0!==options.nodes.length||(options.nodes=this.body.nodeIndices),initialZoom===!0){var positionDefined=0;for(var nodeId in this.body.nodes)if(this.body.nodes.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];node.predefinedPosition===!0&&(positionDefined+=1)}if(positionDefined>.5*this.body.nodeIndices.length)return void this.fit(options,!1);range=_NetworkUtil2.default.getRange(this.body.nodes,options.nodes);var numberOfNodes=this.body.nodeIndices.length;zoomLevel=12.662/(numberOfNodes+7.4147)+.0964822;var factor=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);zoomLevel*=factor}else{this.body.emitter.emit("_resizeNodes"),range=_NetworkUtil2.default.getRange(this.body.nodes,options.nodes);var xDistance=1.1*Math.abs(range.maxX-range.minX),yDistance=1.1*Math.abs(range.maxY-range.minY),xZoomLevel=this.canvas.frame.canvas.clientWidth/xDistance,yZoomLevel=this.canvas.frame.canvas.clientHeight/yDistance;zoomLevel=xZoomLevel<=yZoomLevel?xZoomLevel:yZoomLevel}zoomLevel>1?zoomLevel=1:0===zoomLevel&&(zoomLevel=1);var center=_NetworkUtil2.default.findCenter(range),animationOptions={position:center,scale:zoomLevel,animation:options.animation};this.moveTo(animationOptions)}},{key:"focus",value:function(nodeId){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(void 0!==this.body.nodes[nodeId]){var nodePosition={x:this.body.nodes[nodeId].x,y:this.body.nodes[nodeId].y};options.position=nodePosition,options.lockedOnNode=nodeId,this.moveTo(options)}else console.log("Node: "+nodeId+" cannot be found.")}},{key:"moveTo",value:function(options){return void 0===options?void(options={}):(void 0===options.offset&&(options.offset={x:0,y:0}),void 0===options.offset.x&&(options.offset.x=0),void 0===options.offset.y&&(options.offset.y=0),void 0===options.scale&&(options.scale=this.body.view.scale),void 0===options.position&&(options.position=this.getViewPosition()),void 0===options.animation&&(options.animation={duration:0}),options.animation===!1&&(options.animation={duration:0}),options.animation===!0&&(options.animation={}),void 0===options.animation.duration&&(options.animation.duration=1e3),void 0===options.animation.easingFunction&&(options.animation.easingFunction="easeInOutQuad"),void this.animateView(options))}},{key:"animateView",value:function(options){if(void 0!==options){this.animationEasingFunction=options.animation.easingFunction,this.releaseNode(),options.locked===!0&&(this.lockedOnNodeId=options.lockedOnNode,this.lockedOnNodeOffset=options.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=options.scale,this.body.view.scale=this.targetScale;var viewCenter=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),distanceFromCenter={x:viewCenter.x-options.position.x,y:viewCenter.y-options.position.y};this.targetTranslation={x:this.sourceTranslation.x+distanceFromCenter.x*this.targetScale+options.offset.x,y:this.sourceTranslation.y+distanceFromCenter.y*this.targetScale+options.offset.y},0===options.animation.duration?void 0!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*options.animation.duration*.001)||1/60,this.animationEasingFunction=options.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var nodePosition={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y},viewCenter=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),distanceFromCenter={x:viewCenter.x-nodePosition.x,y:viewCenter.y-nodePosition.y},sourceTranslation=this.body.view.translation,targetTranslation={x:sourceTranslation.x+distanceFromCenter.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:sourceTranslation.y+distanceFromCenter.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=targetTranslation}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var finished=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=finished===!0?1:this.easingTime;var progress=util.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*progress,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*progress,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*progress},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,void 0!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),View}();exports.default=View},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NavigationHandler=__webpack_require__(109),_NavigationHandler2=_interopRequireDefault(_NavigationHandler),_Popup=__webpack_require__(110),_Popup2=_interopRequireDefault(_Popup),util=__webpack_require__(1),InteractionHandler=function(){function InteractionHandler(body,canvas,selectionHandler){_classCallCheck(this,InteractionHandler),this.body=body,this.canvas=canvas,this.selectionHandler=selectionHandler,this.navigationHandler=new _NavigationHandler2.default(body,canvas),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},util.extend(this.options,this.defaultOptions),this.bindEventListeners()}return _createClass(InteractionHandler,[{key:"bindEventListeners",value:function(){var _this=this;this.body.emitter.on("destroy",function(){clearTimeout(_this.popupTimer),delete _this.body.functions.getPointer})}},{key:"setOptions",value:function(options){if(void 0!==options){var fields=["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];util.selectiveNotDeepExtend(fields,this.options,options),util.mergeOptions(this.options,options,"keyboard"),options.tooltip&&(util.extend(this.options.tooltip,options.tooltip),options.tooltip.color&&(this.options.tooltip.color=util.parseColor(options.tooltip.color)))}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(touch){return{x:touch.x-util.getAbsoluteLeft(this.canvas.frame.canvas),y:touch.y-util.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(event){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(event.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(event){var pointer=this.getPointer(event.center),multiselect=this.selectionHandler.options.multiselect&&(event.changedPointers[0].ctrlKey||event.changedPointers[0].metaKey);this.checkSelectionChanges(pointer,event,multiselect),this.selectionHandler._generateClickEvent("click",event,pointer)}},{key:"onDoubleTap",value:function(event){var pointer=this.getPointer(event.center);this.selectionHandler._generateClickEvent("doubleClick",event,pointer)}},{key:"onHold",value:function(event){var pointer=this.getPointer(event.center),multiselect=this.selectionHandler.options.multiselect;this.checkSelectionChanges(pointer,event,multiselect),this.selectionHandler._generateClickEvent("click",event,pointer),this.selectionHandler._generateClickEvent("hold",event,pointer)}},{key:"onRelease",value:function(event){if((new Date).valueOf()-this.touchTime>10){var pointer=this.getPointer(event.center);this.selectionHandler._generateClickEvent("release",event,pointer),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(event){var pointer=this.getPointer({x:event.clientX,y:event.clientY});this.selectionHandler._generateClickEvent("oncontext",event,pointer)}},{key:"checkSelectionChanges",value:function(pointer,event){var add=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],previouslySelectedEdgeCount=this.selectionHandler._getSelectedEdgeCount(),previouslySelectedNodeCount=this.selectionHandler._getSelectedNodeCount(),previousSelection=this.selectionHandler.getSelection(),selected=void 0;selected=add===!0?this.selectionHandler.selectAdditionalOnPoint(pointer):this.selectionHandler.selectOnPoint(pointer);var selectedEdgesCount=this.selectionHandler._getSelectedEdgeCount(),selectedNodesCount=this.selectionHandler._getSelectedNodeCount(),currentSelection=this.selectionHandler.getSelection(),_determineIfDifferent2=this._determineIfDifferent(previousSelection,currentSelection),nodesChanged=_determineIfDifferent2.nodesChanged,edgesChanged=_determineIfDifferent2.edgesChanged,nodeSelected=!1;selectedNodesCount-previouslySelectedNodeCount>0?(this.selectionHandler._generateClickEvent("selectNode",event,pointer),selected=!0,nodeSelected=!0):nodesChanged===!0&&selectedNodesCount>0?(this.selectionHandler._generateClickEvent("deselectNode",event,pointer,previousSelection),this.selectionHandler._generateClickEvent("selectNode",event,pointer),nodeSelected=!0,selected=!0):selectedNodesCount-previouslySelectedNodeCount<0&&(this.selectionHandler._generateClickEvent("deselectNode",event,pointer,previousSelection),selected=!0),selectedEdgesCount-previouslySelectedEdgeCount>0&&nodeSelected===!1?(this.selectionHandler._generateClickEvent("selectEdge",event,pointer),selected=!0):selectedEdgesCount>0&&edgesChanged===!0?(this.selectionHandler._generateClickEvent("deselectEdge",event,pointer,previousSelection),this.selectionHandler._generateClickEvent("selectEdge",event,pointer),selected=!0):selectedEdgesCount-previouslySelectedEdgeCount<0&&(this.selectionHandler._generateClickEvent("deselectEdge",event,pointer,previousSelection),selected=!0),selected===!0&&this.selectionHandler._generateClickEvent("select",event,pointer)}},{key:"_determineIfDifferent",value:function(previousSelection,currentSelection){for(var nodesChanged=!1,edgesChanged=!1,i=0;i<previousSelection.nodes.length;i++)currentSelection.nodes.indexOf(previousSelection.nodes[i])===-1&&(nodesChanged=!0);for(var _i=0;_i<currentSelection.nodes.length;_i++)previousSelection.nodes.indexOf(previousSelection.nodes[_i])===-1&&(nodesChanged=!0);for(var _i2=0;_i2<previousSelection.edges.length;_i2++)currentSelection.edges.indexOf(previousSelection.edges[_i2])===-1&&(edgesChanged=!0);for(var _i3=0;_i3<currentSelection.edges.length;_i3++)previousSelection.edges.indexOf(previousSelection.edges[_i3])===-1&&(edgesChanged=!0);return{nodesChanged:nodesChanged,edgesChanged:edgesChanged}}},{key:"onDragStart",value:function(event){void 0===this.drag.pointer&&this.onTouch(event);var node=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=util.extend({},this.body.view.translation),this.drag.nodeId=void 0,void 0!==node&&this.options.dragNodes===!0){this.drag.nodeId=node.id,node.isSelected()===!1&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(node)),this.selectionHandler._generateClickEvent("dragStart",event,this.drag.pointer);var selection=this.selectionHandler.selectionObj.nodes;for(var nodeId in selection)if(selection.hasOwnProperty(nodeId)){var object=selection[nodeId],s={id:object.id,node:object,x:object.x,y:object.y,xFixed:object.options.fixed.x,yFixed:object.options.fixed.y};object.options.fixed.x=!0,object.options.fixed.y=!0,this.drag.selection.push(s)}}else this.selectionHandler._generateClickEvent("dragStart",event,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(event){var _this2=this;if(this.drag.pinched!==!0){this.body.emitter.emit("unlockNode");var pointer=this.getPointer(event.center),selection=this.drag.selection;if(selection&&selection.length&&this.options.dragNodes===!0)!function(){_this2.selectionHandler._generateClickEvent("dragging",event,pointer);var deltaX=pointer.x-_this2.drag.pointer.x,deltaY=pointer.y-_this2.drag.pointer.y;selection.forEach(function(selection){var node=selection.node;selection.xFixed===!1&&(node.x=_this2.canvas._XconvertDOMtoCanvas(_this2.canvas._XconvertCanvasToDOM(selection.x)+deltaX)),selection.yFixed===!1&&(node.y=_this2.canvas._YconvertDOMtoCanvas(_this2.canvas._YconvertCanvasToDOM(selection.y)+deltaY));
}),_this2.body.emitter.emit("startSimulation")}();else if(this.options.dragView===!0){if(this.selectionHandler._generateClickEvent("dragging",event,pointer,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(event);var diffX=pointer.x-this.drag.pointer.x,diffY=pointer.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+diffX,y:this.drag.translation.y+diffY},this.body.emitter.emit("_redraw")}}}},{key:"onDragEnd",value:function(event){this.drag.dragging=!1;var selection=this.drag.selection;selection&&selection.length?(selection.forEach(function(s){s.node.options.fixed.x=s.xFixed,s.node.options.fixed.y=s.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",event,this.getPointer(event.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",event,this.getPointer(event.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(event){var pointer=this.getPointer(event.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var scale=this.pinch.scale*event.scale;this.zoom(scale,pointer)}},{key:"zoom",value:function(scale,pointer){if(this.options.zoomView===!0){var scaleOld=this.body.view.scale;scale<1e-5&&(scale=1e-5),scale>10&&(scale=10);var preScaleDragPointer=void 0;void 0!==this.drag&&this.drag.dragging===!0&&(preScaleDragPointer=this.canvas.DOMtoCanvas(this.drag.pointer));var translation=this.body.view.translation,scaleFrac=scale/scaleOld,tx=(1-scaleFrac)*pointer.x+translation.x*scaleFrac,ty=(1-scaleFrac)*pointer.y+translation.y*scaleFrac;if(this.body.view.scale=scale,this.body.view.translation={x:tx,y:ty},void 0!=preScaleDragPointer){var postScaleDragPointer=this.canvas.canvasToDOM(preScaleDragPointer);this.drag.pointer.x=postScaleDragPointer.x,this.drag.pointer.y=postScaleDragPointer.y}this.body.emitter.emit("_requestRedraw"),scaleOld<scale?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}}},{key:"onMouseWheel",value:function(event){if(this.options.zoomView===!0){var delta=0;if(event.wheelDelta?delta=event.wheelDelta/120:event.detail&&(delta=-event.detail/3),0!==delta){var scale=this.body.view.scale,zoom=delta/10;delta<0&&(zoom/=1-zoom),scale*=1+zoom;var pointer=this.getPointer({x:event.clientX,y:event.clientY});this.zoom(scale,pointer)}event.preventDefault()}}},{key:"onMouseMove",value:function(event){var _this3=this,pointer=this.getPointer({x:event.clientX,y:event.clientY}),popupVisible=!1;if(void 0!==this.popup&&(this.popup.hidden===!1&&this._checkHidePopup(pointer),this.popup.hidden===!1&&(popupVisible=!0,this.popup.setPosition(pointer.x+3,pointer.y-5),this.popup.show())),this.options.keyboard.bindToWindow===!1&&this.options.keyboard.enabled===!0&&this.canvas.frame.focus(),popupVisible===!1&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return _this3._checkShowPopup(pointer)},this.options.tooltipDelay))),this.options.hover===!0){var obj=this.selectionHandler.getNodeAt(pointer);void 0===obj&&(obj=this.selectionHandler.getEdgeAt(pointer)),this.selectionHandler.hoverObject(obj)}}},{key:"_checkShowPopup",value:function(pointer){var x=this.canvas._XconvertDOMtoCanvas(pointer.x),y=this.canvas._YconvertDOMtoCanvas(pointer.y),pointerObj={left:x,top:y,right:x,bottom:y},previousPopupObjId=void 0===this.popupObj?void 0:this.popupObj.id,nodeUnderCursor=!1,popupType="node";if(void 0===this.popupObj){for(var nodeIndices=this.body.nodeIndices,nodes=this.body.nodes,node=void 0,overlappingNodes=[],i=0;i<nodeIndices.length;i++)node=nodes[nodeIndices[i]],node.isOverlappingWith(pointerObj)===!0&&void 0!==node.getTitle()&&overlappingNodes.push(nodeIndices[i]);overlappingNodes.length>0&&(this.popupObj=nodes[overlappingNodes[overlappingNodes.length-1]],nodeUnderCursor=!0)}if(void 0===this.popupObj&&nodeUnderCursor===!1){for(var edgeIndices=this.body.edgeIndices,edges=this.body.edges,edge=void 0,overlappingEdges=[],_i4=0;_i4<edgeIndices.length;_i4++)edge=edges[edgeIndices[_i4]],edge.isOverlappingWith(pointerObj)===!0&&edge.connected===!0&&void 0!==edge.getTitle()&&overlappingEdges.push(edgeIndices[_i4]);overlappingEdges.length>0&&(this.popupObj=edges[overlappingEdges[overlappingEdges.length-1]],popupType="edge")}void 0!==this.popupObj?this.popupObj.id!==previousPopupObjId&&(void 0===this.popup&&(this.popup=new _Popup2.default(this.canvas.frame)),this.popup.popupTargetType=popupType,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(pointer.x+3,pointer.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(pointer){var pointerObj=this.selectionHandler._pointerToPositionObject(pointer),stillOnObj=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&(stillOnObj=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(pointerObj),stillOnObj===!0)){var overNode=this.selectionHandler.getNodeAt(pointer);stillOnObj=overNode.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(pointer)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(stillOnObj=this.body.edges[this.popup.popupTargetId].isOverlappingWith(pointerObj));stillOnObj===!1&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),InteractionHandler}();exports.default=InteractionHandler},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Hammer=(__webpack_require__(1),__webpack_require__(20)),hammerUtil=__webpack_require__(28),keycharm=__webpack_require__(23),NavigationHandler=function(){function NavigationHandler(body,canvas){var _this=this;_classCallCheck(this,NavigationHandler),this.body=body,this.canvas=canvas,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){_this.activated=!0,_this.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){_this.activated=!1,_this.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==_this.keycharm&&_this.keycharm.destroy()}),this.options={}}return _createClass(NavigationHandler,[{key:"setOptions",value:function(options){void 0!==options&&(this.options=options,this.create())}},{key:"create",value:function(){this.options.navigationButtons===!0?this.iconsCreated===!1&&this.loadNavigationElements():this.iconsCreated===!0&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var i=0;i<this.navigationHammers.length;i++)this.navigationHammers[i].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var _this2=this;this.cleanNavigation(),this.navigationDOM={};var navigationDivs=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],navigationDivActions=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var i=0;i<navigationDivs.length;i++){this.navigationDOM[navigationDivs[i]]=document.createElement("div"),this.navigationDOM[navigationDivs[i]].className="vis-button vis-"+navigationDivs[i],this.navigationDOM.wrapper.appendChild(this.navigationDOM[navigationDivs[i]]);var hammer=new Hammer(this.navigationDOM[navigationDivs[i]]);"_fit"===navigationDivActions[i]?hammerUtil.onTouch(hammer,this._fit.bind(this)):hammerUtil.onTouch(hammer,this.bindToRedraw.bind(this,navigationDivActions[i])),this.navigationHammers.push(hammer)}var hammerFrame=new Hammer(this.canvas.frame);hammerUtil.onRelease(hammerFrame,function(){_this2._stopMovement()}),this.navigationHammers.push(hammerFrame),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(action){void 0===this.boundFunctions[action]&&(this.boundFunctions[action]=this[action].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[action]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(action){void 0!==this.boundFunctions[action]&&(this.body.emitter.off("initRedraw",this.boundFunctions[action]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[action])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var boundAction in this.boundFunctions)this.boundFunctions.hasOwnProperty(boundAction)&&(this.body.emitter.off("initRedraw",this.boundFunctions[boundAction]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){this.body.view.scale*=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale})}},{key:"_zoomOut",value:function(){this.body.view.scale/=1+this.options.keyboard.speed.zoom,this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale})}},{key:"configureKeyboardBindings",value:function(){var _this3=this;void 0!==this.keycharm&&this.keycharm.destroy(),this.options.keyboard.enabled===!0&&(this.options.keyboard.bindToWindow===!0?this.keycharm=keycharm({container:window,preventDefault:!0}):this.keycharm=keycharm({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),this.activated===!0&&(this.keycharm.bind("up",function(){_this3.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){_this3.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){_this3.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){_this3.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){_this3.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){_this3.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){_this3.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){_this3.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){_this3.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){_this3.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){_this3.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){_this3.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){_this3.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){_this3.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){_this3.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){_this3.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){_this3.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){_this3.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){_this3.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){_this3.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){_this3.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){_this3.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){_this3.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){_this3.unbindFromRedraw("_zoomOut")},"keyup")))}}]),NavigationHandler}();exports.default=NavigationHandler},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Popup=function(){function Popup(container){_classCallCheck(this,Popup),this.container=container,this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-network-tooltip",this.container.appendChild(this.frame)}return _createClass(Popup,[{key:"setPosition",value:function(x,y){this.x=parseInt(x),this.y=parseInt(y)}},{key:"setText",value:function(content){content instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(content)):this.frame.innerHTML=content}},{key:"show",value:function(doShow){if(void 0===doShow&&(doShow=!0),doShow===!0){var height=this.frame.clientHeight,width=this.frame.clientWidth,maxHeight=this.frame.parentNode.clientHeight,maxWidth=this.frame.parentNode.clientWidth,top=this.y-height;top+height+this.padding>maxHeight&&(top=maxHeight-height-this.padding),top<this.padding&&(top=this.padding);var left=this.x;left+width+this.padding>maxWidth&&(left=maxWidth-width-this.padding),left<this.padding&&(left=this.padding),this.frame.style.left=left+"px",this.frame.style.top=top+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.visibility="hidden"}}]),Popup}();exports.default=Popup},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Node=__webpack_require__(65),_Node2=_interopRequireDefault(_Node),_Edge=__webpack_require__(85),_Edge2=_interopRequireDefault(_Edge),util=__webpack_require__(1),SelectionHandler=function(){function SelectionHandler(body,canvas){var _this=this;_classCallCheck(this,SelectionHandler),this.body=body,this.canvas=canvas,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},util.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){_this.updateSelection()})}return _createClass(SelectionHandler,[{key:"setOptions",value:function(options){if(void 0!==options){var fields=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];util.selectiveDeepExtend(fields,this.options,options)}}},{key:"selectOnPoint",value:function(pointer){var selected=!1;if(this.options.selectable===!0){var obj=this.getNodeAt(pointer)||this.getEdgeAt(pointer);this.unselectAll(),void 0!==obj&&(selected=this.selectObject(obj)),this.body.emitter.emit("_requestRedraw")}return selected}},{key:"selectAdditionalOnPoint",value:function(pointer){var selectionChanged=!1;if(this.options.selectable===!0){var obj=this.getNodeAt(pointer)||this.getEdgeAt(pointer);void 0!==obj&&(selectionChanged=!0,obj.isSelected()===!0?this.deselectObject(obj):this.selectObject(obj),this.body.emitter.emit("_requestRedraw"))}return selectionChanged}},{key:"_generateClickEvent",value:function(eventType,event,pointer,oldSelection){var emptySelection=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],properties=void 0;properties=emptySelection===!0?{nodes:[],edges:[]}:this.getSelection(),properties.pointer={DOM:{x:pointer.x,y:pointer.y},canvas:this.canvas.DOMtoCanvas(pointer)},properties.event=event,void 0!==oldSelection&&(properties.previousSelection=oldSelection),this.body.emitter.emit(eventType,properties)}},{key:"selectObject",value:function(obj){var highlightEdges=arguments.length<=1||void 0===arguments[1]?this.options.selectConnectedEdges:arguments[1];return void 0!==obj&&(obj instanceof _Node2.default&&highlightEdges===!0&&this._selectConnectedEdges(obj),obj.select(),this._addToSelection(obj),!0)}},{key:"deselectObject",value:function(obj){obj.isSelected()===!0&&(obj.selected=!1,this._removeFromSelection(obj))}},{key:"_getAllNodesOverlappingWith",value:function(object){for(var overlappingNodes=[],nodes=this.body.nodes,i=0;i<this.body.nodeIndices.length;i++){var nodeId=this.body.nodeIndices[i];nodes[nodeId].isOverlappingWith(object)&&overlappingNodes.push(nodeId)}return overlappingNodes}},{key:"_pointerToPositionObject",value:function(pointer){var canvasPos=this.canvas.DOMtoCanvas(pointer);return{left:canvasPos.x-1,top:canvasPos.y+1,right:canvasPos.x+1,bottom:canvasPos.y-1}}},{key:"getNodeAt",value:function(pointer){var returnNode=arguments.length<=1||void 0===arguments[1]||arguments[1],positionObject=this._pointerToPositionObject(pointer),overlappingNodes=this._getAllNodesOverlappingWith(positionObject);return overlappingNodes.length>0?returnNode===!0?this.body.nodes[overlappingNodes[overlappingNodes.length-1]]:overlappingNodes[overlappingNodes.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(object,overlappingEdges){for(var edges=this.body.edges,i=0;i<this.body.edgeIndices.length;i++){var edgeId=this.body.edgeIndices[i];edges[edgeId].isOverlappingWith(object)&&overlappingEdges.push(edgeId)}}},{key:"_getAllEdgesOverlappingWith",value:function(object){var overlappingEdges=[];return this._getEdgesOverlappingWith(object,overlappingEdges),overlappingEdges}},{key:"getEdgeAt",value:function(pointer){var returnEdge=arguments.length<=1||void 0===arguments[1]||arguments[1],positionObject=this._pointerToPositionObject(pointer),overlappingEdges=this._getAllEdgesOverlappingWith(positionObject);return overlappingEdges.length>0?returnEdge===!0?this.body.edges[overlappingEdges[overlappingEdges.length-1]]:overlappingEdges[overlappingEdges.length-1]:void 0}},{key:"_addToSelection",value:function(obj){obj instanceof _Node2.default?this.selectionObj.nodes[obj.id]=obj:this.selectionObj.edges[obj.id]=obj}},{key:"_addToHover",value:function(obj){obj instanceof _Node2.default?this.hoverObj.nodes[obj.id]=obj:this.hoverObj.edges[obj.id]=obj}},{key:"_removeFromSelection",value:function(obj){obj instanceof _Node2.default?(delete this.selectionObj.nodes[obj.id],this._unselectConnectedEdges(obj)):delete this.selectionObj.edges[obj.id]}},{key:"unselectAll",value:function(){for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&this.selectionObj.nodes[nodeId].unselect();for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&this.selectionObj.edges[edgeId].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var count=0;for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&(count+=1);return count}},{key:"_getSelectedNode",value:function(){for(var nodeId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(nodeId))return this.selectionObj.nodes[nodeId]}},{key:"_getSelectedEdge",value:function(){for(var edgeId in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(edgeId))return this.selectionObj.edges[edgeId]}},{key:"_getSelectedEdgeCount",value:function(){var count=0;for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&(count+=1);return count}},{key:"_getSelectedObjectCount",value:function(){var count=0;for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&(count+=1);for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&(count+=1);return count}},{key:"_selectionIsEmpty",value:function(){for(var nodeId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(nodeId))return!1;for(var edgeId in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(edgeId))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var nodeId in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(nodeId)&&this.selectionObj.nodes[nodeId].clusterSize>1)return!0;return!1}},{key:"_selectConnectedEdges",value:function(node){for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.select(),this._addToSelection(edge)}}},{key:"_hoverConnectedEdges",value:function(node){for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.hover=!0,this._addToHover(edge)}}},{key:"_unselectConnectedEdges",value:function(node){for(var i=0;i<node.edges.length;i++){var edge=node.edges[i];edge.unselect(),this._removeFromSelection(edge)}}},{key:"blurObject",value:function(object){object.hover===!0&&(object.hover=!1,object instanceof _Node2.default?this.body.emitter.emit("blurNode",{node:object.id}):this.body.emitter.emit("blurEdge",{edge:object.id}))}},{key:"hoverObject",value:function(object){var hoverChanged=!1;for(var nodeId in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(nodeId)&&(void 0===object||object instanceof _Node2.default&&object.id!=nodeId||object instanceof _Edge2.default)&&(this.blurObject(this.hoverObj.nodes[nodeId]),delete this.hoverObj.nodes[nodeId],hoverChanged=!0);for(var edgeId in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(edgeId)&&(hoverChanged===!0?(this.hoverObj.edges[edgeId].hover=!1,delete this.hoverObj.edges[edgeId]):void 0===object&&(this.blurObject(this.hoverObj.edges[edgeId]),delete this.hoverObj.edges[edgeId],hoverChanged=!0));void 0!==object&&(object.hover===!1&&(object.hover=!0,this._addToHover(object),hoverChanged=!0,object instanceof _Node2.default?this.body.emitter.emit("hoverNode",{node:object.id}):this.body.emitter.emit("hoverEdge",{edge:object.id})),object instanceof _Node2.default&&this.options.hoverConnectedEdges===!0&&this._hoverConnectedEdges(object)),hoverChanged===!0&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){var nodeIds=this.getSelectedNodes(),edgeIds=this.getSelectedEdges();return{nodes:nodeIds,edges:edgeIds}}},{key:"getSelectedNodes",value:function(){var idArray=[];if(this.options.selectable===!0)for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&idArray.push(this.selectionObj.nodes[nodeId].id);return idArray}},{key:"getSelectedEdges",value:function(){var idArray=[];if(this.options.selectable===!0)for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&idArray.push(this.selectionObj.edges[edgeId].id);return idArray}},{key:"setSelection",value:function(selection){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=void 0,id=void 0;if(!selection||!selection.nodes&&!selection.edges)throw"Selection must be an object with nodes and/or edges properties";if((options.unselectAll||void 0===options.unselectAll)&&this.unselectAll(),selection.nodes)for(i=0;i<selection.nodes.length;i++){id=selection.nodes[i];var node=this.body.nodes[id];if(!node)throw new RangeError('Node with id "'+id+'" not found');this.selectObject(node,options.highlightEdges)}if(selection.edges)for(i=0;i<selection.edges.length;i++){id=selection.edges[i];var edge=this.body.edges[id];if(!edge)throw new RangeError('Edge with id "'+id+'" not found');this.selectObject(edge)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(selection){var highlightEdges=arguments.length<=1||void 0===arguments[1]||arguments[1];if(!selection||void 0===selection.length)throw"Selection must be an array with ids";this.setSelection({nodes:selection},{highlightEdges:highlightEdges})}},{key:"selectEdges",value:function(selection){if(!selection||void 0===selection.length)throw"Selection must be an array with ids";this.setSelection({edges:selection})}},{key:"updateSelection",value:function(){for(var nodeId in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(nodeId)&&(this.body.nodes.hasOwnProperty(nodeId)||delete this.selectionObj.nodes[nodeId]);for(var edgeId in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(edgeId)&&(this.body.edges.hasOwnProperty(edgeId)||delete this.selectionObj.edges[edgeId])}}]),SelectionHandler}();exports.default=SelectionHandler},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_NetworkUtil=__webpack_require__(103),_NetworkUtil2=_interopRequireDefault(_NetworkUtil),util=__webpack_require__(1),LayoutEngine=function(){function LayoutEngine(body){_classCallCheck(this,LayoutEngine),this.body=body,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},util.extend(this.options,this.defaultOptions),this.bindEventListeners()}return _createClass(LayoutEngine,[{key:"bindEventListeners",value:function(){var _this=this;this.body.emitter.on("_dataChanged",function(){_this.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){_this.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){_this.setupHierarchicalLayout()})}},{key:"setOptions",value:function(options,allOptions){if(void 0!==options){var prevHierarchicalState=this.options.hierarchical.enabled;if(util.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,options),util.mergeOptions(this.options,options,"hierarchical"),void 0!==options.randomSeed&&(this.initialRandomSeed=options.randomSeed),this.options.hierarchical.enabled===!0)return prevHierarchicalState===!0&&this.body.emitter.emit("refresh",!0),"RL"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.options.hierarchical.levelSeparation>0&&(this.options.hierarchical.levelSeparation*=-1):this.options.hierarchical.levelSeparation<0&&(this.options.hierarchical.levelSeparation*=-1),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(allOptions);if(prevHierarchicalState===!0)return this.body.emitter.emit("refresh"),util.deepExtend(allOptions,this.optionsBackup)}return allOptions}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(allOptions){if(this.options.hierarchical.enabled===!0){void 0===allOptions.physics||allOptions.physics===!0?(allOptions.physics={enabled:void 0===this.optionsBackup.physics.enabled||this.optionsBackup.physics.enabled,solver:"hierarchicalRepulsion"},this.optionsBackup.physics.enabled=void 0===this.optionsBackup.physics.enabled||this.optionsBackup.physics.enabled,this.optionsBackup.physics.solver=this.optionsBackup.physics.solver||"barnesHut"):"object"===_typeof(allOptions.physics)?(this.optionsBackup.physics.enabled=void 0===allOptions.physics.enabled||allOptions.physics.enabled,this.optionsBackup.physics.solver=allOptions.physics.solver||"barnesHut",allOptions.physics.solver="hierarchicalRepulsion"):allOptions.physics!==!1&&(this.optionsBackup.physics.solver="barnesHut",allOptions.physics={solver:"hierarchicalRepulsion"});var type="horizontal";"RL"!==this.options.hierarchical.direction&&"LR"!==this.options.hierarchical.direction||(type="vertical"),void 0===allOptions.edges?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},allOptions.edges={smooth:!1}):void 0===allOptions.edges.smooth?(this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},allOptions.edges.smooth=!1):"boolean"==typeof allOptions.edges.smooth?(this.optionsBackup.edges={smooth:allOptions.edges.smooth},allOptions.edges.smooth={enabled:allOptions.edges.smooth,type:type}):(void 0!==allOptions.edges.smooth.type&&"dynamic"!==allOptions.edges.smooth.type&&(type=allOptions.edges.smooth.type),this.optionsBackup.edges={smooth:void 0===allOptions.edges.smooth.enabled||allOptions.edges.smooth.enabled,type:void 0===allOptions.edges.smooth.type?"dynamic":allOptions.edges.smooth.type,roundness:void 0===allOptions.edges.smooth.roundness?.5:allOptions.edges.smooth.roundness,forceDirection:void 0!==allOptions.edges.smooth.forceDirection&&allOptions.edges.smooth.forceDirection},allOptions.edges.smooth={enabled:void 0===allOptions.edges.smooth.enabled||allOptions.edges.smooth.enabled,type:type,roundness:void 0===allOptions.edges.smooth.roundness?.5:allOptions.edges.smooth.roundness,forceDirection:void 0!==allOptions.edges.smooth.forceDirection&&allOptions.edges.smooth.forceDirection}),this.body.emitter.emit("_forceDisableDynamicCurves",type)}return allOptions}},{key:"seededRandom",value:function(){var x=1e4*Math.sin(this.randomSeed++);
return x-Math.floor(x)}},{key:"positionInitially",value:function(nodesArray){if(this.options.hierarchical.enabled!==!0){this.randomSeed=this.initialRandomSeed;for(var i=0;i<nodesArray.length;i++){var node=nodesArray[i],radius=1*nodesArray.length+10,angle=2*Math.PI*this.seededRandom();void 0===node.x&&(node.x=radius*Math.cos(angle)),void 0===node.y&&(node.y=radius*Math.sin(angle))}}}},{key:"layoutNetwork",value:function(){if(this.options.hierarchical.enabled!==!0&&this.options.improvedLayout===!0){for(var positionDefined=0,i=0;i<this.body.nodeIndices.length;i++){var node=this.body.nodes[this.body.nodeIndices[i]];node.predefinedPosition===!0&&(positionDefined+=1)}if(positionDefined<.5*this.body.nodeIndices.length){var MAX_LEVELS=10,level=0,clusterThreshold=100;if(this.body.nodeIndices.length>clusterThreshold){for(var startLength=this.body.nodeIndices.length;this.body.nodeIndices.length>clusterThreshold;){level+=1;var before=this.body.nodeIndices.length;level%3===0?this.body.modules.clustering.clusterBridges():this.body.modules.clustering.clusterOutliers();var after=this.body.nodeIndices.length;if(before==after&&level%3!==0||level>MAX_LEVELS)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*startLength)})}this.body.modules.kamadaKawai.solve(this.body.nodeIndices,this.body.edgeIndices,!0),this._shiftToCenter();for(var offset=70,_i=0;_i<this.body.nodeIndices.length;_i++)this.body.nodes[this.body.nodeIndices[_i]].x+=(.5-this.seededRandom())*offset,this.body.nodes[this.body.nodeIndices[_i]].y+=(.5-this.seededRandom())*offset;this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var range=_NetworkUtil2.default.getRangeCore(this.body.nodes,this.body.nodeIndices),center=_NetworkUtil2.default.findCenter(range),i=0;i<this.body.nodeIndices.length;i++)this.body.nodes[this.body.nodeIndices[i]].x-=center.x,this.body.nodes[this.body.nodeIndices[i]].y-=center.y}},{key:"_declusterAll",value:function(){for(var clustersPresent=!0;clustersPresent===!0;){clustersPresent=!1;for(var i=0;i<this.body.nodeIndices.length;i++)this.body.nodes[this.body.nodeIndices[i]].isCluster===!0&&(clustersPresent=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[i],{},!1));clustersPresent===!0&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(this.options.hierarchical.enabled===!0&&this.body.nodeIndices.length>0){var node=void 0,nodeId=void 0,definedLevel=!1,definedPositions=!0,undefinedLevel=!1;this.hierarchicalLevels={},this.lastNodeOnLevel={},this.hierarchicalChildrenReference={},this.hierarchicalParentReference={},this.hierarchicalTrees={},this.treeIndex=-1,this.distributionOrdering={},this.distributionIndex={},this.distributionOrderingPresence={};for(nodeId in this.body.nodes)this.body.nodes.hasOwnProperty(nodeId)&&(node=this.body.nodes[nodeId],void 0===node.options.x&&void 0===node.options.y&&(definedPositions=!1),void 0!==node.options.level?(definedLevel=!0,this.hierarchicalLevels[nodeId]=node.options.level):undefinedLevel=!0);if(undefinedLevel===!0&&definedLevel===!0)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");undefinedLevel===!0&&("hubsize"===this.options.hierarchical.sortMethod?this._determineLevelsByHubsize():"directed"===this.options.hierarchical.sortMethod?this._determineLevelsDirected():"custom"===this.options.hierarchical.sortMethod&&this._determineLevelsCustomCallback());for(var _nodeId in this.body.nodes)this.body.nodes.hasOwnProperty(_nodeId)&&void 0===this.hierarchicalLevels[_nodeId]&&(this.hierarchicalLevels[_nodeId]=0);var distribution=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(distribution),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var _this2=this,stillShifting=!1,branches={},shiftTrees=function(){for(var treeSizes=getTreeSizes(),i=0;i<treeSizes.length-1;i++){var diff=treeSizes[i].max-treeSizes[i+1].min;shiftTree(i+1,diff+_this2.options.hierarchical.treeSpacing)}},shiftTree=function(index,offset){for(var nodeId in _this2.hierarchicalTrees)if(_this2.hierarchicalTrees.hasOwnProperty(nodeId)&&_this2.hierarchicalTrees[nodeId]===index){var node=_this2.body.nodes[nodeId],pos=_this2._getPositionForHierarchy(node);_this2._setPositionForHierarchy(node,pos+offset,void 0,!0)}},getTreeSize=function(index){var min=1e9,max=-1e9;for(var nodeId in _this2.hierarchicalTrees)if(_this2.hierarchicalTrees.hasOwnProperty(nodeId)&&_this2.hierarchicalTrees[nodeId]===index){var pos=_this2._getPositionForHierarchy(_this2.body.nodes[nodeId]);min=Math.min(pos,min),max=Math.max(pos,max)}return{min:min,max:max}},getTreeSizes=function(){for(var treeWidths=[],i=0;i<=_this2.treeIndex;i++)treeWidths.push(getTreeSize(i));return treeWidths},getBranchNodes=function getBranchNodes(source,map){if(map[source.id]=!0,_this2.hierarchicalChildrenReference[source.id]){var children=_this2.hierarchicalChildrenReference[source.id];if(children.length>0)for(var i=0;i<children.length;i++)getBranchNodes(_this2.body.nodes[children[i]],map)}},getBranchBoundary=function(branchMap){var maxLevel=arguments.length<=1||void 0===arguments[1]?1e9:arguments[1],minSpace=1e9,maxSpace=1e9,min=1e9,max=-1e9;for(var branchNode in branchMap)if(branchMap.hasOwnProperty(branchNode)){var node=_this2.body.nodes[branchNode],level=_this2.hierarchicalLevels[node.id],position=_this2._getPositionForHierarchy(node),_getSpaceAroundNode2=_this2._getSpaceAroundNode(node,branchMap),_getSpaceAroundNode3=_slicedToArray(_getSpaceAroundNode2,2),minSpaceNode=_getSpaceAroundNode3[0],maxSpaceNode=_getSpaceAroundNode3[1];minSpace=Math.min(minSpaceNode,minSpace),maxSpace=Math.min(maxSpaceNode,maxSpace),level<=maxLevel&&(min=Math.min(position,min),max=Math.max(position,max))}return[min,max,minSpace,maxSpace]},getMaxLevel=function getMaxLevel(nodeId){var level=_this2.hierarchicalLevels[nodeId];if(_this2.hierarchicalChildrenReference[nodeId]){var children=_this2.hierarchicalChildrenReference[nodeId];if(children.length>0)for(var i=0;i<children.length;i++)level=Math.max(level,getMaxLevel(children[i]))}return level},getCollisionLevel=function(node1,node2){var maxLevel1=getMaxLevel(node1.id),maxLevel2=getMaxLevel(node2.id);return Math.min(maxLevel1,maxLevel2)},hasSameParent=function(node1,node2){var parents1=_this2.hierarchicalParentReference[node1.id],parents2=_this2.hierarchicalParentReference[node2.id];if(void 0===parents1||void 0===parents2)return!1;for(var i=0;i<parents1.length;i++)for(var j=0;j<parents2.length;j++)if(parents1[i]==parents2[j])return!0;return!1},shiftElementsCloser=function(callback,levels,centerParents){for(var i=0;i<levels.length;i++){var level=levels[i],levelNodes=_this2.distributionOrdering[level];if(levelNodes.length>1)for(var j=0;j<levelNodes.length-1;j++)hasSameParent(levelNodes[j],levelNodes[j+1])===!0&&_this2.hierarchicalTrees[levelNodes[j].id]===_this2.hierarchicalTrees[levelNodes[j+1].id]&&callback(levelNodes[j],levelNodes[j+1],centerParents)}},branchShiftCallback=function(node1,node2){var centerParent=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],pos1=_this2._getPositionForHierarchy(node1),pos2=_this2._getPositionForHierarchy(node2),diffAbs=Math.abs(pos2-pos1);if(diffAbs>_this2.options.hierarchical.nodeSpacing){var branchNodes1={};branchNodes1[node1.id]=!0;var branchNodes2={};branchNodes2[node2.id]=!0,getBranchNodes(node1,branchNodes1),getBranchNodes(node2,branchNodes2);var maxLevel=getCollisionLevel(node1,node2),_getBranchBoundary=getBranchBoundary(branchNodes1,maxLevel),_getBranchBoundary2=_slicedToArray(_getBranchBoundary,4),max1=(_getBranchBoundary2[0],_getBranchBoundary2[1]),_getBranchBoundary3=(_getBranchBoundary2[2],_getBranchBoundary2[3],getBranchBoundary(branchNodes2,maxLevel)),_getBranchBoundary4=_slicedToArray(_getBranchBoundary3,4),min2=_getBranchBoundary4[0],minSpace2=(_getBranchBoundary4[1],_getBranchBoundary4[2]),diffBranch=(_getBranchBoundary4[3],Math.abs(max1-min2));if(diffBranch>_this2.options.hierarchical.nodeSpacing){var offset=max1-min2+_this2.options.hierarchical.nodeSpacing;offset<-minSpace2+_this2.options.hierarchical.nodeSpacing&&(offset=-minSpace2+_this2.options.hierarchical.nodeSpacing),offset<0&&(_this2._shiftBlock(node2.id,offset),stillShifting=!0,centerParent===!0&&_this2._centerParent(node2))}}},minimizeEdgeLength=function(iterations,node){for(var nodeId=node.id,allEdges=node.edges,nodeLevel=_this2.hierarchicalLevels[node.id],C2=_this2.options.hierarchical.levelSeparation*_this2.options.hierarchical.levelSeparation,referenceNodes={},aboveEdges=[],i=0;i<allEdges.length;i++){var edge=allEdges[i];if(edge.toId!=edge.fromId){var otherNode=edge.toId==nodeId?edge.from:edge.to;referenceNodes[allEdges[i].id]=otherNode,_this2.hierarchicalLevels[otherNode.id]<nodeLevel&&aboveEdges.push(edge)}}var getFx=function(point,edges){for(var sum=0,_i2=0;_i2<edges.length;_i2++)if(void 0!==referenceNodes[edges[_i2].id]){var a=_this2._getPositionForHierarchy(referenceNodes[edges[_i2].id])-point;sum+=a/Math.sqrt(a*a+C2)}return sum},getDFx=function(point,edges){for(var sum=0,_i3=0;_i3<edges.length;_i3++)if(void 0!==referenceNodes[edges[_i3].id]){var a=_this2._getPositionForHierarchy(referenceNodes[edges[_i3].id])-point;sum-=C2*Math.pow(a*a+C2,-1.5)}return sum},getGuess=function(iterations,edges){for(var guess=_this2._getPositionForHierarchy(node),guessMap={},_i4=0;_i4<iterations;_i4++){var fx=getFx(guess,edges),dfx=getDFx(guess,edges),limit=40,ratio=Math.max(-limit,Math.min(limit,Math.round(fx/dfx)));if(guess-=ratio,void 0!==guessMap[guess])break;guessMap[guess]=_i4}return guess},moveBranch=function(guess){var nodePosition=_this2._getPositionForHierarchy(node);if(void 0===branches[node.id]){var branchNodes={};branchNodes[node.id]=!0,getBranchNodes(node,branchNodes),branches[node.id]=branchNodes}var _getBranchBoundary5=getBranchBoundary(branches[node.id]),_getBranchBoundary6=_slicedToArray(_getBranchBoundary5,4),minSpaceBranch=(_getBranchBoundary6[0],_getBranchBoundary6[1],_getBranchBoundary6[2]),maxSpaceBranch=_getBranchBoundary6[3],diff=guess-nodePosition,branchOffset=0;diff>0?branchOffset=Math.min(diff,maxSpaceBranch-_this2.options.hierarchical.nodeSpacing):diff<0&&(branchOffset=-Math.min(-diff,minSpaceBranch-_this2.options.hierarchical.nodeSpacing)),0!=branchOffset&&(_this2._shiftBlock(node.id,branchOffset),stillShifting=!0)},moveNode=function(guess){var nodePosition=_this2._getPositionForHierarchy(node),_getSpaceAroundNode4=_this2._getSpaceAroundNode(node),_getSpaceAroundNode5=_slicedToArray(_getSpaceAroundNode4,2),minSpace=_getSpaceAroundNode5[0],maxSpace=_getSpaceAroundNode5[1],diff=guess-nodePosition,newPosition=nodePosition;diff>0?newPosition=Math.min(nodePosition+(maxSpace-_this2.options.hierarchical.nodeSpacing),guess):diff<0&&(newPosition=Math.max(nodePosition-(minSpace-_this2.options.hierarchical.nodeSpacing),guess)),newPosition!==nodePosition&&(_this2._setPositionForHierarchy(node,newPosition,void 0,!0),stillShifting=!0)},guess=getGuess(iterations,aboveEdges);moveBranch(guess),guess=getGuess(iterations,allEdges),moveNode(guess)},minimizeEdgeLengthBottomUp=function(iterations){var levels=Object.keys(_this2.distributionOrdering);levels=levels.reverse();for(var i=0;i<iterations;i++){stillShifting=!1;for(var j=0;j<levels.length;j++)for(var level=levels[j],levelNodes=_this2.distributionOrdering[level],k=0;k<levelNodes.length;k++)minimizeEdgeLength(1e3,levelNodes[k]);if(stillShifting!==!0)break}},shiftBranchesCloserBottomUp=function(iterations){var levels=Object.keys(_this2.distributionOrdering);levels=levels.reverse();for(var i=0;i<iterations&&(stillShifting=!1,shiftElementsCloser(branchShiftCallback,levels,!0),stillShifting===!0);i++);},centerAllParents=function(){for(var nodeId in _this2.body.nodes)_this2.body.nodes.hasOwnProperty(nodeId)&&_this2._centerParent(_this2.body.nodes[nodeId])},centerAllParentsBottomUp=function(){var levels=Object.keys(_this2.distributionOrdering);levels=levels.reverse();for(var i=0;i<levels.length;i++)for(var level=levels[i],levelNodes=_this2.distributionOrdering[level],j=0;j<levelNodes.length;j++)_this2._centerParent(levelNodes[j])};this.options.hierarchical.blockShifting===!0&&(shiftBranchesCloserBottomUp(5),centerAllParents()),this.options.hierarchical.edgeMinimization===!0&&minimizeEdgeLengthBottomUp(20),this.options.hierarchical.parentCentralization===!0&&centerAllParentsBottomUp(),shiftTrees()}},{key:"_getSpaceAroundNode",value:function(node,map){var useMap=!0;void 0===map&&(useMap=!1);var level=this.hierarchicalLevels[node.id];if(void 0!==level){var index=this.distributionIndex[node.id],position=this._getPositionForHierarchy(node),minSpace=1e9,maxSpace=1e9;if(0!==index){var prevNode=this.distributionOrdering[level][index-1];if(useMap===!0&&void 0===map[prevNode.id]||useMap===!1){var prevPos=this._getPositionForHierarchy(prevNode);minSpace=position-prevPos}}if(index!=this.distributionOrdering[level].length-1){var nextNode=this.distributionOrdering[level][index+1];if(useMap===!0&&void 0===map[nextNode.id]||useMap===!1){var nextPos=this._getPositionForHierarchy(nextNode);maxSpace=Math.min(maxSpace,nextPos-position)}}return[minSpace,maxSpace]}return[0,0]}},{key:"_centerParent",value:function(node){if(this.hierarchicalParentReference[node.id])for(var parents=this.hierarchicalParentReference[node.id],i=0;i<parents.length;i++){var parentId=parents[i],parentNode=this.body.nodes[parentId];if(this.hierarchicalChildrenReference[parentId]){var minPos=1e9,maxPos=-1e9,children=this.hierarchicalChildrenReference[parentId];if(children.length>0)for(var _i5=0;_i5<children.length;_i5++){var childNode=this.body.nodes[children[_i5]];minPos=Math.min(minPos,this._getPositionForHierarchy(childNode)),maxPos=Math.max(maxPos,this._getPositionForHierarchy(childNode))}var position=this._getPositionForHierarchy(parentNode),_getSpaceAroundNode6=this._getSpaceAroundNode(parentNode),_getSpaceAroundNode7=_slicedToArray(_getSpaceAroundNode6,2),minSpace=_getSpaceAroundNode7[0],maxSpace=_getSpaceAroundNode7[1],newPosition=.5*(minPos+maxPos),diff=position-newPosition;(diff<0&&Math.abs(diff)<maxSpace-this.options.hierarchical.nodeSpacing||diff>0&&Math.abs(diff)<minSpace-this.options.hierarchical.nodeSpacing)&&this._setPositionForHierarchy(parentNode,newPosition,void 0,!0)}}}},{key:"_placeNodesByHierarchy",value:function(distribution){this.positionedNodes={};for(var level in distribution)if(distribution.hasOwnProperty(level)){var nodeArray=Object.keys(distribution[level]);nodeArray=this._indexArrayToNodes(nodeArray),this._sortNodeArray(nodeArray);for(var handledNodeCount=0,i=0;i<nodeArray.length;i++){var node=nodeArray[i];if(void 0===this.positionedNodes[node.id]){var pos=this.options.hierarchical.nodeSpacing*handledNodeCount;handledNodeCount>0&&(pos=this._getPositionForHierarchy(nodeArray[i-1])+this.options.hierarchical.nodeSpacing),this._setPositionForHierarchy(node,pos,level),this._validataPositionAndContinue(node,level,pos),handledNodeCount++}}}}},{key:"_placeBranchNodes",value:function(parentId,parentLevel){if(void 0!==this.hierarchicalChildrenReference[parentId]){for(var childNodes=[],i=0;i<this.hierarchicalChildrenReference[parentId].length;i++)childNodes.push(this.body.nodes[this.hierarchicalChildrenReference[parentId][i]]);this._sortNodeArray(childNodes);for(var _i6=0;_i6<childNodes.length;_i6++){var childNode=childNodes[_i6],childNodeLevel=this.hierarchicalLevels[childNode.id];if(!(childNodeLevel>parentLevel&&void 0===this.positionedNodes[childNode.id]))return;var pos=void 0;pos=0===_i6?this._getPositionForHierarchy(this.body.nodes[parentId]):this._getPositionForHierarchy(childNodes[_i6-1])+this.options.hierarchical.nodeSpacing,this._setPositionForHierarchy(childNode,pos,childNodeLevel),this._validataPositionAndContinue(childNode,childNodeLevel,pos)}for(var minPos=1e9,maxPos=-1e9,_i7=0;_i7<childNodes.length;_i7++){var childNodeId=childNodes[_i7].id;minPos=Math.min(minPos,this._getPositionForHierarchy(this.body.nodes[childNodeId])),maxPos=Math.max(maxPos,this._getPositionForHierarchy(this.body.nodes[childNodeId]))}this._setPositionForHierarchy(this.body.nodes[parentId],.5*(minPos+maxPos),parentLevel)}}},{key:"_validataPositionAndContinue",value:function(node,level,pos){if(void 0!==this.lastNodeOnLevel[level]){var previousPos=this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[level]]);if(pos-previousPos<this.options.hierarchical.nodeSpacing){var diff=previousPos+this.options.hierarchical.nodeSpacing-pos,sharedParent=this._findCommonParent(this.lastNodeOnLevel[level],node.id);this._shiftBlock(sharedParent.withChild,diff)}}this.lastNodeOnLevel[level]=node.id,this.positionedNodes[node.id]=!0,this._placeBranchNodes(node.id,level)}},{key:"_indexArrayToNodes",value:function(idArray){for(var array=[],i=0;i<idArray.length;i++)array.push(this.body.nodes[idArray[i]]);return array}},{key:"_getDistribution",value:function(){var distribution={},nodeId=void 0,node=void 0;for(nodeId in this.body.nodes)if(this.body.nodes.hasOwnProperty(nodeId)){node=this.body.nodes[nodeId];var level=void 0===this.hierarchicalLevels[nodeId]?0:this.hierarchicalLevels[nodeId];"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?(node.y=this.options.hierarchical.levelSeparation*level,node.options.fixed.y=!0):(node.x=this.options.hierarchical.levelSeparation*level,node.options.fixed.x=!0),void 0===distribution[level]&&(distribution[level]={}),distribution[level][nodeId]=node}return distribution}},{key:"_getHubSize",value:function(){var hubSize=0;for(var nodeId in this.body.nodes)if(this.body.nodes.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];void 0===this.hierarchicalLevels[nodeId]&&(hubSize=node.edges.length<hubSize?hubSize:node.edges.length)}return hubSize}},{key:"_determineLevelsByHubsize",value:function(){for(var _this3=this,hubSize=1,levelDownstream=function(nodeA,nodeB){void 0===_this3.hierarchicalLevels[nodeB.id]&&(void 0===_this3.hierarchicalLevels[nodeA.id]&&(_this3.hierarchicalLevels[nodeA.id]=0),_this3.hierarchicalLevels[nodeB.id]=_this3.hierarchicalLevels[nodeA.id]+1)};hubSize>0&&(hubSize=this._getHubSize(),0!==hubSize);)for(var nodeId in this.body.nodes)if(this.body.nodes.hasOwnProperty(nodeId)){var node=this.body.nodes[nodeId];node.edges.length===hubSize&&this._crawlNetwork(levelDownstream,nodeId)}}},{key:"_determineLevelsCustomCallback",value:function(){var _this4=this,minLevel=1e5,customCallback=function(nodeA,nodeB,edge){},levelByDirection=function(nodeA,nodeB,edge){var levelA=_this4.hierarchicalLevels[nodeA.id];void 0===levelA&&(_this4.hierarchicalLevels[nodeA.id]=minLevel);var diff=customCallback(_NetworkUtil2.default.cloneOptions(nodeA,"node"),_NetworkUtil2.default.cloneOptions(nodeB,"node"),_NetworkUtil2.default.cloneOptions(edge,"edge"));_this4.hierarchicalLevels[nodeB.id]=_this4.hierarchicalLevels[nodeA.id]+diff};this._crawlNetwork(levelByDirection),this._setMinLevelToZero()}},{key:"_determineLevelsDirected",value:function(){var _this5=this,minLevel=1e4,levelByDirection=function(nodeA,nodeB,edge){var levelA=_this5.hierarchicalLevels[nodeA.id];void 0===levelA&&(_this5.hierarchicalLevels[nodeA.id]=minLevel),edge.toId==nodeB.id?_this5.hierarchicalLevels[nodeB.id]=_this5.hierarchicalLevels[nodeA.id]+1:_this5.hierarchicalLevels[nodeB.id]=_this5.hierarchicalLevels[nodeA.id]-1};this._crawlNetwork(levelByDirection),this._setMinLevelToZero()}},{key:"_setMinLevelToZero",value:function(){var minLevel=1e9;for(var nodeId in this.body.nodes)this.body.nodes.hasOwnProperty(nodeId)&&void 0!==this.hierarchicalLevels[nodeId]&&(minLevel=Math.min(this.hierarchicalLevels[nodeId],minLevel));for(var _nodeId2 in this.body.nodes)this.body.nodes.hasOwnProperty(_nodeId2)&&void 0!==this.hierarchicalLevels[_nodeId2]&&(this.hierarchicalLevels[_nodeId2]-=minLevel)}},{key:"_generateMap",value:function(){var _this6=this,fillInRelations=function(parentNode,childNode){if(_this6.hierarchicalLevels[childNode.id]>_this6.hierarchicalLevels[parentNode.id]){var parentNodeId=parentNode.id,childNodeId=childNode.id;void 0===_this6.hierarchicalChildrenReference[parentNodeId]&&(_this6.hierarchicalChildrenReference[parentNodeId]=[]),_this6.hierarchicalChildrenReference[parentNodeId].push(childNodeId),void 0===_this6.hierarchicalParentReference[childNodeId]&&(_this6.hierarchicalParentReference[childNodeId]=[]),_this6.hierarchicalParentReference[childNodeId].push(parentNodeId)}};this._crawlNetwork(fillInRelations)}},{key:"_crawlNetwork",value:function(){var _this7=this,callback=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],startingNodeId=arguments[1],progress={},treeIndex=0,crawler=function crawler(node,tree){if(void 0===progress[node.id]){void 0===_this7.hierarchicalTrees[node.id]&&(_this7.hierarchicalTrees[node.id]=tree,_this7.treeIndex=Math.max(tree,_this7.treeIndex)),progress[node.id]=!0;for(var childNode=void 0,i=0;i<node.edges.length;i++)node.edges[i].connected===!0&&(childNode=node.edges[i].toId===node.id?node.edges[i].from:node.edges[i].to,node.id!==childNode.id&&(callback(node,childNode,node.edges[i]),crawler(childNode,tree)))}};if(void 0===startingNodeId)for(var i=0;i<this.body.nodeIndices.length;i++){var node=this.body.nodes[this.body.nodeIndices[i]];void 0===progress[node.id]&&(crawler(node,treeIndex),treeIndex+=1)}else{var _node=this.body.nodes[startingNodeId];if(void 0===_node)return void console.error("Node not found:",startingNodeId);crawler(_node)}}},{key:"_shiftBlock",value:function(parentId,diff){if("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?this.body.nodes[parentId].x+=diff:this.body.nodes[parentId].y+=diff,void 0!==this.hierarchicalChildrenReference[parentId])for(var i=0;i<this.hierarchicalChildrenReference[parentId].length;i++)this._shiftBlock(this.hierarchicalChildrenReference[parentId][i],diff)}},{key:"_findCommonParent",value:function(childA,childB){var _this8=this,parents={},iterateParents=function iterateParents(parents,child){if(void 0!==_this8.hierarchicalParentReference[child])for(var i=0;i<_this8.hierarchicalParentReference[child].length;i++){var parent=_this8.hierarchicalParentReference[child][i];parents[parent]=!0,iterateParents(parents,parent)}},findParent=function findParent(parents,child){if(void 0!==_this8.hierarchicalParentReference[child])for(var i=0;i<_this8.hierarchicalParentReference[child].length;i++){var parent=_this8.hierarchicalParentReference[child][i];if(void 0!==parents[parent])return{foundParent:parent,withChild:child};var branch=findParent(parents,parent);if(null!==branch.foundParent)return branch}return{foundParent:null,withChild:child}};return iterateParents(parents,childA),findParent(parents,childB)}},{key:"_setPositionForHierarchy",value:function(node,position,level){var doNotUpdate=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];doNotUpdate!==!0&&(void 0===this.distributionOrdering[level]&&(this.distributionOrdering[level]=[],this.distributionOrderingPresence[level]={}),void 0===this.distributionOrderingPresence[level][node.id]&&(this.distributionOrdering[level].push(node),this.distributionIndex[node.id]=this.distributionOrdering[level].length-1),this.distributionOrderingPresence[level][node.id]=!0),"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?node.x=position:node.y=position}},{key:"_getPositionForHierarchy",value:function(node){return"UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?node.x:node.y}},{key:"_sortNodeArray",value:function(nodeArray){nodeArray.length>1&&("UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?nodeArray.sort(function(a,b){return a.x-b.x}):nodeArray.sort(function(a,b){return a.y-b.y}))}}]),LayoutEngine}();exports.default=LayoutEngine},function(module,exports,__webpack_require__){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),util=__webpack_require__(1),Hammer=__webpack_require__(20),hammerUtil=__webpack_require__(28),ManipulationSystem=function(){function ManipulationSystem(body,canvas,selectionHandler){var _this=this;_classCallCheck(this,ManipulationSystem),this.body=body,this.canvas=canvas,this.selectionHandler=selectionHandler,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},util.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){_this._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}return _createClass(ManipulationSystem,[{key:"_restore",value:function(){this.inMode!==!1&&(this.options.initiallyActive===!0?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(options,allOptions,globalOptions){void 0!==allOptions&&(void 0!==allOptions.locale?this.options.locale=allOptions.locale:this.options.locale=globalOptions.locale,void 0!==allOptions.locales?this.options.locales=allOptions.locales:this.options.locales=globalOptions.locales),void 0!==options&&("boolean"==typeof options?this.options.enabled=options:(this.options.enabled=!0,util.deepExtend(this.options,options)),this.options.initiallyActive===!0&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){this.editMode===!0?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),this.guiEnabled===!0&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},this.guiEnabled===!0){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var selectedNodeCount=this.selectionHandler._getSelectedNodeCount(),selectedEdgeCount=this.selectionHandler._getSelectedEdgeCount(),selectedTotalCount=selectedNodeCount+selectedEdgeCount,locale=this.options.locales[this.options.locale],needSeperator=!1;this.options.addNode!==!1&&(this._createAddNodeButton(locale),needSeperator=!0),this.options.addEdge!==!1&&(needSeperator===!0?this._createSeperator(1):needSeperator=!0,this._createAddEdgeButton(locale)),1===selectedNodeCount&&"function"==typeof this.options.editNode?(needSeperator===!0?this._createSeperator(2):needSeperator=!0,this._createEditNodeButton(locale)):1===selectedEdgeCount&&0===selectedNodeCount&&this.options.editEdge!==!1&&(needSeperator===!0?this._createSeperator(3):needSeperator=!0,this._createEditEdgeButton(locale)),0!==selectedTotalCount&&(selectedNodeCount>0&&this.options.deleteNode!==!1?(needSeperator===!0&&this._createSeperator(4),this._createDeleteButton(locale)):0===selectedNodeCount&&this.options.deleteEdge!==!1&&(needSeperator===!0&&this._createSeperator(4),this._createDeleteButton(locale))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addNode",this.guiEnabled===!0){var locale=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(locale),this._createSeperator(),this._createDescription(locale.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var _this2=this;this.editMode!==!0&&this.enableEditMode(),this._clean();var node=this.selectionHandler._getSelectedNode();if(void 0!==node){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(node.isCluster!==!0){var data=util.deepExtend({},node.options,!1);if(data.x=node.x,data.y=node.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(data,function(finalizedData){null!==finalizedData&&void 0!==finalizedData&&"editNode"===_this2.inMode&&_this2.body.data.nodes.getDataSet().update(finalizedData),_this2.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="addEdge",this.guiEnabled===!0){var locale=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(locale),this._createSeperator(),this._createDescription(locale.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",function(){}),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){var _this3=this;if(this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="editEdge",this.guiEnabled===!0){var locale=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(locale),this._createSeperator(),this._createDescription(locale.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId?!function(){var edge=_this3.body.edges[_this3.edgeBeingEditedId],controlNodeFrom=_this3._getNewTargetNode(edge.from.x,edge.from.y),controlNodeTo=_this3._getNewTargetNode(edge.to.x,edge.to.y);_this3.temporaryIds.nodes.push(controlNodeFrom.id),_this3.temporaryIds.nodes.push(controlNodeTo.id),_this3.body.nodes[controlNodeFrom.id]=controlNodeFrom,_this3.body.nodeIndices.push(controlNodeFrom.id),_this3.body.nodes[controlNodeTo.id]=controlNodeTo,
_this3.body.nodeIndices.push(controlNodeTo.id),_this3._temporaryBindUI("onTouch",_this3._controlNodeTouch.bind(_this3)),_this3._temporaryBindUI("onTap",function(){}),_this3._temporaryBindUI("onHold",function(){}),_this3._temporaryBindUI("onDragStart",_this3._controlNodeDragStart.bind(_this3)),_this3._temporaryBindUI("onDrag",_this3._controlNodeDrag.bind(_this3)),_this3._temporaryBindUI("onDragEnd",_this3._controlNodeDragEnd.bind(_this3)),_this3._temporaryBindUI("onMouseMove",function(){}),_this3._temporaryBindEvent("beforeDrawing",function(ctx){var positions=edge.edgeType.findBorderPositions(ctx);controlNodeFrom.selected===!1&&(controlNodeFrom.x=positions.from.x,controlNodeFrom.y=positions.from.y),controlNodeTo.selected===!1&&(controlNodeTo.x=positions.to.x,controlNodeTo.y=positions.to.y)}),_this3.body.emitter.emit("_redraw")}():this.showManipulatorToolbar()}},{key:"deleteSelected",value:function(){var _this4=this;this.editMode!==!0&&this.enableEditMode(),this._clean(),this.inMode="delete";var selectedNodes=this.selectionHandler.getSelectedNodes(),selectedEdges=this.selectionHandler.getSelectedEdges(),deleteFunction=void 0;if(selectedNodes.length>0){for(var i=0;i<selectedNodes.length;i++)if(this.body.nodes[selectedNodes[i]].isCluster===!0)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(deleteFunction=this.options.deleteNode)}else selectedEdges.length>0&&"function"==typeof this.options.deleteEdge&&(deleteFunction=this.options.deleteEdge);if("function"==typeof deleteFunction){var data={nodes:selectedNodes,edges:selectedEdges};if(2!==deleteFunction.length)throw new Error("The function for delete does not support two arguments (data, callback)");deleteFunction(data,function(finalizedData){null!==finalizedData&&void 0!==finalizedData&&"delete"===_this4.inMode?(_this4.body.data.edges.getDataSet().remove(finalizedData.edges),_this4.body.data.nodes.getDataSet().remove(finalizedData.nodes),_this4.body.emitter.emit("startSimulation"),_this4.showManipulatorToolbar()):(_this4.body.emitter.emit("startSimulation"),_this4.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(selectedEdges),this.body.data.nodes.getDataSet().remove(selectedNodes),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){this.options.enabled===!0?(this.guiEnabled=!0,this._createWrappers(),this.editMode===!1?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",this.editMode===!0?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editMode===!0?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(x,y){var controlNodeStyle=util.deepExtend({},this.options.controlNodeStyle);controlNodeStyle.id="targetNode"+util.randomUUID(),controlNodeStyle.hidden=!1,controlNodeStyle.physics=!1,controlNodeStyle.x=x,controlNodeStyle.y=y;var node=this.body.functions.createNode(controlNodeStyle);return node.shape.boundingBox={left:x,right:x,top:y,bottom:y},node}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},util.recursiveDOMDelete(this.editModeDiv);var locale=this.options.locales[this.options.locale],button=this._createButton("editMode","vis-button vis-edit vis-edit-mode",locale.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(button),this._bindHammerToDiv(button,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1,this.guiEnabled===!0&&(util.recursiveDOMDelete(this.editModeDiv),util.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var i=0;i<this.manipulationHammers.length;i++)this.manipulationHammers[i].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),util.recursiveDOMDelete(this.manipulationDiv),util.recursiveDOMDelete(this.editModeDiv),util.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var index=arguments.length<=0||void 0===arguments[0]?1:arguments[0];this.manipulationDOM["seperatorLineDiv"+index]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+index].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+index])}},{key:"_createAddNodeButton",value:function(locale){var button=this._createButton("addNode","vis-button vis-add",locale.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(button),this._bindHammerToDiv(button,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(locale){var button=this._createButton("addEdge","vis-button vis-connect",locale.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(button),this._bindHammerToDiv(button,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(locale){var button=this._createButton("editNode","vis-button vis-edit",locale.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(button),this._bindHammerToDiv(button,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(locale){var button=this._createButton("editEdge","vis-button vis-edit",locale.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(button),this._bindHammerToDiv(button,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(locale){if(this.options.rtl)var deleteBtnClass="vis-button vis-delete-rtl";else var deleteBtnClass="vis-button vis-delete";var button=this._createButton("delete",deleteBtnClass,locale.del||this.options.locales.en.del);this.manipulationDiv.appendChild(button),this._bindHammerToDiv(button,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(locale){var button=this._createButton("back","vis-button vis-back",locale.back||this.options.locales.en.back);this.manipulationDiv.appendChild(button),this._bindHammerToDiv(button,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(id,className,label){var labelClassName=arguments.length<=3||void 0===arguments[3]?"vis-label":arguments[3];return this.manipulationDOM[id+"Div"]=document.createElement("div"),this.manipulationDOM[id+"Div"].className=className,this.manipulationDOM[id+"Label"]=document.createElement("div"),this.manipulationDOM[id+"Label"].className=labelClassName,this.manipulationDOM[id+"Label"].innerHTML=label,this.manipulationDOM[id+"Div"].appendChild(this.manipulationDOM[id+"Label"]),this.manipulationDOM[id+"Div"]}},{key:"_createDescription",value:function(label){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",label))}},{key:"_temporaryBindEvent",value:function(event,newFunction){this.temporaryEventFunctions.push({event:event,boundFunction:newFunction}),this.body.emitter.on(event,newFunction)}},{key:"_temporaryBindUI",value:function(UIfunctionName,newFunction){if(void 0===this.body.eventListeners[UIfunctionName])throw new Error("This UI function does not exist. Typo? You tried: "+UIfunctionName+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));this.temporaryUIFunctions[UIfunctionName]=this.body.eventListeners[UIfunctionName],this.body.eventListeners[UIfunctionName]=newFunction}},{key:"_unbindTemporaryUIs",value:function(){for(var functionName in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(functionName)&&(this.body.eventListeners[functionName]=this.temporaryUIFunctions[functionName],delete this.temporaryUIFunctions[functionName]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var i=0;i<this.temporaryEventFunctions.length;i++){var eventName=this.temporaryEventFunctions[i].event,boundFunction=this.temporaryEventFunctions[i].boundFunction;this.body.emitter.off(eventName,boundFunction)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(domElement,boundFunction){var hammer=new Hammer(domElement,{});hammerUtil.onTouch(hammer,boundFunction),this.manipulationHammers.push(hammer)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var i=0;i<this.temporaryIds.edges.length;i++){this.body.edges[this.temporaryIds.edges[i]].disconnect(),delete this.body.edges[this.temporaryIds.edges[i]];var indexTempEdge=this.body.edgeIndices.indexOf(this.temporaryIds.edges[i]);indexTempEdge!==-1&&this.body.edgeIndices.splice(indexTempEdge,1)}for(var _i=0;_i<this.temporaryIds.nodes.length;_i++){delete this.body.nodes[this.temporaryIds.nodes[_i]];var indexTempNode=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[_i]);indexTempNode!==-1&&this.body.nodeIndices.splice(indexTempNode,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(event){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(event.center),this.lastTouch.translation=util.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(event){var pointer=this.lastTouch,pointerObj=this.selectionHandler._pointerToPositionObject(pointer),from=this.body.nodes[this.temporaryIds.nodes[0]],to=this.body.nodes[this.temporaryIds.nodes[1]],edge=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var fromSelect=from.isOverlappingWith(pointerObj),toSelect=to.isOverlappingWith(pointerObj);fromSelect===!0?(this.selectedControlNode=from,edge.edgeType.from=from):toSelect===!0&&(this.selectedControlNode=to,edge.edgeType.to=to),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(event){this.body.emitter.emit("disablePhysics");var pointer=this.body.functions.getPointer(event.center),pos=this.canvas.DOMtoCanvas(pointer);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=pos.x,this.selectedControlNode.y=pos.y;else{var diffX=pointer.x-this.lastTouch.x,diffY=pointer.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+diffX,y:this.lastTouch.translation.y+diffY}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(event){var pointer=this.body.functions.getPointer(event.center),pointerObj=this.selectionHandler._pointerToPositionObject(pointer),edge=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var overlappingNodeIds=this.selectionHandler._getAllNodesOverlappingWith(pointerObj),node=void 0,i=overlappingNodeIds.length-1;i>=0;i--)if(overlappingNodeIds[i]!==this.selectedControlNode.id){node=this.body.nodes[overlappingNodeIds[i]];break}if(void 0!==node&&void 0!==this.selectedControlNode)if(node.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var from=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===from.id?this._performEditEdge(node.id,edge.to.id):this._performEditEdge(edge.from.id,node.id)}else edge.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(event){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(event.center),this.lastTouch.translation=util.extend({},this.body.view.translation);var pointer=this.lastTouch,node=this.selectionHandler.getNodeAt(pointer);if(void 0!==node)if(node.isCluster===!0)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var targetNode=this._getNewTargetNode(node.x,node.y);this.body.nodes[targetNode.id]=targetNode,this.body.nodeIndices.push(targetNode.id);var connectionEdge=this.body.functions.createEdge({id:"connectionEdge"+util.randomUUID(),from:node.id,to:targetNode.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[connectionEdge.id]=connectionEdge,this.body.edgeIndices.push(connectionEdge.id),this.temporaryIds.nodes.push(targetNode.id),this.temporaryIds.edges.push(connectionEdge.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(event){var pointer=this.body.functions.getPointer(event.center);if(void 0!==this.temporaryIds.nodes[0]){var targetNode=this.body.nodes[this.temporaryIds.nodes[0]];targetNode.x=this.canvas._XconvertDOMtoCanvas(pointer.x),targetNode.y=this.canvas._YconvertDOMtoCanvas(pointer.y),this.body.emitter.emit("_redraw")}else{var diffX=pointer.x-this.lastTouch.x,diffY=pointer.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+diffX,y:this.lastTouch.translation.y+diffY}}}},{key:"_finishConnect",value:function(event){var pointer=this.body.functions.getPointer(event.center),pointerObj=this.selectionHandler._pointerToPositionObject(pointer),connectFromId=void 0;void 0!==this.temporaryIds.edges[0]&&(connectFromId=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var overlappingNodeIds=this.selectionHandler._getAllNodesOverlappingWith(pointerObj),node=void 0,i=overlappingNodeIds.length-1;i>=0;i--)if(this.temporaryIds.nodes.indexOf(overlappingNodeIds[i])===-1){node=this.body.nodes[overlappingNodeIds[i]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==node&&(node.isCluster===!0?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[connectFromId]&&void 0!==this.body.nodes[node.id]&&this._performAddEdge(connectFromId,node.id)),this.body.emitter.emit("_redraw")}},{key:"_performAddNode",value:function(clickData){var _this5=this,defaultData={id:util.randomUUID(),x:clickData.pointer.canvas.x,y:clickData.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(defaultData,function(finalizedData){null!==finalizedData&&void 0!==finalizedData&&"addNode"===_this5.inMode&&(_this5.body.data.nodes.getDataSet().add(finalizedData),_this5.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(defaultData),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(sourceNodeId,targetNodeId){var _this6=this,defaultData={from:sourceNodeId,to:targetNodeId};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(defaultData,function(finalizedData){null!==finalizedData&&void 0!==finalizedData&&"addEdge"===_this6.inMode&&(_this6.body.data.edges.getDataSet().add(finalizedData),_this6.selectionHandler.unselectAll(),_this6.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(defaultData),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(sourceNodeId,targetNodeId){var _this7=this,defaultData={id:this.edgeBeingEditedId,from:sourceNodeId,to:targetNodeId};if("function"==typeof this.options.editEdge){if(2!==this.options.editEdge.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editEdge(defaultData,function(finalizedData){null===finalizedData||void 0===finalizedData||"editEdge"!==_this7.inMode?(_this7.body.edges[defaultData.id].updateEdgeType(),_this7.body.emitter.emit("_redraw")):(_this7.body.data.edges.getDataSet().update(finalizedData),_this7.selectionHandler.unselectAll(),_this7.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(defaultData),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),ManipulationSystem}();exports.default=ManipulationSystem},function(module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var string="string",boolean="boolean",number="number",array="array",object="object",dom="dom",any="any",allOptions={configure:{enabled:{boolean:boolean},filter:{boolean:boolean,string:string,array:array,function:"function"},container:{dom:dom},showButton:{boolean:boolean},__type__:{object:object,boolean:boolean,string:string,array:array,function:"function"}},edges:{arrows:{to:{enabled:{boolean:boolean},scaleFactor:{number:number},__type__:{object:object,boolean:boolean}},middle:{enabled:{boolean:boolean},scaleFactor:{number:number},__type__:{object:object,boolean:boolean}},from:{enabled:{boolean:boolean},scaleFactor:{number:number},__type__:{object:object,boolean:boolean}},__type__:{string:["from","to","middle"],object:object}},arrowStrikethrough:{boolean:boolean},color:{color:{string:string},highlight:{string:string},hover:{string:string},inherit:{string:["from","to","both"],boolean:boolean},opacity:{number:number},__type__:{object:object,string:string}},dashes:{boolean:boolean,array:array},font:{color:{string:string},size:{number:number},face:{string:string},background:{string:string},strokeWidth:{number:number},strokeColor:{string:string},align:{string:["horizontal","top","middle","bottom"]},__type__:{object:object,string:string}},hidden:{boolean:boolean},hoverWidth:{function:"function",number:number},label:{string:string,undefined:"undefined"},labelHighlightBold:{boolean:boolean},length:{number:number,undefined:"undefined"},physics:{boolean:boolean},scaling:{min:{number:number},max:{number:number},label:{enabled:{boolean:boolean},min:{number:number},max:{number:number},maxVisible:{number:number},drawThreshold:{number:number},__type__:{object:object,boolean:boolean}},customScalingFunction:{function:"function"},__type__:{object:object}},selectionWidth:{function:"function",number:number},selfReferenceSize:{number:number},shadow:{enabled:{boolean:boolean},color:{string:string},size:{number:number},x:{number:number},y:{number:number},__type__:{object:object,boolean:boolean}},smooth:{enabled:{boolean:boolean},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:number},forceDirection:{string:["horizontal","vertical","none"],boolean:boolean},__type__:{object:object,boolean:boolean}},title:{string:string,undefined:"undefined"},width:{number:number},value:{number:number,undefined:"undefined"},__type__:{object:object}},groups:{useDefaultGroups:{boolean:boolean},__any__:"get from nodes, will be overwritten below",__type__:{object:object}},interaction:{dragNodes:{boolean:boolean},dragView:{boolean:boolean},hideEdgesOnDrag:{boolean:boolean},hideNodesOnDrag:{boolean:boolean},hover:{boolean:boolean},keyboard:{enabled:{boolean:boolean},speed:{x:{number:number},y:{number:number},zoom:{number:number},__type__:{object:object}},bindToWindow:{boolean:boolean},__type__:{object:object,boolean:boolean}},multiselect:{boolean:boolean},navigationButtons:{boolean:boolean},selectable:{boolean:boolean},selectConnectedEdges:{boolean:boolean},hoverConnectedEdges:{boolean:boolean},tooltipDelay:{number:number},zoomView:{boolean:boolean},__type__:{object:object}},layout:{randomSeed:{undefined:"undefined",number:number},improvedLayout:{boolean:boolean},hierarchical:{enabled:{boolean:boolean},levelSeparation:{number:number},nodeSpacing:{number:number},treeSpacing:{number:number},blockShifting:{boolean:boolean},edgeMinimization:{boolean:boolean},parentCentralization:{boolean:boolean},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:object,boolean:boolean}},__type__:{object:object}},manipulation:{enabled:{boolean:boolean},initiallyActive:{boolean:boolean},addNode:{boolean:boolean,function:"function"},addEdge:{boolean:boolean,function:"function"},editNode:{function:"function"},editEdge:{boolean:boolean,function:"function"},deleteNode:{boolean:boolean,function:"function"},deleteEdge:{boolean:boolean,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:object,boolean:boolean}},nodes:{borderWidth:{number:number},borderWidthSelected:{number:number,undefined:"undefined"},brokenImage:{string:string,undefined:"undefined"},color:{border:{string:string},background:{string:string},highlight:{border:{string:string},background:{string:string},__type__:{object:object,string:string}},hover:{border:{string:string},background:{string:string},__type__:{object:object,string:string}},__type__:{object:object,string:string}},fixed:{x:{boolean:boolean},y:{boolean:boolean},__type__:{object:object,boolean:boolean}},font:{align:{string:string},color:{string:string},size:{number:number},face:{string:string},background:{string:string},strokeWidth:{number:number},strokeColor:{string:string},__type__:{object:object,string:string}},group:{string:string,number:number,undefined:"undefined"},hidden:{boolean:boolean},icon:{face:{string:string},code:{string:string},size:{number:number},color:{string:string},__type__:{object:object}},id:{string:string,number:number},image:{string:string,undefined:"undefined"},label:{string:string,undefined:"undefined"},labelHighlightBold:{boolean:boolean},level:{number:number,undefined:"undefined"},mass:{number:number},physics:{boolean:boolean},scaling:{min:{number:number},max:{number:number},label:{enabled:{boolean:boolean},min:{number:number},max:{number:number},maxVisible:{number:number},drawThreshold:{number:number},__type__:{object:object,boolean:boolean}},customScalingFunction:{function:"function"},__type__:{object:object}},shadow:{enabled:{boolean:boolean},color:{string:string},size:{number:number},x:{number:number},y:{number:number},__type__:{object:object,boolean:boolean}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon"]},shapeProperties:{borderDashes:{boolean:boolean,array:array},borderRadius:{number:number},interpolation:{boolean:boolean},useImageSize:{boolean:boolean},useBorderWithImage:{boolean:boolean},__type__:{object:object}},size:{number:number},title:{string:string,undefined:"undefined"},value:{number:number,undefined:"undefined"},x:{number:number},y:{number:number},__type__:{object:object}},physics:{enabled:{boolean:boolean},barnesHut:{gravitationalConstant:{number:number},centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},damping:{number:number},avoidOverlap:{number:number},__type__:{object:object}},forceAtlas2Based:{gravitationalConstant:{number:number},centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},damping:{number:number},avoidOverlap:{number:number},__type__:{object:object}},repulsion:{centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},nodeDistance:{number:number},damping:{number:number},__type__:{object:object}},hierarchicalRepulsion:{centralGravity:{number:number},springLength:{number:number},springConstant:{number:number},nodeDistance:{number:number},damping:{number:number},__type__:{object:object}},maxVelocity:{number:number},minVelocity:{number:number},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:boolean},iterations:{number:number},updateInterval:{number:number},onlyDynamicEdges:{boolean:boolean},fit:{boolean:boolean},__type__:{object:object,boolean:boolean}},timestep:{number:number},adaptiveTimestep:{boolean:boolean},__type__:{object:object,boolean:boolean}},autoResize:{boolean:boolean},clickToUse:{boolean:boolean},locale:{string:string},locales:{__any__:{any:any},__type__:{object:object}},height:{string:string},width:{string:string},__type__:{object:object}};allOptions.groups.__any__=allOptions.nodes,allOptions.manipulation.controlNodeStyle=allOptions.nodes;var configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05]},middle:{enabled:!1,scaleFactor:[1,0,3,.05]},from:{enabled:!1,scaleFactor:[1,0,3,.05]}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]},global:{locale:["en","nl"]}};exports.allOptions=allOptions,exports.configureOptions=configureOptions},function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FloydWarshall=__webpack_require__(116),_FloydWarshall2=_interopRequireDefault(_FloydWarshall),KamadaKawai=function(){function KamadaKawai(body,edgeLength,edgeStrength){_classCallCheck(this,KamadaKawai),this.body=body,this.springLength=edgeLength,this.springConstant=edgeStrength,this.distanceSolver=new _FloydWarshall2.default}return _createClass(KamadaKawai,[{key:"setOptions",value:function(options){options&&(options.springLength&&(this.springLength=options.springLength),options.springConstant&&(this.springConstant=options.springConstant))}},{key:"solve",value:function(nodesArray,edgesArray){var ignoreClusters=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],D_matrix=this.distanceSolver.getDistances(this.body,nodesArray,edgesArray);this._createL_matrix(D_matrix),this._createK_matrix(D_matrix);for(var threshold=.01,innerThreshold=1,iterations=0,maxIterations=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),maxInnerIterations=5,maxEnergy=1e9,highE_nodeId=0,dE_dx=0,dE_dy=0,delta_m=0,subIterations=0;maxEnergy>threshold&&iterations<maxIterations;){iterations+=1;var _getHighestEnergyNode2=this._getHighestEnergyNode(ignoreClusters),_getHighestEnergyNode3=_slicedToArray(_getHighestEnergyNode2,4);for(highE_nodeId=_getHighestEnergyNode3[0],maxEnergy=_getHighestEnergyNode3[1],dE_dx=_getHighestEnergyNode3[2],dE_dy=_getHighestEnergyNode3[3],delta_m=maxEnergy,subIterations=0;delta_m>innerThreshold&&subIterations<maxInnerIterations;){subIterations+=1,this._moveNode(highE_nodeId,dE_dx,dE_dy);var _getEnergy2=this._getEnergy(highE_nodeId),_getEnergy3=_slicedToArray(_getEnergy2,3);delta_m=_getEnergy3[0],dE_dx=_getEnergy3[1],dE_dy=_getEnergy3[2]}}}},{key:"_getHighestEnergyNode",value:function(ignoreClusters){for(var nodesArray=this.body.nodeIndices,nodes=this.body.nodes,maxEnergy=0,maxEnergyNodeId=nodesArray[0],dE_dx_max=0,dE_dy_max=0,nodeIdx=0;nodeIdx<nodesArray.length;nodeIdx++){var m=nodesArray[nodeIdx];if(nodes[m].predefinedPosition===!1||nodes[m].isCluster===!0&&ignoreClusters===!0||nodes[m].options.fixed.x===!0||nodes[m].options.fixed.y===!0){var _getEnergy4=this._getEnergy(m),_getEnergy5=_slicedToArray(_getEnergy4,3),delta_m=_getEnergy5[0],dE_dx=_getEnergy5[1],dE_dy=_getEnergy5[2];
maxEnergy<delta_m&&(maxEnergy=delta_m,maxEnergyNodeId=m,dE_dx_max=dE_dx,dE_dy_max=dE_dy)}}return[maxEnergyNodeId,maxEnergy,dE_dx_max,dE_dy_max]}},{key:"_getEnergy",value:function(m){for(var nodesArray=this.body.nodeIndices,nodes=this.body.nodes,x_m=nodes[m].x,y_m=nodes[m].y,dE_dx=0,dE_dy=0,iIdx=0;iIdx<nodesArray.length;iIdx++){var i=nodesArray[iIdx];if(i!==m){var x_i=nodes[i].x,y_i=nodes[i].y,denominator=1/Math.sqrt(Math.pow(x_m-x_i,2)+Math.pow(y_m-y_i,2));dE_dx+=this.K_matrix[m][i]*(x_m-x_i-this.L_matrix[m][i]*(x_m-x_i)*denominator),dE_dy+=this.K_matrix[m][i]*(y_m-y_i-this.L_matrix[m][i]*(y_m-y_i)*denominator)}}var delta_m=Math.sqrt(Math.pow(dE_dx,2)+Math.pow(dE_dy,2));return[delta_m,dE_dx,dE_dy]}},{key:"_moveNode",value:function(m,dE_dx,dE_dy){for(var nodesArray=this.body.nodeIndices,nodes=this.body.nodes,d2E_dx2=0,d2E_dxdy=0,d2E_dy2=0,x_m=nodes[m].x,y_m=nodes[m].y,iIdx=0;iIdx<nodesArray.length;iIdx++){var i=nodesArray[iIdx];if(i!==m){var x_i=nodes[i].x,y_i=nodes[i].y,denominator=1/Math.pow(Math.pow(x_m-x_i,2)+Math.pow(y_m-y_i,2),1.5);d2E_dx2+=this.K_matrix[m][i]*(1-this.L_matrix[m][i]*Math.pow(y_m-y_i,2)*denominator),d2E_dxdy+=this.K_matrix[m][i]*(this.L_matrix[m][i]*(x_m-x_i)*(y_m-y_i)*denominator),d2E_dy2+=this.K_matrix[m][i]*(1-this.L_matrix[m][i]*Math.pow(x_m-x_i,2)*denominator)}}var A=d2E_dx2,B=d2E_dxdy,C=dE_dx,D=d2E_dy2,E=dE_dy,dy=(C/A+E/B)/(B/A-D/B),dx=-(B*dy+C)/A;nodes[m].x+=dx,nodes[m].y+=dy}},{key:"_createL_matrix",value:function(D_matrix){var nodesArray=this.body.nodeIndices,edgeLength=this.springLength;this.L_matrix=[];for(var i=0;i<nodesArray.length;i++){this.L_matrix[nodesArray[i]]={};for(var j=0;j<nodesArray.length;j++)this.L_matrix[nodesArray[i]][nodesArray[j]]=edgeLength*D_matrix[nodesArray[i]][nodesArray[j]]}}},{key:"_createK_matrix",value:function(D_matrix){var nodesArray=this.body.nodeIndices,edgeStrength=this.springConstant;this.K_matrix=[];for(var i=0;i<nodesArray.length;i++){this.K_matrix[nodesArray[i]]={};for(var j=0;j<nodesArray.length;j++)this.K_matrix[nodesArray[i]][nodesArray[j]]=edgeStrength*Math.pow(D_matrix[nodesArray[i]][nodesArray[j]],-2)}}}]),KamadaKawai}();exports.default=KamadaKawai},function(module,exports){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),FloydWarshall=function(){function FloydWarshall(){_classCallCheck(this,FloydWarshall)}return _createClass(FloydWarshall,[{key:"getDistances",value:function(body,nodesArray,edgesArray){for(var D_matrix={},edges=body.edges,i=0;i<nodesArray.length;i++){D_matrix[nodesArray[i]]={},D_matrix[nodesArray[i]]={};for(var j=0;j<nodesArray.length;j++)D_matrix[nodesArray[i]][nodesArray[j]]=i==j?0:1e9,D_matrix[nodesArray[i]][nodesArray[j]]=i==j?0:1e9}for(var _i=0;_i<edgesArray.length;_i++){var edge=edges[edgesArray[_i]];edge.connected===!0&&void 0!==D_matrix[edge.fromId]&&void 0!==D_matrix[edge.toId]&&(D_matrix[edge.fromId][edge.toId]=1,D_matrix[edge.toId][edge.fromId]=1)}for(var nodeCount=nodesArray.length,k=0;k<nodeCount;k++)for(var _i2=0;_i2<nodeCount-1;_i2++)for(var _j=_i2+1;_j<nodeCount;_j++)D_matrix[nodesArray[_i2]][nodesArray[_j]]=Math.min(D_matrix[nodesArray[_i2]][nodesArray[_j]],D_matrix[nodesArray[_i2]][nodesArray[k]]+D_matrix[nodesArray[k]][nodesArray[_j]]),D_matrix[nodesArray[_j]][nodesArray[_i2]]=D_matrix[nodesArray[_i2]][nodesArray[_j]];return D_matrix}}]),FloydWarshall}();exports.default=FloydWarshall},function(module,exports){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(x,y,r){this.beginPath(),this.arc(x,y,r,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(x,y,r){this.beginPath(),this.rect(x-r,y-r,2*r,2*r),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(x,y,r){this.beginPath(),r*=1.15,y+=.275*r;var s=2*r,s2=s/2,ir=Math.sqrt(3)/6*s,h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y-(h-ir)),this.lineTo(x+s2,y+ir),this.lineTo(x-s2,y+ir),this.lineTo(x,y-(h-ir)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(x,y,r){this.beginPath(),r*=1.15,y-=.275*r;var s=2*r,s2=s/2,ir=Math.sqrt(3)/6*s,h=Math.sqrt(s*s-s2*s2);this.moveTo(x,y+(h-ir)),this.lineTo(x+s2,y-ir),this.lineTo(x-s2,y-ir),this.lineTo(x,y+(h-ir)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(x,y,r){this.beginPath(),r*=.82,y+=.1*r;for(var n=0;n<10;n++){var radius=n%2===0?1.3*r:.5*r;this.lineTo(x+radius*Math.sin(2*n*Math.PI/10),y-radius*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(x,y,r){this.beginPath(),this.lineTo(x,y+r),this.lineTo(x+r,y),this.lineTo(x,y-r),this.lineTo(x-r,y),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){var r2d=Math.PI/180;w-2*r<0&&(r=w/2),h-2*r<0&&(r=h/2),this.beginPath(),this.moveTo(x+r,y),this.lineTo(x+w-r,y),this.arc(x+w-r,y+r,r,270*r2d,360*r2d,!1),this.lineTo(x+w,y+h-r),this.arc(x+w-r,y+h-r,r,0,90*r2d,!1),this.lineTo(x+r,y+h),this.arc(x+r,y+h-r,r,90*r2d,180*r2d,!1),this.lineTo(x,y+r),this.arc(x+r,y+r,r,180*r2d,270*r2d,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse=function(x,y,w,h){var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;this.beginPath(),this.moveTo(x,ym),this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),this.closePath()},CanvasRenderingContext2D.prototype.database=function(x,y,w,h){var f=1/3,wEllipse=w,hEllipse=h*f,kappa=.5522848,ox=wEllipse/2*kappa,oy=hEllipse/2*kappa,xe=x+wEllipse,ye=y+hEllipse,xm=x+wEllipse/2,ym=y+hEllipse/2,ymb=y+(h-hEllipse/2),yeb=y+h;this.beginPath(),this.moveTo(xe,ym),this.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),this.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym),this.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y),this.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym),this.lineTo(xe,ymb),this.bezierCurveTo(xe,ymb+oy,xm+ox,yeb,xm,yeb),this.bezierCurveTo(xm-ox,yeb,x,ymb+oy,x,ymb),this.lineTo(x,ym)},CanvasRenderingContext2D.prototype.arrow=function(x,y,angle,length){var xt=x-length*Math.cos(angle),yt=y-length*Math.sin(angle),xi=x-.9*length*Math.cos(angle),yi=y-.9*length*Math.sin(angle),xl=xt+length/3*Math.cos(angle+.5*Math.PI),yl=yt+length/3*Math.sin(angle+.5*Math.PI),xr=xt+length/3*Math.cos(angle-.5*Math.PI),yr=yt+length/3*Math.sin(angle-.5*Math.PI);this.beginPath(),this.moveTo(x,y),this.lineTo(xl,yl),this.lineTo(xi,yi),this.lineTo(xr,yr),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(x,y,x2,y2,pattern){this.beginPath(),this.moveTo(x,y);for(var patternLength=pattern.length,dx=x2-x,dy=y2-y,slope=dy/dx,distRemaining=Math.sqrt(dx*dx+dy*dy),patternIndex=0,draw=!0,xStep=0,dashLength=pattern[0];distRemaining>=.1;)dashLength=pattern[patternIndex++%patternLength],dashLength>distRemaining&&(dashLength=distRemaining),xStep=Math.sqrt(dashLength*dashLength/(1+slope*slope)),xStep=dx<0?-xStep:xStep,x+=xStep,y+=slope*xStep,draw===!0?this.lineTo(x,y):this.moveTo(x,y),distRemaining-=dashLength,draw=!draw})},function(module,exports){function parseDOT(data){return dot=data,parseGraph()}function first(){index=0,c=dot.charAt(0)}function next(){index++,c=dot.charAt(index)}function nextPreview(){return dot.charAt(index+1)}function isAlphaNumeric(c){return regexAlphaNumeric.test(c)}function merge(a,b){if(a||(a={}),b)for(var name in b)b.hasOwnProperty(name)&&(a[name]=b[name]);return a}function setValue(obj,path,value){for(var keys=path.split("."),o=obj;keys.length;){var key=keys.shift();keys.length?(o[key]||(o[key]={}),o=o[key]):o[key]=value}}function addNode(graph,node){for(var i,len,current=null,graphs=[graph],root=graph;root.parent;)graphs.push(root.parent),root=root.parent;if(root.nodes)for(i=0,len=root.nodes.length;i<len;i++)if(node.id===root.nodes[i].id){current=root.nodes[i];break}for(current||(current={id:node.id},graph.node&&(current.attr=merge(current.attr,graph.node))),i=graphs.length-1;i>=0;i--){var g=graphs[i];g.nodes||(g.nodes=[]),g.nodes.indexOf(current)===-1&&g.nodes.push(current)}node.attr&&(current.attr=merge(current.attr,node.attr))}function addEdge(graph,edge){if(graph.edges||(graph.edges=[]),graph.edges.push(edge),graph.edge){var attr=merge({},graph.edge);edge.attr=merge(attr,edge.attr)}}function createEdge(graph,from,to,type,attr){var edge={from:from,to:to,type:type};return graph.edge&&(edge.attr=merge({},graph.edge)),edge.attr=merge(edge.attr||{},attr),edge}function getToken(){for(tokenType=TOKENTYPE.NULL,token="";" "===c||"\t"===c||"\n"===c||"\r"===c;)next();do{var isComment=!1;if("#"===c){for(var i=index-1;" "===dot.charAt(i)||"\t"===dot.charAt(i);)i--;if("\n"===dot.charAt(i)||""===dot.charAt(i)){for(;""!=c&&"\n"!=c;)next();isComment=!0}}if("/"===c&&"/"===nextPreview()){for(;""!=c&&"\n"!=c;)next();isComment=!0}if("/"===c&&"*"===nextPreview()){for(;""!=c;){if("*"===c&&"/"===nextPreview()){next(),next();break}next()}isComment=!0}for(;" "===c||"\t"===c||"\n"===c||"\r"===c;)next()}while(isComment);if(""===c)return void(tokenType=TOKENTYPE.DELIMITER);var c2=c+nextPreview();if(DELIMITERS[c2])return tokenType=TOKENTYPE.DELIMITER,token=c2,next(),void next();if(DELIMITERS[c])return tokenType=TOKENTYPE.DELIMITER,token=c,void next();if(isAlphaNumeric(c)||"-"===c){for(token+=c,next();isAlphaNumeric(c);)token+=c,next();return"false"===token?token=!1:"true"===token?token=!0:isNaN(Number(token))||(token=Number(token)),void(tokenType=TOKENTYPE.IDENTIFIER)}if('"'===c){for(next();""!=c&&('"'!=c||'"'===c&&'"'===nextPreview());)token+=c,'"'===c&&next(),next();if('"'!=c)throw newSyntaxError('End of string " expected');return next(),void(tokenType=TOKENTYPE.IDENTIFIER)}for(tokenType=TOKENTYPE.UNKNOWN;""!=c;)token+=c,next();throw new SyntaxError('Syntax error in part "'+chop(token,30)+'"')}function parseGraph(){var graph={};if(first(),getToken(),"strict"===token&&(graph.strict=!0,getToken()),"graph"!==token&&"digraph"!==token||(graph.type=token,getToken()),tokenType===TOKENTYPE.IDENTIFIER&&(graph.id=token,getToken()),"{"!=token)throw newSyntaxError("Angle bracket { expected");if(getToken(),parseStatements(graph),"}"!=token)throw newSyntaxError("Angle bracket } expected");if(getToken(),""!==token)throw newSyntaxError("End of file expected");return getToken(),delete graph.node,delete graph.edge,delete graph.graph,graph}function parseStatements(graph){for(;""!==token&&"}"!=token;)parseStatement(graph),";"===token&&getToken()}function parseStatement(graph){var subgraph=parseSubgraph(graph);if(subgraph)return void parseEdge(graph,subgraph);var attr=parseAttributeStatement(graph);if(!attr){if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier expected");var id=token;if(getToken(),"="===token){if(getToken(),tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier expected");graph[id]=token,getToken()}else parseNodeStatement(graph,id)}}function parseSubgraph(graph){var subgraph=null;if("subgraph"===token&&(subgraph={},subgraph.type="subgraph",getToken(),tokenType===TOKENTYPE.IDENTIFIER&&(subgraph.id=token,getToken())),"{"===token){if(getToken(),subgraph||(subgraph={}),subgraph.parent=graph,subgraph.node=graph.node,subgraph.edge=graph.edge,subgraph.graph=graph.graph,parseStatements(subgraph),"}"!=token)throw newSyntaxError("Angle bracket } expected");getToken(),delete subgraph.node,delete subgraph.edge,delete subgraph.graph,delete subgraph.parent,graph.subgraphs||(graph.subgraphs=[]),graph.subgraphs.push(subgraph)}return subgraph}function parseAttributeStatement(graph){return"node"===token?(getToken(),graph.node=parseAttributeList(),"node"):"edge"===token?(getToken(),graph.edge=parseAttributeList(),"edge"):"graph"===token?(getToken(),graph.graph=parseAttributeList(),"graph"):null}function parseNodeStatement(graph,id){var node={id:id},attr=parseAttributeList();attr&&(node.attr=attr),addNode(graph,node),parseEdge(graph,id)}function parseEdge(graph,from){for(;"->"===token||"--"===token;){var to,type=token;getToken();var subgraph=parseSubgraph(graph);if(subgraph)to=subgraph;else{if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Identifier or subgraph expected");to=token,addNode(graph,{id:to}),getToken()}var attr=parseAttributeList(),edge=createEdge(graph,from,to,type,attr);addEdge(graph,edge),from=to}}function parseAttributeList(){for(var attr=null;"["===token;){for(getToken(),attr={};""!==token&&"]"!=token;){if(tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Attribute name expected");var name=token;if(getToken(),"="!=token)throw newSyntaxError("Equal sign = expected");if(getToken(),tokenType!=TOKENTYPE.IDENTIFIER)throw newSyntaxError("Attribute value expected");var value=token;setValue(attr,name,value),getToken(),","==token&&getToken()}if("]"!=token)throw newSyntaxError("Bracket ] expected");getToken()}return attr}function newSyntaxError(message){return new SyntaxError(message+', got "'+chop(token,30)+'" (char '+index+")")}function chop(text,maxLength){return text.length<=maxLength?text:text.substr(0,27)+"..."}function forEach2(array1,array2,fn){Array.isArray(array1)?array1.forEach(function(elem1){Array.isArray(array2)?array2.forEach(function(elem2){fn(elem1,elem2)}):fn(elem1,array2)}):Array.isArray(array2)?array2.forEach(function(elem2){fn(array1,elem2)}):fn(array1,array2)}function setProp(object,path,value){for(var names=path.split("."),prop=names.pop(),obj=object,i=0;i<names.length;i++){var name=names[i];name in obj||(obj[name]={}),obj=obj[name]}return obj[prop]=value,object}function convertAttr(attr,mapping){var converted={};for(var prop in attr)if(attr.hasOwnProperty(prop)){var visProp=mapping[prop];Array.isArray(visProp)?visProp.forEach(function(visPropI){setProp(converted,visPropI,attr[prop])}):"string"==typeof visProp?setProp(converted,visProp,attr[prop]):setProp(converted,prop,attr[prop])}return converted}function DOTToGraph(data){var dotData=parseDOT(data),graphData={nodes:[],edges:[],options:{}};if(dotData.nodes&&dotData.nodes.forEach(function(dotNode){var graphNode={id:dotNode.id,label:String(dotNode.label||dotNode.id)};merge(graphNode,convertAttr(dotNode.attr,NODE_ATTR_MAPPING)),graphNode.image&&(graphNode.shape="image"),graphData.nodes.push(graphNode)}),dotData.edges){var convertEdge=function(dotEdge){var graphEdge={from:dotEdge.from,to:dotEdge.to};return merge(graphEdge,convertAttr(dotEdge.attr,EDGE_ATTR_MAPPING)),graphEdge.arrows="->"===dotEdge.type?"to":void 0,graphEdge};dotData.edges.forEach(function(dotEdge){var from,to;from=dotEdge.from instanceof Object?dotEdge.from.nodes:{id:dotEdge.from},to=dotEdge.to instanceof Object?dotEdge.to.nodes:{id:dotEdge.to},dotEdge.from instanceof Object&&dotEdge.from.edges&&dotEdge.from.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)}),forEach2(from,to,function(from,to){var subEdge=createEdge(graphData,from.id,to.id,dotEdge.type,dotEdge.attr),graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)}),dotEdge.to instanceof Object&&dotEdge.to.edges&&dotEdge.to.edges.forEach(function(subEdge){var graphEdge=convertEdge(subEdge);graphData.edges.push(graphEdge)})})}return dotData.attr&&(graphData.options=dotData.attr),graphData}var NODE_ATTR_MAPPING={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},EDGE_ATTR_MAPPING=Object.create(NODE_ATTR_MAPPING);EDGE_ATTR_MAPPING.color="color.color";var TOKENTYPE={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},DELIMITERS={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},dot="",index=0,c="",token="",tokenType=TOKENTYPE.NULL,regexAlphaNumeric=/[a-zA-Z_0-9.:#]/;exports.parseDOT=parseDOT,exports.DOTToGraph=DOTToGraph},function(module,exports){function parseGephi(gephiJSON,optionsObj){var edges=[],nodes=[],options={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==optionsObj&&(void 0!==optionsObj.fixed&&(options.nodes.fixed=optionsObj.fixed),void 0!==optionsObj.parseColor&&(options.nodes.parseColor=optionsObj.parseColor),void 0!==optionsObj.inheritColor&&(options.edges.inheritColor=optionsObj.inheritColor));for(var gEdges=gephiJSON.edges,gNodes=gephiJSON.nodes,i=0;i<gEdges.length;i++){var edge={},gEdge=gEdges[i];edge.id=gEdge.id,edge.from=gEdge.source,edge.to=gEdge.target,edge.attributes=gEdge.attributes,edge.label=gEdge.label,edge.title=void 0!==gEdge.attributes?gEdge.attributes.title:void 0,"Directed"===gEdge.type&&(edge.arrows="to"),gEdge.color&&options.inheritColor===!1&&(edge.color=gEdge.color),edges.push(edge)}for(var i=0;i<gNodes.length;i++){var node={},gNode=gNodes[i];node.id=gNode.id,node.attributes=gNode.attributes,node.title=gNode.title,node.x=gNode.x,node.y=gNode.y,node.label=gNode.label,node.title=void 0!==gNode.attributes?gNode.attributes.title:void 0,options.nodes.parseColor===!0?node.color=gNode.color:node.color=void 0!==gNode.color?{background:gNode.color,border:gNode.color,highlight:{background:gNode.color,border:gNode.color},hover:{background:gNode.color,border:gNode.color}}:void 0,node.size=gNode.size,node.fixed=options.nodes.fixed&&void 0!==gNode.x&&void 0!==gNode.y,nodes.push(node)}return{nodes:nodes,edges:edges}}exports.parseGephi=parseGephi},function(module,exports){exports.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},exports.en_EN=exports.en,exports.en_US=exports.en,exports.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},exports.de_DE=exports.de,exports.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},exports.es_ES=exports.es,exports.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},exports.nl_NL=exports.nl,exports.nl_BE=exports.nl}])})},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("TopoServiceModule",["ngResource"]).factory("TopoLineService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.line+"?access_token="+$rootScope.token+"&timestamp="+utilService.getTimestamp(),{},{query:{method:"GET",isArray:!0,headers:$rootScope.authorization},add:{method:"POST",isArray:!1,headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,headers:$rootScope.authorization}})}]).factory("TopoNodeService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.node+"?access_token="+$rootScope.token+"&timestamp="+utilService.getTimestamp(),{},{query:{method:"GET",isArray:!0,headers:$rootScope.authorization},add:{method:"POST",isArray:!1,headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,headers:$rootScope.authorization}})}]).factory("TopoViewService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.view+"?access_token="+$rootScope.token+"&timestamp="+utilService.getTimestamp(),{},{query:{method:"GET",isArray:!0,headers:$rootScope.authorization},add:{method:"POST",isArray:!1,headers:$rootScope.authorization},update:{method:"PUT",isArray:!1,headers:$rootScope.authorization},delete:{method:"DELETE",isArray:!1,headers:$rootScope.authorization}})}]).factory("TopoService",function($resource){var DIR="assets/img/",EDGE_LENGTH_MAIN=100,EDGE_LENGTH_SUB=50;return{getNodes:function(){var nodes=[{id:1,label:"Main",image:DIR+"Network-Pipe-icon.png",shape:"image",title:"主节点"},{id:2,label:"Office",image:DIR+"Network-Pipe-icon.png",shape:"image",title:"办公室"},{id:3,label:"无线路由",image:DIR+"Network-Pipe-icon.png",shape:"image",title:"wireRoute"},{id:4,label:"服务器",group:"mygroup",image:DIR+"Hardware-My-Computer-3-icon.png",shape:"image",title:"serve"},{id:5,label:"服务器",group:"mygroup",image:DIR+"Hardware-My-Computer-3-icon.png",shape:"image",title:"serve"},{id:6,label:"服务器",group:"mygroup",image:DIR+"Hardware-My-Computer-3-icon.png",shape:"image",title:"serve"},{id:7,label:"服务器",group:"mygroup",image:DIR+"Hardware-My-Computer-3-icon.png",shape:"image",title:"serve"}];return nodes},getEdges:function(){var edges=[{from:1,to:2,length:EDGE_LENGTH_MAIN,label:"上海"},{from:1,to:3,length:EDGE_LENGTH_MAIN,label:"长沙"},{from:2,to:4,length:EDGE_LENGTH_SUB,label:"武汉"},{from:2,to:5,length:EDGE_LENGTH_MAIN,label:"大连"},{from:3,to:6,length:EDGE_LENGTH_SUB,label:"北京"},{from:3,to:7,length:EDGE_LENGTH_SUB,label:"成都"}];return edges},updateNode:function(node){console.log(node)},updateEdge:function(edge){console.log(edge)}}}).factory("RegionService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.alldcregion,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!1,headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("MenuModule",["ngResource"]).factory("MenuService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.menu.v1,{timestamp:utilService.getTimestamp()},{list:{method:"GET",isArray:!0,params:{type:2},headers:$rootScope.authorization}})}]).factory("MenuServiceV2",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.menu.v2,{timestamp:utilService.getTimestamp()},{query:{method:"GET",isArray:!0,headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular);exports.default=_angular2.default.module("KeyBindModule",[]).constant("keyCodes",{esc:27,space:32,enter:13,tab:9,backspace:8,shift:16,ctrl:17,alt:18,capslock:20,numlock:144}).directive("keyBind",["keyCodes",function(keyCodes){function map(obj){var mapped={};for(var key in obj){var action=obj[key];keyCodes.hasOwnProperty(key)&&(mapped[keyCodes[key]]=action)}return mapped}return function(scope,element,attrs){var bindings=map(scope.$eval(attrs.keyBind));element.bind("keydown keypress",function(event){bindings.hasOwnProperty(event.which)&&scope.$apply(function(){scope.$eval(bindings[event.which])})})}}]).directive("dynamicModel",["$compile","$parse",function($compile,$parse){return{restrict:"A",terminal:!0,priority:1e5,link:function(scope,elem){var name=$parse(elem.attr("dynamic-model"))(scope);elem.removeAttr("dynamic-model"),elem.attr("ng-model","assetModel."+name),$compile(elem)(scope)}}}]).name},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular);exports.default=_angular2.default.module("StateColorModule",[]).directive("ngStateColor",function(StateColorService){return{restrict:"EA",scope:{colors:"=",selectedColor:"=selected"},link:function(scope,element,attributes){scope.selected=function(data){scope.selectedColor=data.Color}},templateUrl:"dest/js/directive/state-color.html"}}).name},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular),_angularRoute=__webpack_require__(89),_angularRoute2=_interopRequireDefault(_angularRoute),_angularUiRouter=__webpack_require__(91),_angularUiRouter2=_interopRequireDefault(_angularUiRouter),_angularCookies=__webpack_require__(92),_angularCookies2=_interopRequireDefault(_angularCookies);__webpack_require__(94),exports.default=_angular2.default.module("CmdbRouteModule",[_angularRoute2.default,_angularCookies2.default,_angularUiRouter2.default,"ncy-angular-breadcrumb"]).constant("CmdbConfig",{templatePath:"dest/template/",cmdbviews:{baseRouter:"root",slidebar:"slidebar@root",reportContent:"content@root.report",systemContent:"content@root.system",resourceContent:"content@root.manageresources"}}).config(["$locationProvider","$interpolateProvider","$routeProvider","$stateProvider","$urlRouterProvider","$httpProvider","CmdbConfig","$compileProvider","$breadcrumbProvider","$qProvider",function($locationProvider,$interpolateProvider,$routeProvider,$stateProvider,$urlRouterProvider,$httpProvider,CmdbConfig,$compileProvider,$breadcrumbProvider,$qProvider){$qProvider.errorOnUnhandledRejections(!1),$locationProvider.html5Mode({enabled:!0,requireBase:!0}).hashPrefix("!"),$urlRouterProvider.otherwise("/login"),$breadcrumbProvider.setOptions({template:"bootstrap3",includeAbstract:!0}),$stateProvider.state("login",{url:"/login",controller:"LoginController",templateUrl:CmdbConfig.templatePath+"login/login.html",onEnter:function($transitions,$state,$timeout,$location,AuthenticationService){return"/login"!=$location.path()||!AuthenticationService.IsAuthenticated()||$state.target("root.dashboard")}}).state("logout",{url:"/logout",controller:"LogoutController"}).state("pdfview",{url:"/pdfview",authenticate:!0}).state("root",{abstract:!0,url:"/home",views:{"":{templateUrl:CmdbConfig.templatePath+"home/home.html",controller:"HomeController"}},ncyBreadcrumb:{skip:!0},authenticate:!0}).state("root.report",{url:"/report",ncyBreadcrumb:{label:"资源报表"},views:{"slidebar@root":{templateUrl:CmdbConfig.templatePath+"layout/slide-bar.html",controller:function($scope,$state,$stateParams,MenuServiceV2){MenuServiceV2.query({type:"report"},function(response){$scope.leftMenus=response}),$scope.activeLeftMenu="root.report.use"}},"wrappercontent@root":{templateUrl:CmdbConfig.templatePath+"layout/content.html",controller:function($scope,$state,$stateParams,MenuServiceV2){$scope.activeLeftMenu="root.report.use"}}},redirectTo:"root.report.usedetail",authenticate:!0}).state("root.report.devicedetail",{url:"/report/device",ncyBreadcrumb:{label:"设备性能报表详情"},views:{"content@root.report":{templateUrl:CmdbConfig.templatePath+"report/resource-performance-report.html"}},authenticate:!0}).state("root.report.financedetail",{url:"/report/finance",ncyBreadcrumb:{label:"财务报表详情"},views:{"content@root.report":{templateUrl:CmdbConfig.templatePath+"report/resource-finance-report.html"}},authenticate:!0}).state("root.report.usedetail",{url:"/report/use",ncyBreadcrumb:{label:"资源报表详情"},views:{"content@root.report":{templateUrl:CmdbConfig.templatePath+"report/resource-report.html"}},authenticate:!0}).state("root.dashboard",{url:"/dashboard",templateUrl:CmdbConfig.templatePath+"visualization/dashboard.html",authenticate:!0}).state("root.system",{url:"/system",ncyBreadcrumb:{label:"系统管理"},views:{"slidebar@root":{templateUrl:CmdbConfig.templatePath+"layout/slide-bar.html",controller:function($scope,$state,$stateParams,MenuServiceV2){$scope.activeLeftMenu="root.systemuser",MenuServiceV2.query({type:"system"},function(response){$scope.leftMenus=response})}},"wrappercontent@root":{templateUrl:CmdbConfig.templatePath+"layout/content.html",controller:function($scope,$state,$stateParams,MenuServiceV2){}}},redirectTo:"root.system.users",authenticate:!0}).state("root.system.users",{url:"/users",ncyBreadcrumb:{label:"用户列表"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_user.html"}},authenticate:!0}).state("root.system.roles",{url:"/roles",ncyBreadcrumb:{label:"菜单权限"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_role.html"}},authenticate:!0}).state("root.system.menus",{url:"/menus",ncyBreadcrumb:{label:"菜单管理"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_menu.html"}},authenticate:!0}).state("root.system.cloud",{url:"/cloud",ncyBreadcrumb:{label:"云帐号"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_cloud.html"}},authenticate:!0}).state("root.system.logs",{url:"/logs",ncyBreadcrumb:{label:"日志管理"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_log.html"}},authenticate:!0}).state("root.system.email",{url:"/email",ncyBreadcrumb:{label:"邮件管理"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_email.html"}},authenticate:!0}).state("root.system.modeling",{url:"/modeling",ncyBreadcrumb:{label:"资产建模"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/list/list_modeling.html"}},authenticate:!0}).state("root.system.apikey",{url:"/apikey",ncyBreadcrumb:{label:"密钥列表"},views:{"content@root.system":{templateUrl:CmdbConfig.templatePath+"system/system_accesskey.html"}},authenticate:!0}).state("root.visualization",{url:"/visualization",views:{"slidebar@root":{templateUrl:CmdbConfig.templatePath+"layout/slide-bar.html",controller:function($scope,$state,$stateParams,MenuServiceV2,$rootScope){
MenuServiceV2.query({type:"visualization"},function(response){$scope.leftMenus=response}),$rootScope.$on("resouceTreeEmit",function(event,data){$scope.activeLeft=!0})}},"wrappercontent@root":{templateUrl:CmdbConfig.templatePath+"visualization/rtree.html",controller:function($scope,$rootScope,$state){$rootScope.$on("resouceTreeEmit",function(event,data){$scope.activeLeft=!0}),$state.go("root.visualization.rtree"),$rootScope.activeLeftMenu="root.visualization.tree"}}},authenticate:!0}).state("root.visualization.rtree",{url:"/rtree",views:{"content@root.visualization":{templateUrl:CmdbConfig.templatePath+"visualization/rtree-map.html",controller:"ResourceTreeContentController"},"menu@root.visualization":{templateUrl:CmdbConfig.templatePath+"visualization/rtree-menu.html",controller:"ResourceTreeMenuController"}},templateUrl:CmdbConfig.templatePath+"visualization/rtree.html",controller:"ResourceTreeController",authenticate:!0}).state("root.visualization.rtree.details",{params:{object:{}},url:"/details",views:{"content@root.visualization":{templateUrl:CmdbConfig.templatePath+"visualization/rtree-details.html",controller:"ResourceTreeDetailsController"}}}).state("root.visualization.rtop",{url:"/rtop",views:{"wrappercontent@root":{templateUrl:CmdbConfig.templatePath+"visualization/rtop.html",controller:"ResourcesTopoController"}},authenticate:!0}).state("root.visualization.btop",{url:"/btop",views:{"wrappercontent@root":{templateUrl:CmdbConfig.templatePath+"visualization/btop.html",controller:"AppTopoController"}},authenticate:!0}).state("root.resource",{url:"/resource",templateUrl:CmdbConfig.templatePath+"resources/resources_quick.html",controller:"ResourcesQuickController",ncyBreadcrumb:{label:"资源管理"},authenticate:!0}).state("root.manageresources",{url:"/manageresources",params:{redirectTo:{}},ncyBreadcrumb:{parent:"root.resource",skip:!0},views:{"slidebar@root":{templateUrl:CmdbConfig.templatePath+"layout/slide-bar.html",controller:function($rootScope,$scope,$state,$stateParams,MenuServiceV2){_angular2.default.isObject($stateParams.redirectTo.Asserts)&&_angular2.default.isDefined($stateParams.redirectTo.Asserts.Name)?($scope.activeLeftMenu=$stateParams.redirectTo.Asserts.Name,MenuServiceV2.query({type:"resource"},function(response){$scope.leftMenus=response,$state.go("root.manageresources."+$stateParams.redirectTo.Name)})):$state.go("root.resource")}},"wrappercontent@root":{templateUrl:CmdbConfig.templatePath+"layout/content.html",controller:function($scope,$state,$stateParams,MenuServiceV2){}}},authenticate:!0}).state("root.manageresources.datacenter",{url:"/managedatacenter",ncyBreadcrumb:{label:"数据中心"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"datacenter/datacenter_manage.html"}},authenticate:!0}).state("root.manageresources.room",{url:"/manageroom",ncyBreadcrumb:{label:"机房"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"room/room_manage.html"}},authenticate:!0}).state("root.manageresources.rack",{url:"/managerack",ncyBreadcrumb:{label:"机柜"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"rack/rack_manage.html"}},authenticate:!0}).state("root.manageresources.bandwidth",{url:"/managebandwidth",ncyBreadcrumb:{label:"带宽"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"bandwidth/bandwidth_manage.html"}},authenticate:!0}).state("root.manageresources.hardware",{url:"/managebandhardware",ncyBreadcrumb:{label:"硬件"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"hardware/hardware_manage.html"}},authenticate:!0}).state("root.manageresources.server",{url:"/manageservers",ncyBreadcrumb:{label:"服务器"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"server/server_manage.html"}},authenticate:!0}).state("root.manageresources.ip",{url:"/manageip",ncyBreadcrumb:{label:"IP"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"ip/ip_manage.html"}},authenticate:!0}).state("root.ipdetails",{url:"/ipDetails",params:{object:null},templateUrl:CmdbConfig.templatePath+"ip/ip_detail.html",controller:"IpAddressController",authenticate:!0}).state("root.manageresources.domain",{url:"/managedomain",ncyBreadcrumb:{label:"域名"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"domain/domain_manage.html"}},authenticate:!0}).state("root.manageresources.app",{url:"/manageapp",ncyBreadcrumb:{label:"业务模块"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"app/app_manage.html"}},authenticate:!0}).state("root.manageresources.vcenter",{url:"/managevcenter",ncyBreadcrumb:{label:"Vcenter"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"vm/manage_vcenter_vm.html"}},authenticate:!0}).state("root.manageresources.supplier",{url:"/managesupplier",ncyBreadcrumb:{label:"供应商"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"supplier/supplier_manage.html"}},authenticate:!0}).state("root.manageresources.aliyun",{url:"/managealiyun",ncyBreadcrumb:{label:"阿里云"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"vm/manage_aliyun_vm.html"}},authenticate:!0}).state("root.manageresources.aws",{url:"/manageaws",ncyBreadcrumb:{label:"AWS"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"vm/manage_aws_vm.html"}},authenticate:!0}).state("root.manageresources.agreement",{url:"/manageagreement",ncyBreadcrumb:{label:"合同"},views:{"content@root.manageresources":{templateUrl:CmdbConfig.templatePath+"agreement/agreement_manage.html"}},authenticate:!0}),$httpProvider.interceptors.push("AppHttpInterceptor")}]).name},function(module,exports,__webpack_require__){__webpack_require__(90),module.exports="ngRoute"},function(module,exports){/**
	 * @license AngularJS v1.5.8
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key])}return dst||src}function $RouteProvider(){function inherit(parent,extra){return angular.extend(Object.create(parent),extra)}function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];return path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(_,slash,key,option){var optional="?"===option||"*?"===option?"?":null,star="*"===option||"*?"===option?"*":null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+path+"$",insensitive?"i":""),ret}isArray=angular.isArray,isObject=angular.isObject;var routes={};this.when=function(path,route){var routeCopy=shallowCopy(route);if(angular.isUndefined(routeCopy.reloadOnSearch)&&(routeCopy.reloadOnSearch=!0),angular.isUndefined(routeCopy.caseInsensitiveMatch)&&(routeCopy.caseInsensitiveMatch=this.caseInsensitiveMatch),routes[path]=angular.extend(routeCopy,path&&pathRegExp(path,routeCopy)),path){var redirectPath="/"==path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,routeCopy))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(params){return"string"==typeof params&&(params={redirectTo:params}),this.when(null,params),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function($rootScope,$location,$routeParams,$q,$injector,$templateRequest,$sce){function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1],val=m[i];key&&val&&(params[key.name]=val)}return params}function prepareRoute($locationEvent){var lastRoute=$route.current;preparedRoute=parseRoute(),preparedRouteIsUpdateOnly=preparedRoute&&lastRoute&&preparedRoute.$$route===lastRoute.$$route&&angular.equals(preparedRoute.pathParams,lastRoute.pathParams)&&!preparedRoute.reloadOnSearch&&!forceReload,preparedRouteIsUpdateOnly||!lastRoute&&!preparedRoute||$rootScope.$broadcast("$routeChangeStart",preparedRoute,lastRoute).defaultPrevented&&$locationEvent&&$locationEvent.preventDefault()}function commitRoute(){var lastRoute=$route.current,nextRoute=preparedRoute;preparedRouteIsUpdateOnly?(lastRoute.params=nextRoute.params,angular.copy(lastRoute.params,$routeParams),$rootScope.$broadcast("$routeUpdate",lastRoute)):(nextRoute||lastRoute)&&(forceReload=!1,$route.current=nextRoute,nextRoute&&nextRoute.redirectTo&&(angular.isString(nextRoute.redirectTo)?$location.path(interpolate(nextRoute.redirectTo,nextRoute.params)).search(nextRoute.params).replace():$location.url(nextRoute.redirectTo(nextRoute.pathParams,$location.path(),$location.search())).replace()),$q.when(nextRoute).then(resolveLocals).then(function(locals){nextRoute==$route.current&&(nextRoute&&(nextRoute.locals=locals,angular.copy(nextRoute.params,$routeParams)),$rootScope.$broadcast("$routeChangeSuccess",nextRoute,lastRoute))},function(error){nextRoute==$route.current&&$rootScope.$broadcast("$routeChangeError",nextRoute,lastRoute,error)}))}function resolveLocals(route){if(route){var locals=angular.extend({},route.resolve);angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value,null,null,key)});var template=getTemplateFor(route);return angular.isDefined(template)&&(locals.$template=template),$q.all(locals)}}function getTemplateFor(route){var template,templateUrl;return angular.isDefined(template=route.template)?angular.isFunction(template)&&(template=template(route.params)):angular.isDefined(templateUrl=route.templateUrl)&&(angular.isFunction(templateUrl)&&(templateUrl=templateUrl(route.params)),angular.isDefined(templateUrl)&&(route.loadedTemplateUrl=$sce.valueOf(templateUrl),template=$templateRequest(templateUrl))),template}function parseRoute(){var params,match;return angular.forEach(routes,function(route,path){!match&&(params=switchRouteMatcher($location.path(),route))&&(match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params}),match.$$route=route)}),match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}function interpolate(string,params){var result=[];return angular.forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(?:[?*])?(.*)/),key=segmentMatch[1];result.push(params[key]),result.push(segmentMatch[2]||""),delete params[key]}}),result.join("")}var preparedRoute,preparedRouteIsUpdateOnly,forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0;var fakeLocationEvent={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,forceReload=!1}};$rootScope.$evalAsync(function(){prepareRoute(fakeLocationEvent),fakeLocationEvent.defaultPrevented||commitRoute()})},updateParams:function(newParams){if(!this.current||!this.current.$$route)throw $routeMinErr("norout","Tried updating route when with no current route");newParams=angular.extend({},this.current.params,newParams),$location.path(interpolate(this.current.$$route.originalPath,newParams)),$location.search(newParams)}};return $rootScope.$on("$locationChangeStart",prepareRoute),$rootScope.$on("$locationChangeSuccess",commitRoute),$route}]}function $RouteParamsProvider(){this.$get=function(){return{}}}function ngViewFactory($route,$anchorScroll,$animate){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(scope,$element,attr,ctrl,$transclude){function cleanupLastView(){previousLeaveAnimation&&($animate.cancel(previousLeaveAnimation),previousLeaveAnimation=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&(previousLeaveAnimation=$animate.leave(currentElement),previousLeaveAnimation.then(function(){previousLeaveAnimation=null}),currentElement=null)}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(angular.isDefined(template)){var newScope=scope.$new(),current=$route.current,clone=$transclude(newScope,function(clone){$animate.enter(clone,null,currentElement||$element).then(function(){!angular.isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()}),cleanupLastView()});currentElement=clone,currentScope=current.scope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}else cleanupLastView()}var currentScope,currentElement,previousLeaveAnimation,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||"";scope.$on("$routeChangeSuccess",update),update()}}}function ngViewFillContentFactory($compile,$controller,$route){return{restrict:"ECA",priority:-400,link:function(scope,$element){var current=$route.current,locals=current.locals;$element.html(locals.$template);var link=$compile($element.contents());if(current.controller){locals.$scope=scope;var controller=$controller(current.controller,locals);current.controllerAs&&(scope[current.controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}scope[current.resolveAs||"$resolve"]=locals,link(scope)}}}var isArray,isObject,ngRouteModule=angular.module("ngRoute",["ng"]).provider("$route",$RouteProvider),$routeMinErr=angular.$$minErr("ngRoute");ngRouteModule.provider("$routeParams",$RouteParamsProvider),ngRouteModule.directive("ngView",ngViewFactory),ngRouteModule.directive("ngView",ngViewFillContentFactory),ngViewFactory.$inject=["$route","$anchorScroll","$animate"],ngViewFillContentFactory.$inject=["$compile","$controller","$route"]}(window,window.angular)},function(module,exports,__webpack_require__){(function(angular){/**
	 * State-based routing for AngularJS 1.x
	 * @version v1.0.0-rc.1
	 * @link https://ui-router.github.io
	 * @license MIT License, http://www.opensource.org/licenses/MIT
	 */
!function(global,factory){factory(exports,__webpack_require__(1))}(this,function(exports,ng_from_import){"use strict";function curry(fn){function curried(args){return args.length>=func_args_length?fn.apply(null,args):function(){return curried(args.concat([].slice.apply(arguments)))}}var initial_args=[].slice.apply(arguments,[1]),func_args_length=fn.length;return curried(initial_args)}function compose(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}}function pipe(){for(var funcs=[],_i=0;_i<arguments.length;_i++)funcs[_i]=arguments[_i];return compose.apply(null,[].slice.call(arguments).reverse())}function and(fn1,fn2){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn1.apply(null,args)&&fn2.apply(null,args)}}function or(fn1,fn2){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn1.apply(null,args)||fn2.apply(null,args)}}function invoke(fnName,args){return function(obj){return obj[fnName].apply(obj,args)}}function pattern(struct){return function(x){for(var i=0;i<struct.length;i++)if(struct[i][0](x))return struct[i][1](x)}}function isInjectable(val$$1){if(isArray(val$$1)&&val$$1.length){var head=val$$1.slice(0,-1),tail=val$$1.slice(-1);return!(head.filter(not(isString)).length||tail.filter(not(isFunction)).length)}return isFunction(val$$1)}function createProxyFunctions(source,target,bind,fnNames,latebind){void 0===latebind&&(latebind=!1);var bindFunction=function(fnName){return source()[fnName].bind(bind())},makeLateRebindFn=function(fnName){return function(){return target[fnName]=bindFunction(fnName),target[fnName].apply(null,arguments)}};return fnNames=fnNames||Object.keys(source()),fnNames.reduce(function(acc,name){return acc[name]=latebind?makeLateRebindFn(name):bindFunction(name),acc},target)}function _inArray(array,obj){return array.indexOf(obj)!==-1}function _removeFrom(array,obj){var idx=array.indexOf(obj);return idx>=0&&array.splice(idx,1),array}function _pushTo(arr,val$$1){return arr.push(val$$1),val$$1}function defaults(opts){void 0===opts&&(opts={});for(var defaultsList=[],_i=1;_i<arguments.length;_i++)defaultsList[_i-1]=arguments[_i];var defaults=merge.apply(null,[{}].concat(defaultsList));return extend({},defaults,pick(opts||{},Object.keys(defaults)))}function merge(dst){for(var objs=[],_i=1;_i<arguments.length;_i++)objs[_i-1]=arguments[_i];return forEach(objs,function(obj){forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function pickOmitImpl(predicate,obj){for(var keys=[],_i=2;_i<arguments.length;_i++)keys[_i-2]=arguments[_i];var objCopy={};for(var key in obj)predicate(keys,key)&&(objCopy[key]=obj[key]);return objCopy}function pick(obj){return pickOmitImpl.apply(null,[inArray].concat(restArgs(arguments)))}function omit(obj){var notInArray=function(array,item){return!inArray(array,item)};return pickOmitImpl.apply(null,[notInArray].concat(restArgs(arguments)))}function pluck(collection,propName){return map(collection,prop(propName))}function filter(collection,callback){var arr=isArray(collection),result=arr?[]:{},accept=arr?function(x){return result.push(x)}:function(x,key){return result[key]=x};return forEach(collection,function(item,i){callback(item,i)&&accept(item,i)}),result}function find(collection,callback){var result;return forEach(collection,function(item,i){result||callback(item,i)&&(result=item)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(item,i){return result[i]=callback(item,i)}),result}function pushR(arr,obj){return arr.push(obj),arr}function assertFn(predicateOrMap,errMsg){return void 0===errMsg&&(errMsg="assert failure"),function(obj){var result=predicateOrMap(obj);if(!result)throw new Error(isFunction(errMsg)?errMsg(obj):errMsg);return result}}function arrayTuples(){for(var arrayArgs=[],_i=0;_i<arguments.length;_i++)arrayArgs[_i]=arguments[_i];if(0===arrayArgs.length)return[];var length=arrayArgs.reduce(function(min,arr){return Math.min(arr.length,min)},9007199254740991);return Array.apply(null,Array(length)).map(function(ignored,idx){return arrayArgs.map(function(arr){return arr[idx]})})}function applyPairs(memo,keyValTuple){var key,value;if(isArray(keyValTuple)&&(key=keyValTuple[0],value=keyValTuple[1]),!isString(key))throw new Error("invalid parameters to applyPairs");return memo[key]=value,memo}function tail(arr){return arr.length&&arr[arr.length-1]||void 0}function _copy(src,dest){return dest&&Object.keys(dest).forEach(function(key){return delete dest[key]}),dest||(dest={}),extend(dest,src)}function _forEach(obj,cb,_this){return isArray(obj)?obj.forEach(cb,_this):void Object.keys(obj).forEach(function(key){return cb(obj[key],key)})}function _copyProps(to,from){return Object.keys(from).forEach(function(key){return to[key]=from[key]}),to}function _extend(toObj){return restArgs(arguments,1).filter(identity).reduce(_copyProps,toObj)}function _equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var t1=typeof o1,t2=typeof o2;if(t1!==t2||"object"!==t1)return!1;var tup=[o1,o2];if(all(isArray)(tup))return _arraysEq(o1,o2);if(all(isDate)(tup))return o1.getTime()===o2.getTime();if(all(isRegExp)(tup))return o1.toString()===o2.toString();if(all(isFunction)(tup))return!0;var predicates=[isFunction,isArray,isDate,isRegExp];if(predicates.map(any).reduce(function(b,fn){return b||!!fn(tup)},!1))return!1;var key,keys={};for(key in o1){if(!_equals(o1[key],o2[key]))return!1;keys[key]=!0}for(key in o2)if(!keys[key])return!1;return!0}function _arraysEq(a1,a2){return a1.length===a2.length&&arrayTuples(a1,a2).reduce(function(b,t){return b&&_equals(t[0],t[1])},!0)}function uiViewString(viewData){return viewData?"[ui-view#"+viewData.id+" tag "+("in template from '"+(viewData.creationContext&&viewData.creationContext.name||"(root)")+"' state]: ")+("fqn: '"+viewData.fqn+"', ")+("name: '"+viewData.name+"@"+viewData.creationContext+"')"):"ui-view (defunct)"}function normalizedCat(input){return isNumber(input)?exports.Category[input]:exports.Category[exports.Category[input]]}function matchState(state,criterion){function matchGlobs(_state){for(var globStrings=toMatch,i=0;i<globStrings.length;i++){var glob=new Glob(globStrings[i]);if(glob&&glob.matches(_state.name)||!glob&&globStrings[i]===_state.name)return!0}return!1}var toMatch=isString(criterion)?[criterion]:criterion,matchFn=isFunction(toMatch)?toMatch:matchGlobs;return!!matchFn(state)}function makeEvent(registry,transitionService,eventType){function hookRegistrationFn(matchObject,callback,options){void 0===options&&(options={});var registeredHook=new RegisteredHook(transitionService,eventType,callback,matchObject,options);return hooks.push(registeredHook),function(){registeredHook._deregistered=!0,removeFrom(hooks)(registeredHook)}}var _registeredHooks=registry._registeredHooks=registry._registeredHooks||{},hooks=_registeredHooks[eventType.name]=[];return registry[eventType.name]=hookRegistrationFn,hookRegistrationFn}function tupleSort(reverseDepthSort){return void 0===reverseDepthSort&&(reverseDepthSort=!1),function(l,r){var factor=reverseDepthSort?-1:1,depthDelta=(l.node.state.path.length-r.node.state.path.length)*factor;return 0!==depthDelta?depthDelta:r.hook.priority-l.hook.priority}}function ArrayType(type,mode){function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return;case 1:return"auto"===mode?val[0]:val;default:return val}}function arrayHandler(callback,allTruthyMode){return function(val){if(isArray(val)&&0===val.length)return val;var arr=arrayWrap(val),result=map(arr,callback);return allTruthyMode===!0?0===filter(result,function(x){return!x}).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}var _this=this;["encode","decode","equals","$normalize"].forEach(function(name){var paramTypeFn=type[name].bind(type),wrapperFn="equals"===name?arrayEqualsHandler:arrayHandler;_this[name]=wrapperFn(paramTypeFn)}),extend(this,{dynamic:type.dynamic,name:type.name,pattern:type.pattern,inherit:type.inherit,is:arrayHandler(type.is.bind(type),!0),$arrayMode:mode})}function unwrapShorthand(cfg){return cfg=isShorthand(cfg)&&{value:cfg}||cfg,extend(cfg,{$$fn:isInjectable(cfg.value)?cfg.value:function(){return cfg.value}})}function getType(cfg,urlType,location,id,paramTypes){if(cfg.type&&urlType&&"string"!==urlType.name)throw new Error("Param '"+id+"' has two type configurations.");if(cfg.type&&urlType&&"string"===urlType.name&&paramTypes.type(cfg.type))return paramTypes.type(cfg.type);if(urlType)return urlType;if(!cfg.type){var type=location===exports.DefType.CONFIG?"any":location===exports.DefType.PATH?"path":location===exports.DefType.SEARCH?"query":"string";return paramTypes.type(type)}return cfg.type instanceof ParamType?cfg.type:paramTypes.type(cfg.type)}function getSquashPolicy(config,isOptional,defaultPolicy){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?void 0:""},{from:null,to:isOptional||arrayMode?void 0:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:void 0}),configuredKeys=map(replace,prop("from")),filter(defaultPolicy,function(item){return configuredKeys.indexOf(item.from)===-1}).concat(replace)}function quoteRegExp(string,param){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!param)return result;switch(param.squash){case!1:surroundPattern=["(",")"+(param.isOptional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+param.squash+"|",")?"]}return result+surroundPattern[0]+param.type.pattern.source+surroundPattern[1]}function initDefaultTypes(){var makeDefaultType=function(def){var valToString=function(val$$1){return null!=val$$1?val$$1.toString():val$$1},defaultTypeBase={encode:valToString,decode:valToString,is:is(String),pattern:/.*/,equals:function(a,b){return a==b}};return extend({},defaultTypeBase,def)};extend(ParamTypes.prototype,{string:makeDefaultType({}),path:makeDefaultType({pattern:/[^\/]*/}),query:makeDefaultType({}),hash:makeDefaultType({inherit:!1}),int:makeDefaultType({decode:function(val$$1){return parseInt(val$$1,10)},is:function(val$$1){return!isNullOrUndefined(val$$1)&&this.decode(val$$1.toString())===val$$1},pattern:/-?\d+/}),bool:makeDefaultType({encode:function(val$$1){return val$$1&&1||0},decode:function(val$$1){return 0!==parseInt(val$$1,10)},is:is(Boolean),pattern:/0|1/}),date:makeDefaultType({encode:function(val$$1){return this.is(val$$1)?[val$$1.getFullYear(),("0"+(val$$1.getMonth()+1)).slice(-2),("0"+val$$1.getDate()).slice(-2)].join("-"):void 0},decode:function(val$$1){if(this.is(val$$1))return val$$1;var match=this.capture.exec(val$$1);return match?new Date(match[1],match[2]-1,match[3]):void 0},is:function(val$$1){return val$$1 instanceof Date&&!isNaN(val$$1.valueOf())},equals:function(l,r){return["getFullYear","getMonth","getDate"].reduce(function(acc,fn){return acc&&l[fn]()===r[fn]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:makeDefaultType({encode:toJson,decode:fromJson,is:is(Object),equals:equals,pattern:/[^\/]*/}),any:makeDefaultType({encode:identity,decode:identity,is:function(){return!0},equals:equals})})}function appendBasePath(url,isHtml5,absolute,baseHref){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function makeEnterExitRetainHook(hookName){return function(transition,state){var hookFn=state[hookName];return hookFn(transition,state)}}function lazyLoadState(transition,state){function updateStateRegistry(result){return result&&Array.isArray(result.states)&&result.states.forEach(function(state){return transition.router.stateRegistry.register(state)}),result}var lazyLoadFn=state.lazyLoad,promise=lazyLoadFn._promise;if(!promise){var success=function(result){return delete state.lazyLoad,delete state.$$state().lazyLoad,delete lazyLoadFn._promise,result},error=function(err){return delete lazyLoadFn._promise,services.$q.reject(err)};promise=lazyLoadFn._promise=services.$q.when(lazyLoadFn(transition,state)).then(updateStateRegistry).then(success,error)}return promise}function nameBuilder(state){return state.name}function selfBuilder(state){return state.self.$$state=function(){return state},state.self}function dataBuilder(state){return state.parent&&state.parent.data&&(state.data=state.self.data=inherit(state.parent.data,state.data)),state.data}function pathBuilder(state){return state.parent?state.parent.path.concat(state):[state]}function includesBuilder(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes}function resolvablesBuilder(state){var objects2Tuples=function(resolveObj,resolvePolicies){return Object.keys(resolveObj||{}).map(function(token){return{token:token,val:resolveObj[token],deps:void 0,policy:resolvePolicies[token]}})},annotate=function(fn){var $injector=services.$injector;return fn.$inject||$injector&&$injector.annotate(fn,$injector.strictDi)||"deferred"},isResolveLiteral=function(obj){return!(!obj.token||!obj.resolveFn)},isLikeNg2Provider=function(obj){return!(!obj.provide&&!obj.token||!(obj.useValue||obj.useFactory||obj.useExisting||obj.useClass))},isTupleFromObj=function(obj){return!!(obj&&obj.val&&(isString(obj.val)||isArray(obj.val)||isFunction(obj.val)))},token=function(p){return p.provide||p.token},literal2Resolvable=pattern([[prop("resolveFn"),function(p){return new Resolvable(token(p),p.resolveFn,p.deps,p.policy)}],[prop("useFactory"),function(p){return new Resolvable(token(p),p.useFactory,p.deps||p.dependencies,p.policy)}],[prop("useClass"),function(p){return new Resolvable(token(p),function(){return new p.useClass},[],p.policy)}],[prop("useValue"),function(p){return new Resolvable(token(p),function(){return p.useValue},[],p.policy,p.useValue)}],[prop("useExisting"),function(p){return new Resolvable(token(p),identity,[p.useExisting],p.policy)}]]),tuple2Resolvable=pattern([[pipe(prop("val"),isString),function(tuple){return new Resolvable(tuple.token,identity,[tuple.val],tuple.policy)}],[pipe(prop("val"),isArray),function(tuple){return new Resolvable(tuple.token,tail(tuple.val),tuple.val.slice(0,-1),tuple.policy)}],[pipe(prop("val"),isFunction),function(tuple){return new Resolvable(tuple.token,tuple.val,annotate(tuple.val),tuple.policy)}]]),item2Resolvable=pattern([[is(Resolvable),function(r){return r}],[isResolveLiteral,literal2Resolvable],[isLikeNg2Provider,literal2Resolvable],[isTupleFromObj,tuple2Resolvable],[val(!0),function(obj){throw new Error("Invalid resolve value: "+stringify(obj))}]]),decl=state.resolve,items=isArray(decl)?decl:objects2Tuples(decl,state.resolvePolicy||{});return items.map(item2Resolvable)}function maxLength(max,str){return str.length<=max?str:str.substr(0,max-3)+"..."}function padString(length,str){for(;str.length<length;)str+=" ";return str}function kebobString(camelCase){return camelCase.replace(/^([A-Z])/,function($1){return $1.toLowerCase()}).replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function functionToString(fn){var fnStr=fnToString(fn),namedFunctionMatch=fnStr.match(/^(function [^ ]+\([^)]*\))/),toStr=namedFunctionMatch?namedFunctionMatch[1]:fnStr,fnName=fn.name||"";return fnName&&toStr.match(/function \(/)?"function "+fnName+toStr.substr(9):toStr}function fnToString(fn){var _fn=isArray(fn)?fn.slice(-1)[0]:fn;return _fn&&_fn.toString()||"undefined"}function stringify(o){function format(val$$1){if(isObject(val$$1)){if(seen.indexOf(val$$1)!==-1)return"[circular ref]";seen.push(val$$1)}return stringifyPattern(val$$1)}var seen=[];return JSON.stringify(o,function(key,val$$1){return format(val$$1)}).replace(/\\"/g,'"')}function splitOnDelim(delim){var re=new RegExp("("+delim+")","g");return function(str){return str.split(re).filter(identity)}}function joinNeighborsR(acc,x){return isString(tail(acc))&&isString(x)?acc.slice(0,-1).concat(tail(acc)+x):pushR(acc,x)}function getNg1ViewConfigFactory(){var templateFactory=null;return function(path,view){return templateFactory=templateFactory||services.$injector.get("$templateFactory"),[new Ng1ViewConfig(path,view,templateFactory)]}}function ng1ViewsBuilder(state){if(!state.parent)return{};var tplKeys=["templateProvider","templateUrl","template","notify","async"],ctrlKeys=["controller","controllerProvider","controllerAs","resolveAs"],compKeys=["component","bindings","componentProvider"],nonCompKeys=tplKeys.concat(ctrlKeys),allKeys=compKeys.concat(nonCompKeys),views={},viewsObject=state.views||{$default:pick(state,allKeys)};return forEach(viewsObject,function(config,name){if(name=name||"$default",isString(config)&&(config={component:config}),hasAnyKey(compKeys,config)&&hasAnyKey(nonCompKeys,config))throw new Error("Cannot combine: "+compKeys.join("|")+" with: "+nonCompKeys.join("|")+" in stateview: '"+name+"@"+state.name+"'");config.resolveAs=config.resolveAs||"$resolve",config.$type="ng1",config.$context=state,config.$name=name;var normalized=ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName,config.$uiViewContextAnchor=normalized.uiViewContextAnchor,views[name]=config}),views}function getComponentBindings(name){var cmpDefs=services.$injector.get(name+"Directive");if(!cmpDefs||!cmpDefs.length)throw new Error("Unable to find component named '"+name+"'");return cmpDefs.map(getBindings).reduce(unnestR,[])}function $uiRouter($locationProvider){function $get($location,$browser,$sniffer,$rootScope,$http,$templateCache){return ng1LocationService._runtimeServices($rootScope,$location,$sniffer,$browser),delete router.router,delete router.$get,router}router=this.router=new UIRouter,router.stateProvider=new StateProvider(router.stateRegistry,router.stateService),router.stateRegistry.decorator("views",ng1ViewsBuilder),router.stateRegistry.decorator("onExit",getStateHookBuilder("onExit")),router.stateRegistry.decorator("onRetain",getStateHookBuilder("onRetain")),router.stateRegistry.decorator("onEnter",getStateHookBuilder("onEnter")),router.viewService._pluginapi._viewConfigFactory("ng1",getNg1ViewConfigFactory());var ng1LocationService=router.locationService=router.locationConfig=new Ng1LocationServices($locationProvider);return Ng1LocationServices.monkeyPatchPathParameterType(router),router.router=router,router.$get=$get,$get.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],router}function runBlock($injector,$q,$uiRouter){services.$injector=$injector,services.$q=$q,$uiRouter.stateRegistry.get().map(function(x){return x.$$state().resolvables}).reduce(unnestR,[]).filter(function(x){return"deferred"===x.deps}).forEach(function(resolvable){return resolvable.deps=$injector.annotate(resolvable.resolveFn)})}function watchDigests($rootScope){$rootScope.$watch(function(){trace.approximateDigests++})}function parseStateRef(ref){var parsed,paramsOnly=ref.match(/^\s*({[^}]*})\s*$/);if(paramsOnly&&(ref="("+paramsOnly[1]+")"),parsed=ref.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1]||null,paramExpr:parsed[3]||null}}function stateContext(el){var $uiView=el.parent().inheritedData("$uiView"),path=parse("$cfg.path")($uiView);return path?tail(path).state.name:void 0}function processedDef($state,$element,def){var uiState=def.uiState||$state.current.name,uiStateOpts=extend(defaultOpts($element,$state),def.uiStateOpts||{}),href=$state.href(uiState,def.uiStateParams,uiStateOpts);return{uiState:uiState,uiStateParams:def.uiStateParams,uiStateOpts:uiStateOpts,href:href}}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,getDef){return function(e){var button=e.which||e.button,target=getDef();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout(function(){$state.go(target.uiState,target.uiStateParams,target.uiStateOpts)});e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0,source:"sref"}}function $IsStateFilter($state){var isFilter=function(state,params,options){return $state.is(state,params,options)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}function $ViewDirectiveFill($compile,$controller,$transitions,$view,$timeout){var getControllerAs=parse("viewDecl.controllerAs"),getResolveAs=parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return tElement.empty(),function(scope,$element){var data=$element.data("$uiView");if(!data)return $element.html(initial),void $compile($element.contents())(scope);var cfg=data.$cfg||{viewDecl:{},getTemplate:ng_from_import.noop},resolveCtx=cfg.path&&new ResolveContext(cfg.path);$element.html(cfg.getTemplate($element,resolveCtx)||initial),trace.traceUIViewFill(data.$uiView,$element.html());var link=$compile($element.contents()),controller=cfg.controller,controllerAs=getControllerAs(cfg),resolveAs=getResolveAs(cfg),locals=resolveCtx&&getLocals(resolveCtx);if(scope[resolveAs]=locals,controller){var controllerInstance=$controller(controller,extend({},locals,{$scope:scope,$element:$element}));controllerAs&&(scope[controllerAs]=controllerInstance,scope[controllerAs][resolveAs]=locals),$element.data("$ngControllerController",controllerInstance),$element.children().data("$ngControllerController",controllerInstance),registerControllerCallbacks($transitions,controllerInstance,scope,cfg)}if(isString(cfg.viewDecl.component))var cmp_1=cfg.viewDecl.component,kebobName_1=kebobString(cmp_1),getComponentController=function(){var directiveEl=[].slice.call($element[0].children).filter(function(el){return el&&el.tagName&&el.tagName.toLowerCase()===kebobName_1});return directiveEl&&ng.element(directiveEl).data("$"+cmp_1+"Controller")},deregisterWatch_1=scope.$watch(getComponentController,function(ctrlInstance){ctrlInstance&&(registerControllerCallbacks($transitions,ctrlInstance,scope,cfg),deregisterWatch_1())});link(scope)}}}}function registerControllerCallbacks($transitions,controllerInstance,$scope,cfg){!isFunction(controllerInstance.$onInit)||cfg.viewDecl.component&&hasComponentImpl||controllerInstance.$onInit();var viewState=tail(cfg.path).state.self,hookOptions={bind:controllerInstance};if(isFunction(controllerInstance.uiOnParamsChanged)){var resolveContext=new ResolveContext(cfg.path),viewCreationTrans_1=resolveContext.getResolvable("$transition$").data,paramsUpdated=function($transition$){if($transition$!==viewCreationTrans_1&&$transition$.exiting().indexOf(viewState)===-1){var toParams=$transition$.params("to"),fromParams=$transition$.params("from"),toSchema=$transition$.treeChanges().to.map(function(node){return node.paramSchema}).reduce(unnestR,[]),fromSchema=$transition$.treeChanges().from.map(function(node){return node.paramSchema}).reduce(unnestR,[]),changedToParams=toSchema.filter(function(param){var idx=fromSchema.indexOf(param);return idx===-1||!fromSchema[idx].type.equals(toParams[param.id],fromParams[param.id])});if(changedToParams.length){var changedKeys_1=changedToParams.map(function(x){return x.id}),newValues=filter(toParams,function(val$$1,key){return changedKeys_1.indexOf(key)!==-1});controllerInstance.uiOnParamsChanged(newValues,$transition$)}}};$scope.$on("$destroy",$transitions.onSuccess({},paramsUpdated,hookOptions))}if(isFunction(controllerInstance.uiCanExit)){var criteria={exiting:viewState.name};$scope.$on("$destroy",$transitions.onBefore(criteria,controllerInstance.uiCanExit,hookOptions))}}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}var prop=function(name){return function(obj){return obj&&obj[name]}},propEq=curry(function(name,val,obj){return obj&&obj[name]===val}),parse=function(name){return pipe.apply(null,name.split(".").map(prop))},not=function(fn){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return!fn.apply(null,args)}},all=function(fn1){return function(arr){return arr.reduce(function(b,x){return b&&!!fn1(x)},!0)}},any=function(fn1){return function(arr){return arr.reduce(function(b,x){return b||!!fn1(x)},!1)}},is=function(ctor){return function(obj){return null!=obj&&obj.constructor===ctor||obj instanceof ctor}},eq=function(val){return function(other){return val===other}},val=function(v){return function(){return v}},toStr=Object.prototype.toString,tis=function(t){return function(x){return typeof x===t}},isUndefined=tis("undefined"),isDefined=not(isUndefined),isNull=function(o){return null===o},isNullOrUndefined=or(isNull,isUndefined),isFunction=tis("function"),isNumber=tis("number"),isString=tis("string"),isObject=function(x){return null!==x&&"object"==typeof x},isArray=Array.isArray,isDate=function(x){return"[object Date]"===toStr.call(x)},isRegExp=function(x){return"[object RegExp]"===toStr.call(x)},isPromise=and(isObject,pipe(prop("then"),isFunction)),notImplemented=function(fnname){return function(){throw new Error(fnname+"(): No coreservices implementation for UI-Router is loaded.")}},services={$q:void 0,$injector:void 0},w="undefined"==typeof window?{}:window,angular$1=w.angular||{},fromJson=angular$1.fromJson||JSON.parse.bind(JSON),toJson=angular$1.toJson||JSON.stringify.bind(JSON),copy=angular$1.copy||_copy,forEach=angular$1.forEach||_forEach,extend=angular$1.extend||_extend,equals=angular$1.equals||_equals,identity=function(x){return x},noop$1=function(){},inherit=function(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)},restArgs=function(args,idx){return void 0===idx&&(idx=0),Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(args,idx))},inArray=curry(_inArray),removeFrom=curry(_removeFrom),pushTo=curry(_pushTo),deregAll=function(functions){return functions.slice().forEach(function(fn){"function"==typeof fn&&fn(),removeFrom(functions,fn)})},mergeR=function(memo,item){return extend(memo,item)},mapObj=map,values=function(obj){return Object.keys(obj).map(function(key){return obj[key]})},allTrueR=function(memo,elem){return memo&&elem},anyTrueR=function(memo,elem){return memo||elem},unnestR=function(memo,elem){return memo.concat(elem)},flattenR=function(memo,elem){return isArray(elem)?memo.concat(elem.reduce(flattenR,[])):pushR(memo,elem)},uniqR=function(acc,token){return inArray(acc,token)?acc:pushR(acc,token)},unnest=function(arr){return arr.reduce(unnestR,[])},flatten=function(arr){return arr.reduce(flattenR,[])},assertPredicate=assertFn,assertMap=assertFn,pairs=function(obj){return Object.keys(obj).map(function(key){return[key,obj[key]]})},sortBy=function(propFn,checkFn){return void 0===checkFn&&(checkFn=val(!0)),function(a,b){return checkFn(a)&&checkFn(b)?propFn(a)-propFn(b):0}},composeSort=function(){for(var sortFns=[],_i=0;_i<arguments.length;_i++)sortFns[_i]=arguments[_i];return function(a,b){return sortFns.reduce(function(prev,fn){return prev||fn(a,b)},0)}},silenceUncaughtInPromise=function(promise){return promise.catch(function(e){return 0})&&promise},silentRejection=function(error){return silenceUncaughtInPromise(services.$q.reject(error))},Glob=function(){function Glob(text){this.text=text,this.glob=text.split(".");var regexpString=this.text.split(".").map(function(seg){return"**"===seg?"(?:|(?:\\.[^.]*)*)":"*"===seg?"\\.[^.]*":"\\."+seg}).join("");this.regexp=new RegExp("^"+regexpString+"$")}return Glob.prototype.matches=function(name){return this.regexp.test("."+name)},Glob.is=function(text){return text.indexOf("*")>-1},Glob.fromString=function(text){return this.is(text)?new Glob(text):null},Glob}(),Queue=function(){function Queue(_items,_limit){void 0===_items&&(_items=[]),void 0===_limit&&(_limit=null),this._items=_items,this._limit=_limit}return Queue.prototype.enqueue=function(item){var items=this._items;return items.push(item),this._limit&&items.length>this._limit&&items.shift(),item},Queue.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},Queue.prototype.clear=function(){var current=this._items;return this._items=[],current},Queue.prototype.size=function(){return this._items.length},Queue.prototype.remove=function(item){var idx=this._items.indexOf(item);return idx>-1&&this._items.splice(idx,1)[0]},Queue.prototype.peekTail=function(){return this._items[this._items.length-1]},Queue.prototype.peekHead=function(){if(this.size())return this._items[0]},Queue}();!function(RejectType){RejectType[RejectType.SUPERSEDED=2]="SUPERSEDED",RejectType[RejectType.ABORTED=3]="ABORTED",RejectType[RejectType.INVALID=4]="INVALID",RejectType[RejectType.IGNORED=5]="IGNORED",RejectType[RejectType.ERROR=6]="ERROR"}(exports.RejectType||(exports.RejectType={}));var Rejection=function(){function Rejection(type,message,detail){this.type=type,this.message=message,this.detail=detail}return Rejection.prototype.toString=function(){var detailString=function(d){return d&&d.toString!==Object.prototype.toString?d.toString():stringify(d)},type=this.type,message=this.message,detail=detailString(this.detail);return"TransitionRejection(type: "+type+", message: "+message+", detail: "+detail+")"},Rejection.prototype.toPromise=function(){return extend(silentRejection(this),{_transitionRejection:this})},Rejection.isTransitionRejectionPromise=function(obj){return obj&&"function"==typeof obj.then&&obj._transitionRejection instanceof Rejection},Rejection.superseded=function(detail,options){var message="The transition has been superseded by a different transition",rejection=new Rejection(exports.RejectType.SUPERSEDED,message,detail);return options&&options.redirected&&(rejection.redirected=!0),rejection},Rejection.redirected=function(detail){return Rejection.superseded(detail,{redirected:!0})},Rejection.invalid=function(detail){var message="This transition is invalid";return new Rejection(exports.RejectType.INVALID,message,detail)},Rejection.ignored=function(detail){var message="The transition was ignored";return new Rejection(exports.RejectType.IGNORED,message,detail)},Rejection.aborted=function(detail){var message="The transition has been aborted";return new Rejection(exports.RejectType.ABORTED,message,detail)},Rejection.errored=function(detail){var message="The transition errored";return new Rejection(exports.RejectType.ERROR,message,detail);
},Rejection}(),viewConfigString=function(viewConfig){return"[ViewConfig#"+viewConfig.$id+" from '"+(viewConfig.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+viewConfig.viewDecl.$uiViewName+"@"+viewConfig.viewDecl.$uiViewContextAnchor+"'"};!function(Category){Category[Category.RESOLVE=0]="RESOLVE",Category[Category.TRANSITION=1]="TRANSITION",Category[Category.HOOK=2]="HOOK",Category[Category.UIVIEW=3]="UIVIEW",Category[Category.VIEWCONFIG=4]="VIEWCONFIG"}(exports.Category||(exports.Category={}));var Trace=function(){function Trace(){this._enabled={},this.approximateDigests=0}return Trace.prototype._set=function(enabled,categories){var _this=this;categories.length||(categories=Object.keys(exports.Category).map(function(k){return parseInt(k,10)}).filter(function(k){return!isNaN(k)}).map(function(key){return exports.Category[key]})),categories.map(normalizedCat).forEach(function(category){return _this._enabled[category]=enabled})},Trace.prototype.enable=function(){for(var categories=[],_i=0;_i<arguments.length;_i++)categories[_i]=arguments[_i];this._set(!0,categories)},Trace.prototype.disable=function(){for(var categories=[],_i=0;_i<arguments.length;_i++)categories[_i]=arguments[_i];this._set(!1,categories)},Trace.prototype.enabled=function(category){return!!this._enabled[normalizedCat(category)]},Trace.prototype.traceTransitionStart=function(trans){if(this.enabled(exports.Category.TRANSITION)){var tid=trans.$id,transitionStr=(this.approximateDigests,stringify(trans));console.log("Transition #"+tid+" r"+trans.router.$id+": Started  -> "+transitionStr)}},Trace.prototype.traceTransitionIgnored=function(trans){if(this.enabled(exports.Category.TRANSITION)){var tid=trans&&trans.$id,transitionStr=(this.approximateDigests,stringify(trans));console.log("Transition #"+tid+" r"+trans.router.$id+": Ignored  <> "+transitionStr)}},Trace.prototype.traceHookInvocation=function(step,trans,options){if(this.enabled(exports.Category.HOOK)){var tid=parse("transition.$id")(options),event=(this.approximateDigests,parse("traceData.hookType")(options)||"internal"),context=parse("traceData.context.state.name")(options)||parse("traceData.context")(options)||"unknown",name=functionToString(step.registeredHook.callback);console.log("Transition #"+tid+" r"+trans.router.$id+":   Hook -> "+event+" context: "+context+", "+maxLength(200,name))}},Trace.prototype.traceHookResult=function(hookResult,trans,transitionOptions){if(this.enabled(exports.Category.HOOK)){var tid=parse("transition.$id")(transitionOptions),hookResultStr=(this.approximateDigests,stringify(hookResult));console.log("Transition #"+tid+" r"+trans.router.$id+":   <- Hook returned: "+maxLength(200,hookResultStr))}},Trace.prototype.traceResolvePath=function(path,when,trans){if(this.enabled(exports.Category.RESOLVE)){var tid=trans&&trans.$id,pathStr=(this.approximateDigests,path&&path.toString());console.log("Transition #"+tid+" r"+trans.router.$id+":         Resolving "+pathStr+" ("+when+")")}},Trace.prototype.traceResolvableResolved=function(resolvable,trans){if(this.enabled(exports.Category.RESOLVE)){var tid=trans&&trans.$id,resolvableStr=(this.approximateDigests,resolvable&&resolvable.toString()),result=stringify(resolvable.data);console.log("Transition #"+tid+" r"+trans.router.$id+":               <- Resolved  "+resolvableStr+" to: "+maxLength(200,result))}},Trace.prototype.traceError=function(reason,trans){if(this.enabled(exports.Category.TRANSITION)){var tid=trans&&trans.$id,transitionStr=(this.approximateDigests,stringify(trans));console.log("Transition #"+tid+" r"+trans.router.$id+": <- Rejected "+transitionStr+", reason: "+reason)}},Trace.prototype.traceSuccess=function(finalState,trans){if(this.enabled(exports.Category.TRANSITION)){var tid=trans&&trans.$id,state=(this.approximateDigests,finalState.name),transitionStr=stringify(trans);console.log("Transition #"+tid+" r"+trans.router.$id+": <- Success  "+transitionStr+", final state: "+state)}},Trace.prototype.traceUIViewEvent=function(event,viewData,extra){void 0===extra&&(extra=""),this.enabled(exports.Category.UIVIEW)&&console.log("ui-view: "+padString(30,event)+" "+uiViewString(viewData)+extra)},Trace.prototype.traceUIViewConfigUpdated=function(viewData,context){this.enabled(exports.Category.UIVIEW)&&this.traceUIViewEvent("Updating",viewData," with ViewConfig from context='"+context+"'")},Trace.prototype.traceUIViewFill=function(viewData,html){this.enabled(exports.Category.UIVIEW)&&this.traceUIViewEvent("Fill",viewData," with: "+maxLength(200,html))},Trace.prototype.traceViewServiceEvent=function(event,viewConfig){this.enabled(exports.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+event+" "+viewConfigString(viewConfig))},Trace.prototype.traceViewServiceUIViewEvent=function(event,viewData){this.enabled(exports.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+event+" "+uiViewString(viewData))},Trace}(),trace=new Trace;!function(TransitionHookPhase){TransitionHookPhase[TransitionHookPhase.CREATE=0]="CREATE",TransitionHookPhase[TransitionHookPhase.BEFORE=1]="BEFORE",TransitionHookPhase[TransitionHookPhase.ASYNC=2]="ASYNC",TransitionHookPhase[TransitionHookPhase.SUCCESS=3]="SUCCESS",TransitionHookPhase[TransitionHookPhase.ERROR=4]="ERROR"}(exports.TransitionHookPhase||(exports.TransitionHookPhase={})),function(TransitionHookScope){TransitionHookScope[TransitionHookScope.TRANSITION=0]="TRANSITION",TransitionHookScope[TransitionHookScope.STATE=1]="STATE"}(exports.TransitionHookScope||(exports.TransitionHookScope={}));var TargetState=function(){function TargetState(_identifier,_definition,_params,_options){void 0===_options&&(_options={}),this._identifier=_identifier,this._definition=_definition,this._options=_options,this._params=_params||{}}return TargetState.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},TargetState.prototype.identifier=function(){return this._identifier},TargetState.prototype.params=function(){return this._params},TargetState.prototype.$state=function(){return this._definition},TargetState.prototype.state=function(){return this._definition&&this._definition.self},TargetState.prototype.options=function(){return this._options},TargetState.prototype.exists=function(){return!(!this._definition||!this._definition.self)},TargetState.prototype.valid=function(){return!this.error()},TargetState.prototype.error=function(){var base=this.options().relative;if(!this._definition&&base){var stateName=base.name?base.name:base;return"Could not resolve '"+this.name()+"' from state '"+stateName+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},TargetState.prototype.toString=function(){return"'"+this.name()+"'"+toJson(this.params())},TargetState}();TargetState.isDef=function(obj){return obj&&obj.state&&(isString(obj.state)||isString(obj.state.name))};var defaultOptions={current:noop$1,transition:null,traceData:{},bind:null},TransitionHook=function(){function TransitionHook(transition,stateContext,registeredHook,options){var _this=this;this.transition=transition,this.stateContext=stateContext,this.registeredHook=registeredHook,this.options=options,this.stateService=function(){return _this.transition.router.stateService},this.rejectIfSuperseded=function(){return _this.registeredHook.eventType.rejectIfSuperseded&&_this.options.current()!==_this.options.transition},this.options=defaults(options,defaultOptions)}return TransitionHook.prototype.invokeHook=function(){var hook=this.registeredHook;if(!hook._deregistered){var options=this.options;if(trace.traceHookInvocation(this,this.transition,options),this.rejectIfSuperseded())return Rejection.superseded(options.current()).toPromise();var cb=hook.callback,bind=this.options.bind,trans=this.transition,state=this.stateContext,errorHandler=hook.eventType.getErrorHandler(this),resultHandler=hook.eventType.getResultHandler(this);if(resultHandler=resultHandler||identity,!errorHandler)return resultHandler(cb.call(bind,trans,state));try{return resultHandler(cb.call(bind,trans,state))}catch(error){return errorHandler(error)}}},TransitionHook.prototype.handleHookResult=function(result){if(this.rejectIfSuperseded())return Rejection.superseded(this.options.current()).toPromise();if(isPromise(result))return result.then(this.handleHookResult.bind(this));if(trace.traceHookResult(result,this.transition,this.options),result===!1)return Rejection.aborted("Hook aborted transition").toPromise();var isTargetState=is(TargetState);return isTargetState(result)?Rejection.redirected(result).toPromise():void 0},TransitionHook.prototype.toString=function(){var _a=this,options=_a.options,registeredHook=_a.registeredHook,event=parse("traceData.hookType")(options)||"internal",context=parse("traceData.context.state.name")(options)||parse("traceData.context")(options)||"unknown",name=fnToString(registeredHook.callback);return event+" context: "+context+", "+maxLength(200,name)},TransitionHook.runAllHooks=function(hooks){hooks.forEach(function(hook){return hook.invokeHook()})},TransitionHook.runOnBeforeHooks=function(hooks){for(var results=[],_i=0,hooks_1=hooks;_i<hooks_1.length;_i++){var hook=hooks_1[_i],hookResult=hook.invokeHook();if(Rejection.isTransitionRejectionPromise(hookResult))return hookResult;results.push(hookResult)}return results.filter(isPromise).reduce(function(chain,promise){return chain.then(val(promise))},services.$q.when())},TransitionHook}();TransitionHook.HANDLE_RESULT=function(hook){return function(result){return hook.handleHookResult(result)}},TransitionHook.IGNORE_RESULT=function(hook){return function(result){}},TransitionHook.LOG_ERROR=function(hook){return function(error){return void hook.stateService().defaultErrorHandler()(error)}},TransitionHook.REJECT_ERROR=function(hook){return function(error){return Rejection.errored(error).toPromise()}},TransitionHook.THROW_ERROR=function(hook){};var RegisteredHook=function(){function RegisteredHook(tranSvc,eventType,callback,matchCriteria,options){void 0===options&&(options={}),this.tranSvc=tranSvc,this.eventType=eventType,this.callback=callback,this.matchCriteria=matchCriteria,this.priority=options.priority||0,this.bind=options.bind||null,this._deregistered=!1}return RegisteredHook.prototype._matchingNodes=function(nodes,criterion){if(criterion===!0)return nodes;var matching=nodes.filter(function(node){return matchState(node.state,criterion)});return matching.length?matching:null},RegisteredHook.prototype._getDefaultMatchCriteria=function(){return map(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},RegisteredHook.prototype._getMatchingNodes=function(treeChanges){var _this=this,criteria=extend(this._getDefaultMatchCriteria(),this.matchCriteria),paths=values(this.tranSvc._pluginapi._getPathTypes());return paths.reduce(function(mn,pathtype){var isStateHook=pathtype.scope===exports.TransitionHookScope.STATE,path=treeChanges[pathtype.name]||[],nodes=isStateHook?path:[tail(path)];return mn[pathtype.name]=_this._matchingNodes(nodes,criteria[pathtype.name]),mn},{})},RegisteredHook.prototype.matches=function(treeChanges){var matches=this._getMatchingNodes(treeChanges),allMatched=values(matches).every(identity);return allMatched?matches:null},RegisteredHook}(),HookBuilder=function(){function HookBuilder(transition){this.transition=transition,this.treeChanges=transition.treeChanges(),this.transitionOptions=transition.options(),this.toState=tail(this.treeChanges.to).state,this.fromState=tail(this.treeChanges.from).state,this.$transitions=transition.router.transitionService,this.baseHookOptions={transition:transition,current:transition.options().current}}return HookBuilder.prototype.buildHooksForPhase=function(phase){var _this=this;return this.$transitions._pluginapi._getEvents(phase).map(function(type){return _this.buildHooks(type)}).reduce(unnestR,[]).filter(identity)},HookBuilder.prototype.buildHooks=function(hookType){var _this=this,matchingHooks=this.getMatchingHooks(hookType,this.treeChanges);if(!matchingHooks)return[];var makeTransitionHooks=function(hook){var matches=hook.matches(_this.treeChanges),matchingNodes=matches[hookType.criteriaMatchPath.name];return matchingNodes.map(function(node){var _options=extend({bind:hook.bind,traceData:{hookType:hookType.name,context:node}},_this.baseHookOptions),state=hookType.criteriaMatchPath.scope===exports.TransitionHookScope.STATE?node.state:null,transitionHook=new TransitionHook(_this.transition,state,hook,_options);return{hook:hook,node:node,transitionHook:transitionHook}})};return matchingHooks.map(makeTransitionHooks).reduce(unnestR,[]).sort(tupleSort(hookType.reverseSort)).map(function(tuple){return tuple.transitionHook})},HookBuilder.prototype.getMatchingHooks=function(hookType,treeChanges){var isCreate=hookType.hookPhase===exports.TransitionHookPhase.CREATE,registries=isCreate?[this.$transitions]:[this.transition,this.$transitions];return registries.map(function(reg){return reg.getHooks(hookType.name)}).filter(assertPredicate(isArray,"broken event named: "+hookType.name)).reduce(unnestR,[]).filter(function(hook){return hook.matches(treeChanges)})},HookBuilder}(),ParamType=function(){function ParamType(def){this.pattern=/.*/,this.inherit=!0,extend(this,def)}return ParamType.prototype.is=function(val,key){return!0},ParamType.prototype.encode=function(val,key){return val},ParamType.prototype.decode=function(val,key){return val},ParamType.prototype.equals=function(a,b){return a==b},ParamType.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},ParamType.prototype.toString=function(){return"{ParamType:"+this.name+"}"},ParamType.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},ParamType.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},ParamType}(),hasOwn=Object.prototype.hasOwnProperty,isShorthand=function(cfg){return 0===["value","type","squash","array","dynamic"].filter(hasOwn.bind(cfg||{})).length};!function(DefType){DefType[DefType.PATH=0]="PATH",DefType[DefType.SEARCH=1]="SEARCH",DefType[DefType.CONFIG=2]="CONFIG"}(exports.DefType||(exports.DefType={}));var Param=function(){function Param(id,type,config,location,urlMatcherFactory){function getArrayMode(){var arrayDefaults={array:location===exports.DefType.SEARCH&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}config=unwrapShorthand(config),type=getType(config,type,location,id,urlMatcherFactory.paramTypes);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,location===exports.DefType.SEARCH):type;var isOptional=void 0!==config.value||location===exports.DefType.SEARCH,dynamic=isDefined(config.dynamic)?!!config.dynamic:!!type.dynamic,raw=isDefined(config.raw)?!!config.raw:!!type.raw,squash=getSquashPolicy(config,isOptional,urlMatcherFactory.defaultSquashPolicy()),replace=getReplace(config,arrayMode,isOptional,squash),inherit$$1=isDefined(config.inherit)?!!config.inherit:!!type.inherit;extend(this,{id:id,type:type,location:location,isOptional:isOptional,dynamic:dynamic,raw:raw,squash:squash,replace:replace,inherit:inherit$$1,array:arrayMode,config:config})}return Param.prototype.isDefaultValue=function(value){return this.isOptional&&this.type.equals(this.value(),value)},Param.prototype.value=function(value){var _this=this,$$getDefaultValue=function(){if(!services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=services.$injector.invoke(_this.config.$$fn);if(null!==defaultValue&&void 0!==defaultValue&&!_this.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+_this.id+"' is not an instance of ParamType ("+_this.type.name+")");return defaultValue},$replace=function(val$$1){var replacement=map(filter(_this.replace,propEq("from",val$$1)),prop("to"));return replacement.length?replacement[0]:val$$1};return value=$replace(value),isDefined(value)?this.type.$normalize(value):$$getDefaultValue()},Param.prototype.isSearch=function(){return this.location===exports.DefType.SEARCH},Param.prototype.validates=function(value){if((!isDefined(value)||null===value)&&this.isOptional)return!0;var normalized=this.type.$normalize(value);if(!this.type.is(normalized))return!1;var encoded=this.type.encode(normalized);return!(isString(encoded)&&!this.type.pattern.exec(encoded))},Param.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},Param.values=function(params,values$$1){return void 0===values$$1&&(values$$1={}),params.map(function(param){return[param.id,param.value(values$$1[param.id])]}).reduce(applyPairs,{})},Param.changed=function(params,values1,values2){return void 0===values1&&(values1={}),void 0===values2&&(values2={}),params.filter(function(param){return!param.type.equals(values1[param.id],values2[param.id])})},Param.equals=function(params,values1,values2){return void 0===values1&&(values1={}),void 0===values2&&(values2={}),0===Param.changed(params,values1,values2).length},Param.validates=function(params,values$$1){return void 0===values$$1&&(values$$1={}),params.map(function(param){return param.validates(values$$1[param.id])}).reduce(allTrueR,!0)},Param}(),PathNode=function(){function PathNode(stateOrPath){if(stateOrPath instanceof PathNode){var node=stateOrPath;this.state=node.state,this.paramSchema=node.paramSchema.slice(),this.paramValues=extend({},node.paramValues),this.resolvables=node.resolvables.slice(),this.views=node.views&&node.views.slice()}else{var state=stateOrPath;this.state=state,this.paramSchema=state.parameters({inherit:!1}),this.paramValues={},this.resolvables=state.resolvables.map(function(res){return res.clone()})}}return PathNode.prototype.applyRawParams=function(params){var getParamVal=function(paramDef){return[paramDef.id,paramDef.value(params[paramDef.id])]};return this.paramValues=this.paramSchema.reduce(function(memo,pDef){return applyPairs(memo,getParamVal(pDef))},{}),this},PathNode.prototype.parameter=function(name){return find(this.paramSchema,propEq("id",name))},PathNode.prototype.equals=function(node,keys){var _this=this;void 0===keys&&(keys=this.paramSchema.map(function(p){return p.id}));var paramValsEq=function(key){return _this.parameter(key).type.equals(_this.paramValues[key],node.paramValues[key])};return this.state===node.state&&keys.map(paramValsEq).reduce(allTrueR,!0)},PathNode.clone=function(node){return new PathNode(node)},PathNode.matching=function(pathA,pathB,ignoreDynamicParams){void 0===ignoreDynamicParams&&(ignoreDynamicParams=!0);for(var matching=[],i=0;i<pathA.length&&i<pathB.length;i++){var a=pathA[i],b=pathB[i];if(a.state!==b.state)break;var changedParams=Param.changed(a.paramSchema,a.paramValues,b.paramValues).filter(function(param){return!(ignoreDynamicParams&&param.dynamic)});if(changedParams.length)break;matching.push(a)}return matching},PathNode}(),PathFactory=function(){function PathFactory(){}return PathFactory.makeTargetState=function(path){var state=tail(path).state;return new TargetState(state,state,path.map(prop("paramValues")).reduce(mergeR,{}))},PathFactory.buildPath=function(targetState){var toParams=targetState.params();return targetState.$state().path.map(function(state){return new PathNode(state).applyRawParams(toParams)})},PathFactory.buildToPath=function(fromPath,targetState){var toPath=PathFactory.buildPath(targetState);return targetState.options().inherit?PathFactory.inheritParams(fromPath,toPath,Object.keys(targetState.params())):toPath},PathFactory.applyViewConfigs=function($view,path,states){path.filter(function(node){return inArray(states,node.state)}).forEach(function(node){var viewDecls=values(node.state.views||{}),subPath=PathFactory.subPath(path,function(n){return n===node}),viewConfigs=viewDecls.map(function(view){return $view.createViewConfig(subPath,view)});node.views=viewConfigs.reduce(unnestR,[])})},PathFactory.inheritParams=function(fromPath,toPath,toKeys){function nodeParamVals(path,state){var node=find(path,propEq("state",state));return extend({},node&&node.paramValues)}function makeInheritedParamsNode(toNode){var toParamVals=extend({},toNode&&toNode.paramValues),incomingParamVals=pick(toParamVals,toKeys);toParamVals=omit(toParamVals,toKeys);var fromParamVals=omit(nodeParamVals(fromPath,toNode.state)||{},noInherit),ownParamVals=extend(toParamVals,fromParamVals,incomingParamVals);return new PathNode(toNode.state).applyRawParams(ownParamVals)}void 0===toKeys&&(toKeys=[]);var noInherit=fromPath.map(function(node){return node.paramSchema}).reduce(unnestR,[]).filter(function(param){return!param.inherit}).map(prop("id"));return toPath.map(makeInheritedParamsNode)},PathFactory.treeChanges=function(fromPath,toPath,reloadState){function applyToParams(retainedNode,idx){var cloned=PathNode.clone(retainedNode);return cloned.paramValues=toPath[idx].paramValues,cloned}for(var keep=0,max=Math.min(fromPath.length,toPath.length),staticParams=function(state){return state.parameters({inherit:!1}).filter(not(prop("dynamic"))).map(prop("id"))},nodesMatch=function(node1,node2){return node1.equals(node2,staticParams(node1.state))};keep<max&&fromPath[keep].state!==reloadState&&nodesMatch(fromPath[keep],toPath[keep]);)keep++;var from,retained,exiting,entering,to;from=fromPath,retained=from.slice(0,keep),exiting=from.slice(keep);var retainedWithToParams=retained.map(applyToParams);return entering=toPath.slice(keep),to=retainedWithToParams.concat(entering),{from:from,to:to,retained:retained,exiting:exiting,entering:entering}},PathFactory.subPath=function(path,predicate){var node=find(path,predicate),elementIdx=path.indexOf(node);return elementIdx===-1?void 0:path.slice(0,elementIdx+1)},PathFactory}();PathFactory.paramValues=function(path){return path.reduce(function(acc,node){return extend(acc,node.paramValues)},{})};var defaultResolvePolicy={when:"LAZY",async:"WAIT"},Resolvable=function(){function Resolvable(arg1,resolveFn,deps,policy,data){if(this.resolved=!1,this.promise=void 0,arg1 instanceof Resolvable)extend(this,arg1);else if(isFunction(resolveFn)){if(null==arg1||void 0==arg1)throw new Error("new Resolvable(): token argument is required");if(!isFunction(resolveFn))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=arg1,this.policy=policy,this.resolveFn=resolveFn,this.deps=deps||[],this.data=data,this.resolved=void 0!==data,this.promise=this.resolved?services.$q.when(this.data):void 0}else if(isObject(arg1)&&arg1.token&&isFunction(arg1.resolveFn)){var literal=arg1;return new Resolvable(literal.token,literal.resolveFn,literal.deps,literal.policy,literal.data)}}return Resolvable.prototype.getPolicy=function(state){var thisPolicy=this.policy||{},statePolicy=state&&state.resolvePolicy||{};return{when:thisPolicy.when||statePolicy.when||defaultResolvePolicy.when,async:thisPolicy.async||statePolicy.async||defaultResolvePolicy.async}},Resolvable.prototype.resolve=function(resolveContext,trans){var _this=this,$q=services.$q,getResolvableDependencies=function(){return $q.all(resolveContext.getDependencies(_this).map(function(r){return r.get(resolveContext,trans)}))},invokeResolveFn=function(resolvedDeps){return _this.resolveFn.apply(null,resolvedDeps)},waitForRx=function(observable$){var cached=observable$.cache(1);return cached.take(1).toPromise().then(function(){return cached})},node=resolveContext.findNode(this),state=node&&node.state,maybeWaitForRx="RXWAIT"===this.getPolicy(state).async?waitForRx:identity,applyResolvedValue=function(resolvedValue){return _this.data=resolvedValue,_this.resolved=!0,trace.traceResolvableResolved(_this,trans),_this.data};return this.promise=$q.when().then(getResolvableDependencies).then(invokeResolveFn).then(maybeWaitForRx).then(applyResolvedValue)},Resolvable.prototype.get=function(resolveContext,trans){return this.promise||this.resolve(resolveContext,trans)},Resolvable.prototype.toString=function(){return"Resolvable(token: "+stringify(this.token)+", requires: ["+this.deps.map(stringify)+"])"},Resolvable.prototype.clone=function(){return new Resolvable(this)},Resolvable}();Resolvable.fromData=function(token,data){return new Resolvable(token,function(){return data},null,null,data)};var resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},when=resolvePolicies.when,ALL_WHENS=[when.EAGER,when.LAZY],EAGER_WHENS=[when.EAGER],NATIVE_INJECTOR_TOKEN="Native Injector",ResolveContext=function(){function ResolveContext(_path){this._path=_path}return ResolveContext.prototype.getTokens=function(){return this._path.reduce(function(acc,node){return acc.concat(node.resolvables.map(function(r){return r.token}))},[]).reduce(uniqR,[])},ResolveContext.prototype.getResolvable=function(token){var matching=this._path.map(function(node){return node.resolvables}).reduce(unnestR,[]).filter(function(r){return r.token===token});return tail(matching)},ResolveContext.prototype.getPolicy=function(resolvable){var node=this.findNode(resolvable);return resolvable.getPolicy(node.state)},ResolveContext.prototype.subContext=function(state){return new ResolveContext(PathFactory.subPath(this._path,function(node){return node.state===state}))},ResolveContext.prototype.addResolvables=function(newResolvables,state){var node=find(this._path,propEq("state",state)),keys=newResolvables.map(function(r){return r.token});node.resolvables=node.resolvables.filter(function(r){return keys.indexOf(r.token)===-1}).concat(newResolvables)},ResolveContext.prototype.resolvePath=function(when,trans){var _this=this;void 0===when&&(when="LAZY");var whenOption=inArray(ALL_WHENS,when)?when:"LAZY",matchedWhens=whenOption===resolvePolicies.when.EAGER?EAGER_WHENS:ALL_WHENS;trace.traceResolvePath(this._path,when,trans);var matchesPolicy=function(acceptedVals,whenOrAsync){return function(resolvable){return inArray(acceptedVals,_this.getPolicy(resolvable)[whenOrAsync])}},promises=this._path.reduce(function(acc,node){var nodeResolvables=node.resolvables.filter(matchesPolicy(matchedWhens,"when")),nowait=nodeResolvables.filter(matchesPolicy(["NOWAIT"],"async")),wait=nodeResolvables.filter(not(matchesPolicy(["NOWAIT"],"async"))),subContext=_this.subContext(node.state),getResult=function(r){return r.get(subContext,trans).then(function(value){return{token:r.token,value:value}})};return nowait.forEach(getResult),acc.concat(wait.map(getResult))},[]);return services.$q.all(promises)},ResolveContext.prototype.injector=function(){return this._injector||(this._injector=new UIInjectorImpl(this))},ResolveContext.prototype.findNode=function(resolvable){return find(this._path,function(node){return inArray(node.resolvables,resolvable)})},ResolveContext.prototype.getDependencies=function(resolvable){var _this=this,node=this.findNode(resolvable),subPath=PathFactory.subPath(this._path,function(x){return x===node})||this._path,availableResolvables=subPath.reduce(function(acc,node){return acc.concat(node.resolvables)},[]).filter(function(res){return res!==resolvable}),getDependency=function(token){var matching=availableResolvables.filter(function(r){return r.token===token});if(matching.length)return tail(matching);var fromInjector=_this.injector().getNative(token);if(!fromInjector)throw new Error("Could not find Dependency Injection token: "+stringify(token));return new Resolvable(token,function(){return fromInjector},[],fromInjector)};return resolvable.deps.map(getDependency)},ResolveContext}(),UIInjectorImpl=function(){function UIInjectorImpl(context){this.context=context,this.native=this.get(NATIVE_INJECTOR_TOKEN)||services.$injector}return UIInjectorImpl.prototype.get=function(token){var resolvable=this.context.getResolvable(token);if(resolvable){if("NOWAIT"===this.context.getPolicy(resolvable).async)return resolvable.get(this.context);if(!resolvable.resolved)throw new Error("Resolvable async .get() not complete:"+stringify(resolvable.token));return resolvable.data}return this.native&&this.native.get(token)},UIInjectorImpl.prototype.getAsync=function(token){var resolvable=this.context.getResolvable(token);return resolvable?resolvable.get(this.context):services.$q.when(this.native.get(token))},UIInjectorImpl.prototype.getNative=function(token){return this.native&&this.native.get(token)},UIInjectorImpl}(),memoizeTo=function(obj,prop$$1,fn){return obj[prop$$1]=obj[prop$$1]||fn()},UrlMatcher=function(){function UrlMatcher(pattern$$1,paramTypes,paramFactory,config){var _this=this;this.config=config,this._cache={path:[this],parent:null,pattern:null},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=pattern$$1,this.config=defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:identity});for(var m,p,segment,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,last=0,patterns=[],checkParamErrors=function(id){if(!UrlMatcher.nameValidator.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern$$1+"'");if(find(_this._params,propEq("id",id)))throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern$$1+"'")},matchDetails=function(m,isSearch){var id=m[2]||m[3],regexp=isSearch?m[4]:m[4]||("*"===m[1]?".*":null),makeRegexpType=function(regexp){return inherit(paramTypes.type(isSearch?"query":"path"),{pattern:new RegExp(regexp,_this.config.caseInsensitive?"i":void 0)})};return{id:id,regexp:regexp,cfg:_this.config.params[id],segment:pattern$$1.substring(last,m.index),type:regexp?paramTypes.type(regexp)||makeRegexpType(regexp):null}};(m=placeholder.exec(pattern$$1))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)checkParamErrors(p.id),this._params.push(paramFactory.fromPath(p.id,p.type,this.config.paramMap(p.cfg,!1))),this._segments.push(p.segment),patterns.push([p.segment,tail(this._params)]),last=placeholder.lastIndex;segment=pattern$$1.substring(last);var i=segment.indexOf("?");if(i>=0){var search=segment.substring(i);if(segment=segment.substring(0,i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),checkParamErrors(p.id),this._params.push(paramFactory.fromSearch(p.id,p.type,this.config.paramMap(p.cfg,!0))),last=placeholder.lastIndex}this._segments.push(segment),this._compiled=patterns.map(function(pattern$$1){return quoteRegExp.apply(null,pattern$$1)}).concat(quoteRegExp(segment))}return UrlMatcher.prototype.append=function(url){return this._children.push(url),url._cache={path:this._cache.path.concat(url),parent:this,pattern:null},url},UrlMatcher.prototype.isRoot=function(){return this._cache.path[0]===this},UrlMatcher.prototype.toString=function(){return this.pattern},UrlMatcher.prototype.exec=function(path,search,hash,options){function decodePathArray(string){var reverseString=function(str){return str.split("").reverse().join("")},unquoteDashes=function(str){return str.replace(/\\-/g,"-")},split=reverseString(string).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var _this=this;void 0===search&&(search={}),void 0===options&&(options={});var match=memoizeTo(this._cache,"pattern",function(){return new RegExp(["^",unnest(_this._cache.path.map(prop("_compiled"))).join(""),_this.config.strict===!1?"/?":"","$"].join(""),_this.config.caseInsensitive?"i":void 0)}).exec(path);if(!match)return null;var allParams=this.parameters(),pathParams=allParams.filter(function(param){return!param.isSearch()}),searchParams=allParams.filter(function(param){return param.isSearch()}),nPathSegments=this._cache.path.map(function(urlm){return urlm._segments.length-1}).reduce(function(a,x){return a+x}),values$$1={};if(nPathSegments!==match.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");
for(var i=0;i<nPathSegments;i++){for(var param=pathParams[i],value=match[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===value&&(value=param.replace[j].to);value&&param.array===!0&&(value=decodePathArray(value)),isDefined(value)&&(value=param.type.decode(value)),values$$1[param.id]=param.value(value)}return searchParams.forEach(function(param){for(var value=search[param.id],j=0;j<param.replace.length;j++)param.replace[j].from===value&&(value=param.replace[j].to);isDefined(value)&&(value=param.type.decode(value)),values$$1[param.id]=param.value(value)}),hash&&(values$$1["#"]=hash),values$$1},UrlMatcher.prototype.parameters=function(opts){return void 0===opts&&(opts={}),opts.inherit===!1?this._params:unnest(this._cache.path.map(prop("_params")))},UrlMatcher.prototype.parameter=function(id,opts){void 0===opts&&(opts={});var parent=this._cache.parent;return find(this._params,propEq("id",id))||opts.inherit!==!1&&parent&&parent.parameter(id,opts)||null},UrlMatcher.prototype.validates=function(params){var _this=this,validParamVal=function(param,val$$1){return!param||param.validates(val$$1)};return pairs(params||{}).map(function(_a){var key=_a[0],val$$1=_a[1];return validParamVal(_this.parameter(key),val$$1)}).reduce(allTrueR,!0)},UrlMatcher.prototype.format=function(values$$1){function getDetails(param){var value=param.value(values$$1[param.id]),isDefaultValue=param.isDefaultValue(value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);return{param:param,value:value,isDefaultValue:isDefaultValue,squash:squash,encoded:encoded}}if(void 0===values$$1&&(values$$1={}),!this.validates(values$$1))return null;var urlMatchers=this._cache.path,pathSegmentsAndParams=urlMatchers.map(UrlMatcher.pathSegmentsAndParams).reduce(unnestR,[]),queryParams=urlMatchers.map(UrlMatcher.queryParams).reduce(unnestR,[]),pathString=pathSegmentsAndParams.reduce(function(acc,x){if(isString(x))return acc+x;var _a=getDetails(x),squash=_a.squash,encoded=_a.encoded,param=_a.param;return squash===!0?acc.match(/\/$/)?acc.slice(0,-1):acc:isString(squash)?acc+squash:squash!==!1?acc:null==encoded?acc:isArray(encoded)?acc+map(encoded,UrlMatcher.encodeDashes).join("-"):param.raw?acc+encoded:acc+encodeURIComponent(encoded)},""),queryString=queryParams.map(function(param){var _a=getDetails(param),squash=_a.squash,encoded=_a.encoded,isDefaultValue=_a.isDefaultValue;if(!(null==encoded||isDefaultValue&&squash!==!1)&&(isArray(encoded)||(encoded=[encoded]),0!==encoded.length))return param.raw||(encoded=map(encoded,encodeURIComponent)),encoded.map(function(val$$1){return param.id+"="+val$$1})}).filter(identity).reduce(unnestR,[]).join("&");return pathString+(queryString?"?"+queryString:"")+(values$$1["#"]?"#"+values$$1["#"]:"")},UrlMatcher.encodeDashes=function(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})},UrlMatcher.pathSegmentsAndParams=function(matcher){var staticSegments=matcher._segments,pathParams=matcher._params.filter(function(p){return p.location===exports.DefType.PATH});return arrayTuples(staticSegments,pathParams.concat(void 0)).reduce(unnestR,[]).filter(function(x){return""!==x&&isDefined(x)})},UrlMatcher.queryParams=function(matcher){return matcher._params.filter(function(p){return p.location===exports.DefType.SEARCH})},UrlMatcher.compare=function(a,b){var splitOnSlash=splitOnDelim("/"),segments=function(matcher){return matcher._cache.path.map(UrlMatcher.pathSegmentsAndParams).reduce(unnestR,[]).reduce(joinNeighborsR,[]).map(function(x){return isString(x)?splitOnSlash(x):x}).reduce(unnestR,[])},aSegments=segments(a),bSegments=segments(b),weight=pattern([[eq("/"),val(1)],[isString,val(2)],[is(Param),val(3)]]),pairs$$1=arrayTuples(aSegments.map(weight),bSegments.map(weight));return pairs$$1.reduce(function(cmp,weightPair){return 0!==cmp?cmp:weightPair[0]-weightPair[1]},0)},UrlMatcher}();UrlMatcher.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;var ParamTypes=function(){function ParamTypes(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=pick(ParamTypes.prototype,"hash","string","query","path","int","bool","date","json","any");var makeType=function(definition,name){return new ParamType(extend({name:name},definition))};this.types=inherit(map(this.defaultTypes,makeType),{})}return ParamTypes.prototype.dispose=function(){this.types={}},ParamTypes.prototype.type=function(name,definition,definitionFn){if(!isDefined(definition))return this.types[name];if(this.types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return this.types[name]=new ParamType(extend({name:name},definition)),definitionFn&&(this.typeQueue.push({name:name,def:definitionFn}),this.enqueue||this._flushTypeQueue()),this},ParamTypes.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var type=this.typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");extend(this.types[type.name],services.$injector.invoke(type.def))}},ParamTypes}();initDefaultTypes();var UrlMatcherFactory=function(){function UrlMatcherFactory(){var _this=this;this.paramTypes=new ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(config){return extend({strict:_this._isStrictMode,caseInsensitive:_this._isCaseInsensitive},config)},this.paramFactory={fromConfig:function(id,type,config){return new Param(id,type,config,exports.DefType.CONFIG,_this)},fromPath:function(id,type,config){return new Param(id,type,config,exports.DefType.PATH,_this)},fromSearch:function(id,type,config){return new Param(id,type,config,exports.DefType.SEARCH,_this)}},extend(this,{UrlMatcher:UrlMatcher,Param:Param})}return UrlMatcherFactory.prototype.caseInsensitive=function(value){return this._isCaseInsensitive=isDefined(value)?value:this._isCaseInsensitive},UrlMatcherFactory.prototype.strictMode=function(value){return this._isStrictMode=isDefined(value)?value:this._isStrictMode},UrlMatcherFactory.prototype.defaultSquashPolicy=function(value){if(isDefined(value)&&value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=isDefined(value)?value:this._defaultSquashPolicy},UrlMatcherFactory.prototype.compile=function(pattern,config){return new UrlMatcher(pattern,this.paramTypes,this.paramFactory,this._getConfig(config))},UrlMatcherFactory.prototype.isMatcher=function(object){if(!isObject(object))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(object[name])&&isFunction(object[name]))}),result},UrlMatcherFactory.prototype.type=function(name,definition,definitionFn){var type=this.paramTypes.type(name,definition,definitionFn);return isDefined(definition)?this:type},UrlMatcherFactory.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},UrlMatcherFactory.prototype.dispose=function(){this.paramTypes.dispose()},UrlMatcherFactory}(),State=function(){function State(config){extend(this,config)}return State.prototype.is=function(ref){return this===ref||this.self===ref||this.fqn()===ref},State.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var name=this.parent.fqn();return name?name+"."+this.name:this.name},State.prototype.root=function(){return this.parent&&this.parent.root()||this},State.prototype.parameters=function(opts){opts=defaults(opts,{inherit:!0,matchingKeys:null});var inherited=opts.inherit&&this.parent&&this.parent.parameters()||[];return inherited.concat(values(this.params)).filter(function(param){return!opts.matchingKeys||opts.matchingKeys.hasOwnProperty(param.id)})},State.prototype.parameter=function(id,opts){return void 0===opts&&(opts={}),this.url&&this.url.parameter(id,opts)||find(values(this.params),propEq("id",id))||opts.inherit&&this.parent&&this.parent.parameter(id)},State.prototype.toString=function(){return this.fqn()},State}(),UrlRuleFactory=function(){function UrlRuleFactory(router){this.router=router}return UrlRuleFactory.prototype.compile=function(str){return this.router.urlMatcherFactory.compile(str)},UrlRuleFactory.prototype.create=function(what,handler){var _this=this,makeRule=pattern([[isString,function(_what){return makeRule(_this.compile(_what))}],[is(UrlMatcher),function(_what){return _this.fromUrlMatcher(_what,handler)}],[is(State),function(_what){return _this.fromState(_what,_this.router)}],[is(RegExp),function(_what){return _this.fromRegExp(_what,handler)}],[isFunction,function(_what){return new BaseUrlRule(_what,handler)}]]),rule=makeRule(what);if(!rule)throw new Error("invalid 'what' in when()");return rule},UrlRuleFactory.prototype.fromUrlMatcher=function(urlMatcher,handler){function match(url){var match=urlMatcher.exec(url.path,url.search,url.hash);return urlMatcher.validates(match)&&match}function matchPriority(params){var optional=urlMatcher.parameters().filter(function(param){return param.isOptional});if(!optional.length)return 1e-6;var matched=optional.filter(function(param){return params[param.id]});return matched.length/optional.length}var _handler=handler;isString(handler)&&(handler=this.router.urlMatcherFactory.compile(handler)),is(UrlMatcher)(handler)&&(_handler=function(match){return handler.format(match)});var details={urlMatcher:urlMatcher,matchPriority:matchPriority,type:"URLMATCHER"};return extend(new BaseUrlRule(match,_handler),details)},UrlRuleFactory.prototype.fromState=function(state,router){var handler=function(match){var $state=router.stateService,globals=router.globals;$state.href(state,match)!==$state.href(globals.current,globals.params)&&$state.transitionTo(state,match,{inherit:!0,source:"url"})},details={state:state,type:"STATE"};return extend(this.fromUrlMatcher(state.url,handler),details)},UrlRuleFactory.prototype.fromRegExp=function(regexp,handler){if(regexp.global||regexp.sticky)throw new Error("Rule RegExp must not be global or sticky");var redirectUrlTo=function(match){return handler.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})},_handler=isString(handler)?redirectUrlTo:handler,match=function(url){return regexp.exec(url.path)},details={regexp:regexp,type:"REGEXP"};return extend(new BaseUrlRule(match,_handler),details)},UrlRuleFactory}();UrlRuleFactory.isUrlRule=function(obj){return obj&&["type","match","handler"].every(function(key){return isDefined(obj[key])})};var defaultRuleSortFn,BaseUrlRule=function(){function BaseUrlRule(match,handler){var _this=this;this.match=match,this.type="RAW",this.matchPriority=function(match){return 0-_this.$id},this.handler=handler||identity}return BaseUrlRule}(),getMatcher=prop("urlMatcher");defaultRuleSortFn=composeSort(sortBy(pipe(prop("priority"),function(x){return-x})),sortBy(pipe(prop("type"),function(type){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[type]})),function(a,b){return getMatcher(a)&&getMatcher(b)?UrlMatcher.compare(getMatcher(a),getMatcher(b)):0},sortBy(prop("$id"),inArray(["REGEXP","RAW","OTHER"])));var UrlRouter=function(){function UrlRouter(router){this._sortFn=defaultRuleSortFn,this._rules=[],this.interceptDeferred=!1,this._id=0,this._router=router,this.urlRuleFactory=new UrlRuleFactory(router),createProxyFunctions(val(UrlRouter.prototype),this,val(this))}return UrlRouter.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},UrlRouter.prototype.sort=function(compareFn){this._rules.sort(this._sortFn=compareFn||this._sortFn)},UrlRouter.prototype.match=function(url){var _this=this;url=extend({path:"",search:{},hash:""},url);var rules=this.rules();this._otherwiseFn&&rules.push(this._otherwiseFn);for(var best,checkRule=function(rule){var match=rule.match(url,_this._router);return match&&{match:match,rule:rule,weight:rule.matchPriority(match)}},i=0;i<rules.length&&(!best||0===this._sortFn(rules[i],best.rule));i++){var current=checkRule(rules[i]);best=!best||current&&current.weight>best.weight?current:best}return best},UrlRouter.prototype.sync=function(evt){if(!evt||!evt.defaultPrevented){var router=this._router,$url=router.urlService,$state=router.stateService,url={path:$url.path(),search:$url.search(),hash:$url.hash()},best=this.match(url),applyResult=pattern([[isString,function(newurl){return $url.url(newurl)}],[TargetState.isDef,function(def){return $state.go(def.state,def.params,def.options)}],[is(TargetState),function(target){return $state.go(target.state(),target.params(),target.options())}]]);applyResult(best&&best.rule.handler(best.match,url,router))}},UrlRouter.prototype.listen=function(enabled){var _this=this;return enabled!==!1?this._stopFn=this._stopFn||this._router.urlService.onChange(function(evt){return _this.sync(evt)}):(this._stopFn&&this._stopFn(),void delete this._stopFn)},UrlRouter.prototype.update=function(read){var $url=this._router.locationService;return read?void(this.location=$url.path()):void($url.path()!==this.location&&$url.url(this.location,!0))},UrlRouter.prototype.push=function(urlMatcher,params,options){var replace=options&&!!options.replace;this._router.urlService.url(urlMatcher.format(params||{}),replace)},UrlRouter.prototype.href=function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var url=urlMatcher.format(params);options=options||{absolute:!1};var cfg=this._router.urlService.config,isHtml5=cfg.html5Mode();if(isHtml5||null===url||(url="#"+cfg.hashPrefix()+url),url=appendBasePath(url,isHtml5,options.absolute,cfg.baseHref()),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=cfg.port();return port=80===port||443===port?"":":"+port,[cfg.protocol(),"://",cfg.host(),port,slash,url].join("")},UrlRouter.prototype.rule=function(rule){var _this=this;if(!UrlRuleFactory.isUrlRule(rule))throw new Error("invalid rule");return rule.$id=this._id++,rule.priority=rule.priority||0,this._rules.push(rule),this.sort(),function(){return _this.removeRule(rule)}},UrlRouter.prototype.removeRule=function(rule){removeFrom(this._rules,rule),this.sort()},UrlRouter.prototype.rules=function(){return this._rules.slice()},UrlRouter.prototype.otherwise=function(handler){if(!(isFunction(handler)||isString(handler)||is(TargetState)(handler)||TargetState.isDef(handler)))throw new Error("'redirectTo' must be a string, function, TargetState, or have a state: 'newtarget' property");var handlerFn=isFunction(handler)?handler:val(handler);this._otherwiseFn=this.urlRuleFactory.create(val(!0),handlerFn),this.sort()},UrlRouter.prototype.when=function(matcher,handler,options){var rule=this.urlRuleFactory.create(matcher,handler);return isDefined(options&&options.priority)&&(rule.priority=options.priority),this.rule(rule),rule},UrlRouter.prototype.deferIntercept=function(defer){void 0===defer&&(defer=!0),this.interceptDeferred=defer},UrlRouter}(),eagerResolvePath=function(trans){return new ResolveContext(trans.treeChanges().to).resolvePath("EAGER",trans).then(noop$1)},registerEagerResolvePath=function(transitionService){return transitionService.onStart({},eagerResolvePath,{priority:1e3})},lazyResolveState=function(trans,state){return new ResolveContext(trans.treeChanges().to).subContext(state).resolvePath("LAZY",trans).then(noop$1)},registerLazyResolveState=function(transitionService){return transitionService.onEnter({entering:val(!0)},lazyResolveState,{priority:1e3})},loadEnteringViews=function(transition){var $q=services.$q,enteringViews=transition.views("entering");if(enteringViews.length)return $q.all(enteringViews.map(function(view){return $q.when(view.load())})).then(noop$1)},registerLoadEnteringViews=function(transitionService){return transitionService.onFinish({},loadEnteringViews)},activateViews=function(transition){var enteringViews=transition.views("entering"),exitingViews=transition.views("exiting");if(enteringViews.length||exitingViews.length){var $view=transition.router.viewService;exitingViews.forEach(function(vc){return $view.deactivateViewConfig(vc)}),enteringViews.forEach(function(vc){return $view.activateViewConfig(vc)}),$view.sync()}},registerActivateViews=function(transitionService){return transitionService.onSuccess({},activateViews)},updateUrl=function(transition){var options=transition.options(),$state=transition.router.stateService,$urlRouter=transition.router.urlRouter;if("url"!==options.source&&options.location&&$state.$current.navigable){var urlOptions={replace:"replace"===options.location};$urlRouter.push($state.$current.navigable.url,$state.params,urlOptions)}$urlRouter.update(!0)},registerUpdateUrl=function(transitionService){return transitionService.onSuccess({},updateUrl,{priority:9999})},redirectToHook=function(trans){function handleResult(result){if(result)return result instanceof TargetState?result:isString(result)?$state.target(result,trans.params(),trans.options()):result.state||result.params?$state.target(result.state||trans.to(),result.params||trans.params(),trans.options()):void 0}var redirect=trans.to().redirectTo;if(redirect){var $state=trans.router.stateService;return isFunction(redirect)?services.$q.when(redirect(trans)).then(handleResult):handleResult(redirect)}},registerRedirectToHook=function(transitionService){return transitionService.onStart({to:function(state){return!!state.redirectTo}},redirectToHook)},onExitHook=makeEnterExitRetainHook("onExit"),registerOnExitHook=function(transitionService){return transitionService.onExit({exiting:function(state){return!!state.onExit}},onExitHook)},onRetainHook=makeEnterExitRetainHook("onRetain"),registerOnRetainHook=function(transitionService){return transitionService.onRetain({retained:function(state){return!!state.onRetain}},onRetainHook)},onEnterHook=makeEnterExitRetainHook("onEnter"),registerOnEnterHook=function(transitionService){return transitionService.onEnter({entering:function(state){return!!state.onEnter}},onEnterHook)},lazyLoadHook=function(transition){function retryTransition(){if("url"!==transition.originalTransition().options().source){var orig=transition.targetState();return router.stateService.target(orig.identifier(),orig.params(),orig.options())}var $url=router.urlService,result=$url.match($url.parts()),rule=result&&result.rule;if(rule&&"STATE"===rule.type){var state=rule.state,params=result.match;return router.stateService.target(state,params,transition.options())}router.urlRouter.sync()}var router=transition.router,promises=transition.entering().filter(function(state){return!!state.lazyLoad}).map(function(state){return lazyLoadState(transition,state)});return services.$q.all(promises).then(retryTransition)},registerLazyLoadHook=function(transitionService){return transitionService.onBefore({entering:function(state){return!!state.lazyLoad}},lazyLoadHook)},TransitionEventType=function(){function TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,rejectIfSuperseded){void 0===reverseSort&&(reverseSort=!1),void 0===getResultHandler&&(getResultHandler=TransitionHook.HANDLE_RESULT),void 0===getErrorHandler&&(getErrorHandler=TransitionHook.REJECT_ERROR),void 0===rejectIfSuperseded&&(rejectIfSuperseded=!0),this.name=name,this.hookPhase=hookPhase,this.hookOrder=hookOrder,this.criteriaMatchPath=criteriaMatchPath,this.reverseSort=reverseSort,this.getResultHandler=getResultHandler,this.getErrorHandler=getErrorHandler,this.rejectIfSuperseded=rejectIfSuperseded}return TransitionEventType}(),defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},TransitionService=function(){function TransitionService(_router){this._router=_router,this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this.$view=_router.viewService,this._deregisterHookFns={},this._pluginapi=createProxyFunctions(val(this),{},val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineDefaultPaths(),this._defineDefaultEvents(),this._registerDefaultTransitionHooks()}return TransitionService.prototype.onCreate=function(criteria,callback,options){},TransitionService.prototype.onBefore=function(criteria,callback,options){},TransitionService.prototype.onStart=function(criteria,callback,options){},TransitionService.prototype.onExit=function(criteria,callback,options){},TransitionService.prototype.onRetain=function(criteria,callback,options){},TransitionService.prototype.onEnter=function(criteria,callback,options){},TransitionService.prototype.onFinish=function(criteria,callback,options){},TransitionService.prototype.onSuccess=function(criteria,callback,options){},TransitionService.prototype.onError=function(criteria,callback,options){},TransitionService.prototype.dispose=function(router){delete router.globals.transition,values(this._registeredHooks).forEach(function(hooksArray){return hooksArray.forEach(function(hook){hook._deregistered=!0,removeFrom(hooksArray,hook)})})},TransitionService.prototype.create=function(fromPath,targetState){return new Transition(fromPath,targetState,this._router)},TransitionService.prototype._defineDefaultEvents=function(){var Phase=exports.TransitionHookPhase,TH=TransitionHook,paths=this._criteriaPaths;this._defineEvent("onCreate",Phase.CREATE,0,paths.to,!1,TH.IGNORE_RESULT,TH.THROW_ERROR,!1),this._defineEvent("onBefore",Phase.BEFORE,0,paths.to,!1,TH.HANDLE_RESULT),this._defineEvent("onStart",Phase.ASYNC,0,paths.to),this._defineEvent("onExit",Phase.ASYNC,100,paths.exiting,!0),this._defineEvent("onRetain",Phase.ASYNC,200,paths.retained),this._defineEvent("onEnter",Phase.ASYNC,300,paths.entering),this._defineEvent("onFinish",Phase.ASYNC,400,paths.to),this._defineEvent("onSuccess",Phase.SUCCESS,0,paths.to,!1,TH.IGNORE_RESULT,TH.LOG_ERROR,!1),this._defineEvent("onError",Phase.ERROR,0,paths.to,!1,TH.IGNORE_RESULT,TH.LOG_ERROR,!1)},TransitionService.prototype._defineDefaultPaths=function(){var STATE=exports.TransitionHookScope.STATE,TRANSITION=exports.TransitionHookScope.TRANSITION;this._definePathType("to",TRANSITION),this._definePathType("from",TRANSITION),this._definePathType("exiting",STATE),this._definePathType("retained",STATE),this._definePathType("entering",STATE)},TransitionService.prototype._defineEvent=function(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,rejectIfSuperseded){void 0===reverseSort&&(reverseSort=!1),void 0===getResultHandler&&(getResultHandler=TransitionHook.HANDLE_RESULT),void 0===getErrorHandler&&(getErrorHandler=TransitionHook.REJECT_ERROR),void 0===rejectIfSuperseded&&(rejectIfSuperseded=!0);var eventType=new TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,rejectIfSuperseded);this._eventTypes.push(eventType),makeEvent(this,this,eventType)},TransitionService.prototype._getEvents=function(phase){var transitionHookTypes=isDefined(phase)?this._eventTypes.filter(function(type){return type.hookPhase===phase}):this._eventTypes.slice();return transitionHookTypes.sort(function(l,r){var cmpByPhase=l.hookPhase-r.hookPhase;return 0===cmpByPhase?l.hookOrder-r.hookOrder:cmpByPhase})},TransitionService.prototype._definePathType=function(name,hookScope){this._criteriaPaths[name]={name:name,scope:hookScope}},TransitionService.prototype._getPathTypes=function(){return this._criteriaPaths},TransitionService.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]},TransitionService.prototype._registerDefaultTransitionHooks=function(){var fns=this._deregisterHookFns;fns.redirectTo=registerRedirectToHook(this),fns.onExit=registerOnExitHook(this),fns.onRetain=registerOnRetainHook(this),fns.onEnter=registerOnEnterHook(this),fns.eagerResolve=registerEagerResolvePath(this),fns.lazyResolve=registerLazyResolveState(this),fns.loadViews=registerLoadEnteringViews(this),fns.activateViews=registerActivateViews(this),fns.updateUrl=registerUpdateUrl(this),fns.lazyLoad=registerLazyLoadHook(this)},TransitionService}(),ViewService=function(){function ViewService(){var _this=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return _this._uiViews},_activeViewConfigs:function(){return _this._viewConfigs}}}return ViewService.prototype._rootViewContext=function(context){return this._rootContext=context||this._rootContext},ViewService.prototype._viewConfigFactory=function(viewType,factory){this._viewConfigFactories[viewType]=factory},ViewService.prototype.createViewConfig=function(path,decl){var cfgFactory=this._viewConfigFactories[decl.$type];if(!cfgFactory)throw new Error("ViewService: No view config factory registered for type "+decl.$type);var cfgs=cfgFactory(path,decl);return isArray(cfgs)?cfgs:[cfgs]},ViewService.prototype.deactivateViewConfig=function(viewConfig){trace.traceViewServiceEvent("<- Removing",viewConfig),removeFrom(this._viewConfigs,viewConfig)},ViewService.prototype.activateViewConfig=function(viewConfig){trace.traceViewServiceEvent("-> Registering",viewConfig),this._viewConfigs.push(viewConfig)},ViewService.prototype.sync=function(){function uiViewDepth(uiView){return uiView.fqn.split(".").length}function viewConfigDepth(config){for(var context=config.viewDecl.$context,count=0;++count&&context.parent;)context=context.parent;return count}var _this=this,uiViewsByFqn=this._uiViews.map(function(uiv){return[uiv.fqn,uiv]}).reduce(applyPairs,{}),matches=function(uiView){return function(viewConfig){if(uiView.$type!==viewConfig.viewDecl.$type)return!1;var vc=viewConfig.viewDecl,vcSegments=vc.$uiViewName.split("."),uivSegments=uiView.fqn.split(".");if(!equals(vcSegments,uivSegments.slice(0-vcSegments.length)))return!1;var negOffset=1-vcSegments.length||void 0,fqnToFirstSegment=uivSegments.slice(0,negOffset).join("."),uiViewContext=uiViewsByFqn[fqnToFirstSegment].creationContext;return vc.$uiViewContextAnchor===(uiViewContext&&uiViewContext.name)}},depthCompare=curry(function(depthFn,posNeg,left,right){return posNeg*(depthFn(left)-depthFn(right))}),matchingConfigPair=function(uiView){var matchingConfigs=_this._viewConfigs.filter(matches(uiView));return matchingConfigs.length>1&&matchingConfigs.sort(depthCompare(viewConfigDepth,-1)),[uiView,matchingConfigs[0]]},configureUIView=function(_a){var uiView=_a[0],viewConfig=_a[1];_this._uiViews.indexOf(uiView)!==-1&&uiView.configUpdated(viewConfig)};this._uiViews.sort(depthCompare(uiViewDepth,1)).map(matchingConfigPair).forEach(configureUIView)},ViewService.prototype.registerUIView=function(uiView){trace.traceViewServiceUIViewEvent("-> Registering",uiView);var uiViews=this._uiViews,fqnMatches=function(uiv){return uiv.fqn===uiView.fqn};return uiViews.filter(fqnMatches).length&&trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",uiView),uiViews.push(uiView),this.sync(),function(){var idx=uiViews.indexOf(uiView);return idx===-1?void trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",uiView):(trace.traceViewServiceUIViewEvent("<- Deregistering",uiView),void removeFrom(uiViews)(uiView))}},ViewService.prototype.available=function(){return this._uiViews.map(prop("fqn"))},ViewService.prototype.active=function(){return this._uiViews.filter(prop("$config")).map(prop("name"))},ViewService.normalizeUIViewTarget=function(context,rawViewName){void 0===rawViewName&&(rawViewName="");var viewAtContext=rawViewName.split("@"),uiViewName=viewAtContext[0]||"$default",uiViewContextAnchor=isString(viewAtContext[1])?viewAtContext[1]:"^",relativeViewNameSugar=/^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);relativeViewNameSugar&&(uiViewContextAnchor=relativeViewNameSugar[1],uiViewName=relativeViewNameSugar[2]),"!"===uiViewName.charAt(0)&&(uiViewName=uiViewName.substr(1),uiViewContextAnchor="");var relativeMatch=/^(\^(?:\.\^)*)$/;if(relativeMatch.exec(uiViewContextAnchor)){var anchor=uiViewContextAnchor.split(".").reduce(function(anchor,x){return anchor.parent},context);uiViewContextAnchor=anchor.name}return{uiViewName:uiViewName,uiViewContextAnchor:uiViewContextAnchor}},ViewService}(),StateMatcher=function(){function StateMatcher(_states){this._states=_states}return StateMatcher.prototype.isRelative=function(stateName){return stateName=stateName||"",0===stateName.indexOf(".")||0===stateName.indexOf("^")},StateMatcher.prototype.find=function(stateOrName,base){if(stateOrName||""===stateOrName){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name;this.isRelative(name)&&(name=this.resolvePath(name,base));var state=this._states[name];if(state&&(isStr||!(isStr||state!==stateOrName&&state.self!==stateOrName)))return state;if(isStr){var matches=values(this._states).filter(function(state){return new Glob(state.name).matches(name)});return matches.length>1&&console.log("stateMatcher.find: Found multiple matches for "+name+" using glob: ",matches.map(function(match){return match.name})),matches[0]}}},StateMatcher.prototype.resolvePath=function(name,base){if(!base)throw new Error("No reference point given for path '"+name+"'");for(var baseState=this.find(base),splitName=name.split("."),i=0,pathLength=splitName.length,current=baseState;i<pathLength;i++)if(""!==splitName[i]||0!==i){if("^"!==splitName[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+baseState.name+"'");current=current.parent}else current=baseState;var relName=splitName.slice(i).join(".");return current.name+(current.name&&relName?".":"")+relName},StateMatcher}(),parseUrl=function(url){if(!isString(url))return!1;var root="^"===url.charAt(0);return{val:root?url.substring(1):url,root:root}},getUrlBuilder=function($urlMatcherFactoryProvider,root){return function(state){var stateDec=state;stateDec&&stateDec.url&&stateDec.name&&stateDec.name.match(/\.\*\*$/)&&(stateDec.url+="{remainder:any}");var parsed=parseUrl(stateDec.url),parent=state.parent,url=parsed?$urlMatcherFactoryProvider.compile(parsed.val,{params:state.params||{},paramMap:function(paramConfig,isSearch){return stateDec.reloadOnSearch===!1&&isSearch&&(paramConfig=extend(paramConfig||{},{dynamic:!0})),paramConfig}}):stateDec.url;if(!url)return null;if(!$urlMatcherFactoryProvider.isMatcher(url))throw new Error("Invalid url '"+url+"' in state '"+state+"'");return parsed&&parsed.root?url:(parent&&parent.navigable||root()).url.append(url)}},getNavigableBuilder=function(isRoot){return function(state){return!isRoot(state)&&state.url?state:state.parent?state.parent.navigable:null}},getParamsBuilder=function(paramFactory){return function(state){var makeConfigParam=function(config,id){return paramFactory.fromConfig(id,null,config)},urlParams=state.url&&state.url.parameters({inherit:!1})||[],nonUrlParams=values(mapObj(omit(state.params||{},urlParams.map(prop("id"))),makeConfigParam));return urlParams.concat(nonUrlParams).map(function(p){return[p.id,p]}).reduce(applyPairs,{})}},StateBuilder=function(){function StateBuilder(matcher,urlMatcherFactory){function parentBuilder(state){return isRoot(state)?null:matcher.find(self.parentName(state))||root()}this.matcher=matcher;var self=this,root=function(){return matcher.find("")},isRoot=function(state){return""===state.name};this.builders={name:[nameBuilder],self:[selfBuilder],parent:[parentBuilder],data:[dataBuilder],url:[getUrlBuilder(urlMatcherFactory,root)],navigable:[getNavigableBuilder(isRoot)],params:[getParamsBuilder(urlMatcherFactory.paramFactory)],views:[],path:[pathBuilder],includes:[includesBuilder],resolvables:[resolvablesBuilder]}}return StateBuilder.prototype.builder=function(name,fn){var builders=this.builders,array=builders[name]||[];return isString(name)&&!isDefined(fn)?array.length>1?array:array[0]:isString(name)&&isFunction(fn)?(builders[name]=array,builders[name].push(fn),function(){return builders[name].splice(builders[name].indexOf(fn,1))&&null;
}):void 0},StateBuilder.prototype.build=function(state){var _a=this,matcher=_a.matcher,builders=_a.builders,parent=this.parentName(state);if(parent&&!matcher.find(parent))return null;for(var key in builders)if(builders.hasOwnProperty(key)){var chain=builders[key].reduce(function(parentFn,step){return function(_state){return step(_state,parentFn)}},noop$1);state[key]=chain(state)}return state},StateBuilder.prototype.parentName=function(state){var name=state.name||"",segments=name.split(".");if(segments.length>1){if(state.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+name+")");var lastSegment=segments.pop();return"**"===lastSegment&&segments.pop(),segments.join(".")}return state.parent?isString(state.parent)?state.parent:state.parent.name:""},StateBuilder.prototype.name=function(state){var name=state.name;if(name.indexOf(".")!==-1||!state.parent)return name;var parentName=isString(state.parent)?state.parent:state.parent.name;return parentName?parentName+"."+name:name},StateBuilder}(),StateQueueManager=function(){function StateQueueManager($registry,$urlRouter,states,builder,listeners){this.$registry=$registry,this.$urlRouter=$urlRouter,this.states=states,this.builder=builder,this.listeners=listeners,this.queue=[]}return StateQueueManager.prototype.dispose=function(){this.queue=[]},StateQueueManager.prototype.register=function(config){var _a=this,states=_a.states,queue=_a.queue,state=inherit(new State,extend({},config,{self:config,resolve:config.resolve||[],toString:function(){return config.name}}));if(!isString(state.name))throw new Error("State must have a valid name");if(states.hasOwnProperty(state.name)||pluck(queue,"name").indexOf(state.name)!==-1)throw new Error("State '"+state.name+"' is already defined");return queue.push(state),this.flush(),state},StateQueueManager.prototype.flush=function(){for(var _a=this,queue=_a.queue,states=_a.states,builder=_a.builder,registered=[],orphans=[],previousQueueLength={};queue.length>0;){var state=queue.shift(),result=builder.build(state),orphanIdx=orphans.indexOf(state);if(result){var existingState=this.$registry.get(state.name);if(existingState&&existingState.name===state.name)throw new Error("State '"+state.name+"' is already defined");existingState&&existingState.name===state.name+".**"&&this.$registry.deregister(existingState),states[state.name]=state,this.attachRoute(state),orphanIdx>=0&&orphans.splice(orphanIdx,1),registered.push(state)}else{var prev=previousQueueLength[state.name];if(previousQueueLength[state.name]=queue.length,orphanIdx>=0&&prev===queue.length)return queue.push(state),states;orphanIdx<0&&orphans.push(state),queue.push(state)}}return registered.length&&this.listeners.forEach(function(listener){return listener("registered",registered.map(function(s){return s.self}))}),states},StateQueueManager.prototype.attachRoute=function(state){!state.abstract&&state.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(state))},StateQueueManager}(),StateRegistry=function(){function StateRegistry(_router){this._router=_router,this.states={},this.listeners=[],this.matcher=new StateMatcher(this.states),this.builder=new StateBuilder(this.matcher,_router.urlMatcherFactory),this.stateQueue=new StateQueueManager(this,_router.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return StateRegistry.prototype._registerRoot=function(){var rootStateDef={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0},_root=this._root=this.stateQueue.register(rootStateDef);_root.navigable=null},StateRegistry.prototype.dispose=function(){var _this=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(state){return _this.get(state)&&_this.deregister(state)})},StateRegistry.prototype.onStatesChanged=function(listener){return this.listeners.push(listener),function(){removeFrom(this.listeners)(listener)}.bind(this)},StateRegistry.prototype.root=function(){return this._root},StateRegistry.prototype.register=function(stateDefinition){return this.stateQueue.register(stateDefinition)},StateRegistry.prototype._deregisterTree=function(state){var _this=this,all$$1=this.get().map(function(s){return s.$$state()}),getChildren=function(states){var children=all$$1.filter(function(s){return states.indexOf(s.parent)!==-1});return 0===children.length?children:children.concat(getChildren(children))},children=getChildren([state]),deregistered=[state].concat(children).reverse();return deregistered.forEach(function(state){var $ur=_this._router.urlRouter;$ur.rules().filter(propEq("state",state)).forEach($ur.removeRule.bind($ur)),delete _this.states[state.name]}),deregistered},StateRegistry.prototype.deregister=function(stateOrName){var _state=this.get(stateOrName);if(!_state)throw new Error("Can't deregister state; not found: "+stateOrName);var deregisteredStates=this._deregisterTree(_state.$$state());return this.listeners.forEach(function(listener){return listener("deregistered",deregisteredStates.map(function(s){return s.self}))}),deregisteredStates},StateRegistry.prototype.get=function(stateOrName,base){var _this=this;if(0===arguments.length)return Object.keys(this.states).map(function(name){return _this.states[name].self});var found=this.matcher.find(stateOrName,base);return found&&found.self||null},StateRegistry.prototype.decorator=function(name,func){return this.builder.builder(name,func)},StateRegistry}(),StateService=function(){function StateService(router){this.router=router,this.invalidCallbacks=[],this._defaultErrorHandler=function($error$){$error$ instanceof Error&&$error$.stack?(console.error($error$),console.error($error$.stack)):$error$ instanceof Rejection?(console.error($error$.toString()),$error$.detail&&$error$.detail.stack&&console.error($error$.detail.stack)):console.error($error$)};var getters=["current","$current","params","transition"],boundFns=Object.keys(StateService.prototype).filter(not(inArray(getters)));createProxyFunctions(val(StateService.prototype),this,val(this),boundFns)}return Object.defineProperty(StateService.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),StateService.prototype.dispose=function(){this.defaultErrorHandler(noop$1),this.invalidCallbacks=[]},StateService.prototype._handleInvalidTargetState=function(fromPath,toState){function invokeNextCallback(){var nextCallback=callbackQueue.dequeue();if(void 0===nextCallback)return Rejection.invalid(toState.error()).toPromise();var callbackResult=services.$q.when(nextCallback(toState,fromState,injector));return callbackResult.then(checkForRedirect).then(function(result){return result||invokeNextCallback()})}var _this=this,fromState=PathFactory.makeTargetState(fromPath),globals=this.router.globals,latestThing=function(){return globals.transitionHistory.peekTail()},latest=latestThing(),callbackQueue=new Queue(this.invalidCallbacks.slice()),injector=new ResolveContext(fromPath).injector(),checkForRedirect=function(result){if(result instanceof TargetState){var target=result;return target=_this.target(target.identifier(),target.params(),target.options()),target.valid()?latestThing()!==latest?Rejection.superseded().toPromise():_this.transitionTo(target.identifier(),target.params(),target.options()):Rejection.invalid(target.error()).toPromise()}};return invokeNextCallback()},StateService.prototype.onInvalid=function(callback){return this.invalidCallbacks.push(callback),function(){removeFrom(this.invalidCallbacks)(callback)}.bind(this)},StateService.prototype.reload=function(reloadState){return this.transitionTo(this.current,this.params,{reload:!isDefined(reloadState)||reloadState,inherit:!1,notify:!1})},StateService.prototype.go=function(to,params,options){var defautGoOpts={relative:this.$current,inherit:!0},transOpts=defaults(options,defautGoOpts,defaultTransOpts);return this.transitionTo(to,params,transOpts)},StateService.prototype.target=function(identifier,params,options){if(void 0===options&&(options={}),isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reg=this.router.stateRegistry;if(options.reloadState=options.reload===!0?reg.root():reg.matcher.find(options.reload,options.relative),options.reload&&!options.reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");var stateDefinition=reg.matcher.find(identifier,options.relative);return new TargetState(identifier,stateDefinition,params,options)},StateService.prototype.getCurrentPath=function(){var _this=this,globals=this.router.globals,latestSuccess=globals.successfulTransitions.peekTail(),rootPath=function(){return[new PathNode(_this.router.stateRegistry.root())]};return latestSuccess?latestSuccess.treeChanges().to:rootPath()},StateService.prototype.transitionTo=function(to,toParams,options){var _this=this;void 0===toParams&&(toParams={}),void 0===options&&(options={});var router=this.router,globals=router.globals,transHistory=globals.transitionHistory;options=defaults(options,defaultTransOpts),options=extend(options,{current:transHistory.peekTail.bind(transHistory)});var ref=this.target(to,toParams,options),currentPath=this.getCurrentPath();if(!ref.exists())return this._handleInvalidTargetState(currentPath,ref);if(!ref.valid())return silentRejection(ref.error());var rejectedTransitionHandler=function(transition){return function(error){if(error instanceof Rejection){if(error.type===exports.RejectType.IGNORED)return router.urlRouter.update(),services.$q.when(globals.current);var detail=error.detail;if(error.type===exports.RejectType.SUPERSEDED&&error.redirected&&detail instanceof TargetState){var redirect=transition.redirect(detail);return redirect.run().catch(rejectedTransitionHandler(redirect))}error.type===exports.RejectType.ABORTED&&router.urlRouter.update()}var errorHandler=_this.defaultErrorHandler();return errorHandler(error),services.$q.reject(error)}},transition=this.router.transitionService.create(currentPath,ref),transitionToPromise=transition.run().catch(rejectedTransitionHandler(transition));return silenceUncaughtInPromise(transitionToPromise),extend(transitionToPromise,{transition:transition})},StateService.prototype.is=function(stateOrName,params,options){options=defaults(options,{relative:this.$current});var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(isDefined(state)){if(this.$current!==state)return!1;if(!params)return!0;var schema=state.parameters({inherit:!0,matchingKeys:params});return Param.equals(schema,Param.values(schema,params),this.params)}},StateService.prototype.includes=function(stateOrName,params,options){options=defaults(options,{relative:this.$current});var glob=isString(stateOrName)&&Glob.fromString(stateOrName);if(glob){if(!glob.matches(this.$current.name))return!1;stateOrName=this.$current.name}var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative),include=this.$current.includes;if(isDefined(state)){if(!isDefined(include[state.name]))return!1;if(!params)return!0;var schema=state.parameters({inherit:!0,matchingKeys:params});return Param.equals(schema,Param.values(schema,params),this.params)}},StateService.prototype.href=function(stateOrName,params,options){var defaultHrefOpts={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};options=defaults(options,defaultHrefOpts),params=params||{};var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=this.params.$inherit(params,this.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&void 0!==nav.url&&null!==nav.url?this.router.urlRouter.href(nav.url,Param.values(state.parameters(),params),{absolute:options.absolute}):null},StateService.prototype.defaultErrorHandler=function(handler){return this._defaultErrorHandler=handler||this._defaultErrorHandler},StateService.prototype.get=function(stateOrName,base){var reg=this.router.stateRegistry;return 0===arguments.length?reg.get():reg.get(stateOrName,base||this.$current)},StateService.prototype.lazyLoad=function(stateOrName,transition){var state=this.get(stateOrName);if(!state||!state.lazyLoad)throw new Error("Can not lazy load "+stateOrName);var currentPath=this.getCurrentPath(),target=PathFactory.makeTargetState(currentPath);return transition=transition||this.router.transitionService.create(currentPath,target),lazyLoadState(transition,state)},StateService}(),StateParams=function(){function StateParams(params){void 0===params&&(params={}),extend(this,params)}return StateParams.prototype.$inherit=function(newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=Object.keys(parents[i].params),parentParams.length))for(var j in parentParams)inheritList.indexOf(parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=this[parentParams[j]]);return extend({},inherited,newParams)},StateParams}(),Globals=function(){function Globals(transitionService){var _this=this;this.params=new StateParams,this.transitionHistory=new Queue([],1),this.successfulTransitions=new Queue([],1);var beforeNewTransition=function($transition$){_this.transition=$transition$,_this.transitionHistory.enqueue($transition$);var updateGlobalState=function(){_this.successfulTransitions.enqueue($transition$),_this.$current=$transition$.$to(),_this.current=_this.$current.self,copy($transition$.params(),_this.params)};$transition$.onSuccess({},updateGlobalState,{priority:1e4});var clearCurrentTransition=function(){_this.transition===$transition$&&(_this.transition=null)};$transition$.promise.then(clearCurrentTransition,clearCurrentTransition)};transitionService.onBefore({},beforeNewTransition)}return Globals}(),makeStub=function(keys){return keys.reduce(function(acc,key){return acc[key]=notImplemented(key),acc},{dispose:noop$1})},locationServicesFns=["url","path","search","hash","onChange"],locationConfigFns=["port","protocol","host","baseHref","html5Mode","hashPrefix"],umfFns=["type","caseInsensitive","strictMode","defaultSquashPolicy"],rulesFns=["sort","when","otherwise","rules","rule","removeRule"],syncFns=["deferIntercept","listen","sync","match"],UrlService=function(){function UrlService(router,lateBind){void 0===lateBind&&(lateBind=!0),this.router=router,this.rules={},this.config={};var locationServices=function(){return router.locationService};createProxyFunctions(locationServices,this,locationServices,locationServicesFns,lateBind);var locationConfig=function(){return router.locationConfig};createProxyFunctions(locationConfig,this.config,locationConfig,locationConfigFns,lateBind);var umf=function(){return router.urlMatcherFactory};createProxyFunctions(umf,this.config,umf,umfFns);var urlRouter=function(){return router.urlRouter};createProxyFunctions(urlRouter,this.rules,urlRouter,rulesFns),createProxyFunctions(urlRouter,this,urlRouter,syncFns)}return UrlService.prototype.url=function(newurl,replace,state){},UrlService.prototype.path=function(){},UrlService.prototype.search=function(){},UrlService.prototype.hash=function(){},UrlService.prototype.onChange=function(callback){},UrlService.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},UrlService.prototype.dispose=function(){},UrlService.prototype.sync=function(evt){},UrlService.prototype.listen=function(enabled){},UrlService.prototype.deferIntercept=function(defer){},UrlService.prototype.match=function(urlParts){},UrlService}();UrlService.locationServiceStub=makeStub(locationServicesFns),UrlService.locationConfigStub=makeStub(locationConfigFns);var _routerInstance=0,UIRouter=function(){function UIRouter(locationService,locationConfig){void 0===locationService&&(locationService=UrlService.locationServiceStub),void 0===locationConfig&&(locationConfig=UrlService.locationConfigStub),this.locationService=locationService,this.locationConfig=locationConfig,this.$id=_routerInstance++,this.viewService=new ViewService,this.transitionService=new TransitionService(this),this.globals=new Globals(this.transitionService),this.urlMatcherFactory=new UrlMatcherFactory,this.urlRouter=new UrlRouter(this),this.stateRegistry=new StateRegistry(this),this.stateService=new StateService(this),this.urlService=new UrlService(this),this._disposables=[],this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(this.stateRegistry),this.disposable(locationService),this.disposable(locationConfig)}return UIRouter.prototype.disposable=function(disposable){this._disposables.push(disposable)},UIRouter.prototype.dispose=function(disposable){var _this=this;return disposable&&isFunction(disposable.dispose)?void disposable.dispose(this):void this._disposables.slice().forEach(function(d){try{"function"==typeof d.dispose&&d.dispose(_this),removeFrom(_this._disposables,d)}catch(ignored){}})},UIRouter.prototype.plugin=function(plugin,options){void 0===options&&(options={});var pluginInstance=new plugin(this,options);if(!pluginInstance.name)throw new Error("Required property `name` missing on plugin: "+pluginInstance);return this._disposables.push(pluginInstance),this._plugins[pluginInstance.name]=pluginInstance},UIRouter.prototype.getPlugin=function(pluginName){return pluginName?this._plugins[pluginName]:values(this._plugins)},UIRouter}(),stateSelf=prop("self"),Transition=function(){function Transition(fromPath,targetState,router){var _this=this;if(this._deferred=services.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this.isActive=function(){return _this===_this._options.current()},this.router=router,this._targetState=targetState,!targetState.valid())throw new Error(targetState.error());this._options=extend({current:val(this)},targetState.options()),this.$id=router.transitionService._transitionCount++;var toPath=PathFactory.buildToPath(fromPath,targetState);this._treeChanges=PathFactory.treeChanges(fromPath,toPath,this._options.reloadState),this.createTransitionHookRegFns();var onCreateHooks=this.hookBuilder().buildHooksForPhase(exports.TransitionHookPhase.CREATE);TransitionHook.runAllHooks(onCreateHooks),this.applyViewConfigs(router),this.applyRootResolvables(router)}return Transition.prototype.onBefore=function(criteria,callback,options){},Transition.prototype.onStart=function(criteria,callback,options){},Transition.prototype.onExit=function(criteria,callback,options){},Transition.prototype.onRetain=function(criteria,callback,options){},Transition.prototype.onEnter=function(criteria,callback,options){},Transition.prototype.onFinish=function(criteria,callback,options){},Transition.prototype.onSuccess=function(criteria,callback,options){},Transition.prototype.onError=function(criteria,callback,options){},Transition.prototype.createTransitionHookRegFns=function(){var _this=this;this.router.transitionService._pluginapi._getEvents().filter(function(type){return type.hookPhase!==exports.TransitionHookPhase.CREATE}).forEach(function(type){return makeEvent(_this,_this.router.transitionService,type)})},Transition.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]},Transition.prototype.applyViewConfigs=function(router){var enteringStates=this._treeChanges.entering.map(function(node){return node.state});PathFactory.applyViewConfigs(router.transitionService.$view,this._treeChanges.to,enteringStates)},Transition.prototype.applyRootResolvables=function(router){var _this=this,rootResolvables=[new Resolvable(UIRouter,function(){return router},[],void 0,router),new Resolvable(Transition,function(){return _this},[],void 0,this),new Resolvable("$transition$",function(){return _this},[],void 0,this),new Resolvable("$stateParams",function(){return _this.params()},[],void 0,this.params())],rootNode=this._treeChanges.to[0],context=new ResolveContext(this._treeChanges.to);context.addResolvables(rootResolvables,rootNode.state)},Transition.prototype.$from=function(){return tail(this._treeChanges.from).state},Transition.prototype.$to=function(){return tail(this._treeChanges.to).state},Transition.prototype.from=function(){return this.$from().self},Transition.prototype.to=function(){return this.$to().self},Transition.prototype.targetState=function(){return this._targetState},Transition.prototype.is=function(compare){return compare instanceof Transition?this.is({to:compare.$to().name,from:compare.$from().name}):!(compare.to&&!matchState(this.$to(),compare.to)||compare.from&&!matchState(this.$from(),compare.from))},Transition.prototype.params=function(pathname){return void 0===pathname&&(pathname="to"),Object.freeze(this._treeChanges[pathname].map(prop("paramValues")).reduce(mergeR,{}))},Transition.prototype.injector=function(state,pathName){void 0===pathName&&(pathName="to");var path=this._treeChanges[pathName];return state&&(path=PathFactory.subPath(path,function(node){return node.state===state||node.state.name===state})),new ResolveContext(path).injector()},Transition.prototype.getResolveTokens=function(pathname){return void 0===pathname&&(pathname="to"),new ResolveContext(this._treeChanges[pathname]).getTokens()},Transition.prototype.addResolvable=function(resolvable,state){void 0===state&&(state=""),resolvable=is(Resolvable)(resolvable)?resolvable:new Resolvable(resolvable);var stateName="string"==typeof state?state:state.name,topath=this._treeChanges.to,targetNode=find(topath,function(node){return node.state.name===stateName}),resolveContext=new ResolveContext(topath);resolveContext.addResolvables([resolvable],targetNode.state)},Transition.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},Transition.prototype.originalTransition=function(){var rf=this.redirectedFrom();return rf&&rf.originalTransition()||this},Transition.prototype.options=function(){return this._options},Transition.prototype.entering=function(){return map(this._treeChanges.entering,prop("state")).map(stateSelf)},Transition.prototype.exiting=function(){return map(this._treeChanges.exiting,prop("state")).map(stateSelf).reverse()},Transition.prototype.retained=function(){return map(this._treeChanges.retained,prop("state")).map(stateSelf)},Transition.prototype.views=function(pathname,state){void 0===pathname&&(pathname="entering");var path=this._treeChanges[pathname];return path=state?path.filter(propEq("state",state)):path,path.map(prop("views")).filter(identity).reduce(unnestR,[])},Transition.prototype.treeChanges=function(pathname){return pathname?this._treeChanges[pathname]:this._treeChanges},Transition.prototype.redirect=function(targetState){for(var redirects=1,trans=this;null!=(trans=trans.redirectedFrom());)if(++redirects>20)throw new Error("Too many consecutive Transition redirects (20+)");var redirectOpts={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&(redirectOpts.location="replace");var newOptions=extend({},this.options(),targetState.options(),redirectOpts);targetState=new TargetState(targetState.identifier(),targetState.$state(),targetState.params(),newOptions);var newTransition=this.router.transitionService.create(this._treeChanges.from,targetState),originalEnteringNodes=this._treeChanges.entering,redirectEnteringNodes=newTransition._treeChanges.entering,nodeIsReloading=function(reloadState){return function(node){return reloadState&&node.state.includes[reloadState.name]}},matchingEnteringNodes=PathNode.matching(redirectEnteringNodes,originalEnteringNodes).filter(not(nodeIsReloading(targetState.options().reloadState)));return matchingEnteringNodes.forEach(function(node,idx){node.resolvables=originalEnteringNodes[idx].resolvables}),newTransition},Transition.prototype._changedParams=function(){var tc=this._treeChanges;if(!this._options.reload&&!tc.exiting.length&&!tc.entering.length&&tc.to.length===tc.from.length){var pathsDiffer=arrayTuples(tc.to,tc.from).map(function(tuple){return tuple[0].state!==tuple[1].state}).reduce(anyTrueR,!1);if(!pathsDiffer){var nodeSchemas=tc.to.map(function(node){return node.paramSchema}),_a=[tc.to,tc.from].map(function(path){return path.map(function(x){return x.paramValues})}),toValues=_a[0],fromValues=_a[1],tuples=arrayTuples(nodeSchemas,toValues,fromValues);return tuples.map(function(_a){var schema=_a[0],toVals=_a[1],fromVals=_a[2];return Param.changed(schema,toVals,fromVals)}).reduce(unnestR,[])}}},Transition.prototype.dynamic=function(){var changes=this._changedParams();return!!changes&&changes.map(function(x){return x.dynamic}).reduce(anyTrueR,!1)},Transition.prototype.ignored=function(){var changes=this._changedParams();return!!changes&&0===changes.length},Transition.prototype.hookBuilder=function(){return new HookBuilder(this)},Transition.prototype.run=function(){var _this=this,runAllHooks=TransitionHook.runAllHooks,hookBuilder=this.hookBuilder(),globals=this.router.globals;globals.transitionHistory.enqueue(this);var onBeforeHooks=hookBuilder.buildHooksForPhase(exports.TransitionHookPhase.BEFORE),syncResult=TransitionHook.runOnBeforeHooks(onBeforeHooks);if(Rejection.isTransitionRejectionPromise(syncResult)){syncResult.catch(function(){return 0});var rejectReason=syncResult._transitionRejection;return this._deferred.reject(rejectReason),this.promise}if(!this.valid()){var error=new Error(this.error());return this._deferred.reject(error),this.promise}if(this.ignored())return trace.traceTransitionIgnored(this),this._deferred.reject(Rejection.ignored()),this.promise;var transitionSuccess=function(){trace.traceSuccess(_this.$to(),_this),_this.success=!0,_this._deferred.resolve(_this.to());var onSuccessHooks=hookBuilder.buildHooksForPhase(exports.TransitionHookPhase.SUCCESS);runAllHooks(onSuccessHooks)},transitionError=function(reason){trace.traceError(reason,_this),_this.success=!1,_this._deferred.reject(reason),_this._error=reason;var onErrorHooks=hookBuilder.buildHooksForPhase(exports.TransitionHookPhase.ERROR);runAllHooks(onErrorHooks)};trace.traceTransitionStart(this);var appendHookToChain=function(prev,nextHook){return prev.then(function(){return nextHook.invokeHook()})},asyncHooks=hookBuilder.buildHooksForPhase(exports.TransitionHookPhase.ASYNC);return asyncHooks.reduce(appendHookToChain,syncResult).then(transitionSuccess,transitionError),this.promise},Transition.prototype.valid=function(){return!this.error()||void 0!==this.success},Transition.prototype.error=function(){var state=this.$to();return state.self.abstract?"Cannot transition to abstract state '"+state.name+"'":Param.validates(state.parameters(),this.params())?this.success===!1?this._error:void 0:"Param values not valid for state '"+state.name+"'"},Transition.prototype.toString=function(){var fromStateOrName=this.from(),toStateOrName=this.to(),avoidEmptyHash=function(params){return null!==params["#"]&&void 0!==params["#"]?params:omit(params,"#")},id=this.$id,from=isObject(fromStateOrName)?fromStateOrName.name:fromStateOrName,fromParams=toJson(avoidEmptyHash(this._treeChanges.from.map(prop("paramValues")).reduce(mergeR,{}))),toValid=this.valid()?"":"(X) ",to=isObject(toStateOrName)?toStateOrName.name:toStateOrName,toParams=toJson(avoidEmptyHash(this.params()));return"Transition#"+id+"( '"+from+"'"+fromParams+" -> "+toValid+"'"+to+"'"+toParams+" )"},Transition}();Transition.diToken=Transition;var stringifyPatternFn=null,stringifyPattern=function(value){var isTransitionRejectionPromise=Rejection.isTransitionRejectionPromise;return(stringifyPatternFn=stringifyPatternFn||pattern([[not(isDefined),val("undefined")],[isNull,val("null")],[isPromise,val("[Promise]")],[isTransitionRejectionPromise,function(x){return x._transitionRejection.toString()}],[is(Rejection),invoke("toString")],[is(Transition),invoke("toString")],[is(Resolvable),invoke("toString")],[isInjectable,functionToString],[val(!0),identity]]))(value)},beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);return idx===-1?[str,""]:[str.substr(0,idx),str.substr(idx+1)]}},UIRouterPluginBase=function(){function UIRouterPluginBase(){}return UIRouterPluginBase.prototype.dispose=function(router){},UIRouterPluginBase}(),index$1=Object.freeze({fromJson:fromJson,toJson:toJson,copy:copy,forEach:forEach,extend:extend,equals:equals,identity:identity,noop:noop$1,createProxyFunctions:createProxyFunctions,inherit:inherit,inArray:inArray,_inArray:_inArray,removeFrom:removeFrom,_removeFrom:_removeFrom,pushTo:pushTo,_pushTo:_pushTo,deregAll:deregAll,defaults:defaults,merge:merge,mergeR:mergeR,ancestors:ancestors,pick:pick,omit:omit,pluck:pluck,filter:filter,find:find,mapObj:mapObj,map:map,values:values,allTrueR:allTrueR,anyTrueR:anyTrueR,unnestR:unnestR,flattenR:flattenR,pushR:pushR,uniqR:uniqR,unnest:unnest,flatten:flatten,assertPredicate:assertPredicate,assertMap:assertMap,assertFn:assertFn,pairs:pairs,arrayTuples:arrayTuples,applyPairs:applyPairs,tail:tail,sortBy:sortBy,composeSort:composeSort,silenceUncaughtInPromise:silenceUncaughtInPromise,silentRejection:silentRejection,notImplemented:notImplemented,services:services,Glob:Glob,curry:curry,compose:compose,pipe:pipe,prop:prop,propEq:propEq,parse:parse,not:not,and:and,or:or,all:all,any:any,is:is,eq:eq,val:val,invoke:invoke,pattern:pattern,isUndefined:isUndefined,isDefined:isDefined,isNull:isNull,isNullOrUndefined:isNullOrUndefined,isFunction:isFunction,isNumber:isNumber,isString:isString,isObject:isObject,isArray:isArray,isDate:isDate,isRegExp:isRegExp,isInjectable:isInjectable,isPromise:isPromise,Queue:Queue,maxLength:maxLength,padString:padString,kebobString:kebobString,functionToString:functionToString,fnToString:fnToString,stringify:stringify,beforeAfterSubstr:beforeAfterSubstr,splitOnDelim:splitOnDelim,joinNeighborsR:joinNeighborsR,get Category(){return exports.Category},Trace:Trace,trace:trace,get DefType(){return exports.DefType},Param:Param,ParamTypes:ParamTypes,StateParams:StateParams,ParamType:ParamType,PathNode:PathNode,PathFactory:PathFactory,resolvePolicies:resolvePolicies,defaultResolvePolicy:defaultResolvePolicy,Resolvable:Resolvable,NATIVE_INJECTOR_TOKEN:NATIVE_INJECTOR_TOKEN,ResolveContext:ResolveContext,resolvablesBuilder:resolvablesBuilder,StateBuilder:StateBuilder,State:State,StateMatcher:StateMatcher,StateQueueManager:StateQueueManager,StateRegistry:StateRegistry,StateService:StateService,TargetState:TargetState,get TransitionHookPhase(){return exports.TransitionHookPhase},get TransitionHookScope(){return exports.TransitionHookScope},HookBuilder:HookBuilder,matchState:matchState,RegisteredHook:RegisteredHook,makeEvent:makeEvent,get RejectType(){return exports.RejectType},Rejection:Rejection,Transition:Transition,TransitionHook:TransitionHook,TransitionEventType:TransitionEventType,defaultTransOpts:defaultTransOpts,TransitionService:TransitionService,UrlMatcher:UrlMatcher,UrlMatcherFactory:UrlMatcherFactory,UrlRouter:UrlRouter,UrlRuleFactory:UrlRuleFactory,BaseUrlRule:BaseUrlRule,UrlService:UrlService,ViewService:ViewService,Globals:Globals,UIRouter:UIRouter,UIRouterPluginBase:UIRouterPluginBase}),ng_from_global=angular,ng=ng_from_import&&ng_from_import.module?ng_from_import:ng_from_global,hasAnyKey=function(keys,obj){return keys.reduce(function(acc,key){return acc||isDefined(obj[key])},!1)},id=0,Ng1ViewConfig=function(){function Ng1ViewConfig(path,viewDecl,factory){var _this=this;
this.path=path,this.viewDecl=viewDecl,this.factory=factory,this.$id=id++,this.loaded=!1,this.getTemplate=function(uiView,context){return _this.component?_this.factory.makeComponentTemplate(uiView,context,_this.component,_this.viewDecl.bindings):_this.template}}return Ng1ViewConfig.prototype.load=function(){var _this=this,$q=services.$q,context=new ResolveContext(this.path),params=this.path.reduce(function(acc,node){return extend(acc,node.paramValues)},{}),promises={template:$q.when(this.factory.fromConfig(this.viewDecl,params,context)),controller:$q.when(this.getController(context))};return $q.all(promises).then(function(results){return trace.traceViewServiceEvent("Loaded",_this),_this.controller=results.controller,extend(_this,results.template),_this})},Ng1ViewConfig.prototype.getController=function(context){var provider=this.viewDecl.controllerProvider;if(!isInjectable(provider))return this.viewDecl.controller;var deps=services.$injector.annotate(provider),providerFn=isArray(provider)?tail(provider):provider,resolvable=new Resolvable("",providerFn,deps);return resolvable.get(context)},Ng1ViewConfig}(),TemplateFactory=function(){function TemplateFactory(){var _this=this;this._useHttp=ng.version.minor<3,this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector){return _this.$templateRequest=$injector.has&&$injector.has("$templateRequest")&&$injector.get("$templateRequest"),_this.$http=$http,_this.$templateCache=$templateCache,_this}]}return TemplateFactory.prototype.useHttpService=function(value){this._useHttp=value},TemplateFactory.prototype.fromConfig=function(config,params,context){var defaultTemplate="<ui-view></ui-view>",asTemplate=function(result){return services.$q.when(result).then(function(str){return{template:str}})},asComponent=function(result){return services.$q.when(result).then(function(str){return{component:str}})};return isDefined(config.template)?asTemplate(this.fromString(config.template,params)):isDefined(config.templateUrl)?asTemplate(this.fromUrl(config.templateUrl,params)):isDefined(config.templateProvider)?asTemplate(this.fromProvider(config.templateProvider,params,context)):isDefined(config.component)?asComponent(config.component):isDefined(config.componentProvider)?asComponent(this.fromComponentProvider(config.componentProvider,params,context)):asTemplate(defaultTemplate)},TemplateFactory.prototype.fromString=function(template,params){return isFunction(template)?template(params):template},TemplateFactory.prototype.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:this._useHttp?this.$http.get(url,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data}):this.$templateRequest(url)},TemplateFactory.prototype.fromProvider=function(provider,params,context){var deps=services.$injector.annotate(provider),providerFn=isArray(provider)?tail(provider):provider,resolvable=new Resolvable("",providerFn,deps);return resolvable.get(context)},TemplateFactory.prototype.fromComponentProvider=function(provider,params,context){var deps=services.$injector.annotate(provider),providerFn=isArray(provider)?tail(provider):provider,resolvable=new Resolvable("",providerFn,deps);return resolvable.get(context)},TemplateFactory.prototype.makeComponentTemplate=function(uiView,context,component,bindings){bindings=bindings||{};var prefix=ng.version.minor>=3?"::":"",attributeTpl=function(input){var name=input.name,type=input.type,attrName=kebobString(name);if(uiView.attr(attrName)&&!bindings[name])return attrName+"='"+uiView.attr(attrName)+"'";var resolveName=bindings[name]||name;if("@"===type)return attrName+"='{{"+prefix+"$resolve."+resolveName+"}}'";if("&"===type){var res=context.getResolvable(resolveName),fn=res&&res.data,args=fn&&services.$injector.annotate(fn)||[],arrayIdxStr=isArray(fn)?"["+(fn.length-1)+"]":"";return attrName+"='$resolve."+resolveName+arrayIdxStr+"("+args.join(",")+")'"}return attrName+"='"+prefix+"$resolve."+resolveName+"'"},attrs=getComponentBindings(component).map(attributeTpl).join(" "),kebobName=kebobString(component);return"<"+kebobName+" "+attrs+"></"+kebobName+">"},TemplateFactory}(),getBindings=function(def){return scopeBindings(isObject(def.bindToController)?def.bindToController:def.scope)},scopeBindings=function(bindingsObj){return Object.keys(bindingsObj||{}).map(function(key){return[key,/^([=<@&])[?]?(.*)/.exec(bindingsObj[key])]}).filter(function(tuple){return isDefined(tuple)&&isArray(tuple[1])}).map(function(tuple){return{name:tuple[1][2]||tuple[0],type:tuple[1][1]}})},StateProvider=function(){function StateProvider(stateRegistry,stateService){this.stateRegistry=stateRegistry,this.stateService=stateService,createProxyFunctions(val(StateProvider.prototype),this,val(this))}return StateProvider.prototype.decorator=function(name,func){return this.stateRegistry.decorator(name,func)||this},StateProvider.prototype.state=function(name,definition){return isObject(name)?definition=name:definition.name=name,this.stateRegistry.register(definition),this},StateProvider.prototype.onInvalid=function(callback){return this.stateService.onInvalid(callback)},StateProvider}(),getStateHookBuilder=function(hookName){return function(state,parentFn){function decoratedNg1Hook(trans,state){var resolveContext=new ResolveContext(trans.treeChanges(pathname)),locals=extend(getLocals(resolveContext),{$state$:state,$transition$:trans});return services.$injector.invoke(hook,this,locals)}var hook=state[hookName],pathname="onExit"===hookName?"from":"to";return hook?decoratedNg1Hook:void 0}},Ng1LocationServices=function(){function Ng1LocationServices($locationProvider){this._urlListeners=[],this.$locationProvider=$locationProvider;var _lp=val($locationProvider);createProxyFunctions(_lp,this,_lp,["hashPrefix"])}return Ng1LocationServices.prototype.dispose=function(){},Ng1LocationServices.prototype.onChange=function(callback){var _this=this;return this._urlListeners.push(callback),function(){return removeFrom(_this._urlListeners)(callback)}},Ng1LocationServices.prototype.html5Mode=function(){var html5Mode=this.$locationProvider.html5Mode();return html5Mode=isObject(html5Mode)?html5Mode.enabled:html5Mode,html5Mode&&this.$sniffer.history},Ng1LocationServices.prototype.url=function(newUrl,replace,state){return void 0===replace&&(replace=!1),newUrl&&this.$location.url(newUrl),replace&&this.$location.replace(),state&&this.$location.state(state),this.$location.url()},Ng1LocationServices.prototype._runtimeServices=function($rootScope,$location,$sniffer,$browser){var _this=this;this.$location=$location,this.$sniffer=$sniffer,$rootScope.$on("$locationChangeSuccess",function(evt){return _this._urlListeners.forEach(function(fn){return fn(evt)})});var _loc=val($location),_browser=val($browser);createProxyFunctions(_loc,this,_loc,["replace","path","search","hash"]),createProxyFunctions(_loc,this,_loc,["port","protocol","host"]),createProxyFunctions(_browser,this,_browser,["baseHref"])},Ng1LocationServices.monkeyPatchPathParameterType=function(router){var pathType=router.urlMatcherFactory.type("path");pathType.encode=function(val$$1){return null!=val$$1?val$$1.toString().replace(/(~|\/)/g,function(m){return{"~":"~~","/":"~2F"}[m]}):val$$1},pathType.decode=function(val$$1){return null!=val$$1?val$$1.toString().replace(/(~~|~2F)/g,function(m){return{"~~":"~","~2F":"/"}[m]}):val$$1}},Ng1LocationServices}(),UrlRouterProvider=function(){function UrlRouterProvider(router){this._router=router,this._urlRouter=router.urlRouter}return UrlRouterProvider.prototype.$get=function(){var urlRouter=this._urlRouter;return urlRouter.update(!0),urlRouter.interceptDeferred||urlRouter.listen(),urlRouter},UrlRouterProvider.prototype.rule=function(ruleFn){var _this=this;if(!isFunction(ruleFn))throw new Error("'rule' must be a function");var match=function(){return ruleFn(services.$injector,_this._router.locationService)},rule=new BaseUrlRule(match,identity);return this._urlRouter.rule(rule),this},UrlRouterProvider.prototype.otherwise=function(rule){var _this=this,urlRouter=this._urlRouter;if(isString(rule))urlRouter.otherwise(rule);else{if(!isFunction(rule))throw new Error("'rule' must be a string or function");urlRouter.otherwise(function(){return rule(services.$injector,_this._router.locationService)})}return this},UrlRouterProvider.prototype.when=function(what,handler){return(isArray(handler)||isFunction(handler))&&(handler=UrlRouterProvider.injectableHandler(this._router,handler)),this._urlRouter.when(what,handler),this},UrlRouterProvider.injectableHandler=function(router,handler){return function(match){return services.$injector.invoke(handler,null,{$match:match,$stateParams:router.globals.params})}},UrlRouterProvider.prototype.deferIntercept=function(defer){this._urlRouter.deferIntercept(defer)},UrlRouterProvider}();ng.module("ui.router.angular1",[]);var mod_init=ng.module("ui.router.init",[]),mod_util=ng.module("ui.router.util",["ng","ui.router.init"]),mod_rtr=ng.module("ui.router.router",["ui.router.util"]),mod_state=ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),mod_main=ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),router=(ng.module("ui.router.compat",["ui.router"]),null);$uiRouter.$inject=["$locationProvider"];var getProviderFor=function(serviceName){return["$uiRouterProvider",function($urp){var service=$urp.router[serviceName];return service.$get=function(){return service},service}]};runBlock.$inject=["$injector","$q","$uiRouter"];var getUrlRouterProvider=function(router){return router.urlRouterProvider=new UrlRouterProvider(router)},getStateProvider=function(){return extend(router.stateProvider,{$get:function(){return router.stateService}})};watchDigests.$inject=["$rootScope"],mod_init.provider("$uiRouter",$uiRouter),mod_rtr.provider("$urlRouter",["$uiRouterProvider",getUrlRouterProvider]),mod_util.provider("$urlService",getProviderFor("urlService")),mod_util.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return router.urlMatcherFactory}]),mod_util.provider("$templateFactory",function(){return new TemplateFactory}),mod_state.provider("$stateRegistry",getProviderFor("stateRegistry")),mod_state.provider("$uiRouterGlobals",getProviderFor("globals")),mod_state.provider("$transitions",getProviderFor("transitionService")),mod_state.provider("$state",["$uiRouterProvider",getStateProvider]),mod_state.factory("$stateParams",["$uiRouter",function($uiRouter){return $uiRouter.globals.params}]),mod_main.factory("$view",function(){return router.viewService}),mod_main.service("$trace",function(){return trace}),mod_main.run(watchDigests),mod_util.run(["$urlMatcherFactory",function($urlMatcherFactory){}]),mod_state.run(["$state",function($state){}]),mod_rtr.run(["$urlRouter",function($urlRouter){}]),mod_init.run(runBlock);var uiSref,getLocals=function(ctx){var tokens=ctx.getTokens().filter(isString),tuples=tokens.map(function(key){var resolvable=ctx.getResolvable(key),waitPolicy=ctx.getPolicy(resolvable).async;return[key,"NOWAIT"===waitPolicy?resolvable.promise:resolvable.data]});return tuples.reduce(applyPairs,{})};uiSref=["$uiRouter","$timeout",function($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){function update(){var def=getDef();unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams)),null!=def.href&&attrs.$set(type.attr,def.href)}var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,rawDef={},getDef=function(){return processedDef($state,element,rawDef)},ref=parseStateRef(attrs.uiSref);rawDef.uiState=ref.state,rawDef.uiStateOpts=attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{},ref.paramExpr&&(scope.$watch(ref.paramExpr,function(val$$1){rawDef.uiStateParams=ng.copy(val$$1),update()},!0),rawDef.uiStateParams=ng.copy(scope.$eval(ref.paramExpr))),update(),scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update)),scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,getDef),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",function(){element[element.off?"off":"unbind"]("click",hookFn)}))}}}];var uiState;uiState=["$uiRouter","$timeout",function($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){function update(){var def=getDef();unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams)),null!=def.href&&attrs.$set(type.attr,def.href)}var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,rawDef={},getDef=function(){return processedDef($state,element,rawDef)},inputAttrs=["uiState","uiStateParams","uiStateOpts"],watchDeregFns=inputAttrs.reduce(function(acc,attr){return acc[attr]=noop$1,acc},{});inputAttrs.forEach(function(field){rawDef[field]=attrs[field]?scope.$eval(attrs[field]):null,attrs.$observe(field,function(expr){watchDeregFns[field](),watchDeregFns[field]=scope.$watch(expr,function(newval){rawDef[field]=newval,update()},!0)})}),update(),scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update)),scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,getDef),element[element.on?"on":"bind"]("click",hookFn),scope.$on("$destroy",function(){element[element.off?"off":"unbind"]("click",hookFn)}))}}}];var uiSrefActive;uiSrefActive=["$state","$stateParams","$interpolate","$uiRouter",function($state,$stateParams,$interpolate,$uiRouter){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function updateAfterTransition(trans){trans.promise.then(update)}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element)),stateInfo={state:state||{name:stateName},params:stateParams,activeClass:activeClass};return states.push(stateInfo),function(){removeFrom(states)(stateInfo)}}function update(){var splitClasses=function(str){return str.split(/\s/).filter(identity)},getClasses=function(stateList){return stateList.map(function(x){return x.activeClass}).map(splitClasses).reduce(unnestR,[])},allClasses=getClasses(states).concat(splitClasses(activeEqClass)).reduce(uniqR,[]),fuzzyClasses=getClasses(states.filter(function(x){return $state.includes(x.state.name,x.params)})),exactlyMatchesAny=!!states.filter(function(x){return $state.is(x.state.name,x.params)}).length,exactClasses=exactlyMatchesAny?splitClasses(activeEqClass):[],addClasses=fuzzyClasses.concat(exactClasses).reduce(uniqR,[]),removeClasses=allClasses.filter(function(cls){return!inArray(addClasses,cls)});$scope.$evalAsync(function(){addClasses.forEach(function(className){return $element.addClass(className)}),removeClasses.forEach(function(className){return $element.removeClass(className)})})}var activeEqClass,uiSrefActive,states=[];activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope),isObject(uiSrefActive)&&forEach(uiSrefActive,function(stateOrName,activeClass){if(isString(stateOrName)){var ref=parseStateRef(stateOrName);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}}),this.$$addStateInfo=function(newState,newParams){if(!(isObject(uiSrefActive)&&states.length>0)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$stateChangeSuccess",update),$scope.$on("$destroy",$uiRouter.transitionService.onStart({},updateAfterTransition)),$uiRouter.globals.transition&&updateAfterTransition($uiRouter.globals.transition),update()}]}}],ng.module("ui.router.state").directive("uiSref",uiSref).directive("uiSrefActive",uiSrefActive).directive("uiSrefActiveEq",uiSrefActive).directive("uiState",uiState),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],ng.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter);var uiView;uiView=["$view","$animate","$uiViewScroll","$interpolate","$q",function($view,$animate,$uiViewScroll,$interpolate,$q){function getRenderer(attrs,scope){return{enter:function(element,target,cb){ng.version.minor>2?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){ng.version.minor>2?$animate.leave(element).then(cb):$animate.leave(element,cb)}}}function configsEqual(config1,config2){return config1===config2}var rootData={$cfg:{viewDecl:{$context:$view._pluginapi._rootViewContext()}},$uiView:{}},directive={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function configUpdatedCallback(config){(!config||config instanceof Ng1ViewConfig)&&(configsEqual(viewConfig,config)||(trace.traceUIViewConfigUpdated(activeUIView,config&&config.viewDecl&&config.viewDecl.$context),viewConfig=config,updateView(config)))}function cleanupLastView(){if(previousEl&&(trace.traceUIViewEvent("Removing (previous) el",previousEl.data("$uiView")),previousEl.remove(),previousEl=null),currentScope&&(trace.traceUIViewEvent("Destroying scope",activeUIView),currentScope.$destroy(),currentScope=null),currentEl){var _viewData_1=currentEl.data("$uiViewAnim");trace.traceUIViewEvent("Animate out",_viewData_1),renderer.leave(currentEl,function(){_viewData_1.$$animLeave.resolve(),previousEl=null}),previousEl=currentEl,currentEl=null}}function updateView(config){var newScope=scope.$new(),animEnter=$q.defer(),animLeave=$q.defer(),$uiViewData={$cfg:config,$uiView:activeUIView},$uiViewAnim={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};newScope.$emit("$viewContentLoading",name);var cloned=$transclude(newScope,function(clone){clone.data("$uiViewAnim",$uiViewAnim),clone.data("$uiView",$uiViewData),renderer.enter(clone,$element,function(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=cloned,currentScope=newScope,currentScope.$emit("$viewContentLoaded",config||viewConfig),currentScope.$eval(onloadExp)}var previousEl,currentEl,currentScope,unregister,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope),viewConfig=void 0,inherited=$element.inheritedData("$uiView")||rootData,name=$interpolate(attrs.uiView||attrs.name||"")(scope)||"$default",activeUIView={$type:"ng1",id:directive.count++,name:name,fqn:inherited.$uiView.fqn?inherited.$uiView.fqn+"."+name:name,config:null,configUpdated:configUpdatedCallback,get creationContext(){return parse("$cfg.viewDecl.$context")(inherited)}};trace.traceUIViewEvent("Linking",activeUIView),$element.data("$uiView",{$uiView:activeUIView}),updateView(),unregister=$view.registerUIView(activeUIView),scope.$on("$destroy",function(){trace.traceUIViewEvent("Destroying/Unregistering",activeUIView),unregister()})}}};return directive}],$ViewDirectiveFill.$inject=["$compile","$controller","$transitions","$view","$timeout"];var hasComponentImpl="function"==typeof ng.module("ui.router").component;ng.module("ui.router.state").directive("uiView",uiView),ng.module("ui.router.state").directive("uiView",$ViewDirectiveFill),ng.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider);var index="ui.router";exports.core=index$1,exports.default=index,exports.fromJson=fromJson,exports.toJson=toJson,exports.copy=copy,exports.forEach=forEach,exports.extend=extend,exports.equals=equals,exports.identity=identity,exports.noop=noop$1,exports.createProxyFunctions=createProxyFunctions,exports.inherit=inherit,exports.inArray=inArray,exports._inArray=_inArray,exports.removeFrom=removeFrom,exports._removeFrom=_removeFrom,exports.pushTo=pushTo,exports._pushTo=_pushTo,exports.deregAll=deregAll,exports.defaults=defaults,exports.merge=merge,exports.mergeR=mergeR,exports.ancestors=ancestors,exports.pick=pick,exports.omit=omit,exports.pluck=pluck,exports.filter=filter,exports.find=find,exports.mapObj=mapObj,exports.map=map,exports.values=values,exports.allTrueR=allTrueR,exports.anyTrueR=anyTrueR,exports.unnestR=unnestR,exports.flattenR=flattenR,exports.pushR=pushR,exports.uniqR=uniqR,exports.unnest=unnest,exports.flatten=flatten,exports.assertPredicate=assertPredicate,exports.assertMap=assertMap,exports.assertFn=assertFn,exports.pairs=pairs,exports.arrayTuples=arrayTuples,exports.applyPairs=applyPairs,exports.tail=tail,exports.sortBy=sortBy,exports.composeSort=composeSort,exports.silenceUncaughtInPromise=silenceUncaughtInPromise,exports.silentRejection=silentRejection,exports.notImplemented=notImplemented,exports.services=services,exports.Glob=Glob,exports.curry=curry,exports.compose=compose,exports.pipe=pipe,exports.prop=prop,exports.propEq=propEq,exports.parse=parse,exports.not=not,exports.and=and,exports.or=or,exports.all=all,exports.any=any,exports.is=is,exports.eq=eq,exports.val=val,exports.invoke=invoke,exports.pattern=pattern,exports.isUndefined=isUndefined,exports.isDefined=isDefined,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isFunction=isFunction,exports.isNumber=isNumber,exports.isString=isString,exports.isObject=isObject,exports.isArray=isArray,exports.isDate=isDate,exports.isRegExp=isRegExp,exports.isInjectable=isInjectable,exports.isPromise=isPromise,exports.Queue=Queue,exports.maxLength=maxLength,exports.padString=padString,exports.kebobString=kebobString,exports.functionToString=functionToString,exports.fnToString=fnToString,exports.stringify=stringify,exports.beforeAfterSubstr=beforeAfterSubstr,exports.splitOnDelim=splitOnDelim,exports.joinNeighborsR=joinNeighborsR,exports.Trace=Trace,exports.trace=trace,exports.Param=Param,exports.ParamTypes=ParamTypes,exports.StateParams=StateParams,exports.ParamType=ParamType,exports.PathNode=PathNode,exports.PathFactory=PathFactory,exports.resolvePolicies=resolvePolicies,exports.defaultResolvePolicy=defaultResolvePolicy,exports.Resolvable=Resolvable,exports.NATIVE_INJECTOR_TOKEN=NATIVE_INJECTOR_TOKEN,exports.ResolveContext=ResolveContext,exports.resolvablesBuilder=resolvablesBuilder,exports.StateBuilder=StateBuilder,exports.State=State,exports.StateMatcher=StateMatcher,exports.StateQueueManager=StateQueueManager,exports.StateRegistry=StateRegistry,exports.StateService=StateService,exports.TargetState=TargetState,exports.HookBuilder=HookBuilder,exports.matchState=matchState,exports.RegisteredHook=RegisteredHook,exports.makeEvent=makeEvent,exports.Rejection=Rejection,exports.Transition=Transition,exports.TransitionHook=TransitionHook,exports.TransitionEventType=TransitionEventType,exports.defaultTransOpts=defaultTransOpts,exports.TransitionService=TransitionService,exports.UrlMatcher=UrlMatcher,exports.UrlMatcherFactory=UrlMatcherFactory,exports.UrlRouter=UrlRouter,exports.UrlRuleFactory=UrlRuleFactory,exports.BaseUrlRule=BaseUrlRule,exports.UrlService=UrlService,exports.ViewService=ViewService,exports.Globals=Globals,exports.UIRouter=UIRouter,exports.UIRouterPluginBase=UIRouterPluginBase,exports.watchDigests=watchDigests,exports.getLocals=getLocals,exports.getNg1ViewConfigFactory=getNg1ViewConfigFactory,exports.ng1ViewsBuilder=ng1ViewsBuilder,exports.Ng1ViewConfig=Ng1ViewConfig,exports.StateProvider=StateProvider,Object.defineProperty(exports,"__esModule",{value:!0})})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){__webpack_require__(93),module.exports="ngCookies"},function(module,exports){/**
	 * @license AngularJS v1.5.8
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function $$CookieWriter($document,$log,$browser){function buildCookieString(name,value,options){var path,expires;options=options||{},expires=options.expires,path=angular.isDefined(options.path)?options.path:cookiePath,angular.isUndefined(value)&&(expires="Thu, 01 Jan 1970 00:00:00 GMT",value=""),angular.isString(expires)&&(expires=new Date(expires));var str=encodeURIComponent(name)+"="+encodeURIComponent(value);str+=path?";path="+path:"",str+=options.domain?";domain="+options.domain:"",str+=expires?";expires="+expires.toUTCString():"",str+=options.secure?";secure":"";var cookieLength=str.length+1;return cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"),str}var cookiePath=$browser.baseHref(),rawDocument=$document[0];return function(name,value,options){rawDocument.cookie=buildCookieString(name,value,options)}}angular.module("ngCookies",["ng"]).provider("$cookies",[function(){function calcOptions(options){return options?angular.extend({},defaults,options):defaults}var defaults=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function($$cookieReader,$$cookieWriter){return{get:function(key){return $$cookieReader()[key]},getObject:function(key){var value=this.get(key);return value?angular.fromJson(value):value},getAll:function(){return $$cookieReader()},put:function(key,value,options){$$cookieWriter(key,value,calcOptions(options))},putObject:function(key,value,options){this.put(key,angular.toJson(value),options)},remove:function(key,options){$$cookieWriter(key,void 0,calcOptions(options))}}}]}]),angular.module("ngCookies").factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){return $cookies.getObject(key)},put:function(key,value){$cookies.putObject(key,value)},remove:function(key){$cookies.remove(key)}}}]),$$CookieWriter.$inject=["$document","$log","$browser"],angular.module("ngCookies").provider("$$cookieWriter",function(){this.$get=$$CookieWriter})}(window,window.angular)},function(module,exports){/*! angular-breadcrumb - v0.5.0
	* http://ncuillery.github.io/angular-breadcrumb
	* Copyright (c) 2016 Nicolas Cuillery; Licensed MIT */
!function(window,angular,undefined){"use strict";function isAOlderThanB(scopeA,scopeB){return angular.equals(scopeA.length,scopeB.length)?scopeA>scopeB:scopeA.length>scopeB.length}function parseStateRef(ref){var parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function registerListenerOnce(tag,$rootScope,event,fn){var deregisterListenerFn=$registeredListeners[tag];deregisterListenerFn!==undefined&&deregisterListenerFn(),deregisterListenerFn=$rootScope.$on(event,fn),$registeredListeners[tag]=deregisterListenerFn}function $Breadcrumb(){var $$options={prefixStateName:null,template:"bootstrap3",templateUrl:null,templateLast:"default",templateLastUrl:null,includeAbstract:!1};this.setOptions=function(options){angular.extend($$options,options)},this.$get=["$state","$stateParams","$rootScope",function($state,$stateParams,$rootScope){var $lastViewScope=$rootScope;registerListenerOnce("$Breadcrumb.$viewContentLoaded",$rootScope,"$viewContentLoaded",function(event){!event.targetScope.ncyBreadcrumbIgnore&&isAOlderThanB(event.targetScope.$id,$lastViewScope.$id)&&($lastViewScope=event.targetScope)});var $$parentState=function(state){var parent=state.parent||(/^(.+)\.[^.]+$/.exec(state.name)||[])[1],isObjectParent="object"==typeof parent;return isObjectParent?parent.name:parent},$$addStateInChain=function(chain,stateRef){for(var conf,parentParams,ref=parseStateRef(stateRef),force=!1,skip=!1,i=0,l=chain.length;i<l;i+=1)if(chain[i].name===ref.state)return;conf=$state.get(ref.state),conf.ncyBreadcrumb&&(conf.ncyBreadcrumb.force&&(force=!0),conf.ncyBreadcrumb.skip&&(skip=!0)),conf.abstract&&!$$options.includeAbstract&&!force||skip||(ref.paramExpr&&(parentParams=$lastViewScope.$eval(ref.paramExpr)),conf.ncyBreadcrumbLink=$state.href(ref.state,parentParams||$stateParams||{}),conf.ncyBreadcrumbStateRef=stateRef,chain.unshift(conf))},$$breadcrumbParentState=function(stateRef){var ref=parseStateRef(stateRef),conf=$state.get(ref.state);if(conf.ncyBreadcrumb&&conf.ncyBreadcrumb.parent){var isFunction="function"==typeof conf.ncyBreadcrumb.parent,parentStateRef=isFunction?conf.ncyBreadcrumb.parent($lastViewScope):conf.ncyBreadcrumb.parent;if(parentStateRef)return parentStateRef}return $$parentState(conf)};return{getTemplate:function(templates){return $$options.templateUrl?null:templates[$$options.template]?templates[$$options.template]:$$options.template},getTemplateUrl:function(){return $$options.templateUrl},getTemplateLast:function(templates){return $$options.templateLastUrl?null:templates[$$options.templateLast]?templates[$$options.templateLast]:$$options.templateLast},getTemplateLastUrl:function(){return $$options.templateLastUrl},getStatesChain:function(exitOnFirst){for(var chain=[],stateRef=$state.$current.self.name;stateRef;stateRef=$$breadcrumbParentState(stateRef))if($$addStateInChain(chain,stateRef),exitOnFirst&&chain.length)return chain;return $$options.prefixStateName&&$$addStateInChain(chain,$$options.prefixStateName),chain},getLastStep:function(){var chain=this.getStatesChain(!0);return chain.length?chain[0]:undefined},$getLastViewScope:function(){return $lastViewScope}}}]}function BreadcrumbDirective($interpolate,$breadcrumb,$rootScope){var $$templates={bootstrap2:'<ul class="breadcrumb"><li ng-repeat="step in steps" ng-switch="$last || !!step.abstract" ng-class="{active: $last}"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a><span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span><span class="divider" ng-hide="$last">/</span></li></ul>',bootstrap3:'<ol class="breadcrumb"><li ng-repeat="step in steps" ng-class="{active: $last}" ng-switch="$last || !!step.abstract"><a ng-switch-when="false" href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a><span ng-switch-when="true">{{step.ncyBreadcrumbLabel}}</span></li></ol>'};return{restrict:"AE",replace:!0,scope:{},template:$breadcrumb.getTemplate($$templates),templateUrl:$breadcrumb.getTemplateUrl(),link:{post:function(scope){var labelWatchers=[],renderBreadcrumb=function(){deregisterWatchers(labelWatchers),labelWatchers=[];var viewScope=$breadcrumb.$getLastViewScope();scope.steps=$breadcrumb.getStatesChain(),angular.forEach(scope.steps,function(step){if(step.ncyBreadcrumb&&step.ncyBreadcrumb.label){var parseLabel=$interpolate(step.ncyBreadcrumb.label);step.ncyBreadcrumbLabel=parseLabel(viewScope),registerWatchers(labelWatchers,parseLabel,viewScope,step)}else step.ncyBreadcrumbLabel=step.name})};registerListenerOnce("BreadcrumbDirective.$viewContentLoaded",$rootScope,"$viewContentLoaded",function(event){event.targetScope.ncyBreadcrumbIgnore||renderBreadcrumb()}),renderBreadcrumb()}}}}function BreadcrumbLastDirective($interpolate,$breadcrumb,$rootScope){var $$templates={default:"{{ncyBreadcrumbLabel}}"};return{restrict:"A",scope:{},template:$breadcrumb.getTemplateLast($$templates),templateUrl:$breadcrumb.getTemplateLastUrl(),compile:function(cElement,cAttrs){var template=cElement.attr(cAttrs.$attr.ncyBreadcrumbLast);return template&&cElement.html(template),{post:function(scope){var labelWatchers=[],renderLabel=function(){deregisterWatchers(labelWatchers),labelWatchers=[];var viewScope=$breadcrumb.$getLastViewScope(),lastStep=$breadcrumb.getLastStep();if(lastStep)if(scope.ncyBreadcrumbLink=lastStep.ncyBreadcrumbLink,lastStep.ncyBreadcrumb&&lastStep.ncyBreadcrumb.label){var parseLabel=$interpolate(lastStep.ncyBreadcrumb.label);scope.ncyBreadcrumbLabel=parseLabel(viewScope),registerWatchers(labelWatchers,parseLabel,viewScope,scope)}else scope.ncyBreadcrumbLabel=lastStep.name};registerListenerOnce("BreadcrumbLastDirective.$viewContentLoaded",$rootScope,"$viewContentLoaded",function(event){event.targetScope.ncyBreadcrumbIgnore||renderLabel()}),renderLabel()}}}}}function BreadcrumbTextDirective($interpolate,$breadcrumb,$rootScope){return{restrict:"A",scope:{},template:"{{ncyBreadcrumbChain}}",compile:function(cElement,cAttrs){var template=cElement.attr(cAttrs.$attr.ncyBreadcrumbText);template&&cElement.html(template);var separator=cElement.attr(cAttrs.$attr.ncyBreadcrumbTextSeparator)||" / ";return{post:function(scope){var labelWatchers=[],registerWatchersText=function(labelWatcherArray,interpolationFunction,viewScope){angular.forEach(getExpression(interpolationFunction),function(expression){var watcher=viewScope.$watch(expression,function(newValue,oldValue){newValue!==oldValue&&renderLabel()});labelWatcherArray.push(watcher)})},renderLabel=function(){deregisterWatchers(labelWatchers),labelWatchers=[];var viewScope=$breadcrumb.$getLastViewScope(),steps=$breadcrumb.getStatesChain(),combinedLabels=[];angular.forEach(steps,function(step){if(step.ncyBreadcrumb&&step.ncyBreadcrumb.label){var parseLabel=$interpolate(step.ncyBreadcrumb.label);combinedLabels.push(parseLabel(viewScope)),registerWatchersText(labelWatchers,parseLabel,viewScope)}else combinedLabels.push(step.name)}),scope.ncyBreadcrumbChain=combinedLabels.join(separator)};registerListenerOnce("BreadcrumbTextDirective.$viewContentLoaded",$rootScope,"$viewContentLoaded",function(event){event.targetScope.ncyBreadcrumbIgnore||renderLabel()}),renderLabel()}}}}}var $registeredListeners={},getExpression=function(interpolationFunction){if(interpolationFunction.expressions)return interpolationFunction.expressions;var expressions=[];return angular.forEach(interpolationFunction.parts,function(part){angular.isFunction(part)&&expressions.push(part.exp)}),expressions},registerWatchers=function(labelWatcherArray,interpolationFunction,viewScope,step){angular.forEach(getExpression(interpolationFunction),function(expression){var watcher=viewScope.$watch(expression,function(){step.ncyBreadcrumbLabel=interpolationFunction(viewScope)});labelWatcherArray.push(watcher)})},deregisterWatchers=function(labelWatcherArray){angular.forEach(labelWatcherArray,function(deregisterWatch){deregisterWatch()})};BreadcrumbDirective.$inject=["$interpolate","$breadcrumb","$rootScope"],BreadcrumbLastDirective.$inject=["$interpolate","$breadcrumb","$rootScope"],BreadcrumbTextDirective.$inject=["$interpolate","$breadcrumb","$rootScope"],angular.module("ncy-angular-breadcrumb",["ui.router.state"]).provider("$breadcrumb",$Breadcrumb).directive("ncyBreadcrumb",BreadcrumbDirective).directive("ncyBreadcrumbLast",BreadcrumbLastDirective).directive("ncyBreadcrumbText",BreadcrumbTextDirective)}(window,window.angular)},function(module,exports,__webpack_require__){(function($){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular);exports.default=_angular2.default.module("CmdbControllerModule",[]).controller("HomeController",["$scope","$window","$rootScope","$location","$state","UtilService","MenuService","AssetsService","AuthenticationService",function($scope,$window,$rootScope,$location,$state,utilService,menuService,assetsService,authenticationService){App.init(),$scope.menus=menuService.list(),$scope.searchItem=!1,$scope.showSearch=function(){$("#show_search").modal("show")}}]).controller("LoginController",["$scope","$cookies","$rootScope","$location","UtilService","AuthenticationService","$state","$window",function($scope,$cookies,$rootScope,$location,utilService,authenticationService,$state,$window){$(function(){$("#username").bind("change",function(){var username=$("#username").val();""==username?($(".error").show(),$(".error").html("用户名不能为空"),$("#usernametpis").attr("class","user-error"),$("#usernametpis").show()):username.length<3?($(".error").show(),$(".error").html("用户名不合法"),$("#usernametpis").attr("class","user-error"),$("#usernametpis").show()):($(".error").hide(),$("#usernametpis").attr("class","user-ok"),$("#usernametpis").show())}),$("#password").bind("change",function(){var password=$("#password").val();""==password?($(".error").show(),$(".error").html("密码不能为空"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):password.length<6?($(".error").show(),$(".error").html("密码不合法"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):($(".error").hide(),$("#passwordtpis").attr("class","user-ok"),$("#passwordtpis").show())}),$("#password").bind("input propertychange",function(){var password=$("#password").val();""==password?($(".error").show(),$(".error").html("密码不能为空"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):password.length<6?($(".error").show(),$(".error").html("密码不合法"),$("#passwordtpis").attr("class","user-error"),$("#passwordtpis").show()):($(".error").hide(),$("#passwordtpis").attr("class","user-ok"),$("#passwordtpis").show())})}),$scope.error=null,$scope.user={},authenticationService.ClearCredentials(),$scope.login=function(){$scope.loginForm.$valid&&authenticationService.Login($scope.user.username,$scope.user.password,function(response){_angular2.default.isObject(response)&&_angular2.default.isObject(response.data)&&response.data.success?(authenticationService.SetCredentials(response.data.token),$rootScope.loginUserName=$scope.user.username,$window.localStorage.setItem("username",$scope.user.username),$rootScope.$broadcast("authorized"),$state.go("root.dashboard")):($state.go("login"),$(".error").show(),$(".error").html(response.data.message))})},_angular2.default.isString($cookies.get("password"))&&($scope.user.username=$cookies.get("username"),$scope.user.password=$cookies.get("password"),$scope.remember=!0),$scope.rememberMe=function(){$scope.remember?($cookies.put("username",$scope.user.username),$cookies.put("password",$scope.user.password)):($cookies.remove("username"),$cookies.remove("password"))}}]).controller("LogoutController",["$scope","$window","$rootScope","$location","UtilService","AuthenticationService","$state",function($scope,$window,$rootScope,$location,utilService,authenticationService,$state){$scope.logout=function(){authenticationService.logout(function(response){response.data.success?($window.location.href="/login",authenticationService.ClearCredentials()):utilService.alert(response.message)})}}]).name}).call(exports,__webpack_require__(14))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _angular=__webpack_require__(1),_angular2=_interopRequireDefault(_angular),_angularResource=__webpack_require__(2),_angularResource2=_interopRequireDefault(_angularResource),_api_config=__webpack_require__(15),md5=__webpack_require__(97);exports.default=_angular2.default.module("CmdbServiceModule",[_angularResource2.default]).factory("AppHttpInterceptor",["$q","$rootScope",function($q,$rootScope){return{request:function(config){return config},requestError:function(rejection){return $q.reject(rejection)},response:function(_response){return _response},responseError:function(rejection){return 419==rejection.status?$rootScope.$broadcast("unauthorized"):401===rejection.status?$rootScope.$broadcast("unauthorized"):500==rejection.status&&$rootScope.$broadcast("unauthorized"),$q.reject(rejection)}}}]).factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","UtilService","$window",function(Base64,$http,$cookieStore,$rootScope,utilService,$window){var service={};return service.Login=function(username,password,callback){$http({method:"POST",url:_api_config.cmdb.uri.login,params:{user:Base64.encode(username),pass:md5(password),timestamp:utilService.getTimestamp()},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(response){callback(response)})},service.logout=function(callback){$http({method:"GET",url:_api_config.cmdb.uri.logout,params:{exit:"true"}}).then(function(response){callback(response)})},service.SetCredentials=function(token){$rootScope.authorization={Authorization:"BEARER "+token},$rootScope.token=token,$window.localStorage.setItem("Authorization",$rootScope.authorization),$window.localStorage.setItem("token",$rootScope.token)},service.ClearCredentials=function(){$rootScope.token=void 0,$http.defaults.headers.common.Authorization="BEARER ",$window.localStorage.clear()},service.IsAuthenticated=function(){return null!=$rootScope.token&&void 0!=$rootScope.token&&""!=$rootScope.token},service}]).factory("Base64",function(){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(input){var chr1,chr2,enc1,enc2,enc3,output="",chr3="",enc4="",i=0;do chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(i<input.length);return output},decode:function(input){var chr1,chr2,enc1,enc2,enc3,output="",chr3="",enc4="",i=0,base64test=/[^A-Za-z0-9\+\/\=]/g;base64test.exec(input)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do enc1=keyStr.indexOf(input.charAt(i++)),enc2=keyStr.indexOf(input.charAt(i++)),enc3=keyStr.indexOf(input.charAt(i++)),enc4=keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3)),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(i<input.length);return output}}}).name},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function($){"use strict";function safeAdd(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}function binlMD5(x,len){x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len;var i,olda,oldb,oldc,oldd,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=md5ff(a,b,c,d,x[i],7,-680876936),d=md5ff(d,a,b,c,x[i+1],12,-389564586),c=md5ff(c,d,a,b,x[i+2],17,606105819),b=md5ff(b,c,d,a,x[i+3],22,-1044525330),a=md5ff(a,b,c,d,x[i+4],7,-176418897),d=md5ff(d,a,b,c,x[i+5],12,1200080426),c=md5ff(c,d,a,b,x[i+6],17,-1473231341),b=md5ff(b,c,d,a,x[i+7],22,-45705983),a=md5ff(a,b,c,d,x[i+8],7,1770035416),d=md5ff(d,a,b,c,x[i+9],12,-1958414417),c=md5ff(c,d,a,b,x[i+10],17,-42063),b=md5ff(b,c,d,a,x[i+11],22,-1990404162),a=md5ff(a,b,c,d,x[i+12],7,1804603682),d=md5ff(d,a,b,c,x[i+13],12,-40341101),c=md5ff(c,d,a,b,x[i+14],17,-1502002290),b=md5ff(b,c,d,a,x[i+15],22,1236535329),a=md5gg(a,b,c,d,x[i+1],5,-165796510),d=md5gg(d,a,b,c,x[i+6],9,-1069501632),c=md5gg(c,d,a,b,x[i+11],14,643717713),b=md5gg(b,c,d,a,x[i],20,-373897302),a=md5gg(a,b,c,d,x[i+5],5,-701558691),d=md5gg(d,a,b,c,x[i+10],9,38016083),c=md5gg(c,d,a,b,x[i+15],14,-660478335),b=md5gg(b,c,d,a,x[i+4],20,-405537848),a=md5gg(a,b,c,d,x[i+9],5,568446438),d=md5gg(d,a,b,c,x[i+14],9,-1019803690),c=md5gg(c,d,a,b,x[i+3],14,-187363961),b=md5gg(b,c,d,a,x[i+8],20,1163531501),a=md5gg(a,b,c,d,x[i+13],5,-1444681467),d=md5gg(d,a,b,c,x[i+2],9,-51403784),c=md5gg(c,d,a,b,x[i+7],14,1735328473),b=md5gg(b,c,d,a,x[i+12],20,-1926607734),a=md5hh(a,b,c,d,x[i+5],4,-378558),d=md5hh(d,a,b,c,x[i+8],11,-2022574463),c=md5hh(c,d,a,b,x[i+11],16,1839030562),b=md5hh(b,c,d,a,x[i+14],23,-35309556),a=md5hh(a,b,c,d,x[i+1],4,-1530992060),d=md5hh(d,a,b,c,x[i+4],11,1272893353),c=md5hh(c,d,a,b,x[i+7],16,-155497632),b=md5hh(b,c,d,a,x[i+10],23,-1094730640),a=md5hh(a,b,c,d,x[i+13],4,681279174),d=md5hh(d,a,b,c,x[i],11,-358537222),c=md5hh(c,d,a,b,x[i+3],16,-722521979),b=md5hh(b,c,d,a,x[i+6],23,76029189),a=md5hh(a,b,c,d,x[i+9],4,-640364487),d=md5hh(d,a,b,c,x[i+12],11,-421815835),c=md5hh(c,d,a,b,x[i+15],16,530742520),b=md5hh(b,c,d,a,x[i+2],23,-995338651),a=md5ii(a,b,c,d,x[i],6,-198630844),d=md5ii(d,a,b,c,x[i+7],10,1126891415),c=md5ii(c,d,a,b,x[i+14],15,-1416354905),b=md5ii(b,c,d,a,x[i+5],21,-57434055),a=md5ii(a,b,c,d,x[i+12],6,1700485571),d=md5ii(d,a,b,c,x[i+3],10,-1894986606),c=md5ii(c,d,a,b,x[i+10],15,-1051523),b=md5ii(b,c,d,a,x[i+1],21,-2054922799),a=md5ii(a,b,c,d,x[i+8],6,1873313359),d=md5ii(d,a,b,c,x[i+15],10,-30611744),c=md5ii(c,d,a,b,x[i+6],15,-1560198380),b=md5ii(b,c,d,a,x[i+13],21,1309151649),a=md5ii(a,b,c,d,x[i+4],6,-145523070),d=md5ii(d,a,b,c,x[i+11],10,-1120210379),c=md5ii(c,d,a,b,x[i+2],15,718787259),b=md5ii(b,c,d,a,x[i+9],21,-343485551),a=safeAdd(a,olda),b=safeAdd(b,oldb),c=safeAdd(c,oldc),d=safeAdd(d,oldd);return[a,b,c,d]}function binl2rstr(input){var i,output="",length32=32*input.length;for(i=0;i<length32;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function rstr2binl(input){var i,output=[];for(output[(input.length>>2)-1]=void 0,i=0;i<output.length;i+=1)output[i]=0;var length8=8*input.length;for(i=0;i<length8;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function rstrMD5(s){return binl2rstr(binlMD5(rstr2binl(s),8*s.length))}function rstrHMACMD5(key,data){var i,hash,bkey=rstr2binl(key),ipad=[],opad=[];for(ipad[15]=opad[15]=void 0,bkey.length>16&&(bkey=binlMD5(bkey,8*key.length)),i=0;i<16;i+=1)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];return hash=binlMD5(ipad.concat(rstr2binl(data)),512+8*data.length),binl2rstr(binlMD5(opad.concat(hash),640))}function rstr2hex(input){var x,i,hexTab="0123456789abcdef",output="";for(i=0;i<input.length;i+=1)x=input.charCodeAt(i),output+=hexTab.charAt(x>>>4&15)+hexTab.charAt(15&x);return output}function str2rstrUTF8(input){return unescape(encodeURIComponent(input))}function rawMD5(s){return rstrMD5(str2rstrUTF8(s))}function hexMD5(s){return rstr2hex(rawMD5(s))}function rawHMACMD5(k,d){return rstrHMACMD5(str2rstrUTF8(k),str2rstrUTF8(d))}function hexHMACMD5(k,d){return rstr2hex(rawHMACMD5(k,d))}function md5(string,key,raw){return key?raw?rawHMACMD5(key,string):hexHMACMD5(key,string):raw?rawMD5(string):hexMD5(string)}__WEBPACK_AMD_DEFINE_RESULT__=function(){return md5}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this)},function(module,exports,__webpack_require__){(function(angular){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _reportController=__webpack_require__(99),_reportController2=_interopRequireDefault(_reportController),_reportService=__webpack_require__(100),_reportService2=_interopRequireDefault(_reportService);exports.default=angular.module("ReportModule",[_reportController2.default,_reportService2.default]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(angular,$){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});__webpack_require__(15);exports.default=angular.module("ReportControllerModule",[]).controller("ReportFinanceController",["$scope","ResourceReportService","FinancialCostDetailService","FinancialCostTrendService","FinancialBCostComparedService","FinancialRCostComparedService",function($scope,ResourceReportService,FinancialCostDetailService,FinancialCostTrendService,FinancialBCostComparedService,FinancialRCostComparedService){$scope.tableReport={};var costTrend=[],pieData=[],lineOptions={series:{splines:{show:!0,tension:.4,lineWidth:2,fill:.4},points:{radius:4,show:!0},shadowSize:2},grid:{hoverable:!0,tickColor:"#d9dee9",borderWidth:2,color:"#d9dee9"},colors:["#20A0FF","#eaf7ff"],xaxis:{ticks:12,tickOptions:{angle:-30},tickDecimals:0},yaxis:{ticks:7},tooltip:!0,tooltipOpts:{content:"%y",defaultTheme:!0,shifts:{x:30,y:20}}},pieOptions={series:{pie:{radius:.5,innerRadius:.4,show:!0,label:{show:!1,threshold:.1},align:"right"}},legend:{show:!0,container:$("#app_pie"),position:"se",labelBoxBorderColor:"#fff"}};$scope.tableReport={title:{category:"类别",data:"数据",quantity:"费用(单位：万元）"},datacenter:{name:"数据中心",bandwidth:{name:"宽带",quantity:""},rack:{name:"机柜",quantity:""}},device:{name:"设备",server:{name:"服务器",quantity:""},network:{name:"网络设备",quantity:""},storage:{name:"存储设备",quantity:""}},soft:{name:"软件",virtualization:{name:"虚拟化",quantity:""},common:{name:"常用软件",quantity:""}},cloud:{name:"云资源",aliyun:{name:"阿里云",quantity:""},aws:{name:"AWS",quantity:""}}},ResourceReportService.queryStatistics({category:"datacenter"}).$promise.then(function(response){$scope.tableReport.datacenter.bandwidth.quantity=response.bandwidth,$scope.tableReport.datacenter.rack.quantity=response.rack},function(error){console.log(error)}),ResourceReportService.queryStatistics({category:"device"}).$promise.then(function(response){$scope.tableReport.device.server.quantity=response.server,$scope.tableReport.device.network.quantity=response.network,$scope.tableReport.device.storage.quantity=response.storage},function(error){console.log(error)}),ResourceReportService.queryStatistics({category:"soft"}).$promise.then(function(response){$scope.tableReport.soft.virtualization.quantity=response.virtualization,$scope.tableReport.soft.common.quantity=response.common},function(error){console.log(error)}),ResourceReportService.queryStatistics({category:"cloud"}).$promise.then(function(response){$scope.tableReport.cloud.aliyun.quantity=response.aliyun,$scope.tableReport.cloud.aws.quantity=response.aws},function(error){console.log(error)}),FinancialCostDetailService.queryCostDetail().$promise.then(function(response){},function(error){console.log(error)}),FinancialCostTrendService.queryCostTrends().$promise.then(function(response){costTrend=[[1,100],[2,200],[3,500],[4,400],[5,600],[6,550],[7,120],[8,250],[9,400],[10,300],[11,700],[12,300]],$.plot("#cost_trend",[costTrend],lineOptions)},function(error){console.log(error)}),FinancialBCostComparedService.queryBCostCompared().$promise.then(function(response){for(var series=Math.floor(6*Math.random())+3,i=0;i<series;i++)pieData[i]={label:"业务"+(i+1),data:Math.floor(100*Math.random())+1};$.plot("#app_finance_rate",pieData,pieOptions)},function(error){console.log(error)}),FinancialRCostComparedService.queryRCostCompared().$promise.then(function(response){},function(error){console.log(error)});var data1=[["宽带",10],["机柜",8]],data2=[[],[],["服务器",4],["网络设备",13],["存储设备",17],[],[],[],[]],data3=[[],[],[],[],[],["虚拟化",7],["常用软件",11],[],[]],data4=[[],[],[],[],[],[],[],["阿里云",2],["AWS",15]];$.plot("#finance_compare",[{data:data1,label:"数据中心",bars:{show:!0,barWidth:.2,align:"left"},color:"#FF4948"},{data:data2,label:"设备",bars:{show:!0,barWidth:.2,align:"left",order:4},color:"#13CE67"},{data:data3,bars:{show:!0,barWidth:.2,align:"left"},label:"软件",color:"#F7BA2B"},{data:data4,bars:{show:!0,barWidth:.2,align:"left"},label:"云资源",color:"#20A1FF"}],{xaxis:{mode:"categories",tickLength:0},grid:{hoverable:!1,tickColor:"#d9dee9",borderWidth:0,color:"#d9dee9"},tooltip:!0,bars:{fill:1},legend:{show:!0,container:$("#app_straight"),labelBoxBorderColor:"#fff"}})}]).controller("ReportDeviceController",["$scope","DevicePerformanceReportService",function($scope,DevicePerformanceReportService){$scope.action={hardwareUsageFormatter:function(val,row,index){if(val)return val<=50?['<progress class="primary" value="'+val+'" max="100" min="0"></progress>'+val+"%"]:val>70?['<progress class="trouble" value="'+val+'" max="100" min="0"></progress>'+val+"%"]:['<progress class="warning" value="'+val+'" max="100" min="0"></progress>'+val+"%"]},networkUsageFormatter:function(val,row,index){if(val)return val<=50?['<progress class="primary" value="'+val+'" max="100" min="0"></progress>'+val+"%"]:val>70?['<progress class="trouble" value="'+val+'" max="100" min="0"></progress>'+val+"%"]:['<progress class="warning" value="'+val+'" max="100" min="0"></progress>'+val+"%"]}},$scope.DeviceReportTable={options:{idField:"id",data:[],striped:!0,pagination:!0,locale:"zh_CN",showTrash:!1,showSettings:!1,showRefresh:!1,showToggle:!1,showColumns:!1,searchOnEnterKey:!1,search:!0,searchDisplay:!0,toolbarAlign:"left",searchAlign:"left",buttonsAlign:"left",showFooter:!1,detailView:!1,showExport:!1,showPaginationSwitch:!1,pageList:[5,10,25,50,100,200],sidePagination:"client",minimumCountColumns:2,columns:[{field:"device",title:"设备",formatter:function(value,row,index){return value?value:""}},{field:"cpu",title:"CPU",formatter:function(value,row,index){return null!==value?value+"%":""}},{field:"memory",title:"内存",formatter:function(value,row,index){return null!==value?value+"%":""}},{field:"disk_usage",title:"硬盘使用率",formatter:$scope.action.hardwareUsageFormatter},{field:"nic_usage",title:"网卡使用率",formatter:$scope.action.networkUsageFormatter}]},state:{searchText:"",searchFilter:!0,refresh:function(){},query:function(){DevicePerformanceReportService.queryPerformance().$promise.then(function(response){$scope.DeviceReportTable.options.data=response},function(error){console.log(error)})}}}}]).controller("ResourceReportController",["$scope","ResourceReportService",function($scope,ResourceReportService){$scope.tableReport={},$scope.tableReport={title:{category:"类别",data:"数据",quantity:"数量（单位：台）"},datacenter:{name:"数据中心",bandwidth:{name:"宽带",quantity:""},rack:{name:"机柜",quantity:""}},device:{name:"设备",server:{name:"服务器",quantity:""},network:{name:"网络设备",quantity:""},storage:{name:"存储设备",quantity:""}},soft:{name:"软件",virtualization:{name:"虚拟化",quantity:""},common:{name:"常用软件",quantity:""}},cloud:{name:"云资源",aliyun:{name:"阿里云",quantity:""},aws:{name:"AWS",quantity:""}}},ResourceReportService.queryStatistics({category:"datacenter"}).$promise.then(function(response){$scope.tableReport.datacenter.bandwidth.quantity=response.bandwidth,$scope.tableReport.datacenter.rack.quantity=response.rack},function(error){console.log(error)}),ResourceReportService.queryStatistics({category:"device"}).$promise.then(function(response){$scope.tableReport.device.server.quantity=response.server,$scope.tableReport.device.network.quantity=response.network,$scope.tableReport.device.storage.quantity=response.storage},function(error){console.log(error)}),ResourceReportService.queryStatistics({category:"soft"}).$promise.then(function(response){$scope.tableReport.soft.virtualization.quantity=response.virtualization,$scope.tableReport.soft.common.quantity=response.common},function(error){console.log(error)}),ResourceReportService.queryStatistics({category:"cloud"}).$promise.then(function(response){$scope.tableReport.cloud.aliyun.quantity=response.aliyun,$scope.tableReport.cloud.aws.quantity=response.aws},function(error){console.log(error)})}]).name}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){(function(angular){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _api_config=__webpack_require__(15);exports.default=angular.module("ReportServiceModule",[]).factory("ResourceReportService",["$http","$resource","$q","$rootScope","UtilService",function($http,$resource,$q,$rootScope,utilService){return $resource(_api_config.cmdb.uri.report.resource.statistics,{timestamp:utilService.getTimestamp()},{queryStatistics:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("DevicePerformanceReportService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.report.device.performance,{timestamp:utilService.getTimestamp()},{queryPerformance:{method:"GET",isArray:!0,params:{},headers:$rootScope.authorization}})}]).factory("FinancialCostDetailService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.report.financial.costDetail,{timestamp:utilService.getTimestamp()},{queryCostDetail:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("FinancialCostTrendService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.report.financial.costTrend,{timestamp:utilService.getTimestamp()},{queryCostTrends:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("FinancialBCostComparedService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.report.financial.bCostCompared,{timestamp:utilService.getTimestamp()},{queryBCostCompared:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).factory("FinancialRCostComparedService",["$resource","$rootScope","UtilService",function($resource,$rootScope,utilService){return $resource(_api_config.cmdb.uri.report.financial.rCostCompared,{timestamp:utilService.getTimestamp()},{queryRCostCompared:{method:"GET",isArray:!1,params:{},headers:$rootScope.authorization}})}]).name}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";__webpack_require__(102),module.exports="bsTable"},function(module,exports,__webpack_require__){(function(angular,$){"use strict";!function(){"undefined"!=typeof angular&&angular.module("bsTable",[]).constant("uiBsTables",{bsTables:{}}).directive("bsTableControl",["uiBsTables",function(uiBsTables){function getBsTable(el){var result;return $.each(bsTables,function(id,bsTable){if(bsTable.$el.closest(CONTAINER_SELECTOR).has(el).length)return result=bsTable,!0}),result}function getBsTableByClass(className){return $(className)}function onScroll(){
var bsTable=this,state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.scroll=bsTable.$el.bootstrapTable("getScrollPosition")})}var CONTAINER_SELECTOR=".bootstrap-table",SCROLLABLE_SELECTOR=".fixed-table-body",SEARCH_SELECTOR=".search input",TRASH_SELECTOR='button[name="trash"]',FILTER_SELECTOR="#searchs",SETTINGS_SELECTOR='button[name="settings"]',bsTables=uiBsTables.bsTables;return $(window).resize(function(){$.each(bsTables,function(id,bsTable){bsTable.$el.bootstrapTable("resetView")})}),$(document).on("post-header.bs.table",CONTAINER_SELECTOR+" table",function(evt){var bsTable=getBsTable(evt.target);bsTable&&bsTable.$el.closest(CONTAINER_SELECTOR).find(SCROLLABLE_SELECTOR).on("scroll",onScroll.bind(bsTable))}).on("sort.bs.table",CONTAINER_SELECTOR+" table",function(evt,sortName,sortOrder){var bsTable=getBsTable(evt.target);if(bsTable){console.log();var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.sortName=sortName,state.sortOrder=sortOrder})}}).on("page-change.bs.table",CONTAINER_SELECTOR+" table",function(evt,pageNumber,pageSize){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.pageNumber=pageNumber,state.pageSize=pageSize})}}).on("search.bs.table",CONTAINER_SELECTOR+" table",function(evt,searchText){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.searchText=searchText,state.query(state.searchText)})}}).on("search.bs.table",FILTER_SELECTOR,function(evt,searchText){var bsTable=getBsTableByClass(CONTAINER_SELECTOR);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.searchText=searchText,state.queryLocal()})}}).on("click",TRASH_SELECTOR,function(evt){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.deleteAll()})}}).on("click",SETTINGS_SELECTOR,function(evt){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.settings()})}}).on("focus blur",CONTAINER_SELECTOR+" "+SEARCH_SELECTOR,function(evt){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.searchHasFocus=$(evt.target).is(":focus")})}}).on("refresh.bs.table",CONTAINER_SELECTOR+" table",function(evt){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$s.$applyAsync(function(){state.refresh()})}}).on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table",function(evt){var bsTable=getBsTable(evt.target);if(bsTable){var state=bsTable.$s.bsTableControl.state;bsTable.$el.bootstrapTable("getSelections").length>0?$(state.removeSelector).attr("disabled",!1):$(state.removeSelector).attr("disabled",!0),state.selections=$.map(bsTable.$el.bootstrapTable("getSelections"),function(row){return row})}}),{restrict:"EA",scope:{bsTableControl:"="},link:function($s,$el){bsTables[$s.$id]={$s:$s,$el:$el};$s.instantiated=!1,$s.$watch("bsTableControl.options",function(options){options||(options=$s.bsTableControl.options={});var state=$s.bsTableControl.state||{};$s.instantiated&&$el.bootstrapTable("destroy"),$el.bootstrapTable(angular.extend(angular.copy(options),state)),$s.instantiated=!0,"scroll"in state&&$el.bootstrapTable("scrollTo",state.scroll),"searchHasFocus"in state&&$el.closest(CONTAINER_SELECTOR).find(SEARCH_SELECTOR).focus()},!0),$s.$watch("bsTableControl.state",function(state){"searchFilter"in state&&$el.bootstrapTable("resetSearch",state.searchText),state||(state=$s.bsTableControl.state={}),$el.trigger("directive-updated.bs.table",[state])},!0),$s.$on("$destroy",function(){delete bsTables[$s.$id]})}}}])}(),module.exports=angular}).call(exports,__webpack_require__(1),__webpack_require__(14))},function(module,exports,__webpack_require__){__webpack_require__(104),module.exports="ngAria"},function(module,exports){/**
	 * @license AngularJS v1.5.10
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function $AriaProvider(){function watchExpr(attrName,ariaAttr,nodeBlackList,negate){return function(scope,elem,attr){var ariaCamelName=attr.$normalize(ariaAttr);!config[ariaCamelName]||isNodeOneOf(elem,nodeBlackList)||attr[ariaCamelName]||scope.$watch(attr[attrName],function(boolVal){boolVal=negate?!boolVal:!!boolVal,elem.attr(ariaAttr,boolVal)})}}var config={ariaHidden:!0,ariaChecked:!0,ariaReadonly:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0,bindRoleForClick:!0};this.config=function(newConfig){config=angular.extend(config,newConfig)},this.$get=function(){return{config:function(key){return config[key]},$$watchExpr:watchExpr}}}var ngAriaModule=angular.module("ngAria",["ng"]).provider("$aria",$AriaProvider),nodeBlackList=["BUTTON","A","INPUT","TEXTAREA","SELECT","DETAILS","SUMMARY"],isNodeOneOf=function(elem,nodeTypeArray){if(nodeTypeArray.indexOf(elem[0].nodeName)!==-1)return!0};ngAriaModule.directive("ngShow",["$aria",function($aria){return $aria.$$watchExpr("ngShow","aria-hidden",[],!0)}]).directive("ngHide",["$aria",function($aria){return $aria.$$watchExpr("ngHide","aria-hidden",[],!1)}]).directive("ngValue",["$aria",function($aria){return $aria.$$watchExpr("ngValue","aria-checked",nodeBlackList,!1)}]).directive("ngChecked",["$aria",function($aria){return $aria.$$watchExpr("ngChecked","aria-checked",nodeBlackList,!1)}]).directive("ngReadonly",["$aria",function($aria){return $aria.$$watchExpr("ngReadonly","aria-readonly",nodeBlackList,!1)}]).directive("ngRequired",["$aria",function($aria){return $aria.$$watchExpr("ngRequired","aria-required",nodeBlackList,!1)}]).directive("ngModel",["$aria",function($aria){function shouldAttachAttr(attr,normalizedAttr,elem,allowBlacklistEls){return $aria.config(normalizedAttr)&&!elem.attr(attr)&&(allowBlacklistEls||!isNodeOneOf(elem,nodeBlackList))}function shouldAttachRole(role,elem){return!elem.attr("role")&&elem.attr("type")===role&&"INPUT"!==elem[0].nodeName}function getShape(attr,elem){var type=attr.type,role=attr.role;return"checkbox"===(type||role)||"menuitemcheckbox"===role?"checkbox":"radio"===(type||role)||"menuitemradio"===role?"radio":"range"===type||"progressbar"===role||"slider"===role?"range":""}return{restrict:"A",require:"ngModel",priority:200,compile:function(elem,attr){var shape=getShape(attr,elem);return{pre:function(scope,elem,attr,ngModel){"checkbox"===shape&&(ngModel.$isEmpty=function(value){return value===!1})},post:function(scope,elem,attr,ngModel){function ngAriaWatchModelValue(){return ngModel.$modelValue}function getRadioReaction(newVal){var boolVal=attr.value==ngModel.$viewValue;elem.attr("aria-checked",boolVal)}function getCheckboxReaction(){elem.attr("aria-checked",!ngModel.$isEmpty(ngModel.$viewValue))}var needsTabIndex=shouldAttachAttr("tabindex","tabindex",elem,!1);switch(shape){case"radio":case"checkbox":shouldAttachRole(shape,elem)&&elem.attr("role",shape),shouldAttachAttr("aria-checked","ariaChecked",elem,!1)&&scope.$watch(ngAriaWatchModelValue,"radio"===shape?getRadioReaction:getCheckboxReaction),needsTabIndex&&elem.attr("tabindex",0);break;case"range":if(shouldAttachRole(shape,elem)&&elem.attr("role","slider"),$aria.config("ariaValue")){var needsAriaValuemin=!elem.attr("aria-valuemin")&&(attr.hasOwnProperty("min")||attr.hasOwnProperty("ngMin")),needsAriaValuemax=!elem.attr("aria-valuemax")&&(attr.hasOwnProperty("max")||attr.hasOwnProperty("ngMax")),needsAriaValuenow=!elem.attr("aria-valuenow");needsAriaValuemin&&attr.$observe("min",function(newVal){elem.attr("aria-valuemin",newVal)}),needsAriaValuemax&&attr.$observe("max",function(newVal){elem.attr("aria-valuemax",newVal)}),needsAriaValuenow&&scope.$watch(ngAriaWatchModelValue,function(newVal){elem.attr("aria-valuenow",newVal)})}needsTabIndex&&elem.attr("tabindex",0)}!attr.hasOwnProperty("ngRequired")&&ngModel.$validators.required&&shouldAttachAttr("aria-required","ariaRequired",elem,!1)&&attr.$observe("required",function(){elem.attr("aria-required",!!attr.required)}),shouldAttachAttr("aria-invalid","ariaInvalid",elem,!0)&&scope.$watch(function(){return ngModel.$invalid},function(newVal){elem.attr("aria-invalid",!!newVal)})}}}}}]).directive("ngDisabled",["$aria",function($aria){return $aria.$$watchExpr("ngDisabled","aria-disabled",nodeBlackList,!1)}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(scope,elem,attr,ngMessages){elem.attr("aria-live")||elem.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function($aria,$parse){return{restrict:"A",compile:function(elem,attr){var fn=$parse(attr.ngClick,null,!0);return function(scope,elem,attr){isNodeOneOf(elem,nodeBlackList)||($aria.config("bindRoleForClick")&&!elem.attr("role")&&elem.attr("role","button"),$aria.config("tabindex")&&!elem.attr("tabindex")&&elem.attr("tabindex",0),$aria.config("bindKeypress")&&!attr.ngKeypress&&elem.on("keypress",function(event){function callback(){fn(scope,{$event:event})}var keyCode=event.which||event.keyCode;32!==keyCode&&13!==keyCode||scope.$apply(callback)}))}}}}]).directive("ngDblclick",["$aria",function($aria){return function(scope,elem,attr){!$aria.config("tabindex")||elem.attr("tabindex")||isNodeOneOf(elem,nodeBlackList)||elem.attr("tabindex",0)}}])}(window,window.angular)},function(module,exports,__webpack_require__){__webpack_require__(106),module.exports="ngMessages"},function(module,exports){/**
	 * @license AngularJS v1.6.1
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(window,angular){"use strict";function ngMessageDirectiveFactory(){function contains(collection,key){if(collection)return isArray(collection)?collection.indexOf(key)>=0:collection.hasOwnProperty(key)}return["$animate",function($animate){return{restrict:"AE",transclude:"element",priority:1,terminal:!0,require:"^^ngMessages",link:function(scope,element,attrs,ngMessagesCtrl,$transclude){var records,commentNode=element[0],staticExp=attrs.ngMessage||attrs.when,dynamicExp=attrs.ngMessageExp||attrs.whenExp,assignRecords=function(items){records=items?isArray(items)?items:items.split(/[\s,]+/):null,ngMessagesCtrl.reRender()};dynamicExp?(assignRecords(scope.$eval(dynamicExp)),scope.$watchCollection(dynamicExp,assignRecords)):assignRecords(staticExp);var currentElement,messageCtrl;ngMessagesCtrl.register(commentNode,messageCtrl={test:function(name){return contains(records,name)},attach:function(){currentElement||$transclude(function(elm,newScope){$animate.enter(elm,null,element),currentElement=elm;var $$attachId=currentElement.$$attachId=ngMessagesCtrl.getAttachId();currentElement.on("$destroy",function(){currentElement&&currentElement.$$attachId===$$attachId&&(ngMessagesCtrl.deregister(commentNode),messageCtrl.detach()),newScope.$destroy()})})},detach:function(){if(currentElement){var elm=currentElement;currentElement=null,$animate.leave(elm)}}})}}}]}var forEach,isArray,isString,jqLite;angular.module("ngMessages",[],function(){forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,jqLite=angular.element}).directive("ngMessages",["$animate",function($animate){function isAttrTruthy(scope,attr){return isString(attr)&&0===attr.length||truthy(scope.$eval(attr))}function truthy(val){return isString(val)?val.length:!!val}var ACTIVE_CLASS="ng-active",INACTIVE_CLASS="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function($element,$scope,$attrs){function findPreviousMessage(parent,comment){for(var prevNode=comment,parentLookup=[];prevNode&&prevNode!==parent;){var prevKey=prevNode.$$ngMessageNode;if(prevKey&&prevKey.length)return messages[prevKey];prevNode.childNodes.length&&parentLookup.indexOf(prevNode)===-1?(parentLookup.push(prevNode),prevNode=prevNode.childNodes[prevNode.childNodes.length-1]):prevNode.previousSibling?prevNode=prevNode.previousSibling:(prevNode=prevNode.parentNode,parentLookup.push(prevNode))}}function insertMessageNode(parent,comment,key){var messageNode=messages[key];if(ctrl.head){var match=findPreviousMessage(parent,comment);match?(messageNode.next=match.next,match.next=messageNode):(messageNode.next=ctrl.head,ctrl.head=messageNode)}else ctrl.head=messageNode}function removeMessageNode(parent,comment,key){var messageNode=messages[key],match=findPreviousMessage(parent,comment);match?match.next=messageNode.next:ctrl.head=messageNode.next}var ctrl=this,latestKey=0,nextAttachId=0;this.getAttachId=function(){return nextAttachId++};var renderLater,cachedCollection,messages=this.messages={};this.render=function(collection){collection=collection||{},renderLater=!1,cachedCollection=collection;for(var multiple=isAttrTruthy($scope,$attrs.ngMessagesMultiple)||isAttrTruthy($scope,$attrs.multiple),unmatchedMessages=[],matchedKeys={},messageItem=ctrl.head,messageFound=!1,totalMessages=0;null!=messageItem;){totalMessages++;var messageCtrl=messageItem.message,messageUsed=!1;messageFound||forEach(collection,function(value,key){if(!messageUsed&&truthy(value)&&messageCtrl.test(key)){if(matchedKeys[key])return;matchedKeys[key]=!0,messageUsed=!0,messageCtrl.attach()}}),messageUsed?messageFound=!multiple:unmatchedMessages.push(messageCtrl),messageItem=messageItem.next}forEach(unmatchedMessages,function(messageCtrl){messageCtrl.detach()}),unmatchedMessages.length!==totalMessages?$animate.setClass($element,ACTIVE_CLASS,INACTIVE_CLASS):$animate.setClass($element,INACTIVE_CLASS,ACTIVE_CLASS)},$scope.$watchCollection($attrs.ngMessages||$attrs.for,ctrl.render),$element.on("$destroy",function(){forEach(messages,function(item){item.message.detach()})}),this.reRender=function(){renderLater||(renderLater=!0,$scope.$evalAsync(function(){renderLater&&cachedCollection&&ctrl.render(cachedCollection)}))},this.register=function(comment,messageCtrl){var nextKey=latestKey.toString();messages[nextKey]={message:messageCtrl},insertMessageNode($element[0],comment,nextKey),comment.$$ngMessageNode=nextKey,latestKey++,ctrl.reRender()},this.deregister=function(comment){var key=comment.$$ngMessageNode;delete comment.$$ngMessageNode,removeMessageNode($element[0],comment,key),delete messages[key],ctrl.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function($templateRequest,$document,$compile){function replaceElementWithMarker(element,src){var comment=$compile.$$createComment?$compile.$$createComment("ngMessagesInclude",src):$document[0].createComment(" ngMessagesInclude: "+src+" "),marker=jqLite(comment);element.after(marker),element.remove()}return{restrict:"AE",require:"^^ngMessages",link:function($scope,element,attrs){var src=attrs.ngMessagesInclude||attrs.src;$templateRequest(src).then(function(html){$scope.$$destroyed||(isString(html)&&!html.trim()?replaceElementWithMarker(element,src):$compile(html)($scope,function(contents){element.after(contents),replaceElementWithMarker(element,src)}))})}}}]).directive("ngMessage",ngMessageDirectiveFactory()).directive("ngMessageExp",ngMessageDirectiveFactory())}(window,window.angular)},function(module,exports,__webpack_require__){(function(angular){!function(root,factory){module.exports=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _config=__webpack_require__(1),_config2=_interopRequireDefault(_config),_options=__webpack_require__(2),_options2=_interopRequireDefault(_options),_FileUploader=__webpack_require__(3),_FileUploader2=_interopRequireDefault(_FileUploader),_FileLikeObject=__webpack_require__(4),_FileLikeObject2=_interopRequireDefault(_FileLikeObject),_FileItem=__webpack_require__(5),_FileItem2=_interopRequireDefault(_FileItem),_FileDirective=__webpack_require__(6),_FileDirective2=_interopRequireDefault(_FileDirective),_FileSelect=__webpack_require__(7),_FileSelect2=_interopRequireDefault(_FileSelect),_Pipeline=__webpack_require__(8),_Pipeline2=_interopRequireDefault(_Pipeline),_FileDrop=__webpack_require__(9),_FileDrop2=_interopRequireDefault(_FileDrop),_FileOver=__webpack_require__(10),_FileOver2=_interopRequireDefault(_FileOver),_FileSelect3=__webpack_require__(11),_FileSelect4=_interopRequireDefault(_FileSelect3),_FileDrop3=__webpack_require__(12),_FileDrop4=_interopRequireDefault(_FileDrop3),_FileOver3=__webpack_require__(13),_FileOver4=_interopRequireDefault(_FileOver3);angular.module(_config2.default.name,[]).value("fileUploaderOptions",_options2.default).factory("FileUploader",_FileUploader2.default).factory("FileLikeObject",_FileLikeObject2.default).factory("FileItem",_FileItem2.default).factory("FileDirective",_FileDirective2.default).factory("FileSelect",_FileSelect2.default).factory("FileDrop",_FileDrop2.default).factory("FileOver",_FileOver2.default).factory("Pipeline",_Pipeline2.default).directive("nvFileSelect",_FileSelect4.default).directive("nvFileDrop",_FileDrop4.default).directive("nvFileOver",_FileOver4.default).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver","Pipeline",function(FileUploader,FileLikeObject,FileItem,FileDirective,FileSelect,FileDrop,FileOver,Pipeline){FileUploader.FileLikeObject=FileLikeObject,FileUploader.FileItem=FileItem,FileUploader.FileDirective=FileDirective,FileUploader.FileSelect=FileSelect,FileUploader.FileDrop=FileDrop,FileUploader.FileOver=FileOver,FileUploader.Pipeline=Pipeline}])},function(module,exports){module.exports={name:"angularFileUpload"}},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1,disableMultipart:!1}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __identity(fileUploaderOptions,$rootScope,$http,$window,$timeout,FileLikeObject,FileItem,Pipeline){var File=$window.File,FormData=$window.FormData,FileUploader=function(){function FileUploader(options){_classCallCheck(this,FileUploader);var settings=copy(fileUploaderOptions);extend(this,settings,options,{isUploading:!1,_nextIndex:0,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return FileUploader.prototype.addToQueue=function(files,options,filters){var _this=this,incomingQueue=this.isArrayLikeObject(files)?Array.prototype.slice.call(files):[files],arrayOfFilters=this._getFilters(filters),count=this.queue.length,addedFileItems=[],next=function next(){var something=incomingQueue.shift();if(isUndefined(something))return done();var fileLikeObject=_this.isFile(something)?something:new FileLikeObject(something),pipes=_this._convertFiltersToPipes(arrayOfFilters),pipeline=new Pipeline(pipes),onThrown=function(err){var originalFilter=err.pipe.originalFilter,_err$args=_slicedToArray(err.args,2),fileLikeObject=_err$args[0],options=_err$args[1];_this._onWhenAddingFileFailed(fileLikeObject,originalFilter,options),next()},onSuccessful=function(fileLikeObject,options){var fileItem=new FileItem(_this,fileLikeObject,options);addedFileItems.push(fileItem),_this.queue.push(fileItem),_this._onAfterAddingFile(fileItem),next()};pipeline.onThrown=onThrown,pipeline.onSuccessful=onSuccessful,pipeline.exec(fileLikeObject,options)},done=function(){_this.queue.length!==count&&(_this._onAfterAddingAll(addedFileItems),_this.progress=_this._getTotalProgress()),_this._render(),_this.autoUpload&&_this.uploadAll()};next()},FileUploader.prototype.removeFromQueue=function(value){var index=this.getIndexOfItem(value),item=this.queue[index];item.isUploading&&item.cancel(),this.queue.splice(index,1),item._destroy(),this.progress=this._getTotalProgress()},FileUploader.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},FileUploader.prototype.uploadItem=function(value){var index=this.getIndexOfItem(value),item=this.queue[index],transport=this.isHTML5?"_xhrTransport":"_iframeTransport";item._prepareToUploading(),this.isUploading||(this._onBeforeUploadItem(item),item.isCancel||(item.isUploading=!0,this.isUploading=!0,this[transport](item),this._render()))},FileUploader.prototype.cancelItem=function(value){var _this2=this,index=this.getIndexOfItem(value),item=this.queue[index],prop=this.isHTML5?"_xhr":"_form";item&&(item.isCancel=!0,item.isUploading?item[prop].abort():!function(){var dummy=[void 0,0,{}],onNextTick=function(){_this2._onCancelItem.apply(_this2,[item].concat(dummy)),_this2._onCompleteItem.apply(_this2,[item].concat(dummy))};$timeout(onNextTick)}())},FileUploader.prototype.uploadAll=function(){var items=this.getNotUploadedItems().filter(function(item){return!item.isUploading});items.length&&(forEach(items,function(item){return item._prepareToUploading()}),items[0].upload())},FileUploader.prototype.cancelAll=function(){var items=this.getNotUploadedItems();forEach(items,function(item){return item.cancel()})},FileUploader.prototype.isFile=function(value){return this.constructor.isFile(value)},FileUploader.prototype.isFileLikeObject=function(value){return this.constructor.isFileLikeObject(value)},FileUploader.prototype.isArrayLikeObject=function(value){return this.constructor.isArrayLikeObject(value)},FileUploader.prototype.getIndexOfItem=function(value){return isNumber(value)?value:this.queue.indexOf(value)},FileUploader.prototype.getNotUploadedItems=function(){return this.queue.filter(function(item){return!item.isUploaded})},FileUploader.prototype.getReadyItems=function(){return this.queue.filter(function(item){return item.isReady&&!item.isUploading}).sort(function(item1,item2){return item1.index-item2.index})},FileUploader.prototype.destroy=function(){var _this3=this;forEach(this._directives,function(key){forEach(_this3._directives[key],function(object){object.destroy()})})},FileUploader.prototype.onAfterAddingAll=function(fileItems){},FileUploader.prototype.onAfterAddingFile=function(fileItem){},FileUploader.prototype.onWhenAddingFileFailed=function(item,filter,options){},FileUploader.prototype.onBeforeUploadItem=function(fileItem){},FileUploader.prototype.onProgressItem=function(fileItem,progress){},FileUploader.prototype.onProgressAll=function(progress){},FileUploader.prototype.onSuccessItem=function(item,response,status,headers){},FileUploader.prototype.onErrorItem=function(item,response,status,headers){},FileUploader.prototype.onCancelItem=function(item,response,status,headers){},FileUploader.prototype.onCompleteItem=function(item,response,status,headers){},FileUploader.prototype.onCompleteAll=function(){},FileUploader.prototype._getTotalProgress=function(value){if(this.removeAfterUpload)return value||0;var notUploaded=this.getNotUploadedItems().length,uploaded=notUploaded?this.queue.length-notUploaded:this.queue.length,ratio=100/this.queue.length,current=(value||0)*ratio/100;return Math.round(uploaded*ratio+current)},FileUploader.prototype._getFilters=function(filters){if(!filters)return this.filters;if(isArray(filters))return filters;var names=filters.match(/[^\s,]+/g);return this.filters.filter(function(filter){return names.indexOf(filter.name)!==-1})},FileUploader.prototype._convertFiltersToPipes=function(filters){var _this4=this;return filters.map(function(filter){var fn=bind(_this4,filter.fn);return fn.isAsync=3===filter.fn.length,fn.originalFilter=filter,fn})},FileUploader.prototype._render=function(){$rootScope.$$phase||$rootScope.$apply()},FileUploader.prototype._folderFilter=function(item){return!(!item.size&&!item.type)},FileUploader.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},FileUploader.prototype._isSuccessCode=function(status){return status>=200&&status<300||304===status},FileUploader.prototype._transformResponse=function(response,headers){var headersGetter=this._headersGetter(headers);return forEach($http.defaults.transformResponse,function(transformFn){response=transformFn(response,headersGetter)}),response},FileUploader.prototype._parseHeaders=function(headers){var key,val,i,parsed={};return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=line.slice(0,i).trim().toLowerCase(),val=line.slice(i+1).trim(),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed},FileUploader.prototype._headersGetter=function(parsedHeaders){return function(name){return name?parsedHeaders[name.toLowerCase()]||null:parsedHeaders}},FileUploader.prototype._xhrTransport=function(item){var sendable,_this5=this,xhr=item._xhr=new XMLHttpRequest;if(item.disableMultipart?sendable=item._file:(sendable=new FormData,forEach(item.formData,function(obj){forEach(obj,function(value,key){sendable.append(key,value)})}),sendable.append(item.alias,item._file,item.file.name)),"number"!=typeof item._file.size)throw new TypeError("The file specified is no longer valid");xhr.upload.onprogress=function(event){var progress=Math.round(event.lengthComputable?100*event.loaded/event.total:0);_this5._onProgressItem(item,progress)},xhr.onload=function(){var headers=_this5._parseHeaders(xhr.getAllResponseHeaders()),response=_this5._transformResponse(xhr.response,headers),gist=_this5._isSuccessCode(xhr.status)?"Success":"Error",method="_on"+gist+"Item";_this5[method](item,response,xhr.status,headers),_this5._onCompleteItem(item,response,xhr.status,headers)},xhr.onerror=function(){var headers=_this5._parseHeaders(xhr.getAllResponseHeaders()),response=_this5._transformResponse(xhr.response,headers);_this5._onErrorItem(item,response,xhr.status,headers),_this5._onCompleteItem(item,response,xhr.status,headers)},xhr.onabort=function(){var headers=_this5._parseHeaders(xhr.getAllResponseHeaders()),response=_this5._transformResponse(xhr.response,headers);_this5._onCancelItem(item,response,xhr.status,headers),_this5._onCompleteItem(item,response,xhr.status,headers)},xhr.open(item.method,item.url,!0),xhr.withCredentials=item.withCredentials,forEach(item.headers,function(value,name){xhr.setRequestHeader(name,value)}),xhr.send(sendable)},FileUploader.prototype._iframeTransport=function(item){var _this6=this,form=element('<form style="display: none;" />'),iframe=element('<iframe name="iframeTransport'+Date.now()+'">'),input=item._input;item._form&&item._form.replaceWith(input),item._form=form,input.prop("name",item.alias),forEach(item.formData,function(obj){forEach(obj,function(value,key){var element_=element('<input type="hidden" name="'+key+'" />');element_.val(value),form.append(element_)})}),form.prop({action:item.url,method:"POST",target:iframe.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),iframe.bind("load",function(){var html="",status=200;try{html=iframe[0].contentDocument.body.innerHTML}catch(e){status=500}var xhr={response:html,status:status,dummy:!0},headers={},response=_this6._transformResponse(xhr.response,headers);_this6._onSuccessItem(item,response,xhr.status,headers),_this6._onCompleteItem(item,response,xhr.status,headers)}),form.abort=function(){var response,xhr={status:0,dummy:!0},headers={};iframe.unbind("load").prop("src","javascript:false;"),form.replaceWith(input),_this6._onCancelItem(item,response,xhr.status,headers),_this6._onCompleteItem(item,response,xhr.status,headers)},input.after(form),form.append(input).append(iframe),form[0].submit()},FileUploader.prototype._onWhenAddingFileFailed=function(item,filter,options){this.onWhenAddingFileFailed(item,filter,options)},FileUploader.prototype._onAfterAddingFile=function(item){this.onAfterAddingFile(item)},FileUploader.prototype._onAfterAddingAll=function(items){this.onAfterAddingAll(items)},FileUploader.prototype._onBeforeUploadItem=function(item){item._onBeforeUpload(),this.onBeforeUploadItem(item)},FileUploader.prototype._onProgressItem=function(item,progress){var total=this._getTotalProgress(progress);this.progress=total,item._onProgress(progress),this.onProgressItem(item,progress),this.onProgressAll(total),this._render()},FileUploader.prototype._onSuccessItem=function(item,response,status,headers){item._onSuccess(response,status,headers),this.onSuccessItem(item,response,status,headers)},FileUploader.prototype._onErrorItem=function(item,response,status,headers){item._onError(response,status,headers),this.onErrorItem(item,response,status,headers)},FileUploader.prototype._onCancelItem=function(item,response,status,headers){item._onCancel(response,status,headers),this.onCancelItem(item,response,status,headers)},FileUploader.prototype._onCompleteItem=function(item,response,status,headers){item._onComplete(response,status,headers),this.onCompleteItem(item,response,status,headers);var nextItem=this.getReadyItems()[0];return this.isUploading=!1,isDefined(nextItem)?void nextItem.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},FileUploader.isFile=function(value){return File&&value instanceof File},FileUploader.isFileLikeObject=function(value){return value instanceof FileLikeObject},FileUploader.isArrayLikeObject=function(value){return isObject(value)&&"length"in value},FileUploader.inherit=function(target,source){target.prototype=Object.create(source.prototype),target.prototype.constructor=target,target.super_=source},FileUploader}();return FileUploader.prototype.isHTML5=!(!File||!FormData),FileUploader.isHTML5=FileUploader.prototype.isHTML5,FileUploader}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),bind=_angular.bind,copy=_angular.copy,extend=_angular.extend,forEach=_angular.forEach,isObject=_angular.isObject,isNumber=_angular.isNumber,isDefined=_angular.isDefined,isArray=_angular.isArray,isUndefined=_angular.isUndefined,element=_angular.element;__identity.$inject=["fileUploaderOptions","$rootScope","$http","$window","$timeout","FileLikeObject","FileItem","Pipeline"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __identity(){return function(){function FileLikeObject(fileOrInput){_classCallCheck(this,FileLikeObject);var isInput=isElement(fileOrInput),fakePathOrObject=isInput?fileOrInput.value:fileOrInput,postfix=isString(fakePathOrObject)?"FakePath":"Object",method="_createFrom"+postfix;this[method](fakePathOrObject)}return FileLikeObject.prototype._createFromFakePath=function(path){this.lastModifiedDate=null,this.size=null,this.type="like/"+path.slice(path.lastIndexOf(".")+1).toLowerCase(),this.name=path.slice(path.lastIndexOf("/")+path.lastIndexOf("\\")+2)},FileLikeObject.prototype._createFromObject=function(object){this.lastModifiedDate=copy(object.lastModifiedDate),this.size=object.size,this.type=object.type,this.name=object.name},FileLikeObject}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),copy=_angular.copy,isElement=_angular.isElement,isString=_angular.isString},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __identity($compile,FileLikeObject){return function(){function FileItem(uploader,some,options){_classCallCheck(this,FileItem);var isInput=isElement(some),input=isInput?element(some):null,file=isInput?null:some;extend(this,{url:uploader.url,alias:uploader.alias,headers:copy(uploader.headers),formData:copy(uploader.formData),removeAfterUpload:uploader.removeAfterUpload,withCredentials:uploader.withCredentials,disableMultipart:uploader.disableMultipart,method:uploader.method},options,{uploader:uploader,file:new FileLikeObject(some),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:file,_input:input}),input&&this._replaceNode(input)}return FileItem.prototype.upload=function(){try{this.uploader.uploadItem(this)}catch(e){var message=e.name+":"+e.message;this.uploader._onCompleteItem(this,message,e.code,[]),this.uploader._onErrorItem(this,message,e.code,[])}},FileItem.prototype.cancel=function(){this.uploader.cancelItem(this)},FileItem.prototype.remove=function(){this.uploader.removeFromQueue(this)},FileItem.prototype.onBeforeUpload=function(){},FileItem.prototype.onProgress=function(progress){},FileItem.prototype.onSuccess=function(response,status,headers){},FileItem.prototype.onError=function(response,status,headers){},FileItem.prototype.onCancel=function(response,status,headers){},FileItem.prototype.onComplete=function(response,status,headers){},FileItem.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},FileItem.prototype._onProgress=function(progress){this.progress=progress,this.onProgress(progress)},FileItem.prototype._onSuccess=function(response,status,headers){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(response,status,headers)},FileItem.prototype._onError=function(response,status,headers){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(response,status,headers)},FileItem.prototype._onCancel=function(response,status,headers){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(response,status,headers)},FileItem.prototype._onComplete=function(response,status,headers){this.onComplete(response,status,headers),this.removeAfterUpload&&this.remove()},FileItem.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},FileItem.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},FileItem.prototype._replaceNode=function(input){var clone=$compile(input.clone())(input.scope());clone.prop("value",null),input.css("display","none"),input.after(clone)},FileItem}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),copy=_angular.copy,extend=_angular.extend,element=_angular.element,isElement=_angular.isElement;__identity.$inject=["$compile","FileLikeObject"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __identity(){var FileDirective=function(){function FileDirective(options){_classCallCheck(this,FileDirective),extend(this,options),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return FileDirective.prototype.bind=function(){for(var key in this.events){var prop=this.events[key];this.element.bind(key,this[prop])}},FileDirective.prototype.unbind=function(){for(var key in this.events)this.element.unbind(key,this.events[key])},FileDirective.prototype.destroy=function(){var index=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(index,1),this.unbind()},FileDirective.prototype._saveLinks=function(){for(var key in this.events){var prop=this.events[key];this[prop]=this[prop].bind(this)}},FileDirective}();return FileDirective.prototype.events={},FileDirective}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),extend=_angular.extend},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function __identity($compile,FileDirective){return function(_FileDirective){function FileSelect(options){_classCallCheck(this,FileSelect);var extendedOptions=extend(options,{events:{$destroy:"destroy",change:"onChange"},prop:"select"}),_this=_possibleConstructorReturn(this,_FileDirective.call(this,extendedOptions));return _this.uploader.isHTML5||_this.element.removeAttr("multiple"),_this.element.prop("value",null),_this}return _inherits(FileSelect,_FileDirective),FileSelect.prototype.getOptions=function(){},FileSelect.prototype.getFilters=function(){},FileSelect.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},FileSelect.prototype.onChange=function(){var files=this.uploader.isHTML5?this.element[0].files:this.element[0],options=this.getOptions(),filters=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(files,options,filters),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith($compile(this.element.clone())(this.scope)))},FileSelect}(FileDirective)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),extend=_angular.extend;__identity.$inject=["$compile","FileDirective"]},function(module,exports){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __identity($q){return function(){function Pipeline(){var pipes=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];_classCallCheck(this,Pipeline),this.pipes=pipes}return Pipeline.prototype.next=function(args){var pipe=this.pipes.shift();if(isUndefined(pipe))return void this.onSuccessful.apply(this,_toConsumableArray(args));var err=new Error("The filter has not passed");if(err.pipe=pipe,err.args=args,pipe.isAsync){var deferred=$q.defer(),onFulfilled=bind(this,this.next,args),onRejected=bind(this,this.onThrown,err);deferred.promise.then(onFulfilled,onRejected),pipe.apply(void 0,_toConsumableArray(args).concat([deferred]))}else{var isDone=Boolean(pipe.apply(void 0,_toConsumableArray(args)));isDone?this.next(args):this.onThrown(err)}},Pipeline.prototype.exec=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.next(args)},Pipeline.prototype.onThrown=function(err){},Pipeline.prototype.onSuccessful=function(){},Pipeline}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _angular=angular,bind=_angular.bind,isUndefined=_angular.isUndefined;__identity.$inject=["$q"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function __identity(FileDirective){return function(_FileDirective){function FileDrop(options){_classCallCheck(this,FileDrop);var extendedOptions=extend(options,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});return _possibleConstructorReturn(this,_FileDirective.call(this,extendedOptions))}return _inherits(FileDrop,_FileDirective),FileDrop.prototype.getOptions=function(){},FileDrop.prototype.getFilters=function(){},FileDrop.prototype.onDrop=function(event){var transfer=this._getTransfer(event);if(transfer){var options=this.getOptions(),filters=this.getFilters();this._preventAndStop(event),forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(transfer.files,options,filters)}},FileDrop.prototype.onDragOver=function(event){var transfer=this._getTransfer(event);this._haveFiles(transfer.types)&&(transfer.dropEffect="copy",this._preventAndStop(event),forEach(this.uploader._directives.over,this._addOverClass,this))},FileDrop.prototype.onDragLeave=function(event){event.currentTarget!==this.element[0]&&(this._preventAndStop(event),forEach(this.uploader._directives.over,this._removeOverClass,this))},FileDrop.prototype._getTransfer=function(event){return event.dataTransfer?event.dataTransfer:event.originalEvent.dataTransfer},FileDrop.prototype._preventAndStop=function(event){event.preventDefault(),event.stopPropagation()},FileDrop.prototype._haveFiles=function(types){return!!types&&(types.indexOf?types.indexOf("Files")!==-1:!!types.contains&&types.contains("Files"))},FileDrop.prototype._addOverClass=function(item){item.addOverClass()},FileDrop.prototype._removeOverClass=function(item){item.removeOverClass()},FileDrop}(FileDirective)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),extend=_angular.extend,forEach=_angular.forEach;__identity.$inject=["FileDirective"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function __identity(FileDirective){return function(_FileDirective){function FileOver(options){_classCallCheck(this,FileOver);var extendedOptions=extend(options,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});return _possibleConstructorReturn(this,_FileDirective.call(this,extendedOptions))}return _inherits(FileOver,_FileDirective),FileOver.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},FileOver.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},FileOver.prototype.getOverClass=function(){return this.overClass},FileOver}(FileDirective)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1),_angular=(_interopRequireDefault(_config),angular),extend=_angular.extend;__identity.$inject=["FileDirective"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function __identity($parse,FileUploader,FileSelect){return{link:function(scope,element,attributes){var uploader=scope.$eval(attributes.uploader);if(!(uploader instanceof FileUploader))throw new TypeError('"Uploader" must be an instance of FileUploader');var object=new FileSelect({uploader:uploader,element:element,scope:scope});object.getOptions=$parse(attributes.options).bind(object,scope),object.getFilters=function(){return attributes.filters}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1);_interopRequireDefault(_config);__identity.$inject=["$parse","FileUploader","FileSelect"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function __identity($parse,FileUploader,FileDrop){return{link:function(scope,element,attributes){var uploader=scope.$eval(attributes.uploader);if(!(uploader instanceof FileUploader))throw new TypeError('"Uploader" must be an instance of FileUploader');if(uploader.isHTML5){var object=new FileDrop({uploader:uploader,element:element});object.getOptions=$parse(attributes.options).bind(object,scope),object.getFilters=function(){return attributes.filters}}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1);_interopRequireDefault(_config);__identity.$inject=["$parse","FileUploader","FileDrop"]},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function __identity(FileUploader,FileOver){return{link:function(scope,element,attributes){var uploader=scope.$eval(attributes.uploader);if(!(uploader instanceof FileUploader))throw new TypeError('"Uploader" must be an instance of FileUploader');var object=new FileOver({uploader:uploader,element:element});object.getOverClass=function(){return attributes.overClass||object.overClass}}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=__identity;var _config=__webpack_require__(1);_interopRequireDefault(_config);__identity.$inject=["FileUploader","FileOver"]}])})}).call(exports,__webpack_require__(1))}])});
//# sourceMappingURL=cmdbapp.js.map